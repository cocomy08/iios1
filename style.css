@import url("https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;700&display=swap");

/* ============================================================ */
/* === Z-Index å±‚çº§è§„èŒƒ (Unified Z-Index System) ===           */
/* ============================================================ */
/* 
 * å±‚çº§åˆ†å±‚è®¾è®¡ï¼š
 * - Base (1-10): é¡µé¢å†…å…ƒç´ çš„åŸºç¡€å±‚çº§
 * - Screen (10-50): é¡µé¢çº§å±‚çº§ (.screen)
 * - Modal (100-500): å¼¹çª—/æ¨¡æ€æ¡†å±‚çº§
 * - Overlay (1000-5000): å…¨å±é®ç½©å±‚çº§
 * - System (9000-9999): ç³»ç»Ÿçº§å…ƒç´ ï¼ˆåŠ è½½é®ç½©ã€ç‚¹å‡»é˜²æŠ¤ç­‰ï¼‰
 */
:root {
  /* Base: é¡µé¢å†…å…ƒç´  */
  --z-base: 1;
  --z-base-elevated: 5;

  /* Screen: é¡µé¢å±‚çº§ */
  --z-screen: 10;
  --z-screen-active: 20;
  --z-screen-secondary: 30; /* äºŒçº§é¡µé¢ï¼ˆä»ä¸€çº§é¡µé¢æµ®å‡ºï¼‰ */
  --z-screen-tertiary: 40; /* ä¸‰çº§é¡µé¢ */

  /* Modal: å¼¹çª—å±‚çº§ */
  --z-modal-backdrop: 100;
  --z-modal: 150;
  --z-modal-nested: 200; /* åµŒå¥—å¼¹çª— */

  /* Overlay: å…¨å±é®ç½© */
  --z-overlay: 1000;
  --z-overlay-content: 1001;

  /* System: ç³»ç»Ÿçº§ï¼ˆæœ€é«˜ä¼˜å…ˆçº§ï¼‰ */
  --z-system-loader: 9000;
  --z-system-banner: 9500;
  --z-system-shield: 9999;
}

/* åœ¨ CSS å¼€å¤´éƒ¨åˆ†ï¼Œé€šé…ç¬¦é€‰æ‹©å™¨ä¸­æ·»åŠ  */
* {
  -webkit-tap-highlight-color: transparent;
  /* æ–°å¢ï¼šç¦æ­¢åŒå‡»ç¼©æ”¾æ‰‹åŠ¿ï¼Œæå‡ç‚¹å‡»å“åº”é€Ÿåº¦ */
  touch-action: manipulation;
}
* { backdrop-filter: none !important; -webkit-backdrop-filter: none !important; }
/* ğŸš€ æ€§èƒ½ä¼˜åŒ–ï¼šç¦ç”¨ will-change ä»¥å‡å°‘ GPU å±‚åˆ›å»º (2026-01-09) */
/* æ ¹æœ¬åŸå› ï¼šwill-change ä¼šå‘Šè¯‰æµè§ˆå™¨æå‰åˆ›å»º GPU å±‚ï¼Œ12000+ èŠ‚ç‚¹æ—¶å¯¼è‡´ Layerise å ç”¨ 52-58% æ—¶é—´ */
* { will-change: auto !important; }
/* === æ€§èƒ½ä¼˜åŒ–ï¼šç¡¬ä»¶åŠ é€Ÿå’Œç£¨ç ‚æ•ˆæœä¼˜åŒ– === */
/* 1. ä¸ºæ‰€æœ‰ modal-overlay æ·»åŠ ç¡¬ä»¶åŠ é€Ÿï¼Œé¿å…ç£¨ç ‚æ•ˆæœå»¶è¿Ÿ */
/* 1. ä¸ºæ‰€æœ‰ modal-overlay æ·»åŠ ç¡¬ä»¶åŠ é€Ÿ - ç§»é™¤è¿‡åº¦ä¼˜åŒ–ä»¥é˜²æ­¢ iOS å´©æºƒ */
/* (Empty rule removed) */

/* 2. é¢„æç¤ºæµè§ˆå™¨å³å°†å‘ç”Ÿçš„å˜åŒ–ï¼Œä¼˜åŒ–åŠ¨ç”»æ€§èƒ½ */
.modal-overlay {
  will-change: opacity;
}
.modal-content {
  will-change: transform, opacity;
}

* {
  /* ä½¿ç”¨ç³»ç»ŸåŸç”Ÿ UI å­—ä½“æ ˆ */
  /* Remove !important to allow user custom fonts to override */
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", 
               Roboto, "Helvetica Neue", Arial, "Noto Sans", "PingFang SC", 
               "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
}

/* ============================================================ */
/* === æ ¹å…ƒç´ (html)æ ·å¼ï¼šè§£å†³iOS PWAå®‰å…¨åŒºç™½å—é—®é¢˜ ===           */
/* ============================================================ */
/* 
 * å…³é”®å‘ç°ï¼šiOS PWAå®‰å…¨åŒºåŸŸçš„èƒŒæ™¯è‰²æ¥è‡ª html å…ƒç´ ï¼Œä¸æ˜¯ bodyï¼
 * å¿…é¡»è®© html å…ƒç´ å¡«æ»¡æ•´ä¸ªè§†å£å¹¶è®¾ç½®æ­£ç¡®çš„èƒŒæ™¯ã€‚
 */
html {
  height: 100%;
  min-height: 100vh;
  min-height: 100dvh;
  /* iOSä¸“ç”¨ï¼š-webkit-fill-available ä¼šå¡«æ»¡åŒ…æ‹¬å®‰å…¨åŒºåœ¨å†…çš„æ‰€æœ‰å¯ç”¨ç©ºé—´ */
  min-height: -webkit-fill-available;
  margin: 0;
  padding: 0;
  /* é»˜è®¤èƒŒæ™¯è‰²ï¼ˆä¼šè¢«JSåŠ¨æ€æ›´æ–°ä¸ºç”¨æˆ·å£çº¸ï¼‰ */
  background-color: #dfdfdf;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
}

/* iOS PWA æ¨¡å¼ä¸‹ï¼šhtmlèƒŒæ™¯é€æ˜ï¼Œè®©å£çº¸å±‚é€å‡ºï¼Œæˆ–è€…ç›´æ¥æ˜¾ç¤ºå£çº¸ */
html.is-ios-pwa-html {
  background-color: transparent;
}

/* === å…¨å±€æ»šåŠ¨æ¡éšè— (Appè´¨æ„Ÿ) === */
::-webkit-scrollbar {
  display: none; /* Chrome/Safari/Webkit */
}
* {
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* IE/Edge */
}

body {
  background-color: #dfdfdf; /* å®‰å“é»˜è®¤ç°è‰² */
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  min-height: 100vh;
  min-height: 100dvh;
  min-height: -webkit-fill-available; /* iOSä¸“ç”¨ */
  margin: 0;
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  
  /* === ä¿®å¤æ©¡çš®ç­‹æ•ˆåº” === */
  overscroll-behavior-y: none;
  /* ä»…åœ¨bodyå±‚é¢ç¦æ­¢ï¼Œå†…éƒ¨å®¹å™¨å¦‚æœéœ€è¦åˆ™è®¾ä¸º auto */
}

/* iOS PWA ä¸“ç”¨æ ·å¼ */
body.is-ios-pwa {
  background-color: transparent;
  overscroll-behavior-y: none; /* åŒé‡ä¿é™© */
  /* ç§»é™¤å¼ºåˆ¶é”å®šï¼Œæ¢å¤é»˜è®¤æ»šåŠ¨ä»¥ä¿®å¤ç•Œé¢é”™ä¹± */
}

/* ============================================================ */
/* === iOS PWA å®‰å…¨åŒºä¿®å¤ï¼šè´Ÿmarginæ–¹æ³• ===                      */
/* ============================================================ */

/* htmlå…ƒç´ å‘ä¸‹å»¶ä¼¸ï¼ˆé»˜è®¤å€¼ï¼ŒJSä¼šè¦†ç›–ï¼‰ */
html.is-ios-pwa-html {
  margin-bottom: 0;
  padding-bottom: 0;
}

/* bodyä¹Ÿåº”ç”¨ï¼ˆé»˜è®¤å€¼ï¼ŒJSä¼šè¦†ç›–ï¼‰ */
body.is-ios-pwa {
  margin-bottom: 0;
  padding-bottom: 0;
}

/* ============================================================ */
/* === iOS PWA é€‚é…ï¼šæ¢å¤é»˜è®¤ Phone Frame ===                    */
/* ============================================================ */

/* ç¡®ä¿åœ¨æ‰€æœ‰å¹³å°ä¸Š .phone-frame éƒ½æ˜¯æ­£ç¡®æ˜¾ç¤ºçš„ */
body.is-ios-pwa .phone-frame {
  margin-top: 0;
}

/* iOS PWA å…¨å±æ¨¡å¼ */
body.is-ios-pwa.fullscreen-mode .phone-frame {
  margin-top: 0;
}

/* æ¢å¤ä¹‹å‰çš„æ»šåŠ¨è¡Œä¸º */
body.is-ios-pwa .chat-messages-container,
body.is-ios-pwa .settings-content,
body.is-ios-pwa .settings-content-ios,
body.is-ios-pwa .music-content,
body.is-ios-pwa .content,
body.is-ios-pwa .screen {
    -webkit-overflow-scrolling: touch;
}

/* ç‰¹æ®Šå¤„ç†ï¼šä¸»å±å¹• .content */
body.is-ios-pwa .content {
   /* ä¿æŒåŸæœ‰çš„ padding è®¾è®¡ */
}

* {
  -webkit-tap-highlight-color: transparent;
}

.phone-frame {
  width: 340px;
  height: 640px;
  border: 0px solid transparent;
  border-radius: 40px;
  background: #f1f1f1;
  /* box-shadow: 0 19px 38px rgba(0, 0, 0, 0.30), 0 15px 12px rgba(0, 0, 0, 0.22); */
  position: relative;
  overflow: visible !important;

  /* 5. å…³é”®ï¼šå‘Šè¯‰æµè§ˆå™¨æ€ä¹ˆè£å‰ªèƒŒæ™¯ */
  /* content-box: è®©ä¸Šå±‚èƒŒæ™¯åªå¡«å……å†…å®¹åŒºåŸŸ */
  /* border-box: è®©ä¸‹å±‚èƒŒæ™¯å¡«å……æ•´ä¸ªè¾¹æ¡†åŒºåŸŸ */
  background-origin: content-box, border-box;
  background-clip: content-box, border-box;
  box-sizing: content-box;

  /* å­—ä½“å¹³æ»‘ */
  -webkit-font-smoothing: antialiased;
}

@keyframes app-pop-in-optimized {
  0% {
    transform: scale(0.9) translateY(10px);
    opacity: 0;
  }
  100% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}

@keyframes app-pop-out-optimized {
  0% {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
  100% {
    transform: scale(0.9) translateY(10px);
    opacity: 0;
  }
}

/* ä½¿ç”¨æ—¶ï¼š*/
.app-pop-in {
  /* æ‰€æœ‰çš„å›å¼¹æ•ˆæœéƒ½ç”±è¿™ä¸ªè´å¡å°”æ›²çº¿è‡ªåŠ¨ç”Ÿæˆ */
  animation: app-pop-in-optimized 0.5s cubic-bezier(0.34, 1.56, 0.64, 1)
    forwards;
}

.app-pop-out {
  /* ç¦»å¼€æ—¶ç¨å¾®å¹²è„†ä¸€ç‚¹ï¼Œä½†ä¹Ÿå¸¦ç‚¹æ”¶ç¼©æ„Ÿ */
  animation: app-pop-out-optimized 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

/* é€šç”¨è¿‡æ¸¡é…ç½®ï¼šç»Ÿä¸€åº”ç”¨äºæ‰€æœ‰ä¸»å±å¹•å’ŒAppå±å¹• */
/* é€šç”¨è¿‡æ¸¡é…ç½®ï¼šç»Ÿä¸€åº”ç”¨äºæ‰€æœ‰ä¸»å±å¹•å’ŒAppå±å¹• */
#home-screen,
#settings-screen,
#music-screen,
#worldbook-screen,
#messages-screen,
#shop-screen,
#gacha-screen,
#slacking-off-screen,
#beautify-screen,
#chat-screen {
  /* ç»Ÿä¸€çš„ç¼“åŠ¨æ›²çº¿ï¼Œæ¨¡ä»¿ iOS çš„ Spring æ•ˆæœ */
  transition: opacity 0.5s cubic-bezier(0.32, 0.72, 0, 1),
    transform 0.5s cubic-bezier(0.32, 0.72, 0, 1),
    filter 0.5s cubic-bezier(0.32, 0.72, 0, 1);
  /* å…³é”®ï¼šå¿…é¡»æ˜¾å¼è®¾ç½®é«˜åº¦ä¸º100%ï¼Œå¦åˆ™å†…éƒ¨ Flex å¸ƒå±€æ— æ³•æ’‘å¼€ */
  height: 100%;
}

/* ============================================================ */
/* === iOS æ»šåŠ¨ä¿®å¤ (Universal iOS Scroll Fix) ===               */
/* ============================================================ */
/* 
 * iOS Safari/WebKit éœ€è¦ä»¥ä¸‹å±æ€§æ‰èƒ½æ­£å¸¸æ»šåŠ¨ï¼š
 * 1. -webkit-overflow-scrolling: touch  - å¯ç”¨æƒ¯æ€§æ»šåŠ¨
 * 2. min-height: 0                       - Flex å­é¡¹å¿…é¡»è®¾ç½®ï¼Œå¦åˆ™æ— æ³•æ»šåŠ¨
 * 3. overflow-y: auto                    - æ˜¾å¼è®¾ç½®æº¢å‡ºè¡Œä¸º
 * 4. touch-action: pan-y                 - å…è®¸å‚ç›´æ–¹å‘æ‰‹åŠ¿
 * 5. overscroll-behavior: contain        - é˜²æ­¢æ»šåŠ¨é“¾å†’æ³¡
 */

/* åŸºç¡€æ»šåŠ¨å®¹å™¨ä¿®å¤ */
.overflow-y-auto, 
.overflow-auto,
.overflow-scroll,
.settings-content,
.screen,
.scrollable-list-container,
.wow-content-area,
.ceramic-content-scroll,
[class*="overflow-y-auto"] {
  -webkit-overflow-scrolling: touch !important;
  overscroll-behavior: contain !important; 
  overscroll-behavior-y: contain !important;
  touch-action: pan-y !important;
  position: relative;
}

/* ===== iOS å…¨é¢æ»šåŠ¨ä¿®å¤ - è¦†ç›–æ‰€æœ‰å¯èƒ½çš„æ»šåŠ¨å®¹å™¨ ===== */
/* æ¨¡æ€æ¡†å’Œå¼¹çª—å†…å®¹ */
.modal-content,
.modal-body,
.peeping-content-area,
.modal-scroll,
.popup-content,
.dialog-content,
.sheet-content,
.drawer-content,
.panel-content,
/* åˆ—è¡¨å®¹å™¨ */
.list-container,
.contact-list,
.message-list,
.chat-list,
.song-list,
.playlist-container,
.memory-list,
.worldbook-list,
/* èŠå¤©ç›¸å…³ */
.chat-messages-container,
.chat-content,
.messages-container,
/* è®¾ç½®é¡µé¢ */
.settings-content,
.settings-content-ios,
.settings-scroll,
.settings-body,
/* å°çª/æ™¤é¢ç­‰ç‰¹æ®Šé¡µé¢ */
.wowo-content,
.meetu-content,
.meetu-page-content,
.littleworld-content,
.boomboom-content,
/* é€šç”¨æ»šåŠ¨ç±» */
[data-scrollable],
[data-scroll],
.scrollable,
.scroll-container,
.scroll-area,
.scroll-content,
.scroll-wrapper,
/* Flex å¸ƒå±€ä¸­çš„æ»šåŠ¨åŒºåŸŸ */
.flex-1,
.flex-grow,
[class*="flex-1"],
/* User Requested Universal Fix Targets (2026-01-09) */
.bb-view-home, .bb-view-wallet, .bb-viewport,
.wowo-page-journal, .wowo-page-whisper,
.lw-view-moments, .lw-view-subtext,
.slacking-off-main-content,
.cart-screen, .orders-screen,
.bb-retina-scroll, .bb-hide-scroll,
/* å…¶ä»–å¸¸è§å®¹å™¨ */
.content-area,
.main-content,
.body-content,
.page-content,
.view-content,
.wow-detail-comments,
.wow-content-area,
.container-scroll {
  /* iOS æƒ¯æ€§æ»šåŠ¨ - å…³é”®å±æ€§ */
  -webkit-overflow-scrolling: touch !important;
  
  /* é˜²æ­¢ Flex å­é¡¹é«˜åº¦å¡Œé™·å¯¼è‡´æ— æ³•æ»šåŠ¨ - æœ€å…³é”®çš„ä¿®å¤ */
  min-height: 0 !important;
  
  /* é˜²æ­¢æ»šåŠ¨é“¾å†’æ³¡åˆ° body */
  overscroll-behavior: contain;
  overscroll-behavior-y: contain;
  
  /* å…è®¸åŒå‘æ»šåŠ¨æ‰‹åŠ¿ (ä¿®å¤æ¨ªå‘æ»šåŠ¨åˆ—è¡¨ bb-retina-scroll å¡æ­»é—®é¢˜) */
  touch-action: pan-x pan-y !important;
}

/* Flex å®¹å™¨å†…çš„æ»šåŠ¨åŒºåŸŸç‰¹æ®Šå¤„ç† */
.flex-1.overflow-y-auto,
.flex-1[class*="overflow-y-auto"],
.flex-grow.overflow-y-auto,
[style*="flex: 1"][style*="overflow"] {
  flex: 1 1 0% !important;
  min-height: 0 !important;
  height: auto !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
}

/* ç¡®ä¿æ¨¡æ€æ¡†/å¼¹çª—å†…çš„æ»šåŠ¨åŒºåŸŸèƒ½æ­£å¸¸å·¥ä½œ */
.modal-overlay .scrollable,
.modal-overlay [class*="scroll"],
.modal-overlay [class*="overflow"],
.modal-content .scrollable,
.modal-content [class*="scroll"],
.modal-content [class*="overflow"] {
  -webkit-overflow-scrolling: touch !important;
  min-height: 0 !important;
  touch-action: pan-y !important;
}

/* iOS PWA ä¸“ç”¨æ»šåŠ¨ä¿®å¤ - æ‰©å±•ç‰ˆè¦†ç›–æ‰€æœ‰æ»šåŠ¨å®¹å™¨ */
/* åŸå§‹ PWA åˆ—è¡¨ + é€šç”¨ä¿®å¤åˆ—è¡¨çš„å¹¶é›† */
body.is-ios-pwa .chat-messages-container,
body.is-ios-pwa .settings-content,
body.is-ios-pwa .settings-content-ios,
body.is-ios-pwa .music-content,
body.is-ios-pwa .content,
body.is-ios-pwa .screen,
body.is-ios-pwa .modal-body,
body.is-ios-pwa .modal-content,
body.is-ios-pwa .list-container,
body.is-ios-pwa [class*="scroll"],
body.is-ios-pwa [class*="overflow"],
/* æ¥è‡ªé€šç”¨ä¿®å¤åˆ—è¡¨çš„è¡¥å…… (L286-L361) */
body.is-ios-pwa .peeping-content-area,
body.is-ios-pwa .modal-scroll,
body.is-ios-pwa .popup-content,
body.is-ios-pwa .dialog-content,
body.is-ios-pwa .sheet-content,
body.is-ios-pwa .drawer-content,
body.is-ios-pwa .panel-content,
body.is-ios-pwa .contact-list,
body.is-ios-pwa .message-list,
body.is-ios-pwa .chat-list,
body.is-ios-pwa .song-list,
body.is-ios-pwa .playlist-container,
body.is-ios-pwa .memory-list,
body.is-ios-pwa .worldbook-list,
body.is-ios-pwa .chat-content,
body.is-ios-pwa .messages-container,
body.is-ios-pwa .settings-scroll,
body.is-ios-pwa .settings-body,
body.is-ios-pwa .wowo-content,
body.is-ios-pwa .meetu-content,
body.is-ios-pwa .meetu-page-content,
body.is-ios-pwa .littleworld-content,
body.is-ios-pwa .boomboom-content,
body.is-ios-pwa [data-scrollable],
body.is-ios-pwa [data-scroll],
body.is-ios-pwa .scrollable,
body.is-ios-pwa .scroll-container,
body.is-ios-pwa .scroll-area,
body.is-ios-pwa .scroll-content,
body.is-ios-pwa .scroll-wrapper,
body.is-ios-pwa .flex-1,
body.is-ios-pwa .flex-grow,
body.is-ios-pwa [class*="flex-1"],
body.is-ios-pwa .bb-view-home, 
body.is-ios-pwa .bb-view-wallet, 
body.is-ios-pwa .bb-viewport,
body.is-ios-pwa .wowo-page-journal, 
body.is-ios-pwa .wowo-page-whisper,
body.is-ios-pwa .lw-view-moments, 
body.is-ios-pwa .lw-view-subtext,
body.is-ios-pwa .slacking-off-main-content,
body.is-ios-pwa .cart-screen, 
body.is-ios-pwa .orders-screen,
body.is-ios-pwa .bb-retina-scroll, 
body.is-ios-pwa .bb-hide-scroll,
body.is-ios-pwa .content-area,
body.is-ios-pwa .main-content,
body.is-ios-pwa .body-content,
body.is-ios-pwa .page-content,
body.is-ios-pwa .view-content,
body.is-ios-pwa .wow-detail-comments,
body.is-ios-pwa .wow-content-area,
body.is-ios-pwa .container-scroll {
  -webkit-overflow-scrolling: touch !important;
  min-height: 0 !important;
  touch-action: pan-y !important;
  overscroll-behavior-y: contain !important;
}

/* ä¿®å¤ï¼šç¡®ä¿æœ‰ overflow å±æ€§çš„å…ƒç´ éƒ½èƒ½æ»šåŠ¨ */
[style*="overflow-y: auto"],
[style*="overflow-y: scroll"],
[style*="overflow: auto"],
[style*="overflow: scroll"] {
  -webkit-overflow-scrolling: touch !important;
  min-height: 0 !important;
}

/* ä¿®å¤ Settings Page çš„å¸ƒå±€å®šä½ */
.settings-page {
    position: absolute !important;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 50; /* æé«˜å±‚çº§ï¼Œé˜²æ­¢è¢«é®æŒ¡ */
    pointer-events: auto; /* ç¡®ä¿èƒ½æ¥æ”¶ç‚¹å‡»å’Œæ»‘åŠ¨äº‹ä»¶ */
    display: flex; /* ç¡®ä¿æ˜¯ flex å®¹å™¨ */
    flex-direction: column;
    overflow: hidden; /* Fix: Isolate scrolling context like About page */
}

/* ç¡®ä¿ Flex å¸ƒå±€ä¸‹çš„æ»šåŠ¨å®¹å™¨èƒ½æ­£ç¡®å“åº” - é˜²æ­¢é«˜åº¦å¡Œé™· */
.flex-1.overflow-y-auto,
.flex-1[class*="overflow-y-auto"] {
    flex: 1 1 0% !important; /* å¼ºåˆ¶ flex-basis ä¸º 0%ï¼Œè®© flex-grow æ¥ç®¡é«˜åº¦ */
    min-height: 0 !important; /* å…³é”®ï¼šé˜²æ­¢ flex å­é¡¹è¢«å†…å®¹æ’‘å¼€è¶…å‡º flex å®¹å™¨ */
    height: auto !important;
    padding-bottom: 24px !important; /* å¢åŠ åº•éƒ¨å†…è¾¹è·ï¼Œç¡®ä¿åº•éƒ¨å†…å®¹å¯è§ */
}

/* é»˜è®¤çŠ¶æ€ï¼šä¸»å±å¹• */
#home-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  background-image: white;
  /* åˆå§‹çŠ¶æ€ */
  transform: scale(1);
  filter: brightness(1);
}

/* é»˜è®¤çŠ¶æ€ï¼šè®¾ç½®é¡µ (éšè—) */
#settings-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  background-color: #f2f2f7;
  transform: scale(0.92);
  /* é…åˆ font-smoothing è®©å˜ç„¦æ›´æ¸…æ™° */
  will-change: transform, opacity;
  /* ç¡®ä¿çˆ¶å®¹å™¨ä¹Ÿæ˜¯ Flexï¼Œæ–¹ä¾¿ absolute å­å…ƒç´ å®šä½ */
  position: relative;
}

/* --- ç»Ÿä¸€çš„ä¸»å±å¹•é€€åæ•ˆæœ --- */
/* å½“ä»»ä½•Appæ˜¾ç¤ºæ—¶ï¼Œä¸»å±å¹•éƒ½æ‰§è¡Œç›¸åŒçš„é€€ååŠ¨ç”» */
.phone-frame.show-settings #home-screen,
.phone-frame.show-music #home-screen,
.phone-frame.show-worldbook #home-screen,
.phone-frame.show-messages #home-screen,
.phone-frame.show-shop #home-screen,
.phone-frame.show-gacha #home-screen,
.phone-frame.show-slacking-off #home-screen,
.phone-frame.show-beautify #home-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  /* æ•ˆæœï¼šå¾®ç¼© + å˜æš—ï¼Œåˆ¶é€ æ™¯æ·±æ„Ÿ (ä¿æŒä¸å˜) */
  transform: scale(0.92);
  filter: brightness(0.8);
}

/* å½“ phone-frame æ‹¥æœ‰ .show-settings ç±»åæ—¶ */
.phone-frame.show-settings #settings-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  /* æ¿€æ´»æ—¶ï¼šæ”¾å¤§å½’ä½ */
  transform: scale(1);
}

/* === æ–°å¢ï¼šéŸ³ä¹Appçš„åŠ¨ç”»æ§åˆ¶ === */
#music-screen {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  /* éšè—æ—¶ï¼šæ”¹ä¸ºå¾®ç¼© */
  transform: scale(0.92);
}

/* æ³¨æ„ï¼šä¸»å±å¹•çš„éšè—é€»è¾‘å·²åœ¨ä¸Šæ–¹ç»Ÿä¸€å¤„ç†ï¼Œè¿™é‡Œä¸éœ€è¦é‡å¤ */

.phone-frame.show-music #music-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  /* æ¿€æ´»çŠ¶æ€ï¼šæ”¾å¤§å½’ä½ */
  transform: scale(1);
}

/* === æ–°å¢ï¼šé¡¶éƒ¨å†…å®¹æ ·å¼ === */
.header-content {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* æ—¶é’Ÿå®¹å™¨ */
.clock {
  display: flex;
  /* ä½¿ç”¨flexå¸ƒå±€ */
  align-items: center;
  /* å‚ç›´å±…ä¸­å¯¹é½ */
  justify-content: center;
  gap: 2px;
  /* æ•°å­—é—´çš„ç»†å¾®é—´è· */
  width: 240px;
  /* ç»™äºˆè¶³å¤Ÿå®½åº¦ */
}

/* æ—¶é’Ÿæ•°å­—çš„é€šç”¨æ ·å¼ */
.clock span {
  font-size: 100px;
  font-weight: 700;
  color: #000;
  /* æ ¹æ®æ‚¨çš„æ–°å›¾ï¼Œé¢œè‰²æ”¹ä¸ºäº†é»‘è‰² */
  line-height: 1;
  /* ä¿®æ­£è¡Œé«˜é˜²æ­¢é¢å¤–ç©ºé—´ */
}

/* å†’å·çš„ç‰¹å®šæ ·å¼ï¼Œä½¿å…¶ç¨³å®šä¸è·³åŠ¨ */
.clock span:nth-child(2) {
  font-weight: 700;
  position: relative;
  top: -0.1em;
  /* å¾®è°ƒå‚ç›´ä½ç½® */
  animation: blink 1.5s infinite;
  /* æ·»åŠ é—ªçƒæ•ˆæœ */
}

@keyframes blink {
  50% {
    opacity: 0;
  }
}

/* è¯­å½•å®¹å™¨ */
.motto-container {
  margin-top: 10px;
  margin-bottom: 30px;
}

/* è¯­å½•æ–‡å­—æ ·å¼ */
#motto {
  font-size: 16px;
  color: #8a8a8e;
  font-weight: 500;
  border: none;
  /* ç§»é™¤è¾¹æ¡† */
  padding: 5px 10px;
  /* å¢åŠ ä¸€ç‚¹å†…è¾¹è· */
  border-radius: 5px;
  /* è½»å¾®åœ†è§’ */
  cursor: text;
  /* é¼ æ ‡æ ·å¼ä¸ºæ–‡æœ¬è¾“å…¥ */
}

/* å½“ç”¨æˆ·ç‚¹å‡»ç¼–è¾‘æ—¶ï¼Œæä¾›ä¸€ä¸ªæ¸…æ™°çš„è½®å»“ */
#motto:focus {
  outline: 2px solid #007aff;
  /* ç¼–è¾‘æ—¶çš„è“è‰²å¤–æ¡† */
  background-color: #f0f2f5;
}

/* === ä¿®æ”¹ï¼šè°ƒæ•´æ•´ä½“å¸ƒå±€ === */
.content {
  padding: 60px 0 7cap 0;
  /* è°ƒæ•´ä¸Šä¸‹å†…è¾¹è· */
  display: flex;
  flex-direction: column;
  /* æ ¸å¿ƒæ”¹åŠ¨ï¼šè®©å…ƒç´ ä¹‹é—´è‡ªåŠ¨åˆ†å¸ƒç©ºé—´ï¼Œé¡¶éƒ¨è´´é¡¶ï¼Œåº•éƒ¨è´´åº• */
  justify-content: space-between;
  align-items: center;
  height: 95%;
  box-sizing: border-box;
}

/* è°ƒæ•´å°ç»„ä»¶çš„ä¸Šä¸‹é—´è·ä¸º0ï¼Œå› ä¸º space-between ä¼šè‡ªåŠ¨å¤„ç† */
.widget-placeholder {
  margin-bottom: 0;
}

/* ===å°ç»„ä»¶(Widget)åŒºåŸŸæ ·å¼ === */
.widget-placeholder {
  width: 285px;
  /* å®½åº¦ä¸AppåŒºåŸŸä¸€è‡´ */
  height: 145px;
  /* å¤§çº¦ä¸¤è¡ŒAppçš„é«˜åº¦ */
  margin-bottom: 40px;
  /* ä¸ä¸‹æ–¹Appçš„é—´è· */
  background-color: #f0f2f5;
  border: 2px dashed #d1d1d6;
  /* è™šçº¿è¾¹æ¡† */
  border-radius: 22px;
  /* åœ†è§’ */
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  /* é¼ æ ‡æ‚¬æµ®æ—¶æ˜¾ç¤ºæ‰‹å½¢ */
  color: #8e8e93;
  font-size: 16px;
  transition: background-color 0.3s;

  /* ç”¨äºæ˜¾ç¤ºä¸Šä¼ åçš„å›¾ç‰‡ */
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
}

.widget-placeholder:hover {
  background-color: #e1e3e6;
}

/* App å›¾æ ‡ç½‘æ ¼å¸ƒå±€ */
.app-grid {
  display: grid;
  /* å…³é”®ä¿®æ”¹ï¼šä» repeat(4, 1fr) æ”¹ä¸º repeat(3, 1fr) */
  /* æ„æ€å°±æ˜¯ï¼šå¹³åˆ†æˆ3åˆ— */
  grid-template-columns: repeat(3, 1fr);

  /* å¢åŠ è¡Œä¸åˆ—ä¹‹é—´çš„ç©ºéš™ï¼Œå› ä¸ºå˜æˆ3åˆ—äº†ï¼Œç©ºéš™å¤§ä¸€ç‚¹æ›´é«˜çº§ */
  gap: 25px;

  /* è°ƒæ•´å†…è¾¹è·ï¼Œè®©æ•´ä½“å·¦å³ç•™ç™½æ›´å¤šï¼Œå›¾æ ‡é›†ä¸­åœ¨è§†è§‰ä¸­å¿ƒ */
  padding: 60px 35px;

  justify-items: center;

  /* è¿™æ˜¯ä¸€ä¸ªå°æŠ€å·§ï¼šç¡®ä¿ç½‘æ ¼æœ¬èº«åœ¨çˆ¶å®¹å™¨é‡Œå±…ä¸­ */
  margin: 0 auto;
  width: 100%;
  box-sizing: border-box;
  /* é˜²æ­¢paddingæ’‘ç ´å®½åº¦ */
}

/* å•ä¸ªAppçš„å®¹å™¨ (å›¾æ ‡ + åç§°) */
.app-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

/* Appå›¾æ ‡æ ·å¼ */
/* Appå›¾æ ‡æ ·å¼ (ä¿®æ”¹å) */
.app-icon {
  width: 60px;
  height: 60px;
  margin-bottom: -20px;
  /* --- ä¿®æ”¹å¼€å§‹ --- */
  background-color: transparent;
  /* 1. ç¡®ä¿å®¹å™¨èƒŒæ™¯æ˜¯é€æ˜çš„ */
  box-shadow: none;
  /* 2. ç§»é™¤å®¹å™¨è‡ªèº«çš„é˜´å½± */
  border-radius: 0;
  /* 3. ç§»é™¤å®¹å™¨çš„åœ†è§’ï¼Œé˜²æ­¢è£å‰ªä¸è§„åˆ™å›¾ç‰‡ */
  /* --- ä¿®æ”¹ç»“æŸ --- */
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 30px;
  color: white;
}

/* Appå›¾æ ‡ä¸­å›¾ç‰‡çš„æ ·å¼ (ä¿®æ”¹å) */
.app-icon img {
  width: 90%;
  height: 90%;
  /* --- ä¿®æ”¹å¼€å§‹ --- */
  border-radius: 0;
  /* 1. ç§»é™¤å›¾ç‰‡å¼ºåˆ¶çš„åœ†è§’ */
  object-fit: contain;
  /* 2. æ”¹ä¸º contain ä»¥ç¡®ä¿ä¸è§„åˆ™å›¾æ ‡å®Œæ•´æ˜¾ç¤ºä¸è¢«è£å‰ª */
  /* 3. (å…³é”®) ä½¿ç”¨ drop-shadow æ»¤é•œä¸ºä¸è§„åˆ™å›¾ç‰‡æ·»åŠ è½®å»“é˜´å½± */
  filter: drop-shadow(0 4px 6px rgba(0, 0, 0, 0.2));
  /* --- ä¿®æ”¹ç»“æŸ --- */
}

/* Appåç§°æ ·å¼ */
.app-name {
  font-size: 12px;
  color: #111;
  font-weight: 500;
  /* æ ¸å¿ƒï¼šä¸ºæ–‡å­—æ·»åŠ è½»å¾®é˜´å½± */
  text-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
  transform: translateY(24px);
}

.app-back-button {
  background: none;
  border: none;
  font-weight: bold;
  color: #007aff;
  cursor: pointer;
  padding: 0 10px;
  margin-top: 5px;
}

.settings-header h1 {
  font-size: 18px;
  font-weight: 400;
  color: #111;
  margin: 0;
  /* è®©æ ‡é¢˜åœ¨å‰©ä½™ç©ºé—´é‡Œå±…ä¸­ */
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
}

#save-settings-button {
  padding: 4px 10px;

  font-size: 12px;

  font-weight: 400;

  color: #007aff;

  background-color: rgba(0, 122, 255, 0.1);

  border: none;

  border-radius: 40px;

  cursor: pointer;
  margin-left: auto;

  transition: background-color 0.2s;
}

/* === å”¯ä¸€çš„ã€ä¿®æ­£åçš„ settings-content æ ·å¼ === */
.settings-content {
  /* â–¼â–¼â–¼ æ–°å¢/ä¿®æ”¹ â–¼â–¼â–¼ */
  padding-top: 60px;
  /* ä¸ºå›ºå®šçš„é¡¶æ ç•™å‡ºè¶³å¤Ÿçš„ç©ºé—´ */
  padding-left: 0;
  padding-right: 0;
  padding-bottom: 20px;

  color: #333;
  display: flex;
  flex-direction: column;
  gap: 18px;
  /* æ ¸å¿ƒï¼šå¼ºåˆ¶æ‰€æœ‰å­å…ƒç´ åœ¨æ°´å¹³æ–¹å‘ä¸Šå±…ä¸­ */
  align-items: center;
}

/* Add this new rule anywhere in your styles */
.modal-body .form-group {
  width: 100%;
}

.form-group {
  width: 320px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  /* æ ‡ç­¾å’Œè¾“å…¥æ¡†ä¹‹é—´çš„é—´è· */
}

.form-group label {
  font-size: 15px;
  font-weight: 500;
  color: #333;
  padding-left: 5px;
}



.form-select:disabled {
  background-color: #f5f5f5;
  color: #c7c7cd;
}

.form-button {
  padding: 6px 15px;
  font-size: 12px;
  font-weight: 400;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border: none;
  border-radius: 40px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.form-button:disabled {
  background-color: #8e8e93;
  cursor: not-allowed;
}

/* --- æ»‘å—æ ·å¼ --- */
.form-slider {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 3px;
  border-radius: 2px;
  outline: none;
}

.form-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 20px;
  height: 20px;
  background: #ffffff;
  border-radius: 50%;
  border: 0.5px solid rgba(0, 0, 0, 0.04);
  box-shadow: 0px 0.5px 4px rgba(0, 0, 0, 0.12), 0px 2px 3px rgba(0, 0, 0, 0.15);
  cursor: pointer;
}

.form-slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: #ffffff;
  border-radius: 50%;
  border: 0.5px solid rgba(0, 0, 0, 0.04);
  box-shadow: 0px 0.5px 4px rgba(0, 0, 0, 0.12), 0px 2px 3px rgba(0, 0, 0, 0.15);
  cursor: pointer;
}

/* === æ–°å¢ï¼šå£çº¸è®¾ç½®æ§ä»¶çš„æ ·å¼ === */
/* ç”¨è¿™æ®µä»£ç æ›¿æ¢æ‰æ‚¨å·²æœ‰çš„ .wallpaper-controls æ ·å¼ */
.wallpaper-controls {
  display: flex;
  align-items: center;
  gap: 15px;
  /* é¢„è§ˆå›¾å’ŒæŒ‰é’®ç»„ä¹‹é—´çš„é—´è· */
}

/* æ–°å¢ï¼šå£çº¸é¢„è§ˆå›¾æ ·å¼ (å°ºå¯¸è°ƒæ•´) */
#wallpaper-preview {
  width: 50px;
  height: 88px;
  /* ä¿æŒä¸€ä¸ªåˆé€‚çš„æ‰‹æœºå£çº¸æ¯”ä¾‹ */
  border-radius: 6px;
  border: 1px solid #d1d1d6;
  background-color: #e9e9eb;
  background-size: cover;
  background-position: center;
  flex-shrink: 0;
}

/* æ–°å¢ï¼šä¸¤ä¸ªæŒ‰é’®çš„å®¹å™¨æ ·å¼ */
.wallpaper-buttons {
  flex-grow: 1;
  /* å æ»¡å‰©ä½™ç©ºé—´ */
  display: flex;
  flex-direction: column;
  /* è®©ä¸¤ä¸ªæŒ‰é’®å‚ç›´å †å  */
  gap: 8px;
  /* ä¸¤ä¸ªæŒ‰é’®ä¹‹é—´çš„é—´è· */
}

/* è¿™æ˜¯ä¸€ä¸ªæ¬¡è¦æŒ‰é’®çš„æ ·å¼ï¼ŒåŒºåˆ«äºä¸»è¦çš„è“è‰²æŒ‰é’® */
.form-button-secondary {
  width: 100%;
  padding: 8px;
  font-size: 14px;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border: none;
  border-radius: 8px;
  cursor: pointer;
}

/* --- å…³é”®ä¿®æ”¹ï¼šç¡®ä¿åªæœ‰ä¸»å±å¹•æœ‰å£çº¸ --- */
#home-screen {
  background-size: cover;
  background-position: center;
  background-color: transparent;
  /* è®©ä¸»å±å¹•èƒŒæ™¯é€æ˜ï¼Œä»¥ä¾¿æ˜¾ç¤ºå£çº¸ */
  background-image: url("https://i.postimg.cc/rs927KZZ/Group-2-(2).png");
}

#settings-screen {
  background-color: #F5F5F7;
  /* ç¡®ä¿è®¾ç½®é¡µå§‹ç»ˆæ˜¯ç™½è‰²èƒŒæ™¯ */
}

/* === æ–°å¢ï¼šç”¨äºéšè—å°ç»„ä»¶çš„ç±» === */
.widget-hidden {
  display: none !important;
}

/* === iOS 16/17 é£æ ¼å¼€å…³ (Switch) === */
.switch {
  position: relative !important;
  display: inline-block !important;
  width: 51px !important; /* iOSæ ‡å‡†å®½åº¦ */
  min-width: 51px !important;
  max-width: 51px !important;
  height: 31px !important; /* iOSæ ‡å‡†é«˜åº¦ */
  margin: 0 !important;
  padding: 0 !important;
  flex: 0 0 51px !important; /* åœ¨Flexå¸ƒå±€ä¸­ç¦æ­¢ä¼¸ç¼© */
  flex-shrink: 0 !important;
  vertical-align: middle;
}

/* éšè—åŸç”Ÿcheckbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
  position: absolute;
  margin: 0;
}

/* æ»‘æ§½ (èƒŒæ™¯é•¿æ¡) */
.slider {
  position: absolute !important;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  
  transition: 0.3s cubic-bezier(0.25, 0.1, 0.25, 1); /* iOSç¼“åŠ¨æ›²çº¿ */
  border-radius: 31px !important; /* å®Œå…¨åœ†è§’èƒ¶å›Š */
  width: 100% !important;
  height: 100% !important;
  border: none !important;
}

/* æ»‘å— (ç™½è‰²åœ†çƒ) */
.slider:before {
  position: absolute !important;
  content: "";
  height: 27px !important; /* åœ†çƒé«˜åº¦ */
  width: 27px !important; /* åœ†çƒå®½åº¦ */
  left: 2px !important; /* å·¦ä¾§ç•™2pxé—´è· */
  bottom: 2px !important; /* åº•éƒ¨ç•™2pxé—´è· */
  background-color: white !important;
  transition: 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
  border-radius: 50% !important; /* å®Œç¾åœ†å½¢ */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important; /* iOSé˜´å½± */
  transform: translateX(0);
}

/* é€‰ä¸­çŠ¶æ€ï¼šèƒŒæ™¯å˜æˆiOSç»¿è‰² */
input:checked + .slider {
  background-color: #e1f0ff; /* iOS Green */
}

/* é€‰ä¸­çŠ¶æ€ï¼šæ»‘å—å³ç§» */
input:checked + .slider:before {
  transform: translateX(20px) !important; /* å‘å³ç§»åŠ¨20px */
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
@media (prefers-color-scheme: dark) {
  .slider {
    background-color: #39393d !important;
  }
}

/* === æ–°å¢ï¼šå“åº”å¼ç¼©æ”¾ï¼Œä¿®å¤å°å±å¹•ä¸‹çš„æ˜¾ç¤ºé—®é¢˜ === */

/* è¿™æ˜¯ä¸€ä¸ªåª’ä½“æŸ¥è¯¢ï¼Œå®ƒè¡¨ç¤ºï¼š
   â€œå¦‚æœæµè§ˆå™¨çª—å£çš„å®½åº¦å°äºæˆ–ç­‰äº 420px æ—¶...â€ 
*/
@media (max-width: 420px) {
  .phone-frame {
    /* * â€œ...å°±æŠŠ .phone-frame è¿™ä¸ªå…ƒç´ ï¼ˆåŒ…æ‹¬å®ƒé‡Œé¢çš„æ‰€æœ‰å†…å®¹ï¼‰
         * ç­‰æ¯”ä¾‹ç¼©å°åˆ°åŸæ¥çš„ 90%ã€‚â€
         * è¿™æ ·å®ƒå°±ä¸ä¼šè¶…å‡ºçª„å±å¹•çš„è¾¹ç•Œäº†ã€‚
        */
    transform: scale(0.9);
  }
}

/* * ä½ è¿˜å¯ä»¥ä¸ºæ›´å°çš„å±å¹•æ·»åŠ è¿›ä¸€æ­¥çš„ç¼©æ”¾è§„åˆ™ï¼Œ
 * ä¾‹å¦‚ï¼Œå½“å±å¹•å®½åº¦å°äº 380px æ—¶ï¼Œå†ç¼©å°ä¸€ç‚¹ã€‚
*/
@media (max-width: 380px) {
  .phone-frame {
    transform: scale(0.85);
  }
}

/* === éŸ³ä¹ App ä¸“å±æ ·å¼ (æ–°ç‰ˆ) === */

/* æ–°å»ºæ­Œå•æŒ‰é’®çš„æ–°æ ·å¼ */
.add-playlist-button {
  display: block;
  margin: 0 auto;
  width: 100%;
  /* æŒ‰é’®å®½åº¦å æ»¡å®¹å™¨ */
  padding: 10px;
  margin-bottom: 20px;
  /* ä¸ä¸‹æ–¹æ­Œå•ç½‘æ ¼çš„é—´è· */
  font-size: 16px;
  font-weight: 400;
  background-color: rgba(0, 122, 255, 0.1);
  border: none;
  border-radius: 8px;
  /* åœ†è§’ */
  cursor: pointer;
  text-align: center;
  /* æ–‡å­—å±…ä¸­ */
  transition: background-color 0.2s;
}

.add-playlist-button:hover {
  background-color: #e1e3e6;
  /* é¼ æ ‡æ‚¬æµ®æ—¶é¢œè‰²åŠ æ·± */
}

/* éŸ³ä¹å†…å®¹åŒºåŸŸ */
.music-content {
  padding: 15px;
  flex-grow: 1;
  /* å…³é”®ï¼šè®©è¿™ä¸ªåŒºåŸŸå æ®æ‰€æœ‰å‰©ä½™çš„å‚ç›´ç©ºé—´ */
  overflow-y: auto;
  /* å†…å®¹è¶…å‡ºè¿™ä¸ªåŒºåŸŸæ—¶ï¼Œå…è®¸å‚ç›´æ»šåŠ¨ */
}

/* æ­Œå•ç½‘æ ¼å¸ƒå±€ï¼ˆç€‘å¸ƒæµï¼‰ */
.playlist-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 15px;
}

/* å•ä¸ªæ­Œå•å¡ç‰‡çš„æ ·å¼ */
.playlist-card {
  display: flex;
  flex-direction: column;
  cursor: pointer;
  transition: transform 0.2s ease-in-out;
}

.playlist-card:hover {
  transform: scale(1.03);
}

/* æ­Œå•å°é¢ */
.playlist-cover {
  width: 100%;
  padding-bottom: 100%;
  background-color: #e9e9eb;
  border-radius: 8px;
  margin-bottom: 8px;
  background-size: cover;
  /* å…³é”®ï¼šè®©å›¾ç‰‡ç¼©æ”¾ä»¥å®Œå…¨è¦†ç›–å®¹å™¨ */
  background-position: center;
  /* è¾…åŠ©ï¼šè®©å›¾ç‰‡åœ¨å®¹å™¨é‡Œå±…ä¸­æ˜¾ç¤º */
}

/* æ­Œå•åç§° */
.playlist-name {
  font-size: 14px;
  font-weight: 500;
  color: #1c1c1e;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* æ­Œå•æ­Œæ›²æ•°é‡ */
.playlist-count {
  font-size: 12px;
  color: #8a8a8e;
}

/* === æ–°å¢ï¼šæ­Œå•è¯¦æƒ…é¡µçš„åŠ¨ç”»æ§åˆ¶ === */
#playlist-detail-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 3;
  /* å±‚çº§æ¯”éŸ³ä¹ä¸»é¡µæ›´é«˜ */
  background-color: #fff;
  /* ç¡®ä¿æœ‰ç™½è‰²èƒŒæ™¯ */
  display: flex;
  /* ä½¿ç”¨ flex å¸ƒå±€ */
  flex-direction: column;
  /* å‚ç›´æ’åˆ— */
}

.phone-frame.show-playlist-detail #playlist-detail-screen {
  opacity: 1;
  pointer-events: auto;
}

/* è¯¦æƒ…é¡µé¡¶æ æ ·å¼ */
.playlist-header {
  border-bottom: 1px solid #f0f0f0;
}

/* è¯¦æƒ…é¡µå†…å®¹åŒº */
.playlist-content {
  padding: 20px;
  flex-grow: 1;
  /* å æ®å‰©ä½™æ‰€æœ‰ç©ºé—´ */
  overflow-y: auto;
  /* å†…å®¹å¤šæ—¶å¯ä»¥æ»šåŠ¨ */
}

/* å¯¼å…¥æŒ‰é’®æ ·å¼ */
.import-button {
  display: block;
  /* å—çº§å…ƒç´  */
  width: 120px;
  /* å›ºå®šå®½åº¦ */
  margin: 0 auto 25px auto;
  /* æ°´å¹³å±…ä¸­ï¼Œå¹¶å’Œä¸‹æ–¹åˆ—è¡¨æ‹‰å¼€è·ç¦» */
  padding: 8px 16px;
  font-size: 15px;
  font-weight: 500;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border: 1px solid #ffffff;
  border-radius: 20px;
  /* åœ†è§’ */
  cursor: pointer;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

/* æ­Œæ›²åˆ—è¡¨æ ·å¼ */
.song-list {
  list-style: none;
  /* ç§»é™¤é»˜è®¤çš„åœ†ç‚¹ */
  padding: 0;
  margin: 0;
}

/* åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹ */
.song-item {
  border-bottom: 1px solid #f0f0f0;
  padding: 12px 5px;
}

/* === æ–°å¢ï¼šæ’­æ”¾æŒ‰é’®å’Œæ­Œæ›²åˆ—è¡¨é¡¹æ–°å¸ƒå±€ === */
.song-item {
  display: flex;
  justify-content: space-between;
  /* ä¸¤ç«¯å¯¹é½ */
  align-items: center;
  /* å‚ç›´å±…ä¸­ */
  border-bottom: 1px solid #f0f0f0;
  padding: 12px 5px;
}

.song-info {
  /* è¿™ä¸ªæ–°å®¹å™¨ç”¨æ¥åŒ…è£¹æ­Œåå’Œæ­Œæ‰‹ */
  display: flex;
  flex-direction: column;
}

.play-button {
  background: none;
  border: none;
  cursor: pointer;
  padding: 5px;
  width: 32px;
  /* å›ºå®šå®½åº¦ */
  height: 32px;
  /* å›ºå®šé«˜åº¦ */
}

.play-button svg {
  width: 100%;
  height: 100%;
}

.header-button {
  padding: 4px 10px;
  font-size: 12px;
  font-weight: 400;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border: none;
  border-radius: 40px;
  cursor: pointer;
  transition: background-color 0.2s;
}

/* åˆ é™¤æŒ‰é’®çš„ç‰¹æ®Šæ ·å¼ */
.header-button.delete {
  border-color: #ff3b30;
  color: #ff3b30;
}

/* === æ–°å¢ï¼šå¤šé€‰åˆ é™¤æ¨¡å¼ä¸‹çš„æ ·å¼ === */
.song-item .song-checkbox {
  display: none;
  /* é»˜è®¤éšè—å¤é€‰æ¡† */
  margin-right: 15px;
  /* å’Œæ­Œæ›²ä¿¡æ¯æ‹‰å¼€è·ç¦» */
}

/* å½“ song-list å¤„äºåˆ é™¤æ¨¡å¼æ—¶ï¼Œæ˜¾ç¤ºå¤é€‰æ¡† */
.song-list.delete-mode .song-checkbox {
  display: block;
}

/* === æ–°å¢ï¼šç»Ÿä¸€çš„å¤´éƒ¨æ–‡æœ¬æŒ‰é’®æ ·å¼ === */
.header-text-button {
  padding: 4px 10px;
  font-size: 12px;
  font-weight: 400;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border: none;
  border-radius: 40px;
  cursor: pointer;
  transition: background-color 0.2s;
  /* ç”¨äºåœ¨flexå¸ƒå±€ä¸­å¯¹é½ */
  display: flex;
  align-items: center;
  justify-content: center;
}

.header-text-button:hover {
  background-color: rgba(0, 122, 255, 0.2);
}

/* === æ–°å¢ï¼šä¸–ç•Œä¹¦Appçš„åŠ¨ç”»æ§åˆ¶ === */
#worldbook-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  /* éšè—æ—¶ï¼šæ”¹ä¸ºå¾®ç¼© */
  transform: scale(0.92);
}

.phone-frame.show-worldbook #worldbook-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  /* æ¿€æ´»çŠ¶æ€ï¼šæ”¾å¤§å½’ä½ */
  transform: scale(1);
}

/* === æ–°å¢ï¼šæ¶ˆæ¯Appçš„åŠ¨ç”»æ§åˆ¶ === */
#messages-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  /* åªæœ‰æ¨¡ç³ŠèƒŒæ™¯ */
  background-color: transparent !important;

  /* éšè—æ—¶ï¼šæ”¹ä¸ºå¾®ç¼© */
  transform: scale(0.92);
}

/* é¡ºä¾¿ä¼˜åŒ–ä¸€ä¸‹å†…å®¹åŒºåŸŸçš„è¾¹è·ï¼Œè®©å¡ç‰‡ä¸è¦è´´ç€è¾¹ç¼˜ */
#messages-screen .messages-content {
  padding-top: 100px !important;
  padding-left: 15px;
  padding-right: 15px;
  padding-bottom: 20px;
  box-sizing: border-box;
  height: 100%;
  /* å¼ºåˆ¶é«˜åº¦å¡«æ»¡çˆ¶å®¹å™¨ */
  overflow-y: auto;
  /* å†…å®¹å¤šæ—¶å…è®¸å†…éƒ¨æ»šåŠ¨ */
}

/* éšè— Chrome/Safari çš„æ»šåŠ¨æ¡ */
#messages-screen .messages-content::-webkit-scrollbar {
  display: none;
}

.phone-frame.show-messages #messages-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  /* æ¿€æ´»çŠ¶æ€ï¼šæ”¾å¤§å½’ä½ */
  transform: scale(1);
}

/* === æ–°å¢ï¼šè´­ç‰©, åŠ¨æ€, æ¸¸æˆ, ç¾åŒ– App çš„åŠ¨ç”»æ§åˆ¶ === */
/* è´­ç‰© */
#shop-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  background-color: #fff;
  transform: scale(0.92);
}
.phone-frame.show-shop #shop-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  transform: scale(1);
}

/* åŠ¨æ€ (Gacha) */
#gacha-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  background-color: #fff;
  transform: scale(0.92);
}
.phone-frame.show-gacha #gacha-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  transform: scale(1);
}

/* æ¸¸æˆ (Slacking Off) */
#slacking-off-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  background-color: #fff;
  transform: scale(0.92);
}
.phone-frame.show-slacking-off #slacking-off-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  transform: scale(1);
}

/* ç¾åŒ– */
#beautify-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  background-color: #fff;
  transform: scale(0.92);
}
.phone-frame.show-beautify #beautify-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  transform: scale(1);
}

/* === æ–°å¢ï¼šèŠå¤©ç•Œé¢ (äºŒçº§é¡µé¢) åŠ¨ç”»æ§åˆ¶ === */
#chat-screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  opacity: 0;
  pointer-events: none;
  z-index: 10; /* æ¯”ä¸€çº§é¡µé¢é«˜ */

  /* é»˜è®¤éšè—åœ¨å³ä¾§ */
  transform: translateX(100%);
  background-color: #f2f2f7; /* iOS é»˜è®¤èƒŒæ™¯è‰² */
}

/* å½“èŠå¤©ç•Œé¢æ¿€æ´»æ—¶ */
/* æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬è¦è®© chat-screen åœ¨ messages-screen ä¹‹ä¸Šæ»‘å…¥ */
#chat-screen.active {
  opacity: 1;
  pointer-events: auto;
  transform: translateX(0);
}

.dynamic-island {
  position: absolute;
  top: 5px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 999;

  /* === æ ¸å¿ƒä¿®æ”¹åœ¨è¿™é‡Œ === */
  width: 180px;
  height: 36px;
  padding: 0 18px;
  /* åœ¨å·¦å³ä¸¤è¾¹å¢åŠ å†…è¾¹è·ï¼Œè®©å†…å®¹å’Œé»‘è¾¹æœ‰å‘¼å¸ç©ºé—´ */
  box-sizing: border-box;
  /* ç¡®ä¿ padding ä¸ä¼šå½±å“æœ€ç»ˆçš„å®½é«˜è®¡ç®— */

  background-color: #000;
  border-radius: 40px;
  color: white;
  transition: all 0.35s cubic-bezier(0.65, 0, 0.35, 1);
  opacity: 0;
  pointer-events: none;
  cursor: pointer;
}

.dynamic-island.active {
  opacity: 1;
  pointer-events: auto;
}

/* å±•å¼€çŠ¶æ€çš„å°ºå¯¸ */
.dynamic-island.expanded {
  width: 336px;
  /* å±•å¼€åçš„å®½åº¦ */
  height: 160px;
  /* å±•å¼€åçš„é«˜åº¦ */
}

/* --- æ”¶èµ·/å±•å¼€å†…å®¹çš„åˆ‡æ¢ --- */
.island-collapsed-content {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
  opacity: 1;
  transition: opacity 0.2s ease-out;
}

.dynamic-island.expanded .island-collapsed-content {
  opacity: 0;
  pointer-events: none;
}

/* === ç”¨ä¸‹é¢è¿™æ®µæ–°çš„ä»£ç æ›¿æ¢ä¸Šé¢çš„æ—§ä»£ç  === */
.island-expanded-content {
  /* --- å…³é”®ä¿®å¤ï¼šæ·»åŠ ç»å¯¹å®šä½ --- */
  position: absolute;
  top: 0;
  left: 0;

  width: 100%;
  height: 100%;
  padding: 18px;
  box-sizing: border-box;

  /* ä½¿ç”¨ Flexbox å¸ƒå±€æ¥æ’åˆ—å†…éƒ¨å…ƒç´  */
  display: flex;
  flex-direction: column;
  justify-content: space-around;
  /* å‚ç›´æ–¹å‘ä¸Šå‡åŒ€åˆ†å¸ƒ */

  opacity: 0;
  transition: opacity 0.2s ease-out;
  pointer-events: none;
  /* åœ¨éšè—æ—¶ç¡®ä¿æ— æ³•äº¤äº’ */
}

.dynamic-island.expanded .island-expanded-content {
  opacity: 1;
  pointer-events: auto;
  transition: opacity 0.3s 0.15s ease-in;
}

/* --- å†…éƒ¨å…ƒç´ æ ·å¼ --- */
/* === ç”¨ä¸‹é¢è¿™æ®µæ–°çš„ä»£ç æ›¿æ¢ä¸Šé¢çš„æ—§ä»£ç  === */

/* ä½¿ç”¨ .dynamic-island æ¥æé«˜ä¼˜å…ˆçº§ï¼Œç¡®ä¿æ ·å¼åªåº”ç”¨åœ¨çµåŠ¨å²›å†…éƒ¨ */
.dynamic-island .song-details .song-title {
  font-size: 18px;
  font-weight: bold;
  color: #ffffff;
  /* å¼ºåˆ¶æŒ‡å®šä¸ºç™½è‰² */
}

.dynamic-island .song-details .song-artist {
  font-size: 14px;
  color: #b2b2b2;
  /* ä¸€ä¸ªæ›´äº®çš„ç°è‰²ï¼Œåœ¨é»‘èƒŒæ™¯ä¸Šæ›´æ¸…æ™° */
}

.progress-container {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  color: #aaa;
}

.progress-bar-wrapper {
  flex-grow: 1;
  height: 6px;
  background-color: #333;
  border-radius: 3px;
  overflow: hidden;
}

.progress-bar-fill {
  width: 0%;
  height: 100%;
  background-color: #fff;
  border-radius: 3px;
}

.controls-container {
  display: flex;
  justify-content: space-around;
  align-items: center;
}

.control-button {
  background: none;
  border: none;
  width: 40px;
  height: 40px;
  cursor: pointer;
}

.control-button svg {
  fill: #fff;
  width: 100%;
  height: 100%;
}

.control-button.play-pause {
  width: 50px;
  height: 50px;
}

.play-icon,
.pause-icon {
  display: none;
}

.control-button.play .play-icon,
.control-button.pause .pause-icon {
  display: block;
}

/* å¼ºåˆ¶æå‡æ§åˆ¶æŒ‰é’®å®¹å™¨çš„å±‚çº§ */
.dynamic-island .controls-container {
  position: relative;
  /* z-index ç”Ÿæ•ˆéœ€è¦ position å±æ€§ */
  z-index: 10;
}

/* === æ–°å¢ï¼šè”ç³»äººå¼¹å‡ºå±‚ (Modal) çš„æ‰€æœ‰æ ·å¼ === */

/* 2. å¯¹è¯æ¡†ä¸»ä½“ */
.modal-content {
  background-color: #f2f2f7;
  /* iOS æ ‡å‡†æµ…ç°èƒŒæ™¯ */
  width: 320px;
  max-width: 90%;
  border-radius: 20px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  max-height: 85vh;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
  /* æ›´æŸ”å’Œçš„æŠ•å½± */
}

/* å½“ .modal-overlay æ˜¾ç¤ºæ—¶ï¼Œè®© .modal-content åŠ¨ç”»å‡ºç° */
.modal-overlay.visible .modal-content {
  transform: scale(1);
}

/* 3. é¡¶éƒ¨æ»‘å—å’Œå…³é—­æŒ‰é’® */
.modal-header,
.modal-footer {
  /* background-color: #F2F2F7; */
  padding: 15px 20px;
  flex-shrink: 0;
}

.role-switcher {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  /* å®Œç¾çš„æ°´å¹³å±…ä¸­ */

  /* ä¿æŒåŸæœ‰å¤–è§‚ï¼Œç¨å¾®ä¼˜åŒ–ä¸€ä¸‹é—´è· */
  background-color: #e5e5ea;
  padding: 3px 5px;
  border-radius: 100px;
  z-index: 10;
  /* ç¡®ä¿ä¸è¢«é®æŒ¡ */
}

.switch-label {
  color: #888;
  transition: color 0.3s;
}

.switch-label.active {
  color: #007aff;
}

/* 4. AI å’Œç”¨æˆ·è¡¨å•çš„æ ·å¼ */
.role-form {
  display: none;
  /* é»˜è®¤éšè— */
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.role-form.active {
  display: flex;
  /* .active ç±»ä½¿å…¶æ˜¾ç¤º */
}

.avatar-uploader {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
}

.avatar-preview {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  border: 4px solid #ffffff;
  /* ç™½è‰²è¾¹æ¡†æ›´åšä¸€ç‚¹ */
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
  object-fit: cover;
  background-color: #e5e5ea;
  /* å›¾ç‰‡åŠ è½½å‰çš„åº•è‰² */
}

.avatar-input {
  display: none;
  /* éšè—åŸå§‹çš„æ–‡ä»¶é€‰æ‹©æ¡† */
}

.avatar-upload-label {
  font-size: 12px;
  color: #007aff;
  cursor: pointer;
}

.form-textarea {
  height: 100px;
  width: 100%;
  /* background-color: #e9e9eb; */
  border: 1px solid #d1d1d6;
  border-radius: 12px;
  font-size: 14px;
  padding: 10px;
  resize: vertical;
  /* å…è®¸ç”¨æˆ·å‚ç›´è°ƒæ•´å¤§å° */
}

.form-group-inline {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 14px;
}

.form-group-inline input {
  width: 60px;
  text-align: center;
}

.save-button {
  /* width: 20%; */
  padding: 8px;
  font-size: 14px;
  font-weight: 500;
  color: #fff;
  background-color: #007aff;
  border: none;
  border-radius: 20px;
  cursor: pointer;
  margin-left: auto;
  margin-right: auto;
}

/* === æ–°å¢ï¼šæ¶ˆæ¯åˆ—è¡¨çš„æ ·å¼ - Moon White & Indigo Grey é‡æ„ç‰ˆ === */
.contact-list {
  list-style: none;
  padding: 0;
  margin: 0;
  background-color: transparent; /* å®¹å™¨é€æ˜ï¼ŒèƒŒæ™¯è‰²ç”±çˆ¶å®¹å™¨æˆ–bodyæ§åˆ¶ */
}

.contact-item {
  /* 1. å¸ƒå±€ä¸å°ºå¯¸ */
  width: 100%;

  margin-bottom: 12px; /* å¡ç‰‡é—´è· */
  box-sizing: border-box;

  /* 2. Moon White æ ¸å¿ƒé£æ ¼ */
  background: #ffffff; /* çº¯ç™½å¡ç‰‡ï¼Œçªå‡ºå¹²å‡€ */

  border-radius: 18px; /* ç»Ÿä¸€çš„å…‹åˆ¶åœ†è§’ */

  /* 3. é˜´å½±ä¸è´¨æ„Ÿ - å»é™¤ç»ç’ƒç£¨ç ‚ */

  backdrop-filter: none; /* å½»åº•å»é™¤ç£¨ç ‚ */
  -webkit-backdrop-filter: none;

  /* 4. äº¤äº’åŠ¨ç”» */

  overflow: hidden; /* ä¿è¯å†…éƒ¨å…ƒç´ ä¸æº¢å‡ºåœ†è§’ */
}

/* é¼ æ ‡æ‚¬åœ */
.contact-item:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 20px rgba(69, 73, 77, 0.08);
  border-color: rgba(69, 73, 77, 0.15); /* è¾¹æ¡†å¾®åŠ æ·± */
}

/* é¼ æ ‡æŒ‰ä¸‹ */
.contact-item:active {
  transform: scale(0.98);
  background-color: #f4f7f9; /* æŒ‰ä¸‹æ—¶å˜ä¸ºææ·¡çš„æœˆç™½è‰² */
  box-shadow: none;
}

.contact-avatar {
  width: 45px; /* ç¨å¾®ç¼©å°ä¸€ç‚¹ï¼Œæ›´ç²¾è‡´ */
  height: 45px;
  border-radius: 12px; /* å‘¼åº”æ°”æ³¡çš„åœ†è§’é£æ ¼ï¼Œä¸å®Œå…¨ä½¿ç”¨åœ†å½¢ */
  object-fit: cover;
  margin-right: 16px;
  flex-shrink: 0;
  /* æç»†å¾®çš„è¾¹æ¡†ï¼Œæå‡å¤´åƒè´¨æ„Ÿ */
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.contact-info {
  flex-grow: 1;
  min-width: 0;
}

.contact-name {
  font-size: 16px;
  font-weight: 600;
  color: #45494d; /* é’é»›ï¼šè§†è§‰é‡å¿ƒ */
  margin-bottom: 4px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  letter-spacing: 0.2px;
}

.contact-last-message {
  font-size: 13px;
  color: #5f6b73; /* ç°è“ï¼šæ¬¡è¦ä¿¡æ¯ */
  font-weight: 400;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* === æ–°å¢ï¼šæ¶ˆæ¯åˆ—è¡¨å¤šé€‰åˆ é™¤æ¨¡å¼çš„æ ·å¼ === */

/* 1. é»˜è®¤éšè—åˆ—è¡¨é¡¹ä¸­çš„å¤é€‰æ¡† */
.contact-item .contact-checkbox {
  display: none;
  margin-right: 15px;
  /* å’Œå¤´åƒæ‹‰å¼€è·ç¦» */
}

/* 2. å½“åˆ—è¡¨è¿›å…¥åˆ é™¤æ¨¡å¼æ—¶ï¼Œæ˜¾ç¤ºå¤é€‰æ¡† */
.contact-list.delete-mode .contact-item .contact-checkbox {
  display: block;
  /* block ä¼šè®©å®ƒæ˜¾ç¤ºå‡ºæ¥ */
}

/* 3. åˆ é™¤æ¨¡å¼ä¸‹ï¼Œåˆ—è¡¨é¡¹å†…è¾¹è·å¾®è°ƒï¼Œç»™å¤é€‰æ¡†ç•™å‡ºç©ºé—´ */
.contact-list.delete-mode .contact-item {
  padding-left: 10px;
}

/* 4. åˆ é™¤æŒ‰é’®çš„ç‰¹æ®Šçº¢è‰²æ ·å¼ (å¤ç”¨éŸ³ä¹Appçš„æ ·å¼) */
.header-button.delete {
  color: #ff3b30;
  /* çº¢è‰²æ–‡å­— */
}

/* === ç½®é¡¶æ ·å¼çš„ä¼˜åŒ– (åœ†å½¢æŒ‡ç¤ºå™¨) === */
.contact-item.pinned {
  background-color: rgba(
    69,
    73,
    77,
    0.03
  ); /* ç½®é¡¶é¡¹ç›®èƒŒæ™¯ç¨å¾®å˜æš—ä¸€ç‚¹ç‚¹ï¼ŒåŒºåˆ†æ™®é€šé¡¹ */
  border-color: rgba(69, 73, 77, 0.15); /* è¾¹æ¡†ç¨å¾®åŠ æ·± */
}

/* åœ¨å¡ç‰‡å³ä¸Šè§’æ·»åŠ ä¸€ä¸ªä¼˜é›…çš„å°åœ†ç‚¹ */
.contact-item.pinned::after {
  content: "";
  position: absolute;
  top: 10px;
  right: 10px;
  width: 8px;
  height: 8px;
  background-color: var(--london-accent, #45494d); /* ä½¿ç”¨ä¸»é¢˜å¼ºè°ƒè‰² */
  border-radius: 50%;

  /* å¢åŠ ä¸€ä¸ªç™½è‰²å¤–åœˆï¼Œè®©å®ƒåœ¨ä»»ä½•èƒŒæ™¯ä¸Šéƒ½æ¸…æ™° */
  box-shadow: 0 0 0 2px #fff;
  z-index: 2;
}

/* å…¼å®¹æ·±è‰²æ¨¡å¼ */
@media (prefers-color-scheme: dark) {
  .contact-item.pinned {
    background-color: rgba(255, 255, 255, 0.05); /* æ·±è‰²æ¨¡å¼ä¸‹çš„å¾®äº®èƒŒæ™¯ */
  }

  .contact-item.pinned::after {
    box-shadow: 0 0 0 2px #2c2c2e; /* æ·±è‰²æ¨¡å¼ä¸‹çš„å¤–åœˆä¸ºæ·±è‰² */
    background-color: #d6e0e6; /* ä½¿ç”¨æœˆç™½è‰²ä½œä¸ºæŒ‡ç¤ºç‚¹ */
  }
}

/* === æ–°å¢ï¼šèŠå¤©ç•Œé¢çš„æ‰€æœ‰æ ·å¼ === */

/* 1. èŠå¤©ç•Œé¢æ•´ä½“å’Œæ»‘å…¥åŠ¨ç”» */
/* === (æ ¸å¿ƒä¿®å¤ + å˜é‡æ‰¾å›) èŠå¤©ç•Œé¢å®¹å™¨ === */
#chat-screen {
  /* 1. åŸºç¡€å¸ƒå±€ */
  display: flex;
  flex-direction: column;
  height: 100%;
  background-color: #f0f2f5;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;

  /* â–¼â–¼â–¼ å…³é”®ä¿®å¤ï¼šæ‰¾å›ä¸¢å¤±çš„å˜é‡ï¼Œå¦åˆ™è¡¨æƒ…åŒ…ä¼šä¹±é£ â–¼â–¼â–¼ */
  --emoji-panel-height: 280px;
  --features-panel-height: 280px; /* æ›´å¤šåŠŸèƒ½é¢æ¿é«˜åº¦ï¼ˆ2è¡Œ + æŒ‡ç¤ºå™¨ï¼‰ */

  /* 2. åˆå§‹çŠ¶æ€ï¼šéšè— */
  opacity: 0;
  transform: scale(1.05);
  z-index: 20;

  /* 3. äº¤äº’æ§åˆ¶ï¼šä¸å¯è§æ—¶ç¦ç”¨äº¤äº’ */
  visibility: hidden;
  /* å»¶è¿Ÿ visibility çš„å˜åŒ–ï¼Œç¡®ä¿ opacity åŠ¨ç”»æ’­å®Œæ‰çœŸæ­£éšè— */
  transition: opacity 0.3s ease, transform 0.3s ease, visibility 0s linear 0.3s;
}

/* æ¿€æ´»çŠ¶æ€ï¼šæ˜¾ç¤º */
.phone-frame.show-chat #chat-screen {
  opacity: 1;
  transform: scale(1);
  pointer-events: auto;

  /* æ˜¾ç¤ºæ—¶ç«‹å³å–æ¶ˆ hidden */
  visibility: visible;
  transition-delay: 0s;
}

/* (å¯é€‰) è®©æ¶ˆæ¯åˆ—è¡¨é¡µå‘å·¦æ»‘å‡ºï¼Œæ•ˆæœæ›´ä½³ */
.phone-frame.show-chat #messages-screen {
  /* è®©æ¶ˆæ¯åˆ—è¡¨é¡µç›´æ¥æ·¡å‡ºï¼Œè€Œä¸æ˜¯ç¼©å° */
  opacity: 0;
  pointer-events: none;
}

/* 2. å›ºå®šçš„é«˜æ–¯æ¨¡ç³Šé¡¶æ  */
/* === (iOS 26 æ¦‚å¿µç‰ˆ) æ¶²æ€æ‚¬æµ®é¡¶æ  === */

/* 1. é¡¶æ å®¹å™¨ï¼šåŠé€æ˜ç£¨ç ‚èƒŒæ™¯ (Moon White) */
.chat-header {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: 20;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 10px 16px;
  /* height: 54px; */
  padding-top: 50px;
  background-color: rgb(243 243 243 / 85%) !important;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(69, 73, 77, 0.06) !important;
  pointer-events: auto;
}

/* === æ·±è‰²æ¨¡å¼é€‚é… === */
.phone-frame.dark-mode .chat-header::before {
  /* æ·±è‰²æ¨¡å¼ä¸‹ï¼Œæ¸å˜å˜æˆæ·±ç°è‰² */
  background: linear-gradient(
    to bottom,
    rgba(28, 28, 30, 0.95) 0%,
    rgba(28, 28, 30, 0.6) 60%,
    rgba(28, 28, 30, 0) 100%
  );
}

/* 2. å·¦ä¾§ï¼šæ–¹å½¢åœ†è§’æŒ‰é’® (è¿”å›) - æ¢å¤å®è‰²æ‚¬æµ®å¡ç‰‡æ„Ÿ */
.floating-glass-btn.circle {
  pointer-events: auto;
  width: 40px;
  height: 40px;
  border-radius: 32px; /* ç»Ÿä¸€çš„ 12px åœ†è§’ */

  /* çº¯ç™½å®è‰²èƒŒæ™¯ï¼Œä¿ç•™ç«‹ä½“æ„Ÿ */
  background: #ffffff;
  border: 1px solid rgba(69, 73, 77, 0.08); /* æç»†ç°è¾¹ */

  /* å…‹åˆ¶çš„æ‚¬æµ®é˜´å½± */
  /* box-shadow: 0 2px 8px rgba(69, 73, 77, 0.06); */

  backdrop-filter: none;
  -webkit-backdrop-filter: none;

  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.2, 0, 0, 1);

  /* æ¢å¤å›¾æ ‡é¢œè‰²æ§åˆ¶ */
  color: inherit;
}

.floating-glass-btn.circle:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(69, 73, 77, 0.1);
  background-color: #ffffff; /* ä¿æŒçº¯ç™½ */
}

.floating-glass-btn.circle:active {
  transform: scale(0.96);
  background: #f4f7f9;
}

.floating-glass-btn.circle:active {
  transform: scale(0.9);
  background: rgba(255, 255, 255, 0.8);
}

/* 3. ä¸­é—´ï¼šæ ‡é¢˜ */
.chat-header h1 {
  pointer-events: auto;
  font-size: 17px;
  font-weight: 600;
  color: #1c1c1e; /* å›å½’ç¨³é‡çš„æ·±é»‘ */
  text-shadow: none;

  margin: 0;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  white-space: nowrap;

  /* ç§»é™¤èƒŒæ™¯äº¤äº’ï¼Œè®©å®ƒæ›´åƒæ ‡å‡†æ ‡é¢˜ */
  background: transparent;
  padding: 0;
}

.chat-header h1:active {
  background-color: rgba(0, 0, 0, 0.05);
  /* ç‚¹å‡»æ—¶çš„åé¦ˆ */
}

/* 4. å³ä¾§ï¼šåŠŸèƒ½ç»„ (æœç´¢ + è®¾ç½®) - æ¢å¤å®è‰²æ‚¬æµ®å¡ç‰‡æ„Ÿ */
.floating-glass-group {
  pointer-events: auto;
  height: 40px;
  border-radius: 32px; /* ç»Ÿä¸€çš„ 12px åœ†è§’ */
  padding: 0 4px;

  /* çº¯ç™½å®è‰²èƒŒæ™¯ */
  background: #ffffff;
  /* border: 1px solid rgba(69, 73, 77, 0.08); */

  /* å…‹åˆ¶çš„æ‚¬æµ®é˜´å½± */
  /* box-shadow: 0 2px 8px rgba(69, 73, 77, 0.06); */

  backdrop-filter: none;
  -webkit-backdrop-filter: none;

  display: flex;
  align-items: center;
  gap: 2px;
}

/* ç»„å†…çš„å›¾æ ‡æŒ‰é’® */
.header-icon-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: none;
  background: transparent;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
}

.header-icon-btn:active {
  background-color: rgba(0, 0, 0, 0.1);
}

/* ä¸­é—´çš„åˆ†å‰²çº¿ */
.glass-divider {
  display: none !important;
}

/* === æ·±è‰²æ¨¡å¼é€‚é… === */
.phone-frame.dark-mode .floating-glass-btn.circle,
.phone-frame.dark-mode .floating-glass-group {
  background: rgba(40, 40, 40, 0.65);
  border-color: rgba(255, 255, 255, 0.1);
}

.phone-frame.dark-mode .chat-header h1 {
  color: #fff;
  text-shadow: 0 1px 5px rgba(0, 0, 0, 0.5);
}

/* ä¿®æ­£æ·±è‰²æ¨¡å¼ä¸‹å›¾æ ‡é¢œè‰² */
.phone-frame.dark-mode .chat-header svg path {
  stroke: #fff;
}

/* è®©å³ä¾§æŒ‰é’®è‡ªåŠ¨é å³ */
.chat-header #chat-settings-button {
  margin-left: auto;
}

/* 3. èŠå¤©æ¶ˆæ¯å®¹å™¨ */
.chat-messages-container {
  flex-grow: 1;
  overflow-y: auto;
  padding: 0 12px; /* å·¦å³é—´è·å¾®è°ƒ */

  /* é¡¶éƒ¨é¢„ç•™æ›´å¤šç©ºé—´ï¼Œç»™æ¸å˜é¡¶æ è®©ä½ */
  padding-top: 110px;
  padding-bottom: 100px;
}

/* 2. åŠ å·æŒ‰é’®çš„ç‰¹å®šæ ·å¼ */
#chat-add-attachment-button {
  background-color: #f5f5f5;
  /* æ›´æŸ”å’Œçš„æµ…ç°è‰²èƒŒæ™¯ */
  /* color: #555; */
  /* æ›´æ·±ä¸€äº›çš„ç°è‰²å›¾æ ‡ï¼Œæ›´æœ‰è´¨æ„Ÿ */
  width: 30px;
  /* é€‚å½“å¢å¤§æŒ‰é’®å°ºå¯¸ï¼Œæ–¹ä¾¿ç‚¹å‡» */
  height: 30px;
  border-radius: 50%;
  /* ä¿æŒåœ†å½¢ */
  border: none;
  /* å»æ‰é»˜è®¤è¾¹æ¡†ï¼Œç”¨é˜´å½±è¥é€ å±‚æ¬¡ */
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  /* è½»å¾®é˜´å½±ï¼Œå¢åŠ ç«‹ä½“æ„Ÿ */
  transition: all 0.2s ease;
  /* è¿‡æ¸¡åŠ¨ç”»ï¼Œè®©äº¤äº’æ›´ä¸æ»‘ */
  cursor: pointer;
  /* é¼ æ ‡æ‚¬æµ®æ˜¾ç¤ºæ‰‹å‹ï¼Œæç¤ºå¯ç‚¹å‡» */
}

#chat-add-attachment-button:hover {
  background-color: #eaeaea;
  /*  hover æ—¶èƒŒæ™¯ç¨æ·±ï¼Œåé¦ˆæ›´æ˜æ˜¾ */
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.15);
  /*  hover æ—¶é˜´å½±ç¨é‡ */
  transform: scale(1.05);
  /*  hover æ—¶è½»å¾®æ”¾å¤§ï¼Œå¢å¼ºäº¤äº’æ„Ÿ */
}

#chat-add-attachment-button:active {
  background-color: #dcdcdc;
  /* ç‚¹å‡»æ—¶èƒŒæ™¯æ›´æ·±ï¼Œå¼ºåŒ–ç‚¹å‡»åé¦ˆ */
  transform: scale(0.98);
  /* ç‚¹å‡»æ—¶è½»å¾®ç¼©å° */
}

/* === æ–°å¢ï¼šèŠå¤©è®¾ç½®ã€æ°”æ³¡ã€è¾“å…¥æ çš„æœ€ç»ˆæ­£ç¡®æ ·å¼ === */

/* --- 1. èŠå¤©è®¾ç½®å¯¹è¯æ¡† --- */
.modal-content.large {
  max-width: 360px;
  max-height: 85%;
  gap: 0;
  display: flex;
  flex-direction: column;
}

.modal-content.large .modal-header,
.modal-content.large .modal-footer {
  flex-shrink: 0;
}

.modal-content.large .modal-header {
  padding-bottom: 10px;
  border-bottom: 1px solid #e5e5e5;
}

.modal-content.large .modal-header h2 {
  font-size: 15px;
  margin: 0;
}

.modal-body {
  flex-grow: 1;
  overflow-y: auto;
  padding: 20px;
}

.settings-column {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.settings-column h4 {
  font-size: 16px;
  margin: 0 0 5px 0;
  color: #333;
  padding-bottom: 8px;
  border-bottom: 1px solid #eee;
}

.form-textarea.code {
  font-family: monospace;
  height: 120px;
  white-space: pre;
  font-size: 12px;
  width: 90%;
}

.form-button-secondary.small {
  padding: 6px 10px;
  font-size: 14px;
}

.danger-zone {
  border-top: 1px solid #e5e5e5;
  padding-top: 15px;
}

.danger-button {
  width: 100%;
  padding: 10px;
  font-size: 14px;
  font-weight: 500;
  color: #ff3b30;
  background-color: rgba(255, 59, 48, 0.1);
  border: 1px solid rgba(255, 59, 48, 0.2);
  border-radius: 8px;
  cursor: pointer;
}

/* å…³é”®ä¿®å¤ï¼šç¡®ä¿å¤´åƒè®¾ç½®çš„è¡Œå†…å…ƒç´ èƒ½æ­£ç¡®å¸ƒå±€ */
.form-group .form-group-inline {
  display: flex;
  justify-content: space-between;
  /* ä¸¤ç«¯å¯¹é½ */
  align-items: center;
}

.form-group .form-group-inline .form-input {
  flex-grow: 0;
  /* ç¦æ­¢å®ƒä¼¸å±• */
}

.message-row.user {
  flex-direction: row-reverse;
  transform-origin: bottom right;
  /* padding-left: 15%; */
}

.message-row.ai {
  transform-origin: bottom left;
}

/* ä¿®æ”¹å‰ */
.hide-avatars .chat-avatar {
  display: none !important;
}

/* ä¿®æ”¹åï¼šåŒæ—¶éšè—å›¾ç‰‡å’Œå®ƒçš„å®¹å™¨ */
.hide-avatars .chat-avatar,
.hide-avatars .avatar-anchor {
  display: none !important;
}

.chat-messages-container {
  display: flex;
  flex-direction: column;
}

/* --- 3. èŠå¤©è¾“å…¥æ  --- */
.chat-input-area {
  position: absolute;
  bottom: 0px;
  /* width: 100%; */

  /* â–¼â–¼â–¼ ä¹‹å‰æ¼æ‰çš„å…³é”®å¸ƒå±€ä»£ç  â–¼â–¼â–¼ */
  display: flex;
  /* è®©å­å…ƒç´ æ¨ªå‘æ’åˆ— */
  align-items: center;
  /* è®©å®ƒä»¬å‚ç›´å±…ä¸­å¯¹é½ */
  gap: 2px;
  /* å…ƒç´ ä¹‹é—´çš„é—´è· */
  box-sizing: border-box;
  /* ç¡®ä¿å†…è¾¹è·ä¸ä¼šæ’‘ç ´å®¹å™¨ */
  /* â–²â–²â–² ä¿®å¤ç»“æŸ â–²â–²â–² */

  /* è§†è§‰é£æ ¼ (ä¿æŒä¸å˜) */
  background-color: rgba(255, 255, 255, 1);

  border-radius: 0px;
  padding: 10px 10px;
  /* ç¨å¾®å‡å°å†…è¾¹è·ï¼Œè®©å®ƒæ›´ç²¾è‡´ */
  /* box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08); */

  left: 0px;
  right: 0px;
  padding-bottom: 30px;

  z-index: 100 !important;
  border-top: none;
}

.chat-action-button {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  flex-shrink: 0;
  padding: 0;
  background-color: transparent;
}

/* #chat-add-attachment-button {
            color: #333;
        } */

#chat-add-attachment-button svg {
  width: 20px;
  height: 20px;
}

.chat-input-area input {
  flex-grow: 1;
  height: 35px;
  border: none;
  background-color: rgba(0, 0, 0, 0.05);
  border-radius: 12px;
  padding: 0 15px;
  font-size: 15px;
  outline: none;
}

/* æ”¾å¤§åå†ç¼©å°å›åŸå¤§å°çš„åŠ¨ç”» */
@keyframes scaleUpDown {
  0% {
    transform: scale(1);
    /* åˆå§‹å¤§å° */
  }

  50% {
    transform: scale(1.2);
    /* æ”¾å¤§åˆ° 1.2 å€ */
  }

  100% {
    transform: scale(1);
    /* ç¼©å°å›åŸå¤§å° */
  }
}

/* ç‚¹å‡»æ—¶å¿«é€Ÿç¼©æ”¾çš„åŠ¨ç”» */
@keyframes clickScale {
  0% {
    transform: scale(1);
    /* åŸå¤§å°ï¼ˆæˆ– hover ç»“æŸåçš„å¤§å°ï¼‰ */
  }

  50% {
    transform: scale(0.9);
    /* å¿«é€Ÿç¼©å° */
  }

  100% {
    transform: scale(1);
    /* æ¢å¤åŸå¤§å° */
  }
}

@keyframes ripple {
  to {
    transform: scale(2);
    opacity: 0;
  }
}

/* å®šä¹‰åŠ¨ç”»å…³é”®å¸§ */
@keyframes bubble-scale-in {
  0% {
    opacity: 0;
    /* åˆå§‹çŠ¶æ€ï¼šç¨å¾®å°ä¸€ç‚¹ï¼Œä½ç½®ç¨å¾®é ä¸‹ï¼ˆäº§ç”Ÿä¸Šæµ®æ„Ÿï¼‰ï¼Œä¸”ä¸æ—‹è½¬ */
    transform: scale(0.92) translateY(10px);
  }

  60% {
    opacity: 1;
    /* è¿‡æ¸¡çŠ¶æ€ï¼šè½»è½»è¶…è¿‡ä¸€ç‚¹ç‚¹æ­£å¸¸å¤§å°ï¼Œåƒå‘¼å¸ä¸€æ · */
    transform: scale(1.02) translateY(-2px);
  }

  100% {
    opacity: 1;
    /* ç»“æŸçŠ¶æ€ï¼šå›å½’æ­£å¸¸ */
    transform: scale(1) translateY(0);
  }
}

.chat-bubble {
  /* è§£æï¼š
       0.5s: åŠ¨ç”»æ—¶é•¿ï¼Œæ¯”ä¹‹å‰çš„0.6sç¨å¿«ä¸€ç‚¹ç‚¹ï¼Œå‡å°‘æ‹–æ²“æ„Ÿ
       cubic-bezier: ä½¿ç”¨ ease-out ç±»å‹çš„æ›²çº¿ï¼Œå‰é¢å¿«åé¢æ…¢ï¼Œåƒäº‘æœµé£˜åœçš„æ„Ÿè§‰
    */
  animation: bubble-scale-in 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;

  /* ä¿æŒä¸­å¿ƒæ”¾å¤§ï¼Œæˆ–è€…ä½ å¯ä»¥æ ¹æ®æ°”æ³¡ä½ç½®æ”¹ä¸º bottom left / bottom right */
  transform-origin: center bottom;

  backface-visibility: hidden;
  /* ä¼˜åŒ–æ¸²æŸ“æ€§èƒ½ */
  will-change: transform, opacity;
}

@keyframes ripple {
  0% {
    opacity: 0.8;
    transform: translate(-50%, -50%) scale(0);
  }

  100% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(1);
  }
}

/* === æ–°å¢ï¼šâ€œæ­£åœ¨è¾“å…¥â€æç¤ºçš„CSSæ ·å¼ === */

/* åŠ¨ç”»å®¹å™¨çš„æ ·å¼ */
.typing-animation {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 16px;
  min-width: 60px;
  /* æ§åˆ¶æ•´ä½“é«˜åº¦ */
}

/* åŠ¨ç”»ç‚¹çš„åŸºç¡€æ ·å¼ */
.typing-dot {
  width: 6px;
  height: 6px;
  margin: 0 2px;
  background-color: #8e8e93;
  /* ç‚¹çš„é¢œè‰² */
  border-radius: 50%;

  /* åº”ç”¨æˆ‘ä»¬ä¸‹é¢å®šä¹‰çš„åŠ¨ç”» */
  animation: typing-bounce 1.2s infinite ease-in-out;
}

/* ä¸ºç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªç‚¹è®¾ç½®åŠ¨ç”»å»¶è¿Ÿï¼Œå½¢æˆæ³¢æµªæ•ˆæœ */
.typing-dot:nth-child(2) {
  animation-delay: 0.15s;
}

.typing-dot:nth-child(3) {
  animation-delay: 0.3s;
}

/* å®šä¹‰ä¸€ä¸ªåä¸º "typing-bounce" çš„åŠ¨ç”» */
@keyframes typing-bounce {
  0% {
    opacity: 0;
    transform: translateY(8px) scale(0.2);
  }

  20% {
    opacity: 1;
    transform: translateY(-4px) scale(1.1);
  }

  40% {
    transform: translateY(2px) scale(0.95);
  }

  60% {
    transform: translateY(-2px) scale(1.05);
  }

  80% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

/* å¯é€‰ï¼šä¸ºæ¯ä¸ªç‚¹æ·»åŠ å»¶è¿Ÿï¼Œå½¢æˆæ³¢æµªæ•ˆæœ */
.dot-1 {
  animation-delay: 0s;
}

.dot-2 {
  animation-delay: 0.15s;
}

.dot-3 {
  animation-delay: 0.3s;
}

/* --- æ–°å¢ï¼šæ¶ˆæ¯é€‰æ‹©åŠŸèƒ½çš„CSSæ ·å¼ --- */
/* --- è¿™æ˜¯æ¶ˆæ¯å¸ƒå±€çš„ã€æœ€ç»ˆä¿®å¤ç‰ˆã€‘CSS --- */

/* 1. å¤–å±‚è¡Œå®¹å™¨ï¼šæ°¸è¿œ100%å®½åº¦ï¼Œç”¨äºå¯¹é½é€‰æ‹©å™¨ */
.message-row {
  position: relative;
  display: flex;
  margin-bottom: 10px;
  width: 100%;
  box-sizing: border-box;
  animation: bubble-scale-in 0.3s ease-out;
}

/* 2. æ–°å¢ï¼å†…å®¹åŒ…è£…å±‚ï¼šè´Ÿè´£å¯¹é½å’Œé™åˆ¶å®½åº¦ */
.message-content-wrapper {
  display: flex;
  align-items: flex-end;
  max-width: 85%;
  /* çº¦æŸå†…å®¹æœ€å¤§å®½åº¦ */
  transition: transform 0.3s ease;
  position: relative;
  /* åŠ¨ç”»æ•ˆæœ */

  /* é˜²æ­¢ flex å­é¡¹è¢«è¿‡åº¦æŒ¤å‹ */
  min-width: 0;
}

.message-content-wrapper.user {
  margin-left: auto;
  /* å…³é”®ï¼šå°†ç”¨æˆ·çš„å†…å®¹æ¨åˆ°æœ€å³è¾¹ */
  flex-direction: row-reverse;
  /* å¤´åƒåœ¨å³ï¼Œæ°”æ³¡åœ¨å·¦ */
}

/* 3. æ°”æ³¡ã€å¤´åƒå’Œé€‰æ‹©å™¨æ ·å¼ (åŸºæœ¬ä¸å˜ï¼Œä½†é€‰æ‹©å™¨æ›´å‡†ç¡®) */
.chat-bubble {
  padding: 8px 12px;
  /* å¢åŠ å†…è¾¹è·ï¼Œè®©æ–‡å­—å‘¼å¸æ„Ÿæ›´å¼º */
  border-radius: 18px;
  text-align: justify;

  /* 3. é’ˆå¯¹ä¸­æ–‡å’Œæ··åˆæ’ç‰ˆçš„ä¼˜åŒ– */
  text-justify: inter-ideograph;
  /* è®©ä¸­è‹±æ–‡æ··æ’æ—¶çš„é—´è·æ›´è‡ªç„¶ */

  /* æ ¸å¿ƒéœ€æ±‚ï¼šç»Ÿä¸€çš„ 18px å¤§åœ†è§’ */
  line-height: 1.5;
  word-wrap: break-word;
  font-size: 14px;
  /* iOS æ ‡å‡†å­—å· */
  /* max-width: 60%; */
  min-width: 20px;
  /* é˜²æ­¢ç©ºå†…å®¹å¤ªæ‰ */
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
  /* ææ·¡çš„é˜´å½±ï¼Œå¢åŠ å±‚æ¬¡æ„Ÿ */
  position: relative;
  /* transition: all 0.2s ease; */
}

.chat-avatar {
  width: 40px;
  height: 40px;
  object-fit: cover;
  flex-shrink: 0;
  margin: 0 8px;
}

.avatar-anchor {
  flex-shrink: 0;
  display: flex;
  align-items: center; /* ä¿è¯å¤´åƒå‚ç›´å±…ä¸­æˆ–åº•éƒ¨å¯¹é½ */
}

/* HTML æ¸²æŸ“å®¹å™¨æ ·å¼ä¿®å¤ */
.html-render-container {
  display: block;
  /* overflow: hidden;  <-- ç§»é™¤è¿™ä¸ªï¼ŒJS é‡Œå·²ç»æ§åˆ¶å†…å±‚ overflow äº†ï¼Œå¤–å±‚å¦‚æœ hidden å¯èƒ½ä¼šå¯¼è‡´é˜´å½±è¢«åˆ‡ */

  background: #fff;
  /* å¼ºåˆ¶é‡ç½®è¾¹è· */
  margin: 0;
  padding: 0;
  width: 100%;
  min-width: 50px;
  max-width: 100%;
  height: auto; /* Shadow DOM æ¨¡å¼ä¸‹ç”±å†…å®¹è‡ªç„¶æ’‘å¼€ */
  transition: opacity 0.3s ease;
}

/* === æ ¸å¿ƒä¿®å¤ï¼šHTMLå¡ç‰‡æ¨¡å¼ä¸‹çš„â€œè£¸å¥”â€æ ·å¼ === */
/* å»é™¤æ‰€æœ‰æ°”æ³¡è£…é¥°ï¼Œè®©å¡ç‰‡å®Œå…¨ç‹¬ç«‹å±•ç¤ºï¼Œè§£å†³é‡å å’Œç›’å­æ„Ÿ */
.message-content-wrapper.is-html-content {
  background: transparent !important;
  box-shadow: none !important;
  padding: 0 !important;
  border: none !important;
  /* å…è®¸å¡ç‰‡ç¨å¾®å®½ä¸€ç‚¹ï¼Œä½†ä¸è¦è¶…è¿‡å±å¹• */
  max-width: 95% !important;
  overflow: visible !important;
}
/* åŒæ—¶æŠŠé‡Œé¢çš„æ°”æ³¡èƒŒæ™¯ä¹Ÿå»æ‰ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ */
.message-content-wrapper.is-html-content .chat-bubble {
  background: transparent !important;
  box-shadow: none !important;
  padding: 0 !important;
}

.selection-indicator {
  position: absolute;
  left: 10px;
  top: 50%;
  transform: translateY(-50%);
  width: 20px;
  height: 20px;
  border: 2px solid #c7c7cc;
  border-radius: 50%;
  background-color: #fff;
  opacity: 0;
  transition: opacity 0.3s ease;
}

/* 4. é€‰æ‹©æ¨¡å¼ä¸‹çš„æ ·å¼ (é€‰æ‹©å™¨æ›´ç²¾ç¡®) */
.selection-mode-active .selection-indicator {
  opacity: 1;
}

.selection-mode-active .message-row {
  /* æ³¨æ„æ˜¯ message-row */
  background-color: rgba(0, 122, 255, 0);
  /* ç§»é™¤ä¹‹å‰çš„é€‰ä¸­èƒŒæ™¯è‰² */
}

.message-row.selected {
  background-color: transparent;
}

.message-row.selected .selection-indicator {
  background-color: #007aff;
  border-color: #007aff;
}

.message-row.selected .selection-indicator::after {
  content: "âœ”";
  color: white;
  font-size: 12px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

/* ========================================================== */
/* === é€‰æ‹©æ¨¡å¼å¹³ç§»åŠ¨ç”» === */
/* ========================================================== */
#chat-screen.selection-mode-active .message-content-wrapper.ai,
#chat-screen.selection-mode-active .group-message-wrapper.ai,
#chat-screen.selection-mode-active .chat-avatar-wrapper.ai {
  /* 1. (ä¸å˜) ä»ç„¶å‘å³å¹³ç§»30åƒç´  */
  transform: translateX(30px) !important;

  /* 2. (æ ¸å¿ƒä¿®å¤) åœ¨å¹³ç§»çš„åŒæ—¶ï¼Œå®½åº¦å‡å»å¹³ç§»çš„è·ç¦» */
  /* è¿™ç¡®ä¿äº†å…ƒç´ çš„æ–°æ€»å®½åº¦ = (100% - 30px)ï¼Œæ­£å¥½èƒ½å®¹çº³åœ¨åç§»åçš„ç©ºé—´é‡Œ */
  width: calc(100% - 30px);
}

/* === æ–°å¢ï¼šå…¨å±æ¨¡å¼çš„æ ·å¼ === */
body.fullscreen-mode {
  /* 1. å–æ¶ˆå¼ºåˆ¶å±…ä¸­ï¼Œè®©å†…å®¹ä»å·¦ä¸Šè§’å¼€å§‹ */
  display: block;
  /* 2. èƒŒæ™¯è®¾ä¸ºå¹²å‡€çš„ç™½è‰² */
  background-color: #fff;
  /* 3. æ–°å¢ï¼šåœ¨å…¨å±æ¨¡å¼ä¸‹ï¼Œç¦æ­¢æ•´ä¸ªé¡µé¢æ»šåŠ¨ */
  overflow: hidden;
}

body.fullscreen-mode .phone-frame {
  /* 3. è¦†ç›–å›ºå®šçš„å®½é«˜ï¼Œè®©å®ƒå æ»¡æ•´ä¸ªå±å¹• */
  width: 100%;
  height: 100vh;
  /* vh å•ä½ä»£è¡¨è§†å£é«˜åº¦ */
  max-width: none;
  max-height: none;

  /* 4. ç§»é™¤æ‰€æœ‰æ‰‹æœºæ¡†çš„è§†è§‰æ ·å¼ */
  border: none;
  border-radius: 0;
  box-shadow: none;
  background: #f1f1f1;
  /* èƒŒæ™¯ä¹Ÿè®¾ä¸ºç™½è‰² */

  /* 5. å¼ºåˆ¶è¦†ç›–æ‰é’ˆå¯¹å°å±å¹•çš„ transform: scale ç¼©æ”¾æ•ˆæœ */
  transform: none !important;
}

/* === æ›´æ–°ï¼šä¸ºæ‚¬æµ®é¡¶æ ä¸‹çš„å†…å®¹åŒºåŸŸæ·»åŠ ä¸Šè¾¹è·å¹¶ä½¿å…¶å¯æ»šåŠ¨ === */
#settings-screen .settings-content,
#playlist-detail-screen .playlist-content,
#icon-settings-screen .settings-content {
  padding-top: 90px;
  height: 100%;
  overflow-y: auto;
  box-sizing: border-box;
}

#icon-list-container {
  width: 100%;
}

/* å°†éŸ³ä¹å’Œä¸–ç•Œä¹¦ç•Œé¢å•ç‹¬è®¾ç½®ï¼Œä½¿ç”¨Flexboxå¸ƒå±€ */
#music-screen .music-content,
#worldbook-screen .music-content,
#worldbook-groups-screen .music-content,
#worldbook-group-detail-screen .music-content {
  padding: 90px 15px 15px 15px !important;
  height: 100%;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

/* === æ–°å¢ï¼šä½¿â€œæ–°å»ºâ€æŒ‰é’®å›ºå®š === */
.add-playlist-button {
  flex-shrink: 0;
  /* é˜²æ­¢æŒ‰é’®åœ¨ç©ºé—´ä¸è¶³æ—¶è¢«å‹ç¼© */
  /* å…¶ä»–æ ·å¼ä¿æŒä¸å˜ */
}

/* === æ–°å¢ï¼šè®©æ–°çš„åˆ—è¡¨å®¹å™¨å¯æ»šåŠ¨ === */
.scrollable-list-container {
  flex-grow: 1;
  /* å æ®æ‰€æœ‰å‰©ä½™çš„å‚ç›´ç©ºé—´ */
  overflow-y: auto;
  /* è®©è¿™ä¸ªå®¹å™¨è‡ªå·±è´Ÿè´£æ»šåŠ¨ */
}

/* === æ–°å¢ï¼šä¸–ç•Œä¹¦å¤šé€‰åˆ—è¡¨çš„æ ·å¼ === */
.multiselect-container {
  max-height: 120px;
  /* è®¾ç½®ä¸€ä¸ªæœ€å¤§é«˜åº¦ */
  overflow-y: auto;
  /* å†…å®¹è¶…å‡ºæ—¶å‡ºç°æ»šåŠ¨æ¡ */
  background-color: #e9e9eb;
  border: 1px solid #d1d1d6;
  border-radius: 12px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  /* é€‰é¡¹ä¹‹é—´çš„é—´è· */
}

.multiselect-item {
  display: flex;
  align-items: center;
  gap: 10px;
  /* å¤é€‰æ¡†å’Œæ–‡å­—çš„é—´è· */
  font-size: 14px;
  cursor: pointer;
}

/* === æ–°å¢ï¼šæ­Œå•å¤šé€‰åˆ é™¤æ¨¡å¼çš„æ ·å¼ === */

/* 1. è®©æ­Œå•å¡ç‰‡æˆä¸ºå¤é€‰æ¡†çš„å®šä½åŸºå‡† */
.playlist-card {
  position: relative;
}

/* 2. å¤é€‰æ¡†çš„æ ·å¼ï¼Œé»˜è®¤éšè— */
.playlist-checkbox {
  display: none;
  position: absolute;
  top: 8px;
  right: 8px;
  width: 20px;
  height: 20px;
  z-index: 5;
  /* ç¡®ä¿åœ¨å°é¢ä¹‹ä¸Šï¼Œå¯ä»¥è¢«ç‚¹å‡» */
}

/* 3. å½“æ­Œå•ç½‘æ ¼è¿›å…¥åˆ é™¤æ¨¡å¼æ—¶ï¼Œæ˜¾ç¤ºå¤é€‰æ¡† */
.playlist-grid.delete-mode .playlist-checkbox {
  display: block;
}

/* === æœ€ç»ˆç‰ˆ V2ï¼šä½¿ç”¨ä¸“å±ç±»å chatsearch-content === */

/* 1. å¤–éƒ¨å®¹å™¨æ ·å¼ (ä¿æŒä¸å˜) */
.search-result-item {
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 6px 8px;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.search-result-item:hover {
  background-color: #e9e9eb;
}

/* 2. ç¬¬ä¸€è¡Œå®¹å™¨æ ·å¼ (ä¿æŒä¸å˜) */
.search-result-item .result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* 3. å‘é€è€…å’Œæ—¶é—´æ ·å¼ (ä¿æŒä¸å˜) */
.search-result-item .sender-name {
  font-size: 14px;
  font-weight: 500;
  color: #1c1c1e;
}

.search-result-item .time {
  font-size: 12px;
  color: #8a8a8e;
}

/* 4. ã€æ ¸å¿ƒä¿®æ”¹ã€‘ç¬¬äºŒè¡Œå†…å®¹æ‘˜è¦æ ·å¼ï¼Œåº”ç”¨åˆ°æ–°çš„ç±»åä¸Š */
.search-result-item .chatsearch-content {
  font-size: 13px;
  color: #333;
  white-space: nowrap;
  /* ç¦æ­¢æ¢è¡Œ */
  overflow: hidden;
  /* éšè—æº¢å‡ºéƒ¨åˆ† */
  text-overflow: ellipsis;
  /* æ˜¾ç¤ºçœç•¥å· */
}

/* 5. é«˜äº®æ ·å¼ (ä¿æŒä¸å˜) */
.search-result-item .highlight {
  background-color: rgba(0, 122, 255, 0.15);
  color: rgb(0, 0, 0);
  border-radius: 3px;
  padding: 0 2px;
}

/* å…¶ä»–ç›¸å…³æ ·å¼ (ä¿æŒä¸å˜) ... */
@keyframes temporary-highlight {
  0%,
  100% {
    background-color: transparent;
  }

  20%,
  80% {
    background-color: rgba(0, 122, 255, 0.15);
  }
}

.message-highlight {
  animation: temporary-highlight 1.5s ease-out;
}

/* æ–°å¢ï¼šéšè—æœç´¢æ¡†å†…è‡ªå¸¦çš„æ¸…é™¤æŒ‰é’®(x) */
#search-input::-webkit-search-cancel-button {
  display: none;
}

/* === ç”¨äºå›¾æ ‡å’Œæ»šåŠ¨æ ‡é¢˜çš„æ–°æ ·å¼ === */

/* 1. ä¸»å®¹å™¨ï¼Œç”¨äºå¯¹é½å›¾æ ‡å’Œæ–‡æœ¬ */
.collapsed-music-info {
  display: flex;
  align-items: center;
  gap: 6px;
  /* å›¾æ ‡å’Œæ–‡å­—ä¹‹é—´çš„é—´è· */
  width: 100%;
  padding: 0 10px;
  box-sizing: border-box;
}

/* 2. SVG å›¾æ ‡çš„æ ·å¼ */
.music-icon-collapsed {
  flex-shrink: 0;
  /* é˜²æ­¢å›¾æ ‡è¢«å‹ç¼©å˜å½¢ */
}

/* 3. â€œçª—å£â€å®¹å™¨ï¼Œç”¨äºéšè—æº¢å‡ºçš„æ–‡æœ¬ */
.title-scroller-window {
  overflow: hidden;
  /* å…³é”®ï¼éšè—æ‰€æœ‰è¶…å‡ºè¿™ä¸ªå®¹å™¨çš„å†…å®¹ */
  flex-grow: 1;
  /* è®©å®ƒå æ®æ‰€æœ‰å‰©ä½™çš„ç©ºé—´ */
}

/* 4. æ ‡é¢˜æ–‡æœ¬çš„åŸºç¡€æ ·å¼ */
.collapsed-title {
  color: white;
  font-weight: 400;
  white-space: nowrap;
  /* å¼ºåˆ¶æ–‡æœ¬ä¸æ¢è¡Œ */
  display: inline-block;
  /* è¿™æ˜¯è®©åŠ¨ç”»æ­£ç¡®å·¥ä½œæ‰€å¿…éœ€çš„ */
}

/* 5. è¿™ä¸ªç±»å°†ç”± JavaScript æ·»åŠ ï¼Œç”¨äºæ¿€æ´»æ»šåŠ¨åŠ¨ç”» */
.collapsed-title.scrolling {
  /* è®©æ–‡æœ¬çš„èµ·ç‚¹ç§»åŠ¨åˆ°â€œçª—å£â€çš„å³ä¾§ï¼Œä¸ºæ»šåŠ¨å…¥åœºåšå‡†å¤‡ */
  padding-left: 100%;
  /* åº”ç”¨æˆ‘ä»¬ä¸‹é¢å®šä¹‰çš„ 'marquee-scroll' åŠ¨ç”» */
  animation: marquee-scroll 8s linear infinite;
}

/* 6. å®šä¹‰æ»šåŠ¨åŠ¨ç”»çš„å…³é”®å¸§ */
@keyframes marquee-scroll {
  0% {
    transform: translateX(0);
  }

  100% {
    /* å°†æ–‡æœ¬å‘å·¦ç§»åŠ¨ï¼Œç›´åˆ°å®ƒå®Œå…¨ä»è§†é‡ä¸­æ¶ˆå¤± */
    transform: translateX(-100%);
  }
}

/* === æ–°å¢ï¼šçµåŠ¨å²›å±•å¼€åé¡¶éƒ¨çš„æ ·å¼ === */
.expanded-header {
  width: 100%;
  position: relative;
  display: flex;
  justify-content: center;
  /* å·¦å³ä¸¤ç«¯å¯¹é½ */
  align-items: flex-start;
  /* é¡¶éƒ¨å¯¹é½ */
}

/* å¤ç”¨ .song-details çš„æ ·å¼ï¼Œä½†ç¡®ä¿å®ƒä¸ä¼šè¢«å‹ç¼© */
.song-details {
  text-align: center;
  flex-shrink: 0;
}

/* æ–°å¢çš„é‚€è¯·æŒ‰é’®æ ·å¼ */
.island-action-button {
  position: absolute;
  top: -5px;
  /* å¾®è°ƒå‚ç›´ä½ç½® */
  right: -5px;
  /* å¾®è°ƒæ°´å¹³ä½ç½® */
  background: none;
  border: none;
  padding: 5px;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.2s;
}

.island-action-button:hover {
  opacity: 1;
}

/* === æ–°å¢ï¼šé‚€è¯·è”ç³»äººå¯¹è¯æ¡†çš„CSS (è¿™æ˜¯ç¼ºå¤±çš„æ ·å¼éƒ¨åˆ†) === */

/* å¯¹è¯æ¡†çš„é®ç½©èƒŒæ™¯ */
.modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.4);
  display: none;
  /* JSä¼šæ§åˆ¶å®ƒæ˜¾ç¤º */
  justify-content: center;
  align-items: center;
  z-index: 1000;
  opacity: 0;
  transition: opacity 0.3s ease;
}

/* å¯¹è¯æ¡†ä¸»ä½“ */
.modal-content {
  background-color: #f7f7f7;
  border-radius: 18px;
  box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
  width: 300px;
  /* å¯¹è¯æ¡†å®½åº¦ */
  max-width: 90%;
  transform: scale(0.95);
  transition: transform 0.3s ease;
}

/* å¯¹è¯æ¡†å¤´éƒ¨ */
.modal-header {
  position: relative !important;
  /* ä½œä¸ºå®šä½åŸºå‡† */
  background-color: #f2f2f7;
  border-bottom: 1px solid rgba(60, 60, 67, 0.06);
  flex-shrink: 0;
  /* ç§»é™¤ flex å¸ƒå±€çš„å¹²æ‰°ï¼Œæ”¹ç”¨ç»å¯¹å®šä½å¸ƒå±€å­å…ƒç´  */
  display: block;
}

.modal-header h2 {
  color: #1c1c1e;
  /* æ·±é»‘è‰²æ ‡é¢˜ */
}

.modal-close-button {
  position: absolute !important;
  top: 50%;
  right: 15px;
  /* è·ç¦»å³è¾¹ 15px */
  transform: translateY(-50%) !important;
  /* å‚ç›´å±…ä¸­ */

  /* æ ·å¼ç¾åŒ– */
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background-color: #e5e5ea !important;
  /* æµ…ç°åº•è‰² */
  color: #8e8e93 !important;
  /* æ·±ç°å›¾æ ‡ */
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px !important;
  font-weight: 400;
  line-height: 1;
  cursor: pointer;
  z-index: 3;

  /* â–¼â–¼â–¼ æ ¸å¿ƒä¿®å¤ï¼šå»æ‰æ‰€æœ‰è¾¹æ¡†å’Œæè¾¹ â–¼â–¼â–¼ */
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* å¯¹è¯æ¡†å†…å®¹åŒºåŸŸ */
.modal-body {
  flex-grow: 1;
  /* å æ®å‰©ä½™ç©ºé—´ */
  overflow-y: auto;
  /* åªæœ‰è¿™é‡Œå¯ä»¥æ»šåŠ¨ */
  padding: 20px;
  /* ç»™å†…å®¹ç•™å‡ºå‘¼å¸ç©ºé—´ */

  /* éšè—æ»šåŠ¨æ¡ (ç¾è§‚) */
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.modal-body::-webkit-scrollbar {
  display: none;
}

/* åˆ—è¡¨é¡¹çš„æ ·å¼ (è¿™ä¸ªä¹‹å‰ç»™è¿‡ï¼Œè¯·ç¡®ä¿å®ƒå­˜åœ¨) */
.invite-contact-item {
  display: flex;
  align-items: center;
  padding: 8px 20px;
  transition: background-color 0.2s;
}

.invite-contact-item:hover {
  background-color: #f0f0f0;
}

.invite-contact-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  margin-right: 12px;
}

.invite-contact-name {
  font-size: 16px;
  color: #111;
  flex-grow: 1;
}

.invite-button {
  padding: 5px 15px;
  font-size: 13px;
  font-weight: 500;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border: none;
  border-radius: 20px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.invite-button.invited {
  background-color: #e5e5ea;
  color: #8e8e93;
  cursor: not-allowed;
}

/* === æ–°å¢ï¼šå…±äº«å¬æ­Œé‡å å¤´åƒçš„æ ·å¼ === */

/* å¤´åƒå®¹å™¨çš„æ ·å¼ */
.shared-avatars {
  position: absolute;
  /* ç»å¯¹å®šä½ï¼Œæµ®åŠ¨åœ¨å·¦ä¸Šè§’ */
  top: -5px;
  /* å‚ç›´æ–¹å‘å¾®è°ƒï¼Œä½¿å…¶ä¸æ­Œåå¯¹é½ */
  left: 0;
  display: flex;
  /* ä½¿ç”¨flexå¸ƒå±€æ¥æ’åˆ—å¤´åƒ */
  align-items: center;
  padding: 2px;
  display: none;
  /* é»˜è®¤çŠ¶æ€ä¸‹éšè— */
}

/* å½“éœ€è¦æ˜¾ç¤ºæ—¶ï¼ŒJSä¼šæ·»åŠ è¿™ä¸ª .active ç±» */
.shared-avatars.active {
  display: flex;
}

/* å•ä¸ªå¤´åƒçš„æ ·å¼ */
.shared-avatar-img {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  /* åœ†å½¢ */
  border: 2px solid rgba(255, 255, 255, 0.8);
  /* åŠé€æ˜ç™½è‰²è¾¹æ¡†ï¼Œå¢åŠ è´¨æ„Ÿ */
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  /* è½»å¾®é˜´å½± */
  object-fit: cover;
  /* é˜²æ­¢å›¾ç‰‡å˜å½¢ */
}

/* å…³é”®ï¼šè®©ç¬¬äºŒä¸ªå¤´åƒå‘å·¦ç§»åŠ¨ï¼Œä¸ç¬¬ä¸€ä¸ªå¤´åƒé‡å  */
.shared-avatar-img:nth-child(2) {
  margin-left: -12px;
}

/* === æ–°å¢ï¼šâ€œç»“æŸä¸€èµ·å¬â€ç¡®è®¤æ°”æ³¡çš„æ ·å¼ === */
.confirmation-bubble {
  position: absolute;
  top: 10%;
  left: 250%;
  transform: translateX(-50%);
  margin-top: 8px;

  background-color: rgba(60, 60, 60, 0.85);
  /* åŠé€æ˜æ·±ç°è‰²èƒŒæ™¯ */
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  color: white;
  padding: 8px 12px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);

  display: flex;
  align-items: center;
  gap: 10px;
  white-space: nowrap;
  /* é˜²æ­¢æ–‡å­—æ¢è¡Œ */

  /* é»˜è®¤éšè—ï¼Œé€šè¿‡JSæ§åˆ¶æ˜¾ç¤º */
  opacity: 0;
  visibility: hidden;
  transform: translateX(-50%) translateY(-5px);
  /* å¢åŠ ä¸€ä¸ªè½»å¾®çš„ä¸Šç§»åŠ¨ç”» */
  transition: opacity 0.2s ease, transform 0.2s ease, visibility 0.2s;
  z-index: 10;
}

/* JSæ·»åŠ  .active ç±»æ—¶ï¼Œæ°”æ³¡æ˜¾ç¤ºå‡ºæ¥ */
.confirmation-bubble.active {
  opacity: 1;
  visibility: visible;
  transform: translateX(-50%) translateY(0);
}

.confirmation-bubble span {
  font-size: 14px;
}

.confirmation-bubble button {
  background-color: #ff3b30;
  /* çº¢è‰²èƒŒæ™¯ */
  color: white;
  border: none;
  border-radius: 8px;
  padding: 4px 10px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
}

/* === æ–°å¢ï¼šç”¨äºåœ¨èŠå¤©ç•Œé¢æ˜¾ç¤ºç³»ç»Ÿæç¤ºçš„æ ·å¼ === */
.system-notification {
  text-align: center;
  margin: 10px auto;
  padding: 6px 14px;
  font-size: 12px;
  font-weight: 500;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border-radius: 20px;
  width: fit-content;
  pointer-events: none;
}

/* --- è¾“å…¥æ¡†åŒ…è£…å±‚çš„æ­£ç¡®æ ·å¼ --- */
.chat-input-wrapper {
  position: relative;
  /* è¿™æ˜¯æœ€å…³é”®çš„ä¸€æ­¥ï¼ä¸ºå†…éƒ¨çš„æŒ‰é’®æä¾›å®šä½å‚è€ƒ */
  flex-grow: 1;
  display: flex;
  align-items: center;
}

/* --- è¡¨æƒ…æŒ‰é’®çš„æ­£ç¡®æ ·å¼ --- */
#chat-emoji-button {
  position: static;
  transform: none;
  right: 5px;
  top: 50%;

  color: #333;
  width: 30px;
  height: 30px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  flex-shrink: 0;
  /* é˜²æ­¢è¢«æŒ¤å‹ */
}

#chat-emoji-button svg {
  width: 22px;
  height: 22px;
}

/* --- è¾“å…¥æ¡†çš„æ­£ç¡®æ ·å¼ --- */
.chat-input-area input {
  width: 100%;
  padding-right: 15px;
  /* åœ¨å³ä¾§ç•™å‡ºç©ºé—´ç»™æŒ‰é’® */
  box-sizing: border-box;
}

/* --- æ–°å¢ï¼šè¡¨æƒ…é€‰æ‹©é¢æ¿çš„æ ·å¼ --- */

#emoji-panel {
  position: absolute;
  left: 0;
  width: 100%;
  z-index: 15;

  /* é«˜åº¦å’Œä½ç½® */
  height: var(--emoji-panel-height);
  bottom: calc(var(--emoji-panel-height) * -1);

  /* å¸ƒå±€ */
  display: flex;
  flex-direction: column;

  /* è§†è§‰é£æ ¼ */
  background-color: rgba(255, 255, 255, 1);

  padding-bottom: 20px;

  /* â–¼â–¼â–¼ æ ¸å¿ƒä¿®å¤ï¼šé»˜è®¤çŠ¶æ€ä¸‹ä¸å¯è§ â–¼â–¼â–¼ */
  visibility: hidden;

  /* åŠ¨ç”»é€»è¾‘ï¼š
       bottom: 0.35s (è¿åŠ¨æ—¶é—´)
       visibility: 0s (å˜åŒ–æ—¶é—´) linear 0.35s (å»¶è¿Ÿæ—¶é—´ - ç­‰æ»‘ä¸‹å»å†éšè—) 
    */
  /* â–¼â–¼â–¼ æ ¸å¿ƒä¼˜åŒ–ï¼šä½¿ç”¨ iOS åŸç”Ÿå‡é€Ÿæ›²çº¿ï¼Œå®ç°æ— ç¼åŒæ­¥ â–¼â–¼â–¼ */
  transition: bottom 0.35s cubic-bezier(0.32, 0.72, 0, 1),
    visibility 0s linear 0.35s;
}

/* 3. è®©å…¶ä»–å…ƒç´ çš„åŠ¨ç”»ä¹Ÿä½¿ç”¨ç»Ÿä¸€çš„æ›²çº¿ */
/* â–¼â–¼â–¼ æ ¸å¿ƒä¼˜åŒ–ï¼šåº•æ å’Œæ¶ˆæ¯å®¹å™¨ä½¿ç”¨ç›¸åŒçš„åŠ¨ç”»æ›²çº¿å’Œæ—¶é•¿ï¼Œå®ç°å®Œç¾åŒæ­¥ â–¼â–¼â–¼ */
.chat-input-area,
.chat-messages-container {
  transition: bottom 0.35s cubic-bezier(0.32, 0.72, 0, 1),
    padding-bottom 0.35s cubic-bezier(0.32, 0.72, 0, 1);
}

/* --- æ¿€æ´»çŠ¶æ€ï¼šæ‰€æœ‰è·ç¦»éƒ½å°†æ ¹æ®å˜é‡è‡ªåŠ¨è®¡ç®— --- */

/* è¡¨æƒ…é¢æ¿ä¸Šç§» */
#chat-screen.emoji-panel-active #emoji-panel {
  bottom: 0;

  /* â–¼â–¼â–¼ æ ¸å¿ƒä¿®å¤ï¼šæ¿€æ´»æ—¶ç«‹å³æ˜¾ç¤º â–¼â–¼â–¼ */
  visibility: visible;
  /* ç§»é™¤å»¶è¿Ÿï¼Œç«‹å³å˜ä¸ºå¯è§ï¼Œç„¶åå¼€å§‹å‘ä¸Šæ»‘ */
  transition-delay: 0s;
}

/* è¾“å…¥æ ä¸Šç§»ï¼Œç§»åŠ¨çš„è·ç¦»å°±æ˜¯å˜é‡çš„å€¼ */
#chat-screen.emoji-panel-active .chat-input-area {
  bottom: var(--emoji-panel-height);
}

/* æ¶ˆæ¯å®¹å™¨å¢åŠ å†…è¾¹è·ï¼Œä½¿ç”¨ calc() è‡ªåŠ¨è®¡ç®—æ€»é«˜åº¦ */
#chat-screen.emoji-panel-active .chat-messages-container {
  /* 70px(åŸåº•æ é«˜) + 20px(æ–°å¢é—´è·) + é¢æ¿é«˜åº¦ */
  padding-bottom: calc(100px + var(--emoji-panel-height));
}

/* === æ–°å¢ï¼šæ›´å¤šåŠŸèƒ½é¢æ¿æ¿€æ´»æ—¶çš„åº•æ è”åŠ¨ === */
/* è¾“å…¥æ ä¸Šç§»ï¼Œæ— ç¼è¡”æ¥ */
#chat-screen.features-panel-active .chat-input-area {
  bottom: var(--features-panel-height);
}

/* æ¶ˆæ¯å®¹å™¨å¢åŠ å†…è¾¹è· */
#chat-screen.features-panel-active .chat-messages-container {
  padding-bottom: calc(100px + var(--features-panel-height));
}
/* --- æ–°å¢ï¼šè¡¨æƒ…é¢æ¿å†…éƒ¨çš„æ ·å¼ --- */

/* 1. é¢æ¿å¤´éƒ¨çš„ flex å¸ƒå±€ï¼Œè®©æŒ‰é’®åˆ†å¸ƒåœ¨ä¸¤ç«¯ */
.emoji-panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 20px;
  flex-shrink: 0;
}

/* 2. å¤´éƒ¨æŒ‰é’®çš„ç®€å•æ ·å¼ */
.panel-header-button {
  /* è‹¹æœè“æ–‡å­— */
  font-size: 13px;
  font-weight: 600;
  border: none;
  padding: 6px 8px;
  border-radius: 20px;
  /* èƒ¶å›Šå½¢çŠ¶ */
  cursor: pointer;
  transition: all 0.2s ease;
}

.panel-header-button:hover {
  transform: scale(1.02);
}

.panel-header-button:active {
  transform: scale(0.95);
  background-color: rgba(0, 122, 255, 0.2);
}

/* 3. è¡¨æƒ…æ˜¾ç¤ºçš„ç½‘æ ¼å®¹å™¨ */
/* 3. è¡¨æƒ…æ˜¾ç¤ºçš„ç½‘æ ¼å®¹å™¨ (ä¿®æ­£ç‰ˆ) */
#emoji-grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(64px, 1fr));
  gap: 12px;
  row-gap: 2px;
  padding: 5px 10px;
  box-sizing: border-box;
  
  /* æ»šåŠ¨ç›¸å…³å…³é”®è®¾ç½® */
  flex-grow: 1;
  min-height: 0;                /* è§£å†³ Flex åµŒå¥—ä¸‹çš„é«˜åº¦è®¡ç®—é—®é¢˜ */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch; 
  
  /* ç¡®ä¿åœ¨æŸäº›å®¹å™¨ä¸‹å¯è§ */
  height: 100%;                 
  background-color: transparent !important;
}

.memory-prompt-input {
  /* æ»šåŠ¨ç›¸å…³å…³é”®è®¾ç½® */
  flex-grow: 1;
  min-height: 0;                /* è§£å†³ Flex åµŒå¥—ä¸‹çš„é«˜åº¦è®¡ç®—é—®é¢˜ */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch; 
}

/* 4. å•ä¸ªè¡¨æƒ…å›¾ç‰‡çš„æ ·å¼ */
/* 2. å•ä¸ªè¡¨æƒ…å›¾ç‰‡çš„æ ·å¼ (æ ¸å¿ƒä¿®æ”¹) */
.emoji-item {
  width: 100%;
  aspect-ratio: 1 / 1;
  object-fit: contain;
  /* ä¿æŒæ¯”ä¾‹å®Œæ•´æ˜¾ç¤º */

  /* å›¾ç‰‡ç¾åŒ– */
  background-color: rgba(255, 255, 255, 0.6);
  /* ç»™é€æ˜å›¾ç‰‡åŠ ä¸ªæ·¡ç™½åº• */
  border-radius: 14px;
  /* æ–¹åœ†è§’ */

  border: 1px solid rgba(0, 0, 0, 0.02);

  cursor: pointer;
  transition: transform 0.2s;
}

.emoji-item:hover {
  transform: scale(1.1);
  /* é¼ æ ‡æ‚¬æµ®æ—¶æ”¾å¤§ä¸€ç‚¹ */
}

/* 3. è¡¨æƒ…é¡¹å¤–å±‚å®¹å™¨çš„æ ·å¼ (ä¿æŒä¸å˜) */
.emoji-item-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 2px;
  position: relative;
  transition: transform 0.2s;
}

.emoji-item-container:active {
  transform: scale(0.92);
}

/* 4. å¯ç¼–è¾‘å¤‡æ³¨çš„æ ·å¼ (ä¿æŒä¸å˜) */
.emoji-remark {
  font-size: 11px;
  color: #8e8e93;
  /* æ¬¡çº§ç°è‰² */
  background-color: transparent;
  border: none;
  text-align: center;
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.emoji-remark:focus {
  background-color: #fff;
  border: 1px solid #007aff;
  outline: none;
  white-space: normal;
  overflow: visible;
}

.sticker-bubble {
  padding: 0;
  background-color: transparent;

  max-width: 80px;

  max-height: 80px;

  border-radius: 8px;

  object-fit: contain;

  box-shadow: none !important;
}

/* === æ–°å¢ï¼šè¡¨æƒ…åŒ…åˆ é™¤æ¨¡å¼çš„æ ·å¼ === */

/* 1. è®©æ¯ä¸ªè¡¨æƒ…åŒ…çš„å®¹å™¨æˆä¸ºå¤é€‰æ¡†çš„å®šä½åŸºå‡† */
.emoji-item-container {
  position: relative;
}

/* 2. å¤é€‰æ¡†çš„æ ·å¼ï¼Œé»˜è®¤éšè— */
.emoji-checkbox {
  display: none;
  /* é»˜è®¤ä¸æ˜¾ç¤º */
  position: absolute;
  top: -2px;
  right: -2px;
  width: 20px;
  height: 20px;
  z-index: 5;
  /* ç¡®ä¿åœ¨å›¾ç‰‡ä¹‹ä¸Šï¼Œå¯ä»¥è¢«ç‚¹å‡» */
}

/* 3. å½“ç½‘æ ¼è¿›å…¥åˆ é™¤æ¨¡å¼æ—¶ï¼Œæ˜¾ç¤ºå¤é€‰æ¡† */
.emoji-grid-container.delete-mode .emoji-checkbox {
  display: block;
}

/* 4. (å¯é€‰) åˆ é™¤æ¨¡å¼ä¸‹ï¼Œç»™é€‰ä¸­çš„è¡¨æƒ…ä¸€ä¸ªè§†è§‰åé¦ˆ */
/* è¯·åªä¿ç•™ä¸‹é¢è¿™ä¸€æ®µå…³äºé€‰ä¸­æ ·å¼çš„ CSS */

#emoji-grid-container.delete-mode .emoji-item-container.selected {
  aspect-ratio: 1 / 1;
  /* ä¸ºäº†ç¡®ä¿è¿™æ¬¡ä¸€å®šèƒ½çœ‹åˆ°æ•ˆæœï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªéå¸¸å¼ºçƒˆçš„æ ·å¼ã€‚
    å¦‚æœè¿™ä¸ªæ ·å¼ç”Ÿæ•ˆäº†ï¼Œæ‚¨å¯ä»¥å†æŠŠå®ƒæ”¹æˆæ‚¨å–œæ¬¢çš„æ ·å­ã€‚
    */
  border: 3px solid #007aff !important;
  /* ä¸€ä¸ª3pxå®½ã€ä¸é€æ˜çš„è“è‰²å®çº¿è¾¹æ¡† */
  background-color: rgba(0, 122, 255, 0.15) !important;
  /* ä¸€ä¸ªæ›´æ˜æ˜¾çš„æ·¡è“è‰²èƒŒæ™¯ */

  border-radius: 8px;
  /* åœ†è§’ */
  transform: scale(0.95);
  /* è½»å¾®ç¼©å°ä»¥ç¤ºåŒºåˆ« */
  box-shadow: none !important;
  /* ç¡®ä¿æ²¡æœ‰å…¶ä»–é˜´å½±è¦†ç›–è¾¹æ¡† */
}

/* ç¡®ä¿å®¹å™¨æœ‰è¿‡æ¸¡æ•ˆæœï¼Œè®©åŠ¨ç”»æ›´å¹³æ»‘ */
.emoji-item-container {
  position: relative;
  transition: all 0.2s ease-in-out;
}

/* === æ–°å¢ï¼šç¾åŒ–Appçš„åŠ¨ç”»æ§åˆ¶ === */

/* é»˜è®¤çŠ¶æ€ï¼šç¾åŒ–é¡µå®Œå…¨é€æ˜ï¼Œå¹¶ä¸”æ— æ³•äº¤äº’ */
#beautify-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  /* é»˜è®¤åœ¨ä¸‹å±‚ */
}

/* å½“ phone-frame æ‹¥æœ‰ .show-beautify ç±»åæ—¶ */
.phone-frame.show-beautify #home-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
}

.phone-frame.show-beautify #beautify-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  /* ç¾åŒ–é¡µæµ®ä¸Šæ¥ */
}

/* === æ–°å¢ï¼šå…¨å±€ç¾åŒ–é¡µé¢çš„åŠ¨ç”»æ§åˆ¶ === */

/* é»˜è®¤çŠ¶æ€ï¼šåœ¨ä¸‹å±‚ï¼Œä¸å¯è§ */
#global-beautify-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 3;
  /* å±‚çº§æ¯”ç¾åŒ–ä¸»é¡µé«˜ */
  background-color: #f2f2f7;
  /* é»˜è®¤æµ…ç°èƒŒæ™¯ */
  transition: opacity 0.3s ease;
  /* æ·»åŠ å¹³æ»‘è¿‡æ¸¡ */
}

/* æ¿€æ´»çŠ¶æ€ï¼šå½“ phone-frame æ‹¥æœ‰ .show-global-beautify ç±»åæ—¶ */
.phone-frame.show-global-beautify #beautify-screen {
  opacity: 0;
  /* éšè—ä¸Šä¸€çº§é¡µé¢ */
  pointer-events: none;
}

.phone-frame.show-global-beautify #global-beautify-screen {
  opacity: 1;
  /* æ˜¾ç¤ºå½“å‰é¡µé¢ */
  pointer-events: auto;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode #global-beautify-screen {
  background-color: #1c1c1e;
}

.phone-frame.dark-mode #global-css-input {
  background-color: #2c2c2e;
  color: #f5f5f7;
  border: 1px solid #3a3a3c;
}

/* === æ–°å¢ï¼šä¸»é¢˜é¢„è®¾ç•Œé¢åŠ¨ç”»æ§åˆ¶ === */
#theme-presets-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
}

.phone-frame.show-theme-presets #beautify-screen {
  opacity: 0;
  pointer-events: none;
}

.phone-frame.show-theme-presets #theme-presets-screen {
  opacity: 1;
  pointer-events: auto;
}

/* ä¸»é¢˜é¢„è®¾å¡ç‰‡æ ·å¼ - æç®€é«˜å…‰æ‰å¹³ç‰ˆ */
.theme-preset-item {
  display: flex;
  flex-direction: column;
  background-color: #ffffff; /* çº¯ç™½èƒŒæ™¯ */
  border-radius: 14px;
  padding: 16px;
  margin: 0 auto 16px auto;
  width: 92%;
  box-sizing: border-box;

  /* æ ¸å¿ƒï¼šå–æ¶ˆé˜´å½±ï¼Œä½¿ç”¨ç²¾è‡´çš„ç¡¬è¾¹æ¡† */
  border: 1.5px solid #1c1c1e;

  /* æ¨¡æ‹Ÿâ€œé«˜å…‰â€å±‚ï¼šåœ¨å¡ç‰‡é¡¶éƒ¨åŠ ä¸€æ¡æç»†çš„äº®è‰²å†…è¾¹æ¡† */
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
  position: relative;
  transition: transform 0.1s ease;
}

/* å¢åŠ æ‚¬åœæ—¶çš„æ‰å¹³åé¦ˆï¼Œè€Œä¸æ˜¯é˜´å½± */
.theme-preset-item:active {
  transform: translateY(1px);
}

.theme-preset-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.theme-preset-name {
  font-size: 15px;
  font-weight: 800; /* åŠ ç²—ä½“ç°æ‰å¹³åŠ›é‡æ„Ÿ */
  color: #1c1c1e;
  text-transform: uppercase; /* å¢å¼ºè®¾è®¡æ„Ÿ */
}

.theme-preset-time {
  font-size: 11px;
  color: #8e8e93;
  font-weight: 500;
}

/* é¢„è§ˆåŒºåŸŸï¼šä½¿ç”¨ä½é¥±å’Œåº¦çš„è‰²å—åˆ¶é€ â€œå‡¹é™·â€æ„Ÿ */
.theme-preset-preview {
  font-size: 12px;
  color: #48484a;
  background-color: #f2f2f7; /* ä¸èƒŒæ™¯ç™½æ‹‰å¼€å·®è· */
  padding: 12px;
  border-radius: 8px;
  font-family: "SF Mono", ui-monospace, monospace;
  border: 1px solid #e5e5ea;
  max-height: 60px;
  overflow: hidden;
  margin-bottom: 16px;
}

.theme-preset-actions {
  display: flex;
  gap: 8px;
  justify-content: flex-end;
}

/* æ‰å¹³åŒ–æŒ‰é’®ï¼šå¼ºå¯¹æ¯”ã€æ— æ¸å˜ */
.theme-preset-actions button {
  padding: 8px 16px;
  border-radius: 8px;
  border: 1.5px solid #1c1c1e; /* ç»Ÿä¸€çš„é»‘è¾¹æ¡† */
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  background-color: #fff;
  transition: all 0.15s ease;
}

/* åº”ç”¨æŒ‰é’®ï¼šå®è‰²å¡«å…… */
.theme-preset-actions .apply-btn {
  background-color: #1c1c1e;
  color: #fff;
}

.theme-preset-actions .apply-btn:active {
  background-color: #48484a;
}

/* å¯¼å‡ºæŒ‰é’®ï¼šçº¿æ¡†é£æ ¼ */
.theme-preset-actions .export-btn {
  background-color: #fff;
  color: #1c1c1e;
}

.theme-preset-actions .export-btn:active {
  background-color: #f2f2f7;
}

/* åˆ é™¤æŒ‰é’®ï¼šè­¦å‘Šçº¢çº¿æ¡† */
.theme-preset-actions .delete-btn {
  border-color: #ff3b30;
  color: #ff3b30;
  background-color: #fff;
}

.theme-preset-actions .delete-btn:active {
  background-color: #fff5f5;
}

/* --- æ·±è‰²æ¨¡å¼é€‚é… --- */
.phone-frame.dark-mode .theme-preset-item {
  background-color: #1c1c1e;
  border-color: #ffffff;
}

.phone-frame.dark-mode .theme-preset-name {
  color: #ffffff;
}

.phone-frame.dark-mode .theme-preset-preview {
  background-color: #2c2c2e;
  border-color: #3a3a3c;
  color: #d1d1d6;
}

.phone-frame.dark-mode .theme-preset-actions button {
  border-color: #ffffff;
  background-color: #1c1c1e;
  color: #ffffff;
}

.phone-frame.dark-mode .theme-preset-actions .apply-btn {
  background-color: #ffffff;
  color: #1c1c1e;
}
/* === æ–°å¢ï¼šæ°”æ³¡é¢„è®¾ç•Œé¢åŠ¨ç”»æ§åˆ¶ === */
#bubble-presets-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
}

.phone-frame.show-bubble-presets #beautify-screen {
  opacity: 0;
  pointer-events: none;
}

.phone-frame.show-bubble-presets #bubble-presets-screen {
  opacity: 1;
  pointer-events: auto;
}

/* --- æ°”æ³¡é¢„è®¾å¡ç‰‡æ ·å¼ (æ‰å¹³é«˜å…‰ç‰ˆ) --- */
.bubble-preset-item {
  display: flex;
  flex-direction: column;
  background-color: #ffffff;
  border-radius: 14px;
  padding: 16px;
  margin: 0 auto 16px auto;
  width: 92%;
  box-sizing: border-box;

  /* æ ¸å¿ƒï¼šç”¨ç²¾å¯†è¾¹æ¡†å–ä»£é˜´å½± */
  border: 1.5px solid #1c1c1e;
  /* å¾®å¼±å†…é«˜å…‰ï¼Œå¢åŠ è´¨æ„Ÿ */
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
  position: relative;
}

.bubble-preset-item .preset-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.bubble-preset-item .preset-name {
  font-size: 15px;
  font-weight: 800;
  color: #1c1c1e;
  letter-spacing: -0.2px;
}

.bubble-preset-item .preset-time {
  font-size: 11px;
  color: #8e8e93;
  font-weight: 500;
}

/* é¢„è§ˆåŒºï¼šå‡¹é™·è‰²å—æ„Ÿ */
.bubble-preset-item .preset-preview {
  font-size: 12px;
  color: #48484a;
  background-color: #f2f2f7;
  padding: 12px;
  border-radius: 10px;
  font-family: "SF Mono", ui-monospace, monospace;
  border: 1px solid #e5e5ea;
  max-height: 64px;
  overflow: hidden;
  margin-bottom: 16px;
  white-space: pre-wrap;
  word-break: break-all;
}

.bubble-preset-item .preset-actions {
  display: flex;
  gap: 10px;
  justify-content: flex-end;
}

/* æŒ‰é’®ï¼šç¡¬æ ¸æ‰å¹³é£æ ¼ */
.bubble-preset-item .preset-actions button {
  padding: 7px 16px;
  border-radius: 8px;
  border: 1.5px solid #1c1c1e;
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  background-color: #fff;
  transition: all 0.15s ease;
}

/* åˆ†äº«æŒ‰é’®ï¼šä½¿ç”¨å“ç‰Œè‰²ä½†ä¿æŒæ‰å¹³ */
.bubble-preset-item .share-btn {
  background-color: #34c759 !important;
  color: #fff !important;
  border-color: #1c1c1e !important; /* ä¿æŒé»‘è‰²è¾¹æ¡†ç»Ÿä¸€æ„Ÿ */
}

.bubble-preset-item .share-btn:active {
  background-color: #28a745 !important;
  transform: translateY(1px);
}

/* åˆ é™¤æŒ‰é’®ï¼šçº¢çº¿æ¡† */
.bubble-preset-item .delete-btn {
  color: #ff3b30 !important;
  border-color: #ff3b30 !important;
  background-color: #fff !important;
}

.bubble-preset-item .delete-btn:active {
  background-color: #fff5f5 !important;
  transform: translateY(1px);
}

/* --- æ°”æ³¡é€‰æ‹©å¼¹çª—å†…çš„åˆ—è¡¨é¡¹ --- */
.bubble-select-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 14px 16px;
  margin: 0 12px 10px 12px;
  background-color: #ffffff;
  /* é€‰æ‹©é¡¹ä½¿ç”¨ç¨ç»†çš„è¾¹æ¡†ï¼Œä»¥ç¤ºåŒºåˆ† */
  border: 1.2px solid #e5e5ea;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.bubble-select-item:hover {
  border-color: #1c1c1e;
  background-color: #fcfcfc;
}

.bubble-select-item:active {
  background-color: #f2f2f7;
  transform: scale(0.98);
}

.bubble-select-item .item-name {
  font-size: 14px;
  font-weight: 600;
  color: #1c1c1e;
}

.bubble-select-item .item-preview {
  font-size: 11px;
  color: #8e8e93;
  max-width: 130px;
  background: #f2f2f7;
  padding: 2px 8px;
  border-radius: 4px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* --- æ·±è‰²æ¨¡å¼é€‚é… --- */
.phone-frame.dark-mode .bubble-preset-item {
  background-color: #1c1c1e;
  border-color: #ffffff;
}

.phone-frame.dark-mode .bubble-preset-item .preset-name {
  color: #ffffff;
}

.phone-frame.dark-mode .bubble-preset-item .preset-preview {
  background-color: #2c2c2e;
  border-color: #3a3a3c;
  color: #d1d1d6;
}

.phone-frame.dark-mode .bubble-select-item {
  background-color: #2c2c2e;
  border-color: #3a3a3c;
}

.phone-frame.dark-mode .bubble-select-item .item-name {
  color: #f5f5f7;
}

.phone-frame.dark-mode .bubble-preset-item .preset-actions button {
  border-color: #ffffff;
  background-color: #1c1c1e;
  color: #ffffff;
}
/* === ä¿®å¤ï¼šç¡®ä¿ç¾åŒ–Appçš„beautify-gridå¯æ»šåŠ¨  === */
#beautify-screen .settings-content {
  height: 100%; /* æˆ–è€…ä¸€ä¸ªå›ºå®šå€¼å¦‚ 500px */
  overflow-y: auto;
  display: block; /* ç¡®ä¿å®ƒæ˜¯å—çº§å…ƒç´  */
  /* iOS PWA æ»šåŠ¨ä¿®å¤ */
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
}

.beautify-grid {
  padding-bottom: 30px;
  /* iOS PWA æ»šåŠ¨ä¿®å¤ - ç¡®ä¿å†…å®¹åŒºåŸŸå¯æ»šåŠ¨ */
  overflow-y: auto;
  -webkit-overflow-scrolling: touch;
  overscroll-behavior-y: contain;
}

/* æ°”æ³¡é¢„è®¾é€‰æ‹©å¼¹çª—æ ·å¼ */
#bubble-preset-select-modal {
  z-index: 9999 !important;
  position: fixed !important;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  justify-content: center;
  align-items: center;
}

#bubble-preset-select-modal .modal-content {
  max-width: 350px;
  width: 90%;
  background: #fff;
  border-radius: 14px;
  overflow: hidden;
}

/* === ä¸»é¢˜é¢„è®¾å’Œæ°”æ³¡é¢„è®¾ç•Œé¢æ»šåŠ¨ä¿®å¤ === */
#theme-presets-screen,
#bubble-presets-screen {
  display: flex;
  flex-direction: column;
  height: 100%;
}

#theme-presets-screen .settings-content,
#bubble-presets-screen .settings-content,
#theme-presets-container,
#bubble-presets-container {
  flex: 1;
  overflow-y: auto !important;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  max-height: calc(100% - 50px);
}

#theme-presets-list,
#bubble-presets-list {
  padding: 10px 0;
}

/* === æ–°å¢:æ›´æ¢å›¾æ ‡ç•Œé¢çš„åŠ¨ç”»æ§åˆ¶ === */

/* é»˜è®¤çŠ¶æ€ï¼šæ›´æ¢å›¾æ ‡é¡µå®Œå…¨é€æ˜ï¼Œå¹¶ä¸”æ— æ³•äº¤äº’ */
#icon-settings-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  /* é»˜è®¤åœ¨ä¸‹å±‚ */
}

/* å½“ phone-frame æ‹¥æœ‰ .show-icon-settings ç±»åæ—¶ */
.phone-frame.show-icon-settings #beautify-screen {
  opacity: 0;
  /* éšè—ç¾åŒ–ç•Œé¢ */
  pointer-events: none;
  z-index: 2;
}

.phone-frame.show-icon-settings #icon-settings-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 3;
  /* æ›´æ¢å›¾æ ‡é¡µæµ®ä¸Šæ¥ï¼Œå±‚çº§è¦æ¯”ç¾åŒ–é¡µæ›´é«˜ */
}

/* === æ–°å¢ï¼šå›¾æ ‡æ›´æ¢åˆ—è¡¨çš„æ ·å¼ === */
.icon-setting-item {
  display: flex;
  align-items: center;
  width: 90%;
  margin: 0 auto 15px auto;
  /* ä¸Šä¸‹15pxé—´è·ï¼Œå·¦å³è‡ªåŠ¨å±…ä¸­ */
  padding: 10px;
  background-color: #f7f7f7;
  border-radius: 12px;
}

.icon-preview {
  width: 50px;
  height: 50px;
  border-radius: 12px;
  margin-right: 15px;
  object-fit: cover;
  flex-shrink: 0;
  /* é˜²æ­¢å›¾æ ‡è¢«å‹ç¼© */
}

.icon-details {
  display: flex;
  flex-direction: column;
  gap: 8px;
  flex-grow: 1;
  /* å æ®æ‰€æœ‰å‰©ä½™ç©ºé—´ */
  min-width: 0;
  /* é˜²æ­¢å†…å®¹æº¢å‡ºæ—¶ç ´åå¸ƒå±€ */
}

.app-name-setting {
  font-size: 16px;
  font-weight: 500;
  color: #111;
}

.icon-url-input {
  width: 100%;
  padding: 8px;
  border: 1px solid #dcdcdc;
  border-radius: 8px;
  font-size: 12px;
  background-color: #fff;
  box-sizing: border-box;
  /* ç¡®ä¿paddingä¸ä¼šæ’‘å¤§å®½åº¦ */
}

/* === æ–°å¢ï¼šæ›´æ¢æ—¶é’Ÿç•Œé¢çš„åŠ¨ç”»æ§åˆ¶ === */

/* é»˜è®¤çŠ¶æ€ï¼šæ—¶é’Ÿè®¾ç½®é¡µå®Œå…¨é€æ˜ï¼Œä¸”æ— æ³•äº¤äº’ */
#clock-settings-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  /* é»˜è®¤åœ¨ä¸‹å±‚ */
}

/* å½“ .phone-frame æ‹¥æœ‰ .show-clock-settings ç±»åæ—¶ */
.phone-frame.show-clock-settings #beautify-screen {
  opacity: 0;
  /* éšè—ç¾åŒ–ç•Œé¢ */
  pointer-events: none;
  z-index: 3;
}

.phone-frame.show-clock-settings #clock-settings-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 4;
  /* å±‚çº§æ¯”å›¾æ ‡æ›´æ¢é¡µæ›´é«˜ */
}

/* === æ–°å¢ï¼šæ—¶é’Ÿé«˜æ–¯æ¨¡ç³ŠèƒŒæ™¯æ•ˆæœ === */
.clock.clock-blur-enabled {
  /* 1. åŠé€æ˜èƒŒæ™¯è‰²ï¼Œè¿™æ˜¯æ¨¡ç³Šæ•ˆæœèƒ½çœ‹åˆ°ä¸œè¥¿çš„å‰æ */
  background-color: rgba(255, 255, 255, 0.15);

  /* 2. æ ¸å¿ƒï¼šé«˜æ–¯æ¨¡ç³Šæ•ˆæœ */
  -webkit-backdrop-filter: blur(15px);
  /* å…¼å®¹ Safari */
  backdrop-filter: blur(15px);

  /* 3. ç¾åŒ–æ ·å¼ï¼Œè®©å®ƒçœ‹èµ·æ¥åƒä¸ªåœ†è§’å¡ç‰‡ */
  padding: 5px 20px;
  border-radius: 25px;

  /* 4. ï¼ˆå¯é€‰ï¼‰æ·»åŠ ä¸€ç‚¹è¾¹æ¡†å’Œé˜´å½±å¢åŠ è´¨æ„Ÿ */
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

/* === æ–°å¢ï¼šå›åˆ°åº•éƒ¨æŒ‰é’®çš„æ ·å¼ === */
#scroll-to-bottom-btn {
  /* å®šä½å’Œå°ºå¯¸ */
  position: absolute;
  right: 20px;
  bottom: 100px;
  /* å®šä½åœ¨è¾“å…¥æ¡†ä¸Šæ–¹ */
  width: 25px;
  height: 25px;
  z-index: 30;
  /* ç¡®ä¿åœ¨æ¶ˆæ¯ä¹‹ä¸Š */

  /* è§†è§‰æ ·å¼ */
  background-color: white;
  border-radius: 50%;
  /* åœ†å½¢ */
  border: none;
  cursor: pointer;

  /* é˜´å½±å’Œå‘å…‰æ•ˆæœï¼Œå¢å¼ºç«‹ä½“æ„Ÿ */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15), 0 0 20px rgba(0, 122, 255, 0.1);

  /* å†…éƒ¨SVGå±…ä¸­ */
  display: flex;
  justify-content: center;
  align-items: center;

  /* éšè—/æ˜¾ç¤ºåŠ¨ç”»æ•ˆæœ */
  opacity: 0;
  visibility: hidden;
  transform: translateY(15px);
  transition: all 0.25s ease-out;
}
.scroll-to-bottom-btn svg{
  width:15px;
  height:15px;
}

/* å½“æŒ‰é’®éœ€è¦æ˜¾ç¤ºæ—¶ï¼ŒJSä¼šä¸ºå…¶æ·»åŠ è¿™ä¸ªç±» */
#scroll-to-bottom-btn.visible {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}

/* ä¿®å¤ï¼šå½“æ›´å¤šåŠŸèƒ½é¢æ¿å¼¹å‡ºæ—¶ï¼Œéšè—å›åˆ°åº•éƒ¨æŒ‰é’®ä»¥é˜²æ­¢è¯¯è§¦ (ç”± features-panel-active ç±»æ§åˆ¶) */
.features-panel-active #scroll-to-bottom-btn,
.features-panel-active #scroll-to-bottom-btn.visible {
  display: none !important;
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
}

/* === START: SHOPMALL SCREEN CSS === */

/* Default state: Shop page is transparent and cannot be interacted with */
#shop-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  /* Default on a lower layer */
}

/* When the phone-frame has the .show-shop class */
.phone-frame.show-shop #home-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
}

.phone-frame.show-shop #shop-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
  /* Bring the shop page to the top */
}

/* Style for the blue, bold title */
#shop-screen .settings-header h1 {
  color: #007aff;
  /* A standard blue color */
  font-weight: bold;
}

/* === START: ä¸ƒè¢‹è´­ç‰©èº«ä»½å¤´åƒ CSS === */
.shopper-avatar-btn {
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
  border-radius: 50%;
}

.shopper-avatar-btn img {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  /* åœ†å½¢ */
  border: 1.5px solid rgba(0, 0, 0, 0.1);
  object-fit: cover;
  /* é˜²æ­¢å›¾ç‰‡å˜å½¢ */
  display: block;
}

/* === END: ä¸ƒè¢‹è´­ç‰©èº«ä»½å¤´åƒ CSS === */

/* === START: SHOPMALL åº•æ å’Œå†…å®¹é¢æ¿ CSS === */

/* å†…å®¹åŒºåŸŸä¸»å®¹å™¨ï¼Œä½¿ç”¨flexå¸ƒå±€æ¥ç®¡ç†é¢æ¿å’Œåº•æ  */
#shop-screen {
  display: flex;
  flex-direction: column;
}

/* â–¼â–¼â–¼ START: å•†åŸåˆ†ç±»æ æœ€ç»ˆä¿®å¤ç‰ˆ â–¼â–¼â–¼ */

/* 1. ç¡®ä¿è¿™æ˜¯ä¸»æ»šåŠ¨å®¹å™¨ */
#shop-main-content {
  /* 1. ç§»é™¤é»˜è®¤çš„å¤§é¢ä¸Šå†…è¾¹è·ï¼Œç”± .category-tabs è‡ªå·±æ’‘å¼€ */
  padding-top: 0 !important;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  position: relative;
  overflow-y: auto;
}

/* 2. ã€æ ¸å¿ƒä¿®æ”¹ã€‘ç§»é™¤é¢æ¿è‡ªèº«çš„æ»šåŠ¨ï¼Œè®©å®ƒåªæ˜¯ä¸€ä¸ªæ™®é€šå®¹å™¨ */
#shopping-content-panel.active {
  display: block;
  overflow-y: visible;
  /* ä» auto æ”¹ä¸º visible */
}

/* ã€æ–°å¢ã€‘éšè— Webkit æµè§ˆå™¨ (Chrome, Safari) çš„æ»šåŠ¨æ¡ */
.category-tabs::-webkit-scrollbar {
  display: none;
}

/* â–²â–²â–² END: å•†åŸåˆ†ç±»æ æœ€ç»ˆä¿®å¤ç‰ˆ â–²â–²â–² */

/* æ¯ä¸ªç‹¬ç«‹çš„å†…å®¹é¢æ¿ */
.shop-content-panel {
  display: none;
  /* é»˜è®¤éšè— */
  box-sizing: border-box;
}

/* å½“é¢æ¿è¢«æ¿€æ´»æ—¶ï¼Œæ˜¾ç¤ºå®ƒ */
.shop-content-panel.active {
  display: block;
}

/* åº•æ å®¹å™¨ */
.shop-tab-bar {
  display: flex;
  justify-content: space-around;
  align-items: center;
  width: 100%;
  height: 60px;
  background-color: #ffffff;
  border-top: 1px solid #e5e5e5;
  flex-shrink: 0;
  /* é˜²æ­¢åº•æ åœ¨ç©ºé—´ä¸è¶³æ—¶è¢«å‹ç¼© */
}

/* å•ä¸ªæ ‡ç­¾æŒ‰é’® */
.shop-tab-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  /* å›¾æ ‡å’Œæ–‡å­—çš„é—´è· */
  background: none;
  border: none;
  cursor: pointer;
  font-size: 10px;
  color: #8a8a8e;
  /* æœªé€‰ä¸­æ—¶çš„é¢œè‰² */
  transition: color 0.2s;
}

/* æ¿€æ´»çŠ¶æ€çš„æ ‡ç­¾æŒ‰é’® */
.shop-tab-item.active {
  color: #007aff;
  /* é€‰ä¸­æ—¶çš„è“è‰² */
}

/* æ ‡ç­¾æŒ‰é’®å†…çš„SVGå›¾æ ‡ */
.shop-tab-item svg {
  width: 24px;
  height: 24px;
}

/* === START: SHOPMALL è´­ç‰©ç•Œé¢ CSS (V3 - æœ€ç»ˆä¿®å¤ç‰ˆ) === */

/* --- æ ¸å¿ƒä¿®æ”¹ï¼šè®©â€œè´­ç‰©â€é¢æ¿è‡ªå·±è´Ÿè´£æ»šåŠ¨ --- */

/* --- 1. åˆ†ç±»åˆ‡æ¢æŒ‰é’® (ä¿æŒç²˜æ€§å®šä½) --- */

.category-tab {
  flex-shrink: 0;
  /* é˜²æ­¢å‹ç¼© */
  padding: 8px 18px !important;
  font-size: 13px !important;
  font-weight: 600 !important;
  letter-spacing: 0.5px;
  border-radius: 100px !important;
  /* å®Œå…¨èƒ¶å›Š */
  border: none !important;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  /* iOS å¼¹æ€§åŠ¨ç”» */

  /* æœªé€‰ä¸­çŠ¶æ€ï¼šé€æ˜èƒŒæ™¯ï¼Œæ·±ç°å­— */
  background-color: transparent !important;
  color: #8e8e93 !important;
}

/* é€‰ä¸­çŠ¶æ€ï¼šé«˜å…‰æ‚¬æµ® */
.category-tab.active {
  background-color: #000000 !important;
  /* çº¯é»‘èƒŒæ™¯ (iOSè®¾è®¡è¶‹åŠ¿) */
  color: #ffffff !important;
  transform: scale(1.05);
  /* è½»å¾®æ”¾å¤§ */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  /* æŠ•å½± */
}

/* --- 2. å•†å“ç€‘å¸ƒæµç½‘æ ¼ (ä¸å†éœ€è¦è‡ªå·±æ»šåŠ¨) --- */
.product-grid-shop {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  /* åŒåˆ— */
  gap: 15px;
  padding: 20px 15px 120px 15px !important;
  /* åº•éƒ¨ç•™è¶³ç©ºé—´ç»™æ‚¬æµ®æ  */
}

/* 4. å•†å“å¡ç‰‡ï¼šå‘è¡Œçº§ç¾åŒ– */
.product-card {
  position: relative;
  background: rgba(255, 255, 255, 0.8);
  /* åŠé€æ˜ç™½ */
  border-radius: 20px !important;
  /* å¤§åœ†è§’ */
  padding: 16px;

  /* ç»ç’ƒè´¨æ„Ÿè¾¹æ¡†å’Œé˜´å½± */
  border: 1px solid rgba(255, 255, 255, 0.6) !important;
  box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.08),
    /* å¼¥æ•£é˜´å½± */ 0 4px 6px -4px rgba(0, 0, 0, 0.02),
    inset 0 0 0 1px rgba(255, 255, 255, 0.5);
  /* å†…å‘å…‰ */

  display: flex;
  flex-direction: column;
  justify-content: space-between;
  transition: all 0.3s ease;
  overflow: hidden;
}

.product-card:active {
  transform: scale(0.96);
}

/* æ‚¬åœæ—¶å¢å¼ºé˜´å½±å’Œå¾®æŠ¬æ•ˆæœ */
.product-card:hover {
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.06), 0 8px 20px rgba(0, 0, 0, 0.08);
  transform: translateY(-2px);
  /* å¾®å¦™ä¸Šæµ® */
}

.product-name {
  font-size: 15px !important;
  font-weight: 700 !important;
  color: #1d1d1f !important;
  margin-bottom: 6px;
  line-height: 1.3;
  padding-right: 10px;
  /* é˜²æ­¢æ’åˆ°æ ‡ç­¾ */
}

.product-description {
  font-size: 11px !important;
  color: #86868b !important;
  line-height: 1.5;
  margin-bottom: 15px;
  display: -webkit-box;
  line-clamp: 3;
  -webkit-line-clamp: 3;
  /* æ˜¾ç¤º3è¡Œ */
  -webkit-box-orient: vertical;
  overflow: hidden;
  opacity: 0.8;
}

.product-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-top: none !important;
  /* å»æ‰åˆ†å‰²çº¿ */
  padding-top: 5px;
}

/* ä»·æ ¼ */
.product-price {
  font-size: 17px !important;
  font-weight: 700 !important;
  color: #007aff !important;
  /* è‹¹æœè“ */
  font-feature-settings: "tnum";
  /* ç­‰å®½æ•°å­— */
}

/* åŠ è´­æŒ‰é’® (åœ†å½¢å›¾æ ‡) */
.add-to-cart-btn {
  width: 32px !important;
  height: 32px !important;
  padding: 0 !important;
  border-radius: 50% !important;

  background-color: #007aff !important;
  /* çº¯é»‘èƒŒæ™¯ */
  color: #fff !important;

  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 18px !important;
  font-weight: 400;
  border: none;
  cursor: pointer;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
  transition: transform 0.2s;
}

.add-to-cart-btn:active {
  transform: scale(0.8) rotate(90deg);
  /* ç‚¹å‡»æ—‹è½¬æ•ˆæœ */
  background-color: #333 !important;
}

.add-to-cart-btn:hover {
  background-color: rgba(0, 122, 255, 0.15);
  transform: scale(1.03);
  /* è½»å¾®æ”¾å¤§ */
}

.add-to-cart-btn:active {
  transform: scale(0.98);
  /* ç‚¹å‡»åé¦ˆ */
}

/* === è£…é¥°æ€§èƒŒæ™¯ (ç»™ç´ å¡ç‰‡åŠ ç‚¹æ–™) === */
.product-card::before {
  content: "";
  position: absolute;
  top: -20px;
  left: -20px;
  width: 80px;
  height: 80px;
  background: linear-gradient(
    135deg,
    rgba(0, 122, 255, 0.1),
    rgba(0, 122, 255, 0)
  );
  border-radius: 50%;
  filter: blur(20px);
  z-index: 0;
}

/* === æ·±è‰²æ¨¡å¼é€‚é… (Dark Mode) === */
.phone-frame.dark-mode .category-tabs {
  background: rgba(28, 28, 30, 0.75) !important;
}

.phone-frame.dark-mode .category-tab.active {
  background-color: #fff !important;
  color: #000 !important;
}

.phone-frame.dark-mode .product-card {
  background: rgba(44, 44, 46, 0.6);
  border-color: rgba(255, 255, 255, 0.1) !important;
}

.phone-frame.dark-mode .product-name {
  color: #fff !important;
}

.phone-frame.dark-mode .product-description {
  color: #aeaeb2 !important;
}

.phone-frame.dark-mode .add-to-cart-btn {
  background-color: #fff !important;
  color: #000 !important;
}

.phone-frame.dark-mode .product-brand-tag {
  background: rgba(60, 60, 60, 0.9);
  color: #fff;
}

/* === END: SHOPMALL è´­ç‰©ç•Œé¢ CSS (V3 - æœ€ç»ˆä¿®å¤ç‰ˆ) === */

/* === START: SHOPMALL â€œæˆ‘çš„â€ç•Œé¢ CSS === */

/* åˆ—è¡¨å®¹å™¨ï¼Œæ•´ä½“åƒä¸€ä¸ªå¡ç‰‡ */
.my-account-list {
  margin: 20px 0;
  /* ä¸Šä¸‹ç•™å‡ºä¸€äº›é—´è· */
  background-color: #ffffff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  overflow: hidden;
  /* ç¡®ä¿å†…éƒ¨å…ƒç´ çš„è¾¹æ¡†ä¸ä¼šè¶…å‡ºåœ†è§’ */
}

/* åˆ—è¡¨ä¸­çš„æ¯ä¸€é¡¹ */
.my-account-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 18px;
  /* è½»å¾®å¢åŠ å³ä¾§å†…è¾¹è·ï¼Œè®©å†…å®¹ä¸æ‹¥æŒ¤ */
  font-size: 16px;
  color: #1c1c1e;
  cursor: pointer;
  transition: all 0.2s ease;
  /* ç»Ÿä¸€è¿‡æ¸¡æ•ˆæœ */
  background-color: #ffffff;
  /* ç”¨åŒå±‚è¾¹æ¡†æ›¿ä»£å•å±‚ï¼Œå¢åŠ ç²¾è‡´æ„Ÿ */
  border-bottom: 1px solid #f0f0f0;
  border-top: 1px solid transparent;
  /* é¡¶éƒ¨éšå½¢è¾¹æ¡†ï¼Œhoveræ—¶æ˜¾å½¢ */
  /* è½»å¾®åœ†è§’ï¼Œå¼±åŒ–ç›´è§’çš„ç”Ÿç¡¬æ„Ÿ */
  border-radius: 4px;
  margin: 0 4px;
  /* ä¸çˆ¶å®¹å™¨ä¿æŒé—´è·ï¼Œå¢å¼ºç‹¬ç«‹æ„Ÿ */
}

/* æ‚¬åœçŠ¶æ€å¼ºåŒ–äº¤äº’åé¦ˆ */
.my-account-item:hover {
  background-color: #fafafa;
  border-top-color: #eeeeee;
  /* é¡¶éƒ¨è¾¹æ¡†æ˜¾å½¢ï¼Œå½¢æˆä¸Šä¸‹å‘¼åº” */
  transform: translateX(2px);
  /* æè½»å¾®å³ç§»ï¼Œå¢å¼ºäº¤äº’æ„ŸçŸ¥ */
}

/* æœ€åä¸€ä¸ªé¡¹ç›®ä¸éœ€è¦åˆ†éš”çº¿ */
.my-account-item:last-child {
  border-bottom: none;
}

/* é¼ æ ‡æ‚¬æµ®æˆ–ç‚¹å‡»æ—¶çš„æ•ˆæœ */
.my-account-item:active {
  background-color: #f0f2f5;
}

/* å³ä¾§å°ç®­å¤´çš„æ ·å¼ */
.chevron-icon {
  width: 20px;
  height: 20px;
}

/* === END: SHOPMALL â€œæˆ‘çš„â€ç•Œé¢ CSS === */
/* === START: SHOPMALL è´­ç‰©è½¦å’Œè®¢å• CSS (V2 - æ‚¬æµ®æŒ‰é’®ä¿®å¤) === */

/* --- 1. é¡µé¢åˆ‡æ¢åŠ¨ç”» (æ ·å¼ä¸å˜) --- */
#cart-screen,
#orders-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 5;
  background-color: #f0f2f5;
}

.phone-frame.show-cart #shop-screen,
.phone-frame.show-orders #shop-screen {
  opacity: 0;
  pointer-events: none;
}

.phone-frame.show-cart #cart-screen,
.phone-frame.show-orders #orders-screen {
  opacity: 1;
  pointer-events: auto;
}

/* --- 2. è´­ç‰©è½¦é¡µé¢ --- */
.cart-page-content {
  padding-top: 90px;
  display: flex;
  flex-direction: column;
  height: 100%;
  box-sizing: border-box;
  position: relative;
  /* å…³é”®ï¼šä¸ºæ‚¬æµ®çš„footeræä¾›å®šä½åŸºå‡† */
}

#cart-items-container {
  flex-grow: 1;
  overflow-y: auto;
  padding: 15px;
  padding-bottom: 130px;
  /* å…³é”®ï¼šä¸ºæ‚¬æµ®æŒ‰é’®ç•™å‡ºè¶³å¤Ÿçš„åº•éƒ¨ç©ºé—´ */
}

.cart-item {
  display: flex;
  align-items: center;
  background-color: #fff;
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 15px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.07);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

/* æ·»åŠ æ‚¬åœæ•ˆæœ */
.cart-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

/* ä¸ºå¡ç‰‡æ·»åŠ è£…é¥°æ€§å…ƒç´  */
.cart-item::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  background-color: #007aff;
  border-radius: 2px 0 0 2px;
}

.cart-item-details {
  flex-grow: 1;
  padding: 0 15px;
  transition: all 0.3s ease;
}

.cart-item-name {
  font-size: 16px;
  font-weight: 600;
  color: #2d3436;
  margin: 0;
  transition: color 0.2s ease;
}

.cart-item-price {
  font-size: 15px;
  color: #2d3436;
  margin-top: 5px;
  font-weight: 500;
  display: flex;
  align-items: center;
}

.cart-item-delete-btn {
  background: none;
  border: none;
  cursor: pointer;
  padding: 5px;
}

.cart-item-delete-btn svg {
  width: 20px;
  height: 20px;
  fill: #ff3b30;
}

/* å…³é”®ä¿®æ”¹ï¼šè´­ç‰©è½¦åº•éƒ¨æŒ‰é’®æ ·å¼ */
.cart-footer {
  position: absolute;
  /* æ”¹ä¸ºç»å¯¹å®šä½ */
  bottom: 20px;
  /* è·ç¦»åº•éƒ¨20px */
  left: 90px;
  /* è·ç¦»å·¦è¾¹15px */
  right: 15px;
  /* è·ç¦»å³è¾¹15px */
  z-index: 20;
  /* ç¡®ä¿åœ¨æ»šåŠ¨å†…å®¹ä¹‹ä¸Š */
  width: 200px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

/* ä¸ºæ‚¬æµ®æŒ‰é’®å¢åŠ é˜´å½±ï¼Œä½¿å…¶åœ¨å¤æ‚èƒŒæ™¯ä¸‹æ›´æ¸…æ™° */
.cart-footer .form-button-secondary,
.cart-footer .save-button {
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

/* --- 3. è®¢å•é¡µé¢ (æ ·å¼ä¸å˜... except for these changes) --- */
.orders-page-content {
  padding: 105px 15px 15px 15px;
  overflow-y: auto;
  height: 100%;
  box-sizing: border-box;
}

.order-card {
  background-color: #fff;
  padding: 20px;
  border-radius: 4px;
  margin-bottom: 18px;
  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.06);
  position: relative;
  border: 1px solid #f0f2f5;
  transition: all 0.2s ease;
}

.order-card:hover {
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.09);
}

.order-header,
.order-details,
.order-recipient {
  padding-bottom: 14px;
  margin-bottom: 14px;
  border-bottom: 1px solid #f0f2f5;
}

.order-share-btn {
  position: absolute;
  top: 18px;
  right: 18px;
  background: #f0f2f5;
  border: none;
  border-radius: 50%;
  width: 34px;
  height: 34px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: all 0.2s ease;
}

.order-share-btn:hover {
  background-color: #e4e6eb;
  transform: scale(1.05);
}

.order-card div:last-child {
  border-bottom: none;
  margin-bottom: 0;
  padding-bottom: 0;
}

.order-title {
  font-size: 14px;
  color: #666;
  margin-bottom: 6px;
  letter-spacing: 0.2px;
}

.order-value {
  font-size: 17px;
  font-weight: 500;
  color: #1d1d1f;
  line-height: 1.5;
}

/* â–¼â–¼â–¼ START: åœ¨è¿™é‡Œç²˜è´´æ–°çš„æ‘¸é±¼App CSSä»£ç  â–¼â–¼â–¼ */

/* --- æ‘¸é±¼Appçš„æ˜¾ç¤º/éšè—åŠ¨ç”»æ§åˆ¶ --- */
#slacking-off-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  display: flex;
  /* ä½¿ç”¨flexå¸ƒå±€æ¥ç®¡ç†é¡¶æ ã€å†…å®¹å’Œåº•æ  */
  flex-direction: column;
}

.phone-frame.show-slacking-off #home-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
}

.phone-frame.show-slacking-off #slacking-off-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
}

/* --- æ‘¸é±¼Appçš„å†…å®¹åŒºåŸŸå’Œé¢æ¿ --- */
#slacking-off-main-content {
  flex-grow: 1;
  position: relative;
  padding-top: 90px;
  /* ä¸ºé¡¶æ ç•™å‡ºç©ºé—´ */
  background: white;
  overflow-y: auto;
}

.slacking-off-content-panel {
  display: none;
  box-sizing: border-box;
}

.slacking-off-content-panel.active {
  display: block;
}

/* --- æ‘¸é±¼Appçš„åº•æ æ ·å¼ (å‚è€ƒä¸ƒè¢‹App) --- */
.slacking-off-tab-bar {
  display: flex;
  justify-content: space-around;
  align-items: center;
  width: 100%;
  height: 60px;
  background-color: #ffffff;
  border-top: 1px solid #e5e5e5;
  flex-shrink: 0;
}

.slacking-off-tab-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 10px;
  color: #8a8a8e;
  transition: color 0.2s;
}

.slacking-off-tab-item.active {
  color: #007aff;
}

.slacking-off-tab-item svg {
  width: 24px;
  height: 24px;
}

/* â–¼â–¼â–¼ åœ¨è¿™é‡Œç²˜è´´æ–°çš„æ¸¸æˆç•Œé¢CSSä»£ç  â–¼â–¼â–¼ */

/* --- æ¸¸æˆç€‘å¸ƒæµç½‘æ ¼ --- */
#games-grid {
  padding: 15px;
  /* æ ¸å¿ƒï¼šåˆ›å»ºä¸¤åˆ—çš„ç€‘å¸ƒæµå¸ƒå±€ */
  column-count: 2;
  column-gap: 15px;
}

/* --- å•ä¸ªæ¸¸æˆå¡ç‰‡ --- */
.game-card {
  background-color: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  margin-bottom: 15px;
  overflow: hidden;
  /* æ ¸å¿ƒï¼šé˜²æ­¢å¡ç‰‡åœ¨åˆ‡æ¢åˆ†æ æ—¶è¢«åˆ‡æ–­ */
  break-inside: avoid;
  display: flex;
  flex-direction: column;
}

.game-card img {
  width: 100%;
  height: auto;
  display: block;
}

.game-card-info {
  padding: 12px;
}

.game-card-info h3 {
  font-size: 16px;
  margin: 0 0 5px 0;
  color: #1c1c1e;
}

.game-card-info p {
  font-size: 12px;
  color: #8a8a8e;
  line-height: 1.4;
  margin: 0 0 10px 0;
}

.play-game-btn {
  width: 100%;
  padding: 8px;
  font-size: 14px;
  font-weight: 500;
  color: #fff;
  background-color: #007aff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.play-game-btn:hover {
  background-color: #0056b3;
}

/* â–¼â–¼â–¼ åœ¨è¿™é‡Œç²˜è´´æ–°çš„å‚¨è“„å¡ç‰‡CSSä»£ç  â–¼â–¼â–¼ */

/* --- å‚¨è“„å¡ç‰‡æ ·å¼ --- */
.savings-card {
  background-color: #fff;
  border-radius: 8px;
  /* åœ†è§’æ›´å¤§ï¼Œçœ‹èµ·æ¥æ›´æŸ”å’Œ */
  margin: 1px 10px;
  /* å¡ç‰‡ä¸å±å¹•è¾¹ç¼˜çš„é—´è· */
  padding: 25px 20px;
  /* å¡ç‰‡å†…éƒ¨çš„å¡«å…… */
  border: 1px solid rgba(0, 0, 0, 0.05);
  /* æ·»åŠ ä¸€ä¸ªéå¸¸æ·¡çš„è¾¹æ¡†å¢åŠ è´¨æ„Ÿ */
}

/* å¡ç‰‡å†…çš„æ ‡é¢˜æ ·å¼ */
.savings-card .card-title {
  color: #8a8a8e;
  /* æŸ”å’Œçš„ç°è‰² */
  font-size: 16px;
  font-weight: 500;
  margin: 0 0 8px 0;
  /* è°ƒæ•´ä¸ä¸‹æ–¹æ•°å­—çš„é—´è· */
}

/* å¡ç‰‡å†…çš„ä½™é¢æ•°å­—æ ·å¼ */
.savings-card .card-balance {
  color: #1c1c1e;
  font-size: 40px;
  /* è°ƒæ•´å­—ä½“å¤§å°ä»¥æ›´å¥½åœ°é€‚åº”å¡ç‰‡ */
  font-weight: 600;
  margin: 0;
  line-height: 1.2;
  /* ç¡®ä¿è¡Œé«˜æ­£å¸¸ */
}

/* â–¼â–¼â–¼ åœ¨è¿™é‡Œç²˜è´´æ–°çš„æ¸¸æˆå¼¹çª—CSSä»£ç  â–¼â–¼â–¼ */

/* --- æ¸¸æˆå¼¹çª—å†…çš„é€‰é¡¹å®¹å™¨ --- */
.game-choices {
  display: flex;
  justify-content: center;
  gap: 15px;
  /* æŒ‰é’®ä¹‹é—´çš„é—´è· */
  margin-top: 20px;
}

/* --- æ¸¸æˆé€‰é¡¹æŒ‰é’®çš„æ ·å¼ --- */
.game-choice-btn {
  width: 80px;
  height: 60px;
  font-size: 24px;
  font-weight: 600;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border: 1px solid rgba(0, 122, 255, 0.2);
  border-radius: 10px;
  cursor: pointer;
  transition: background-color 0.2s, transform 0.1s;
}

.game-choice-btn:active {
  transform: scale(0.95);
  /* ç‚¹å‡»æ—¶æœ‰è½»å¾®ä¸‹æ²‰æ•ˆæœ */
  background-color: rgba(0, 122, 255, 0.2);
}

/* â–¼â–¼â–¼ åœ¨è¿™é‡Œç²˜è´´æ–°çš„â€œç”³è¯·è§£é™¤â€æŒ‰é’®CSSä»£ç  â–¼â–¼â–¼ */

/* --- è®©å‚¨è“„å¡ç‰‡æˆä¸ºæŒ‰é’®å®šä½çš„åŸºå‡† --- */
.savings-card {
  position: relative;
  /* å…³é”®ï¼*/
}

/* --- â€œç”³è¯·è§£é™¤â€æŒ‰é’®çš„æ ·å¼ --- */
.apply-unlock-button {
  position: absolute;
  /* ç»å¯¹å®šä½ï¼Œç›¸å¯¹äºçˆ¶çº§.savings-card */
  top: 15px;
  right: 15px;
  padding: 6px 12px;
  font-size: 12px;
  font-weight: 500;
  color: #ff3b30;
  /* é†’ç›®çš„çº¢è‰² */
  background-color: rgba(255, 59, 48, 0.1);
  border: 1px solid rgba(255, 59, 48, 0.2);
  border-radius: 20px;
  /* åœ†è§’èƒ¶å›Šå½¢çŠ¶ */
  cursor: pointer;
  transition: background-color 0.2s;
}

.apply-unlock-button:hover {
  background-color: rgba(255, 59, 48, 0.2);
}

/* â–¼â–¼â–¼ åœ¨è¿™é‡Œç²˜è´´æ–°çš„ä¸Šç­æ¨¡æ‹ŸæŒ‰é’®CSSä»£ç  â–¼â–¼â–¼ */

/* --- ä¸Šç­æ¨¡æ‹ŸæŒ‰é’®çš„ç‰¹æ®Šæ ·å¼ --- */
.play-game-btn[data-game-id="go_to_work"] {
  background-color: #34c759;
  /* ä¸€ä¸ªå……æ»¡â€œç”Ÿäº§åŠ›â€çš„ç»¿è‰² */
}

.play-game-btn[data-game-id="go_to_work"]:hover {
  background-color: #2a9e4a;
}

/* â–¼â–¼â–¼ åœ¨è¿™é‡Œç²˜è´´æ–°çš„â€œæ”¶æ”¯æ˜ç´°â€CSSä»£ç  â–¼â–¼â–¼ */

/* --- â€œæ”¶æ”¯æ˜ç»†â€å¡ç‰‡æ ·å¼ (ç±»ä¼¼â€œæˆ‘çš„â€é¡µé¢çš„å¡ç‰‡) --- */
.details-card {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  font-size: 16px;
  color: #1c1c1e;
  cursor: pointer;
  transition: background-color 0.2s;
  background-color: #ffffff;
  border-radius: 8px;
  margin: 10px 10px;
  border: 1px solid rgba(0, 0, 0, 0.05);
}

.details-card:active {
  background-color: #f0f2f5;
}

/* --- â€œæ”¶æ”¯æ˜ç»†â€é¡µé¢çš„æ˜¾ç¤º/éšè—åŠ¨ç”» --- */
#transactions-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 5;
  /* å±‚çº§è¦æ¯”æ‘¸é±¼Appä¸»é¡µé«˜ */
  background-color: #f0f2f5;
}

.phone-frame.show-transactions #slacking-off-screen {
  opacity: 0;
  pointer-events: none;
}

.phone-frame.show-transactions #transactions-screen {
  opacity: 1;
  pointer-events: auto;
}

/* --- æ˜ç»†é¡µé¢çš„å†…å®¹åŒºåŸŸ --- */
.transactions-page-content {
  padding: 90px 15px 15px 15px;
  overflow-y: auto;
  height: 100%;
  box-sizing: border-box;
}

/* --- å•æ¡æ”¶æ”¯è®°å½•çš„æ ·å¼ --- */
.transaction-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background-color: #fff;
  padding: 12px 15px;
  border-radius: 10px;
  margin-bottom: 10px;
}

.transaction-info .description {
  font-size: 15px;
  color: #1c1c1e;
  margin-bottom: 4px;
}

.transaction-info .timestamp {
  font-size: 12px;
  color: #8a8a8e;
}

.transaction-amount {
  font-size: 16px;
  font-weight: 600;
}

.transaction-amount.income {
  color: #34c759;
  /* æ”¶å…¥ç”¨ç»¿è‰² */
}

.transaction-amount.expense {
  color: #ff3b30;
  /* æ”¯å‡ºç”¨çº¢è‰² */
}

/* --- GACHA Appçš„æ˜¾ç¤º/éšè—åŠ¨ç”»æ§åˆ¶ --- */
#gacha-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  display: flex;
  /* ä½¿ç”¨flexå¸ƒå±€æ¥ç®¡ç†é¡¶æ ã€å†…å®¹å’Œåº•æ  */
  flex-direction: column;
  background-color: #f2f1f6;
  /* ç»™é¡µé¢ä¸€ä¸ªåŸºç¡€èƒŒæ™¯è‰² */
}

.phone-frame.show-gacha #home-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
}

.phone-frame.show-gacha #gacha-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 2;
}

/* --- GACHA Appçš„å†…å®¹åŒºåŸŸå’Œé¢æ¿ --- */
#gacha-main-content {
  flex-grow: 1;
  position: relative;
  padding-top: 90px;
  /* ä¸ºé¡¶æ ç•™å‡ºç©ºé—´ */
  overflow-y: auto;
}

.gacha-content-panel {
  display: none;
  /* é»˜è®¤éšè—æ‰€æœ‰é¢æ¿ */
  box-sizing: border-box;
}

.gacha-content-panel.active {
  display: block;
  /* åªæ˜¾ç¤ºæ¿€æ´»çš„é¢æ¿ */
}

/* --- GACHA Appçš„åº•æ æ ·å¼ --- */
.gacha-tab-bar {
  display: flex;
  justify-content: space-around;
  align-items: center;
  width: 100%;
  height: 60px;
  background-color: #ffffff;
  border-top: 1px solid #e5e5e5;
  flex-shrink: 0;
  /* é˜²æ­¢åº•æ è¢«å‹ç¼© */
}

.gacha-tab-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 2px;
  background: none;
  border: none;
  cursor: pointer;
  font-size: 10px;
  color: #8a8a8e;
  /* æœªé€‰ä¸­æ—¶çš„é¢œè‰² */
  transition: color 0.2s;
}

.gacha-tab-item.active {
  color: #007aff;
  /* é€‰ä¸­æ—¶çš„é¢œè‰² */
}

.gacha-tab-item svg {
  width: 24px;
  height: 24px;
}

/* === START: GACHA App æ–°å¢æ ·å¼ === */

/* --- æ‚¬æµ®å‘å¸–æŒ‰é’® --- */
.floating-action-button {
  position: absolute;
  /* ç›¸å¯¹äºçˆ¶å®¹å™¨ gacha-screen å®šä½ */
  bottom: 80px;
  /* è·ç¦»åº•éƒ¨ 80px (ç•™å‡ºç©ºé—´ç»™åº•éƒ¨å¯¼èˆªæ ) */
  right: 20px;
  /* è·ç¦»å³ä¾§ 20px */
  z-index: 100;
  /* ç¡®ä¿å®ƒåœ¨å¸–å­åˆ—è¡¨ä¹‹ä¸Š */

  width: 40px;
  height: 40px;
  background-color: #007aff;
  /* è‹¹æœè“ */
  border-radius: 50%;
  /* åˆ¶ä½œæˆåœ†å½¢ */
  border: none;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  /* æ·»åŠ é˜´å½±ä½¿å…¶æœ‰ç«‹ä½“æ„Ÿ */

  display: flex;
  /* ä½¿ç”¨flexå¸ƒå±€ */
  justify-content: center;
  /* æ°´å¹³å±…ä¸­SVGå›¾æ ‡ */
  align-items: center;
  /* å‚ç›´å±…ä¸­SVGå›¾æ ‡ */
  cursor: pointer;
  transition: transform 0.2s ease-in-out;
}

.floating-action-button:hover {
  transform: scale(1.05);
  /* é¼ æ ‡æ‚¬æµ®æ—¶è½»å¾®æ”¾å¤§ */
}

/* === START: GACHA Post ç‹¬ç«‹æ ·å¼ (V-Final) === */

/* --- 1. å¸–å­æµå®¹å™¨ï¼Œè®¾ç½®5pxè¾¹è· --- */
#gacha-posts-container {
  padding: 15px 5px 0 5px;
  width: 100%;
  box-sizing: border-box;
}

/* --- 2. å¸–å­å¡ç‰‡ (gp-card) --- */
.gp-card {
  width: 100%;
  margin: 0px 8px 8px 0px;
  background-color: white;
  /* box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05); */
  overflow: hidden;
  text-align: left;
  border-radius: 12px;
}

/* --- 3. å¸–å­å¤´éƒ¨ (gp-header) --- */
.gp-header {
  padding: 12px 15px;
  background-color: #ffffff;
}

.gp-header-content {
  /* ä¸“å±ç±»åï¼Œä¸å†å†²çª */
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
}

.gp-user-info {
  display: flex;
  align-items: center;
  text-align: left;
  flex-grow: 1;
  margin-right: 10px;
  min-width: 0;
}

.gp-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  margin-right: 10px;
  flex-shrink: 0;
  background-size: cover;
  background-position: center;
}

.gp-user-info > div:last-child {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
}

.gp-user-name {
  font-size: 15px;
  font-weight: 500;
  color: #111827;
}

.gp-user-handle,
.gp-post-date {
  font-size: 11px;
  color: #86868b;
}

.gp-post-date {
  white-space: nowrap;
  flex-shrink: 0;
  text-align: right;
}

/* --- 4. å†…å®¹ä¸åˆ†å‰²çº¿ --- */
.gp-divider {
  height: 1px;
  background-color: #f0f0f0;
}

.gp-post-content {
  padding: 15px;
}

.gp-post-text {
  color: #1f2937;
  line-height: 1.5;
  margin-bottom: 16px;
  font-size: 15px;
}

.gp-post-text p {
  margin-bottom: 12px;
}

.gp-post-text p:last-child {
  margin-bottom: 0;
}

/* --- 5. æ“ä½œæŒ‰é’® --- */
.gp-action-buttons {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 20px;
}

.gp-action-button {
  display: flex;
  align-items: center;
  color: #86868b;
  background: none;
  border: none;
  padding: 0;
  cursor: pointer;
}

.gp-action-button svg {
  width: 18px;
  height: 18px;
}

.gp-action-button.liked svg path {
  fill: #007aff !important;
  fill-opacity: 1 !important;
}

/* --- 6. è¯„è®ºåŒº --- */
.gp-comment-section {
  border-top: 1px solid #f3f4f6;
  background-color: white;
}

.gp-comment-input-area {
  padding: 12px 15px;
  border-bottom: 1px solid #f3f4f6;
}

.gp-comment-input-wrapper {
  display: flex;
  align-items: center;
  gap: 10px;
}

.gp-comment-avatar {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  flex-shrink: 0;
  background-size: cover;
  background-position: center;
}

.gp-comment-input {
  flex: 1;
  border: 1px solid #e5e7eb;
  border-radius: 18px;
  padding: 7px 14px;
  font-size: 13px;
  outline: none;
  min-width: 0;
  box-sizing: border-box;
}

.gp-comment-input:focus {
  border-color: #007aff;
}

.gp-comment-list {
  max-height: 350px;
  overflow-y: auto;
}

.gp-comment-item {
  display: flex;
  gap: 10px;
  padding: 12px 15px;
  border-bottom: 1px solid #f9fafb;
}

.gp-comment-content {
  flex: 1;
}

.gp-comment-header {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 4px;
}

.gp-comment-username {
  font-weight: 500;
  font-size: 13px;
}

.gp-comment-time {
  color: #86868b;
  font-size: 11px;
}

.gp-comment-text {
  color: #374151;
  font-size: 13px;
  line-height: 1.5;
  margin-bottom: 8px;
}

.gp-comment-actions {
  display: flex;
  gap: 12px;
}

.gp-reply-btn {
  background: none;
  border: none;
  color: #86868b;
  font-size: 11px;
  cursor: pointer;
  padding: 0;
}

.gp-reply-input-area {
  margin-top: 8px;
  display: flex;
  gap: 8px;
  align-items: center;
}

.gp-reply-input {
  flex: 1;
  border: 1px solid #e5e7eb;
  border-radius: 16px;
  padding: 6px 12px;
  font-size: 12px;
  outline: none;
}

.gp-reply-input:focus {
  border-color: #007aff;
}

.gp-reply-mention {
  color: #007aff;
  /* è‹¹æœè“ */
  font-weight: 500;
  /* å­—ä½“ç¨ç²—ä¸€äº› */
}

/* --- 7. æ·±è‰²æ¨¡å¼é€‚é… --- */
.phone-frame.dark-mode .gp-card {
  background-color: #2c2c2e;
  border-color: #3a3a3c;
}

.phone-frame.dark-mode .gp-header {
  background-color: #1c1c1e;
}

.phone-frame.dark-mode .gp-user-name,
.phone-frame.dark-mode .gp-post-text,
.phone-frame.dark-mode .gp-comment-username,
.phone-frame.dark-mode .gp-comment-text {
  color: #f5f5f7;
}

.phone-frame.dark-mode .gp-user-handle,
.phone-frame.dark-mode .gp-post-date,
.phone-frame.dark-mode .gp-comment-time,
.phone-frame.dark-mode .gp-reply-btn {
  color: #8e8e93;
}

.phone-frame.dark-mode .gp-divider {
  background-color: #3a3a3c;
}

/* === END: GACHA Post ç‹¬ç«‹æ ·å¼ (V-Final) === */
/* --- END: GACHA App æ–°å¢æ ·å¼ === */

/* â–¼â–¼â–¼ START: Add these new styles for Dark Mode â–¼â–¼â–¼ */

/* When dark mode is on, change the main background and text colors */
.phone-frame.dark-mode .screen,
.phone-frame.dark-mode .modal-content,
.phone-frame.dark-mode #shop-screen,
.phone-frame.dark-mode .shop-tab-bar {
  background-color: #1c1c1e;
  /* Dark grey background */
  color: #f5f5f7;
  /* Light grey text */
}

/* Style for headers in dark mode */
.phone-frame.dark-mode .settings-header,
.phone-frame.dark-mode .chat-header {
  background-color: rgba(44, 44, 46, 0.85);
  /* Semi-transparent darker grey */
  border-bottom-color: #3a3a3c;
  color: #f5f5f7;
}

/* Make sure header titles and buttons are also light-colored */
.phone-frame.dark-mode .settings-header h1,
.phone-frame.dark-mode .chat-header h1,
.phone-frame.dark-mode .header-text-button {
  color: #f5f5f7;
}

/* Style for input fields and other form elements */
.phone-frame.dark-mode .form-input,
.phone-frame.dark-mode .form-select,
.phone-frame.dark-mode .form-textarea,
.phone-frame.dark-mode .chat-input-area input {
  background-color: #2c2c2e;
  color: #f5f5f7;
  border-color: #3a3a3c;
}

/* Style for buttons */
.phone-frame.dark-mode .form-button-secondary {
  background-color: #2c2c2e;
  color: #0a84ff;
  /* A slightly brighter blue for dark mode */
}

/* Home screen specific text */
.phone-frame.dark-mode .clock span,
.phone-frame.dark-mode .app-name,
.phone-frame.dark-mode #motto {
  color: #ffffff;
}

/* --- ç»¼åˆä¿®å¤ --- */
/* ç¡®ä¿æ‰€æœ‰ç™½è‰²èƒŒæ™¯çš„å±å¹•åœ¨æ·±è‰²æ¨¡å¼ä¸‹å˜é»‘ */
.phone-frame.dark-mode #settings-screen,
.phone-frame.dark-mode #playlist-detail-screen,
.phone-frame.dark-mode #slacking-off-screen,
.phone-frame.dark-mode #icon-settings-screen {
  background-color: #1c1c1e !important;
  /* ä½¿ç”¨ !important ç¡®ä¿æœ€é«˜ä¼˜å…ˆçº§ */
}

/* 1. ä¿®å¤ï¼šèŠå¤©ç•Œé¢åº•æ  & è¡¨æƒ…åŒ…é¢æ¿ */
.phone-frame.dark-mode .chat-input-area,
.phone-frame.dark-mode #emoji-panel {
  background-color: #1c1c1e;
  border-top-color: #3a3a3c;
}

.phone-frame.dark-mode #emoji-grid-container {
  background-color: #1c1c1e;
}

/* è¡¨æƒ…åŒ…åœ¨æ·±è‰²æ¨¡å¼ä¸‹çš„èƒŒæ™¯æ¿ */
.phone-frame.dark-mode .emoji-item {
  background-color: #2c2c2e;
}

/* 2. ä¿®å¤ï¼šéŸ³ä¹Appæ­Œå•è¯¦æƒ…é¡µ (å·²åŒ…å«åœ¨ä¸Šé¢çš„ç»¼åˆä¿®å¤ä¸­) */
/* (æ— éœ€é¢å¤–ä»£ç , #playlist-detail-screen å·²å¤„ç†) */

/* 3. ä¿®å¤ï¼šæ‘¸é±¼App */
.phone-frame.dark-mode #slacking-off-main-content,
.phone-frame.dark-mode .slacking-off-tab-bar {
  background-color: #1c1c1e;
}

.phone-frame.dark-mode .game-card,
.phone-frame.dark-mode .savings-card,
.phone-frame.dark-mode .details-card,
.phone-frame.dark-mode .transaction-item {
  background-color: #2c2c2e;
  color: #f5f5f7;
}

/* æ‘¸é±¼Appå†…çš„æ–‡å­—é¢œè‰²ä¿®å¤ */
.phone-frame.dark-mode .savings-card .card-balance,
.phone-frame.dark-mode .game-card-info h3,
.phone-frame.dark-mode .details-card span,
.phone-frame.dark-mode .transaction-info .description {
  color: #f5f5f7;
}

/* 4. ä¿®å¤ï¼šç¾åŒ–Appçš„æ›´æ¢å›¾æ ‡å¡ç‰‡ */
.phone-frame.dark-mode .icon-setting-item {
  background-color: #2c2c2e;
}

.phone-frame.dark-mode .app-name-setting {
  color: #f5f5f7;
}

/* 5. ä¿®å¤ï¼šè®¾ç½®AppèƒŒæ™¯ (å·²åŒ…å«åœ¨ä¸Šé¢çš„ç»¼åˆä¿®å¤ä¸­) */
/* (æ— éœ€é¢å¤–ä»£ç , #settings-screen å·²å¤„ç†) */

/* --- å…¶ä»–ç»†èŠ‚ä¼˜åŒ– --- */
/* ä¿®å¤â€œæˆ‘çš„â€å’Œâ€œè´­ç‰©è½¦/è®¢å•â€é¡µé¢çš„ç™½è‰²å¡ç‰‡ */
.phone-frame.dark-mode .my-account-list,
.phone-frame.dark-mode .cart-item,
.phone-frame.dark-mode .order-card {
  background-color: #2c2c2e;
  border-color: #3a3a3c;
  color: #f5f5f7;
}

.phone-frame.dark-mode .my-account-item {
  color: #f5f5f7;
  border-bottom-color: #3a3a3c;
}

.phone-frame.dark-mode .order-value {
  color: #f5f5f7;
}

/* ä¿®å¤GACHA App */
.phone-frame.dark-mode #gacha-screen,
.phone-frame.dark-mode .gacha-tab-bar {
  background-color: #1c1c1e;
}

.phone-frame.dark-mode .gacha-post-card,
.phone-frame.dark-mode .comment-content {
  background-color: #2c2c2e;
}

.phone-frame.dark-mode .post-author-name,
.phone-frame.dark-mode .post-content,
.phone-frame.dark-mode .post-likes-info,
.phone-frame.dark-mode .comment-author-name,
.phone-frame.dark-mode .comment-text {
  color: #f5f5f7;
}

.phone-frame.dark-mode .post-image-desc {
  background-color: #3a3a3c;
  color: #c7c7cc;
  border-left-color: #0a84ff;
}

.phone-frame.dark-mode .post-action-btn {
  color: #8e8e93;
}

.phone-frame.dark-mode .post-action-btn.liked {
  color: #0a84ff;
}

.phone-frame.dark-mode .comment-input {
  background-color: #3a3a3c;
  border-color: #545458;
  color: #f5f5f7;
}

/* â–²â–²â–² END: Dark Mode Fixes â–²â–²â–² */
/* â–²â–²â–² END: Dark Mode styles â–²â–²â–² */

.select-recipient-btn {
  /* åŸºç¡€å®½åº¦è®¾ç½® */
  width: 60%;
  padding: 10px 0;
  /* å‚ç›´å†…è¾¹è·ï¼Œæ°´å¹³ä¸º0ä¿æŒæ¯”ä¾‹ */

  /* æ–‡æœ¬æ ·å¼ */
  font-size: 16px;
  font-weight: 500;
  color: #007aff;
  /* ä¸»é¢˜è‰²æ–‡å­— */
  text-align: center;

  /* æŒ‰é’®å¤–è§‚ */
  background-color: rgba(0, 122, 255, 0.1);
  /* ä¸»é¢˜è‰²æµ…è‰²èƒŒæ™¯ */
  border: 1px solid rgba(0, 122, 255, 0.2);
  /* ç»†è¾¹æ¡†å¢å¼ºè½®å»“ */
  border-radius: 12px;
  /* æŸ”å’Œåœ†è§’ */

  /* äº¤äº’æ•ˆæœ */
  cursor: pointer;
  transition: all 0.2s ease;
  /* å¹³æ»‘è¿‡æ¸¡ */

  /* å±…ä¸­æ˜¾ç¤º */
  margin-left: auto;
  margin-right: auto;
  display: block;
  /* ç¡®ä¿å®½åº¦å’Œmarginç”Ÿæ•ˆ */
}

/* æ‚¬åœçŠ¶æ€ä¼˜åŒ– */
.select-recipient-btn:hover {
  background-color: rgba(0, 122, 255, 0.15);
  /* ç•¥æ·±èƒŒæ™¯å¢å¼ºåé¦ˆ */
  border-color: rgba(0, 122, 255, 0.3);
  /* è¾¹æ¡†è‰²åŒæ­¥åŠ æ·± */
}

/* ç‚¹å‡»çŠ¶æ€åé¦ˆ */
.select-recipient-btn:active {
  background-color: rgba(0, 122, 255, 0.2);
  transform: scale(0.99);
  /* è½»å¾®ç¼©æ”¾å¼ºåŒ–ç‚¹å‡»æ„Ÿ */
}

/* === START: Gacha Post å¯è§èŒƒå›´åŠŸèƒ½æ ·å¼ (V9) === */

/* å³ä¸Šè§’å¯è§èŒƒå›´è®¾ç½®æŒ‰é’® */
.gp-visibility-btn {
  background: none;
  border: none;
  cursor: pointer;
  margin-left: auto;
  /* å°†æŒ‰é’®æ¨åˆ°æœ€å³è¾¹ */
  display: none;
}

.gp-visibility-btn svg {
  width: 18px;
  height: 18px;
  fill: #86868b;
  /* é»˜è®¤ç°è‰² */
}

.gp-visibility-btn.private svg {
  fill: #007aff;
  /* è®¾ç½®ä¸ºç§å¯†åå˜ä¸ºè“è‰² */
}

/* Modalå†…çš„ä¸–ç•Œä¹¦åˆ—è¡¨æ ·å¼ */
.visibility-item {
  display: flex;
  align-items: center;
  padding: 8px 0;
}

.visibility-item input {
  margin-right: 12px;
  width: 18px;
  height: 18px;
}

.visibility-item label {
  font-size: 16px;
}

/* === START: Gacha Post ç‚¹èµæ˜¾ç¤ºæ ·å¼ (V12) === */

/* ç‚¹èµä¿¡æ¯è¡Œçš„å®¹å™¨ */
.gp-comment-likes {
  background-color: #f0f2f5;
  /* æ·¡ç°è‰²èƒŒæ™¯ */
  border-radius: 8px;
  padding: 6px 10px;
  margin-top: 8px;
  /* ä¸ä¸Šæ–¹å…ƒç´ çš„é—´è· */
  font-size: 12px;
  color: #555;
  display: flex;
  /* ä½¿ç”¨flexå¸ƒå±€ */
  align-items: center;
  /* å‚ç›´å±…ä¸­ */
  gap: 6px;
  /* å›¾æ ‡å’Œæ–‡å­—çš„é—´è· */
}

/* ç‚¹èµåˆ—è¡¨é‡Œçš„å°çˆ±å¿ƒå›¾æ ‡ */
.gp-comment-likes svg {
  width: 14px;
  height: 14px;
  fill: #8a8a8e;
  /* å›¾æ ‡é¢œè‰² */
  flex-shrink: 0;
  /* é˜²æ­¢å›¾æ ‡è¢«å‹ç¼© */
}

/* æ·±è‰²æ¨¡å¼ä¸‹çš„é€‚é… */
.phone-frame.dark-mode .gp-comment-likes {
  background-color: #3a3a3c;
  color: #c7c7cc;
}

.phone-frame.dark-mode .gp-comment-likes svg {
  fill: #8e8e93;
}

/* --- START: å•†å“å¡ç‰‡å“ç‰Œæ ‡è®°æ ·å¼ --- */

/* 1. ç¡®ä¿å•†å“å¡ç‰‡å¯ä»¥ä½œä¸ºæ ‡è®°çš„å®šä½åŸºå‡† */
.product-card {
  position: relative;
  /* å…³é”®ï¼ä¸ºç»å¯¹å®šä½çš„å­å…ƒç´ æä¾›å‚è€ƒ */
  overflow: hidden;
  /* é˜²æ­¢æ ‡è®°æº¢å‡ºå¡ç‰‡çš„åœ†è§’ */
}

/* 2. è®¾è®¡å“ç‰Œæ ‡è®°æœ¬èº«çš„æ ·å¼ */
.product-brand-tag {
  position: absolute;
  top: 12px;
  right: 12px;
  font-size: 9px;
  font-weight: 700;
  color: #000;
  background: rgba(255, 255, 255, 0.9);
  padding: 4px 8px;
  border-radius: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  z-index: 2;
  text-transform: uppercase;
}

/* === æ–°å¢ï¼šæ¶ˆæ¯ç¼–è¾‘åŠŸèƒ½çš„æ ·å¼ === */
.editing-bubble {
  width: 100%;
  box-sizing: border-box;
  border: none;
  outline: none;
  resize: none;
  background-color: transparent;
  /* èƒŒæ™¯é€æ˜ï¼Œèå…¥æ°”æ³¡ */
  font-family: inherit;
  /* ç»§æ‰¿çˆ¶å…ƒç´ å­—ä½“ */
  font-size: inherit;
  /* ç»§æ‰¿çˆ¶å…ƒç´ å­—å· */
  color: inherit;
  /* ç»§æ‰¿çˆ¶å…ƒç´ é¢œè‰² */
  line-height: 1.4;
  padding: 0;
  margin: 0;
  overflow: hidden;
  /* éšè—æ»šåŠ¨æ¡ */
}

/* === æ ¸å¿ƒä¿®å¤ï¼šHTMLå¡ç‰‡æ¨¡å¼ä¸‹çš„â€œè£¸å¥”â€æ ·å¼ === */
/* å»é™¤æ°”æ³¡è£…é¥°ï¼Œä½†ä¿ç•™å¸ƒå±€å±æ€§ï¼ˆå¦‚ marginï¼‰ï¼Œå®Œå…¨éµå¾ªç”¨æˆ·æˆ–é»˜è®¤çš„ Flex/Gap è®¾ç½® */
.message-content-wrapper.is-html-content {
  background: transparent !important;
  box-shadow: none !important;
  padding: 0 !important;
  border: none !important;
  /* å…è®¸å¡ç‰‡è‡ªé€‚åº”å®½åº¦ï¼Œä½†é˜²æ­¢æ’‘çˆ†å®¹å™¨ */
  max-width: 95%;
  overflow: visible !important;
}
/* åŒæ—¶æŠŠé‡Œé¢çš„æ°”æ³¡èƒŒæ™¯ä¹Ÿå»æ‰ */
.message-content-wrapper.is-html-content .chat-bubble {
  background: transparent !important;
  box-shadow: none !important;
  padding: 0 !important;
}

/* ä¿®å¤å¤´åƒå¯¹é½é—®é¢˜ï¼šç§»é™¤æ‰€æœ‰ margin/padding hack */
.message-content-wrapper.is-html-content > div {
  display: block;
  max-width: 100%;
}

/* æ ¸å¿ƒä¿®å¤ï¼šé˜²æ­¢ä»»ä½•æƒ…å†µä¸‹çš„å¤´åƒå˜å½¢æˆ–è¢«æŒ¤å‹ */
.avatar-anchor,
.chat-avatar {
  flex-shrink: 0 !important;
}

/* === æ–°å¢ï¼šç”¨äºå¼ºåˆ¶æµè§ˆå™¨ä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿçš„æ ·å¼ï¼Œå‡è½»å¡é¡¿ === */
.phone-frame,
.screen,
.chat-messages-container {
  will-change: transform, scroll-position;
}

/* === (æ–°å¢) ä¿®å¤ç”±ç¡¬ä»¶åŠ é€Ÿå¯¼è‡´çš„è¾“å…¥æ³•æ¸²æŸ“Bug === */

/* === ä¿®å¤ï¼šé˜²æ­¢ HTML æ¶ˆæ¯è¢«çˆ¶å®¹å™¨è£åˆ‡ === */
.message-content-wrapper.is-html-content {
  overflow: visible !important; /* å…è®¸å­å…ƒç´ æº¢å‡ºæ˜¾ç¤º */
}
.message-content-wrapper.is-html-content > div {
  overflow: visible !important;
}
.message-content-wrapper.is-html-content iframe.html-render-container {
  display: block !important;
  width: auto !important;
  max-width: none !important;
  height: auto !important;
  border: none !important;
  overflow: visible !important;
}

/* ç¡®ä¿æ¶ˆæ¯åˆ—è¡¨ä¸æ°´å¹³è£åˆ‡ HTML å¡ç‰‡ */
.chat-messages-container {
  overflow-x: visible !important;
}
.form-input,
.form-textarea,
.chat-input-area input {
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* === æ–°å¢ï¼šAPI åº“å¼¹å‡ºæ¡†åˆ—è¡¨æ ·å¼ === */
.api-library-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 20px;
  border-bottom: 1px solid #f0f0f0;
  transition: background-color 0.2s;
  cursor: pointer;
  position: relative;
  box-sizing: border-box;
}

.api-library-item:hover {
  background-color: #f9f9f9;
}

.api-library-item:last-child {
  border-bottom: none;
}

.api-library-item .api-info {
  flex-grow: 1;
  min-width: 0;
  padding-right: 15px;
}

.api-library-item .api-info .api-name {
  font-size: 15px;
  font-weight: 500;
  color: #111;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.api-library-item .api-info .api-details {
  font-size: 12px;
  color: #888;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 2px;
}

.api-library-item input[type="checkbox"] {
  margin-left: 10px;
  width: 18px;
  height: 18px;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .api-library-item {
  background-color: #1c1c1e;
  border-bottom-color: #3a3a3c;
}

.phone-frame.dark-mode .api-library-item:hover {
  background-color: #2c2c2e;
}

.phone-frame.dark-mode .api-library-item .api-name {
  color: #f5f5f7;
}

.phone-frame.dark-mode .api-library-item .api-details {
  color: #8e8e93;
}

/* ========================================================== */
/* === æ–°å¢ï¼šä¸–ç•Œä¹¦åˆ†ç»„åŠŸèƒ½çš„ CSS æ ·å¼ === */
/* ========================================================== */

/* --- 1. ä¸–ç•Œä¹¦åˆ†ç»„åˆ—è¡¨é¡µçš„æ˜¾ç¤º/éšè—æ§åˆ¶ --- */
#worldbook-groups-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 3;
  /* å±‚çº§é«˜äºä¸–ç•Œä¹¦ä¸»é¡µ */
}

.phone-frame.show-worldbook-groups #worldbook-screen {
  opacity: 0;
  pointer-events: none;
}

.phone-frame.show-worldbook-groups #worldbook-groups-screen {
  opacity: 1;
  pointer-events: auto;
}

/* --- 2. å•ä¸ªåˆ†ç»„è¯¦æƒ…é¡µçš„æ˜¾ç¤º/éšè—æ§åˆ¶ --- */
#worldbook-group-detail-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 4;
  /* å±‚çº§é«˜äºåˆ†ç»„åˆ—è¡¨é¡µ */
}

.phone-frame.show-worldbook-group-detail #worldbook-groups-screen {
  opacity: 0;
  pointer-events: none;
}

.phone-frame.show-worldbook-group-detail #worldbook-group-detail-screen {
  opacity: 1;
  pointer-events: auto;
}

/* --- 3. â€œç§»åŠ¨åˆ°åˆ†ç»„â€å¼¹çª—å†…çš„åˆ—è¡¨é¡¹æ ·å¼ --- */
.group-selection-item {
  padding: 12px 20px;
  font-size: 16px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.group-selection-item:hover {
  background-color: #f0f0f0;
}

.phone-frame.dark-mode .group-selection-item:hover {
  background-color: #2c2c2e;
}

/* ========================================================== */
/* === æ–°å¢ï¼šç©ºçŠ¶æ€ä¸‹çš„â€œæ–°å»ºâ€æŒ‰é’®æ ·å¼ === */
/* ========================================================== */
.empty-state-add-button {
  display: block;
  width: 90%;
  margin: 20px auto;
  /* å±…ä¸­å¹¶ä¸é¡¶éƒ¨ä¿æŒè·ç¦» */
  padding: 10px;
  font-size: 16px;
  font-weight: 400;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border: none;
  border-radius: 8px;
  cursor: pointer;
  text-align: center;
  transition: background-color 0.2s;
}

.empty-state-add-button:hover {
  background-color: rgba(0, 122, 255, 0.15);
}

/* === æ–°å¢ï¼šä¿®å¤å¤§å‹HTMLå†…å®¹çš„æº¢å‡ºé—®é¢˜ === */
.html-render-container {
  /* ã€é‡è¦ä¿®å¤ã€‘ä½¿ç”¨visibleè®©é˜´å½±ä¸è¢«è£åˆ‡ */
  overflow: visible;

  /* (å¯é€‰) å¢åŠ ä¸€ä¸ªæœ€å°é«˜åº¦ï¼Œè®©å°å†…å®¹ä¹Ÿçœ‹èµ·æ¥åƒä¸ªå— */
  min-height: 50px;

  /* ç¡®ä¿å®ƒåƒä¸€ä¸ªå—çº§å…ƒç´ ä¸€æ ·å¡«å……ç©ºé—´ */
  width: auto;
  box-sizing: border-box;

  /* ã€ä¿®å¤ã€‘è§£é™¤å®½åº¦é™åˆ¶ï¼Œè®©HTMLå†…å®¹å®Œæ•´æ˜¾ç¤º */
  max-width: none !important;
  min-width: 200px;

  /* ç¡®ä¿iframeæœ¬èº«æ²¡æœ‰è¾¹æ¡†å¹²æ‰° */
  border: none !important;
  background: transparent;
}

/* === æ–°å¢ï¼šç¡®ä¿è®¾ç½®é¡µé¡¶æ æœ€å³ä¾§çš„æŒ‰é’®èƒ½è‡ªåŠ¨é å³ === */
.settings-header #select-api-library-btn {
  margin-left: auto;
  /* è‡ªåŠ¨å¤–è¾¹è·ï¼Œä¼šæŠŠå®ƒæ¨åˆ°æœ€å³è¾¹ */
}

/* ========================================================== */
/* === æ–°å¢ï¼šè¯­éŸ³è¾“å…¥åŠŸèƒ½çš„ CSS æ ·å¼ === */
/* ========================================================== */

/* --- 1. â€œæŒ‰ä½ è¯´è¯â€æŒ‰é’®çš„æ ·å¼ --- */
#voice-record-button {
  /* 1. æ ¸å¿ƒä¿®å¤ï¼šæ·»åŠ  flex: 1 å’Œ width: 100% */
  flex: 1;
  /* è‡ªåŠ¨å æ®å‰©ä½™ç©ºé—´ */
  width: 100%;
  /* å¼ºåˆ¶å®½åº¦å¡«æ»¡ */
  box-sizing: border-box;
  /* ç¡®ä¿è¾¹æ¡†ä¸ä¼šæ’‘ç ´å®½åº¦ */

  /* 2. ä¿æŒåŸæœ‰çš„è§†è§‰æ ·å¼ */
  height: 40px;
  border: 1px solid #dcdcdc;
  background-color: #f7f7f7;
  border-radius: 20px;
  font-size: 15px;
  font-weight: 500;
  color: #333;
  cursor: pointer;
  outline: none;

  /* 3. ç¦æ­¢é€‰ä¸­æ–‡æœ¬ï¼ˆæå‡ä½“éªŒï¼‰ */
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;

  transition: background-color 0.2s, transform 0.1s;
}

/* --- 2. å½“ç”¨æˆ·æŒ‰ä½æŒ‰é’®æ—¶çš„è§†è§‰åé¦ˆ --- */
#voice-record-button:active {
  background-color: #e0e0e0;
  transform: scale(0.98);
  /* è½»å¾®ç¼©å° */
  border-color: #c7c7c7;
}

/* --- 3. åˆ‡æ¢æŒ‰é’®ä¸­å›¾æ ‡çš„é¢œè‰² --- */
#voice-input-toggle svg {
  width: 24px;
  height: 24px;
  color: #333;
}

/* ========================================================== */
/* === æ–°å¢ï¼šåˆå¹¶æŒ‰é’®ç»„çš„â€œè¯ä¸¸â€èƒŒæ™¯æ ·å¼ === */
/* ========================================================== */

/* --- 1. â€œè¯ä¸¸â€èƒŒæ™¯å®¹å™¨çš„æ ·å¼ --- */
.action-button-group {
  display: flex;
  /* è®©å†…éƒ¨æŒ‰é’®æ°´å¹³æ’åˆ— */
  align-items: center;
  /* å‚ç›´å±…ä¸­ */

  /* æµ…ç°è‰²èƒŒæ™¯ */
  border-radius: 20px;
  /* åœ†è§’ï¼Œå½¢æˆè¯ä¸¸å½¢çŠ¶ */

  position: relative;
  /* ä¸ºåˆ†å‰²çº¿æä¾›å®šä½åŸºå‡† */
}

/* --- 2. å®¹å™¨ä¸­é—´çš„åˆ†å‰²çº¿ --- */
.action-button-group::after {
  display: none !important;
  content: none !important;
  /* åŒé‡ä¿é™© */
}

/* --- 3. è°ƒæ•´å®¹å™¨å†…éƒ¨æŒ‰é’®çš„æ ·å¼ --- */
.action-button-group .chat-action-button {
  background-color: transparent;
  /* æ ¸å¿ƒï¼šè®©æŒ‰é’®èƒŒæ™¯å˜é€æ˜ */
  box-shadow: none;
  /* ç§»é™¤æŒ‰é’®è‡ªèº«çš„é˜´å½± */
  width: 30px;
  /* å›ºå®šå®½åº¦ */
  height: 30px;
  /* å›ºå®šé«˜åº¦ */
  color: #333;
  /* å›¾æ ‡é¢œè‰² */
  position: relative;
  /* è®©æŒ‰é’®åœ¨åˆ†å‰²çº¿ä¹‹ä¸Š */
  z-index: 1;
}

/* --- 4. ç§»é™¤æ—§çš„ç‹¬ç«‹æŒ‰é’®æ ·å¼ï¼Œé¿å…å†²çª --- */
/* (å¯é€‰ï¼Œä½†æ¨è) æ‚¨å¯ä»¥æ‰¾åˆ°å¹¶åˆ é™¤ä¹‹å‰ä¸º #chat-add-attachment-button å†™çš„ç‹¬ç«‹æ ·å¼ */
#chat-add-attachment-button {
  /* å¦‚æœæ‚¨ä¹‹å‰ä¸ºè¿™ä¸ªæŒ‰é’®å†™è¿‡ç‹¬ç«‹çš„èƒŒæ™¯è‰²ã€é˜´å½±ç­‰æ ·å¼ï¼Œå¯ä»¥åœ¨è¿™é‡Œè¦†ç›–æ‰æˆ–ç›´æ¥åˆ é™¤æ—§è§„åˆ™ */
  background-color: transparent !important;
  box-shadow: none !important;
}

/* ========================================================== */
/* === æ–°å¢ï¼šè¯­éŸ³è¾“å…¥å¼¹å‡ºé¢æ¿çš„ CSS æ ·å¼ === */
/* ========================================================== */

/* --- 1. é®ç½©èƒŒæ™¯ --- */
.voice-panel-overlay {
  position: fixed;
  /* å›ºå®šå®šä½ï¼Œè¦†ç›–æ•´ä¸ªæµè§ˆå™¨çª—å£ */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.4);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
  /* ç¡®ä¿åœ¨æœ€é¡¶å±‚ */

  /* é»˜è®¤éšè— */
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s;
}

/* --- 2. é¢æ¿ä¸»ä½“ --- */
.voice-panel-content {
  background-color: #ffffff;
  border-radius: 16px;
  width: 320px;
  max-width: 90%;
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
  display: flex;
  flex-direction: column;

  /* å¼¹å‡ºåŠ¨ç”» */
  transform: scale(0.95);
  transition: transform 0.3s ease;
}

/* å½“é®ç½©æ˜¾ç¤ºæ—¶ï¼Œè§¦å‘é¢æ¿å’Œè‡ªèº«çš„åŠ¨ç”» */
.voice-panel-overlay.visible {
  opacity: 1;
  visibility: visible;
}

.voice-panel-overlay.visible .voice-panel-content {
  transform: scale(1);
}

/* --- 3. é¢æ¿å†…éƒ¨ä»¶ --- */
.voice-panel-header {
  padding: 20px;
  display: flex;
  justify-content: center;
}

#voice-transcript-preview {
  flex-grow: 1;
  min-height: 100px;
  padding: 0 20px;
  border: none;
  outline: none;
  resize: none;
  font-size: 16px;
  line-height: 1.6;
  color: #333;
  background-color: transparent;
}

.voice-panel-footer {
  display: flex;
  border-top: 1px solid #f0f0f0;
}

.voice-panel-button {
  flex: 1;
  padding: 15px;
  border: none;
  background: none;
  font-size: 16px;
  font-weight: 500;
  cursor: pointer;
  transition: background-color 0.2s;
}

.voice-panel-button.cancel {
  color: #8e8e93;
  border-right: 1px solid #f0f0f0;
}

.voice-panel-button.send {
  color: #007aff;
}

.voice-panel-button:active {
  background-color: #f5f5f5;
}

/* ========================================================== */
/* === æ–°å¢ï¼šä¸ºç§»åŠ¨ç«¯é•¿æŒ‰è®¾è®¡çš„ä¸“å±åŠ¨ç”»ç±» === */
/* ========================================================== */

/* === ç£¨ç ‚é«˜å…‰å¢å¼ºç‰ˆé¢æ¿ === */

:root {
  /* å‚è€ƒä½ æä¾›çš„æ–‡ä»¶ï¼šæ›´é«˜çš„ä¸é€æ˜åº¦(0.85)ä¸å¼ºåŠ›é¥±å’Œåº¦ */
  --glass-bg: rgba(255, 255, 255, 0.85);
  --glass-speed: 0.4s cubic-bezier(0.25, 1, 0.5, 1);
  --glass-shadow: 0 20px 50px -12px rgba(0, 0, 0, 0.15);
  --glass-highlight: inset 0 1px 0 rgba(255, 255, 255, 0.7); /* é¡¶éƒ¨ç¡¬é«˜å…‰ */
}

/* 1. é¢æ¿å®¹å™¨ï¼šä»åº•éƒ¨æ»‘å‡ºï¼ˆä¸è¡¨æƒ…é¢æ¿è¡Œä¸ºä¸€è‡´ï¼‰ */
.features-panel {
  position: absolute;
  left: 0;
  width: 100%;
  z-index: 15;

  /* é«˜åº¦å’Œä½ç½®ï¼šé»˜è®¤éšè—åœ¨åº•éƒ¨ */
  height: var(--features-panel-height);
  bottom: calc(var(--features-panel-height) * -1);

  /* å¸ƒå±€ï¼šæ°´å¹³æ»šåŠ¨å®¹å™¨ */
  display: flex;
  flex-direction: column;
  box-sizing: border-box;
  padding: 1px 0 24px 0;
  overflow: hidden;

  /* è§†è§‰é£æ ¼ï¼šåšå®çš„ç£¨ç ‚è´¨æ„Ÿ */
  background-color: rgba(255, 255, 255, 1);
  /* border-top: 1px solid rgba(0, 0, 0, 0.06); */
  box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);

  /* é»˜è®¤çŠ¶æ€ä¸‹ä¸å¯è§ */
  visibility: hidden;

  /* â–¼â–¼â–¼ æ ¸å¿ƒï¼šç»Ÿä¸€çš„åŠ¨ç”»æ›²çº¿ï¼Œä¸åº•æ å®Œå…¨åŒæ­¥ â–¼â–¼â–¼ */
  transition: bottom 0.35s cubic-bezier(0.32, 0.72, 0, 1),
    visibility 0s linear 0.35s;
}

/* æ¿€æ´»çŠ¶æ€ï¼šé¢æ¿æ»‘ä¸Šæ¥ */
#chat-screen.features-panel-active .features-panel {
  bottom: 0;
  visibility: visible;
  transition-delay: 0s;
}

/* 2. ç½‘æ ¼å®¹å™¨ï¼šæ°´å¹³æ»šåŠ¨çš„åˆ†é¡µå¸ƒå±€ */
.features-grid {
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  overflow-y: hidden;
  /* scroll-snap-type: x mandatory; ç¦ç”¨åŸç”Ÿå¸é™„ï¼Œæ”¹ç”¨JSæ§åˆ¶çµæ•åº¦ */
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
  flex-grow: 1;

  /* éšè—æ»šåŠ¨æ¡ */
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.features-grid::-webkit-scrollbar {
  display: none;
}

/* 3. æ¯ä¸€é¡µå®¹å™¨ */
.features-page {
  flex: 0 0 100%;
  width: 100%;
  min-width: 100%;
  scroll-snap-align: start;

  display: grid;
  grid-template-columns: repeat(4, 1fr);
  grid-template-rows: repeat(2, 1fr);
  /* gap: 12px 8px; */
  padding: 8px 16px;
  box-sizing: border-box;
  align-content: center;
}

/* 4. åˆ†é¡µæŒ‡ç¤ºå™¨ï¼ˆå°åœ†ç‚¹ï¼‰ */
.features-page-indicator {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 6px;
  padding: 8px 0 0 0;
  flex-shrink: 0;
}

.features-page-indicator .dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background-color: rgba(0, 0, 0, 0.15);
  transition: all 0.25s ease;
}

.features-page-indicator .dot.active {
  width: 8px;
  height: 8px;
  background-color: rgba(0, 0, 0, 0.5);
}

/* 5. åŠŸèƒ½é¡¹ */
.feature-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  -webkit-tap-highlight-color: transparent;
}

/* 4. å›¾æ ‡å®¹å™¨ï¼šå®å¿ƒæ„Ÿï¼ˆSolidï¼‰+ ç‰©ç†å¾®å‹æ„Ÿ */
.feature-icon {
  width: 45px;
  height: 45px;
  border-radius: 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 8px;

  /* æµ…ç°è‰²èƒŒæ™¯ï¼Œå¸¦ä¸€ç‚¹ç‚¹å‘ä¸‹çš„å†…é˜´å½± */
  background: rgba(0, 0, 0, 0.04);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.02);

  transition: all 0.2s ease;
}

/* 5. çº¯è‰²å¡«å……å›¾æ ‡ (æ—  Stroke) */
.feature-icon svg {
  width: 22px;
  height: 22px;

  stroke: none;
}

/* 6. æ–‡å­—ï¼šå‚è€ƒæ–‡ä»¶ä¸­çš„å­—ä½“æ’ç‰ˆ */
.feature-name {
  font-size: 11px;
  color: #1d1d1f;
  font-weight: 500;
  letter-spacing: -0.2px;
  opacity: 0.8;
}

/* --- äº¤äº’æ•ˆæœï¼šç‚¹å‡»æ—¶çš„æ·±è‰²å›é¦ˆ --- */
.feature-item:active .feature-icon {
  transform: scale(0.9);
  background: rgba(0, 0, 0, 0.08);
}

/* --- æ·±è‰²æ¨¡å¼é€‚é… (æŒ‰ä½ æ–‡ä»¶é£æ ¼åŒæ­¥) --- */
@media (prefers-color-scheme: dark) {
  .features-panel {
    background: rgba(28, 28, 30, 0.8) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
  }

  .feature-icon {
    background: rgba(255, 255, 255, 0.1);
  }

  .feature-icon svg {
    fill: #ffffff;
  }

  .feature-name {
    color: #ffffff;
  }
}

/* æ–°å¢ï¼šå›æ‰§æŒ‰é’®æ‚¬æµ®æ ·å¼ */
/* === (ä¿®æ”¹) å›æ‰§åŠŸèƒ½ï¼šå·¦ä¾§å¸é™„ç«–æ¡æ ·å¼ === */
#receipt-feature {
  /* 1. å®šä½ï¼šå¸é™„åœ¨å·¦ä¾§å‚ç›´å±…ä¸­ */
  position: absolute;
  left: 0;
  top: 80%;
  transform: translateY(-50%);
  /* å‚ç›´å±…ä¸­ä¿®æ­£ */

  /* 2. å°ºå¯¸ï¼šç«–é•¿çš„é•¿æ–¹æ¡ */
  width: 18px;
  /* å®½åº¦çª„ä¸€ç‚¹ï¼Œä¸æŒ¡è§†çº¿ */
  height: 30px;
  /* é«˜åº¦æ‹‰é•¿ */

  /* 3. å½¢çŠ¶ï¼šå·¦ä¾§ç›´è§’ï¼Œå³ä¾§åœ†è§’ (çœ‹èµ·æ¥åƒä»è¾¹ç¼˜ä¼¸å‡ºæ¥çš„æ ‡ç­¾) */
  border-radius: 0 12px 12px 0;

  /* 4. è§†è§‰æ•ˆæœï¼šæ¯›ç»ç’ƒè´¨æ„Ÿ */
  background-color: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(0, 0, 0, 0.05);
  border-left: none;
  /* è´´è¾¹çš„éƒ¨åˆ†ä¸éœ€è¦è¾¹æ¡† */
  box-shadow: 2px 0 8px rgba(0, 0, 0, 0.1);

  /* 5. å¸ƒå±€ï¼šè®©å›¾æ ‡å±…ä¸­ */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 90;
  /* ç¡®ä¿åœ¨æ¶ˆæ¯ä¹‹ä¸‹ï¼Œä½†åœ¨èƒŒæ™¯ä¹‹ä¸Šï¼Œæˆ–è€…æ ¹æ®éœ€è¦è°ƒæ•´ */

  /* 6. åŠ¨ç”»ï¼šå¹³æ»‘è¿‡æ¸¡ */
  transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* æ‚¬åœ/ç‚¹å‡»æ•ˆæœï¼šç¨å¾®å˜å®½ï¼Œé¢œè‰²å˜æ·± */
#receipt-feature:hover {
  width: 32px;
  /* é¼ æ ‡æ”¾ä¸Šå»å˜å®½ä¸€ç‚¹ï¼Œæ–¹ä¾¿ç‚¹å‡» */
  background-color: rgba(255, 255, 255, 0.95);
  box-shadow: 4px 0 12px rgba(0, 0, 0, 0.15);
}

/* ç‚¹å‡»æ—¶çš„åé¦ˆ */
#receipt-feature:active {
  transform: translateY(-50%) scale(0.95);
  /* ä¿æŒå‚ç›´å±…ä¸­çš„åŒæ—¶è½»å¾®ç¼©æ”¾ */
}

/* éšè—æ–‡å­—æ ‡ç­¾ (å› ä¸ºç«–æ¡å¾ˆçª„ï¼Œæ”¾æ–‡å­—ä¸å¥½çœ‹ï¼Œåªç•™å›¾æ ‡) */
#receipt-feature .feature-name {
  display: none;
}

/* === æ–°å¢ï¼šå›¾æ ‡åŒ…é¢„è®¾é¡µé¢çš„åŠ¨ç”»æ§åˆ¶ === */

/* é»˜è®¤çŠ¶æ€ï¼šé¢„è®¾é¡µå®Œå…¨é€æ˜ï¼Œä¸”æ— æ³•äº¤äº’ */
#preset-management-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 2;
  /* å±‚çº§ä»‹äºç¾åŒ–ä¸»é¡µå’Œæ›´æ¢å›¾æ ‡é¡µä¹‹é—´ */
}

/* å½“ .phone-frame æ‹¥æœ‰ .show-presets ç±»åæ—¶ */
.phone-frame.show-presets #beautify-screen {
  opacity: 0;
  /* éšè—ç¾åŒ–ç•Œé¢ */
  pointer-events: none;
}

.phone-frame.show-presets #preset-management-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 3;
  /* é¢„è®¾é¡µæµ®ä¸Šæ¥ */
}

/* === æ–°å¢ï¼šé¢„è®¾åˆ—è¡¨é¡¹çš„æ ·å¼ === */
.preset-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 12px;
  background-color: #f7f7f7;
  border-radius: 10px;
  margin-bottom: 10px;
  box-sizing: border-box;
}

.preset-name {
  font-size: 16px;
  font-weight: 500;
}

.apply-preset-btn,
.delete-preset-btn {
  padding: 5px 12px;
  font-size: 13px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
}

.apply-preset-btn {
  background-color: rgba(0, 122, 255, 0.1);
  color: #007aff;
}

.delete-preset-btn {
  background-color: rgba(255, 59, 48, 0.1);
  color: #ff3b30;
}

/* === æ–°å¢ï¼šä¸ºå¯¼å‡ºæŒ‰é’®æ·»åŠ æ ·å¼ === */
.export-preset-btn {
  padding: 5px 12px;
  font-size: 13px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
  background-color: rgba(88, 86, 214, 0.1);
  /* ä½¿ç”¨ä¸€ä¸ªä¸åŒçš„é¢œè‰²ä»¥åŒºåˆ† */
  color: #5856d6;
}

/* === æ–°å¢ï¼šç­¾åç¾åŒ–é¡µé¢çš„åŠ¨ç”»æ§åˆ¶ === */
#motto-settings-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 4;
  /* å±‚çº§é«˜äºé¢„è®¾é¡µ */
}

.phone-frame.show-motto-settings #beautify-screen {
  opacity: 0;
  pointer-events: none;
}

.phone-frame.show-motto-settings #motto-settings-screen {
  opacity: 1;
  pointer-events: auto;
}

/* === æ–°å¢ï¼šå›¾æ ‡åç§°ç¾åŒ–é¡µé¢çš„åŠ¨ç”»æ§åˆ¶ === */
#appname-settings-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 4;
  /* å±‚çº§é«˜äºé¢„è®¾é¡µ */
}

.phone-frame.show-appname-settings #beautify-screen {
  opacity: 0;
  pointer-events: none;
}

.phone-frame.show-appname-settings #appname-settings-screen {
  opacity: 1;
  pointer-events: auto;
}

/* === æ–°å¢ï¼šç»Ÿä¸€çš„ã€ç±»ä¼¼æ—¶é’Ÿçš„å¡ç‰‡å¼é«˜æ–¯æ¨¡ç³Šæ•ˆæœ (æœ€ç»ˆç‰ˆ) === */

/* 1. ç­¾åæ¨¡ç³Šæ•ˆæœ (æ–°ç‰ˆ) */
#motto.motto-blur-enabled {
  /* æ¨¡ä»¿æ—¶é’Ÿçš„æ ·å¼ */
  background-color: rgba(255, 255, 255, 0.15);
  -webkit-backdrop-filter: blur(15px);
  backdrop-filter: blur(15px);
  border-radius: 25px;
  /* å¢å¤§åœ†è§’ï¼Œæ›´åƒèƒ¶å›Š */
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

/* 2. å›¾æ ‡åç§°æ¨¡ç³Šæ•ˆæœ (æ–°ç‰ˆ) */
.app-name.app-name-blur-enabled {
  display: inline-block;
  /* ä¿æŒï¼Œå¯¹äºspanå…ƒç´ æ˜¯å¿…é¡»çš„ */
  /* æ¨¡ä»¿æ—¶é’Ÿçš„æ ·å¼ï¼Œä½†å°ºå¯¸ç¨ä½œè°ƒæ•´ä»¥é€‚åº”å°å­—ä½“ */
  background-color: rgba(255, 255, 255, 0.2);
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
  padding: 1px 6px;
  /* è°ƒæ•´ä¸ºé€‚åˆå°å­—ä½“çš„å†…è¾¹è· */
  border-radius: 12px;
  /* åˆé€‚çš„åœ†è§’ */
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  text-shadow: none;
  /* ä¿æŒï¼Œç§»é™¤æ–‡å­—é˜´å½± */
}

/* 3. å¤œé—´æ¨¡å¼é€‚é… (æ–°ç‰ˆ) */
.phone-frame.dark-mode #motto.motto-blur-enabled,
.phone-frame.dark-mode .app-name.app-name-blur-enabled {
  background-color: rgba(0, 0, 0, 0.3);
  /* å¤œé—´æ¨¡å¼ç»Ÿä¸€ä½¿ç”¨åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
  border-color: rgba(255, 255, 255, 0.15);
  /* è¾¹æ¡†ç»Ÿä¸€æ”¹ä¸ºåŠé€æ˜ç™½è‰² */
}

/* === (æ–°å¢) ç”¨äºæ˜¾ç¤ºç”¨æˆ·ä¸Šä¼ å›¾ç‰‡çš„æ°”æ³¡æ ·å¼ === */
.image-bubble {
  padding: 0;
  /* ç§»é™¤å†…è¾¹è·ï¼Œè®©å›¾ç‰‡å¡«æ»¡æ°”æ³¡ */
  background-color: transparent;
  /* ç§»é™¤èƒŒæ™¯è‰² */
  max-width: 180px;
  /* é™åˆ¶å›¾ç‰‡æœ€å¤§å®½åº¦ */
  max-height: 240px;
  /* é™åˆ¶å›¾ç‰‡æœ€å¤§é«˜åº¦ */
  border-radius: 12px;
  /* ç»™å›¾ç‰‡åŠ ä¸ªåœ†è§’ */
  overflow: hidden;
  /* ç¡®ä¿å›¾ç‰‡ä¸ä¼šè¶…å‡ºåœ†è§’èŒƒå›´ */
}

/* ç¡®ä¿å›¾ç‰‡æœ¬èº«èƒ½æ­£ç¡®æ˜¾ç¤º */
.image-bubble img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  /* ç¡®ä¿å›¾ç‰‡å†…å®¹å¡«æ»¡å®¹å™¨è€Œä¸å˜å½¢ */
  display: block;
  /* ç§»é™¤å›¾ç‰‡ä¸‹æ–¹çš„ç©ºéš™ */
}

/* === æ–°å¢ï¼šå›¾ç‰‡é¢„è§ˆåŠŸèƒ½çš„CSSæ ·å¼ === */

/* 1. é¢„è§ˆå¼¹çª—çš„é®ç½©èƒŒæ™¯ (å¤ç”¨å·²æœ‰æ ·å¼ï¼Œä½†ç¡®ä¿å®ƒåœ¨èŠå¤©ç•Œé¢ä¹‹ä¸Š) */
#image-preview-modal {
  /* ä½¿ç”¨ç»å¯¹å®šä½ï¼Œä½¿å…¶åœ¨ phone-frame å†…éƒ¨å…¨å± */
  position: absolute;
  z-index: 1001;
  /* å±‚çº§è¦æ¯”èŠå¤©ç•Œé¢é«˜ */
  background-color: rgba(0, 0, 0, 0.75);
  /* èƒŒæ™¯å¯ä»¥æ›´æš—ä¸€äº›ä»¥çªå‡ºå›¾ç‰‡ */
}

/* 2. é¢„è§ˆçš„å›¾ç‰‡æœ¬èº« */
#preview-image-element {
  max-width: 90%;
  /* æœ€å¤§å®½åº¦ä¸ºå±å¹•çš„90% */
  max-height: 80%;
  /* æœ€å¤§é«˜åº¦ä¸ºå±å¹•çš„80% */
  object-fit: contain;
  /* ç¡®ä¿å›¾ç‰‡å®Œæ•´æ˜¾ç¤ºä¸è¢«è£å‰ª */
  border-radius: 8px;
  /* ç»™é¢„è§ˆå›¾ä¹ŸåŠ ä¸ªå°åœ†è§’ */
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  /* åŠ¨ç”»æ•ˆæœï¼šå‡ºç°æ—¶æœ‰ä¸€ä¸ªè½»å¾®çš„æ”¾å¤§åŠ¨ç”» */
  transform: scale(0.95);
  opacity: 0;
  transition: transform 0.3s ease, opacity 0.3s ease;
}

/* 3. å…³é—­æŒ‰é’® */
#image-preview-close-btn {
  position: absolute;
  top: 20px;
  right: 20px;
  font-size: 36px;
  color: white;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
  cursor: pointer;
  z-index: 1002;
  display: none;
}

/* --- 1. æŒ‰é’®å’Œå±å¹•çš„é€šç”¨æ§åˆ¶ --- */

#voice-call-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 5;
  /* æ ¸å¿ƒä¿®å¤ï¼šæ·»åŠ åŠé€æ˜èƒŒæ™¯å’Œé«˜æ–¯æ¨¡ç³Šæ•ˆæœ */
  background-color: rgba(0, 0, 0, 0.25);
  /* åŠé€æ˜æ·±è‰²èƒŒæ™¯ï¼Œè®©ç™½è‰²æ–‡å­—æ›´æ¸…æ™° */
  -webkit-backdrop-filter: blur(20px);
  /* å…¼å®¹ Safari */
  backdrop-filter: blur(20px);
  /* æ ‡å‡†è¯­æ³• */
}

.phone-frame.show-voice-call #voice-call-screen {
  opacity: 1;
  pointer-events: auto;
}

.call-background {
  position: absolute;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  filter: blur(20px) brightness(0.7);
  transform: scale(1.1);
}

/* --- 2. å‘¼å«ä¸­/å·²è¿æ¥ çŠ¶æ€å®¹å™¨ --- */
.call-state-container {
  position: absolute;
  width: 100%;
  height: 100%;
  display: none;
  /* JSæ§åˆ¶æ˜¾ç¤º */
  flex-direction: column;
  align-items: center;
  padding: 60px 20px;
  box-sizing: border-box;
  transition: opacity 0.3s ease-in-out;
}

.call-state-container.active {
  display: flex;
}

/* --- 3. â€œæ­£åœ¨å‘¼å«â€ç•Œé¢çš„å…ƒç´  --- */
#calling-state {
  padding-top: 100px;
}

.call-avatar {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background-color: #d9d9d9;
  background-size: cover;
  background-position: center;
  box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.3);
}

.call-name {
  margin-top: 20px;
  color: white;
  font-size: 24px;
  font-weight: 500;
  text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

.call-status {
  margin-top: 8px;
  color: white;
  font-size: 16px;
  opacity: 0.8;
}

.call-hang-up-button {
  position: absolute;
  bottom: 80px;
  width: 70px;
  height: 70px;
  background-color: #ff3b30;
  border-radius: 50%;
  border: none;
  cursor: pointer;
}

/* --- 4. â€œå·²è¿æ¥â€ç•Œé¢çš„å…ƒç´  --- */
.connected-header {
  width: 100%;
  text-align: center;
  margin-bottom: 40px;
}

.call-name.small {
  font-size: 30px;
  margin-top: 0;
}

#ai-speech-bubble-container {
  /* ç§»é™¤äº† flex-grow: 1ï¼Œè®©å®ƒä¸å†ä¼¸å±•ï¼Œè€Œæ˜¯ç´§è·Ÿåœ¨å¤´éƒ¨ä¸‹æ–¹ */

  /* æ–°å¢ï¼šè®©å¤šä¸ªæ°”æ³¡å¯ä»¥å‚ç›´æ’åˆ— */
  display: flex;
  flex-direction: column;
  align-items: center;
  /* è®©æ°”æ³¡åœ¨å®¹å™¨å†…æ°´å¹³å±…ä¸­ */
  gap: 10px;
  /* å¤šä¸ªæ°”æ³¡ä¹‹é—´çš„å‚ç›´é—´è· */

  width: 100%;
  margin-top: 20px;
  /* ä¿®æ”¹ï¼šæ°”æ³¡ä¸ä¸Šæ–¹è®¡æ—¶å™¨çš„é—´è·ï¼Œæ‚¨å¯ä»¥æŒ‰éœ€è°ƒæ•´è¿™ä¸ªå€¼ */
}

.ai-speech-bubble {
  position: relative;
  background-color: rgba(255, 255, 255, 0.9);
  color: #1c1c1e;
  padding: 12px 18px;
  border-radius: 20px;
  max-width: 80%;
  font-size: 16px;
  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
  opacity: 0;
  transition: opacity 0.3s ease;
}

/* è¿™é‡Œçš„å°ä¸‰è§’æ ·å¼æ˜¯é”™è¯¯çš„ï¼Œä¼šå¯¼è‡´å®ƒè·‘åˆ°å±å¹•é¡¶éƒ¨ï¼Œéœ€è¦ä¿®æ­£ */
.ai-speech-bubble.first-bubble::after {
  /* å°ä¸‰è§’ */
  content: "";
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  border-width: 0 8px 8px;
  border-style: solid;
  border-color: transparent transparent rgba(255, 255, 255, 0.9);
}

.connected-footer {
  position: absolute;
  bottom: 80px;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-around;
  width: 70%;
  margin: 0 auto;
}

.call-control-button {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  background-repeat: no-repeat;
  background-position: center;
}

/* --- æŒ‰é’®é€šç”¨æ ·å¼ --- */
.call-control-button {
  width: 70px;
  height: 70px;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  /* æ–°å¢ï¼šè®©å†…éƒ¨çš„SVGå›¾æ ‡å±…ä¸­ */
  display: flex;
  justify-content: center;
  align-items: center;
}

/* --- æ–°å¢ï¼šæ§åˆ¶æ‰€æœ‰æŒ‰é’®å†…SVGçš„æ ·å¼ --- */
.call-control-button svg {
  width: 32px;
  /* æ§åˆ¶å›¾æ ‡å®½åº¦ */
  height: 32px;
  /* æ§åˆ¶å›¾æ ‡é«˜åº¦ */
}

/* --- æŒ‚æ–­æŒ‰é’®ï¼šåªä¿ç•™èƒŒæ™¯è‰² --- */
.call-control-button.hang-up {
  background-color: #ff3b30;
  /* background-image å±æ€§å·²è¢«åˆ é™¤ */
}

/* --- è¯´è¯æŒ‰é’®ï¼šåªä¿ç•™èƒŒæ™¯è‰² --- */
.call-control-button.speak {
  background-color: #34c759;
  /* background-image å±æ€§å·²è¢«åˆ é™¤ */
}

/* === æ–°å¢ï¼šâ€œæ­£åœ¨è¾“å…¥â€åŠ¨ç”»çš„ä¸“å±æ ·å¼ === */
.typing-indicator-bubble {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 18px 20px !important;
  /* ä½¿ç”¨ !important ç¡®ä¿è¦†ç›–åŸæœ‰padding */
}

.typing-indicator-bubble .typing-dot {
  width: 6px;
  height: 6px;
  margin: 0 3px;
  background-color: #8e8e93;
  /* ç‚¹çš„é¢œè‰² */
  border-radius: 50%;
  animation: typing-bounce 1.2s infinite ease-in-out;
}

.typing-indicator-bubble .typing-dot:nth-child(2) {
  animation-delay: 0.15s;
}

.typing-indicator-bubble .typing-dot:nth-child(3) {
  animation-delay: 0.3s;
}

/* === START: é€šè¯æ‘˜è¦åŠŸèƒ½ä¸“å±CSS === */

/* --- 1. ç•Œé¢åˆ‡æ¢åŠ¨ç”» --- */
#summary-list-screen,
#summary-detail-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 6;
  /* å±‚çº§é«˜äºé€šè¯ç•Œé¢ */
  background-color: #f0f2f5;
}

/* â–¼â–¼â–¼ åœ¨è¿™é‡Œç²˜è´´æ–°çš„ä»£ç  â–¼â–¼â–¼ */
#summary-list-screen .settings-content,
#summary-detail-screen .settings-content {
  padding: 90px 15px 15px 15px;
  /* é¡¶éƒ¨ç•™å‡º90pxç»™æ ‡é¢˜æ  */
  height: 100%;
  /* é«˜åº¦å æ»¡çˆ¶å®¹å™¨ */
  overflow-y: auto;
  /* æ ¸å¿ƒï¼šå†…å®¹è¶…å‡ºæ—¶ï¼Œå‚ç›´æ»šåŠ¨ */
  box-sizing: border-box;
  /* ç¡®ä¿å†…è¾¹è·ä¸ä¼šå½±å“é«˜åº¦è®¡ç®— */
}

/* â–²â–²â–² ç²˜è´´åˆ°è¿™é‡Œç»“æŸ â–²â–²â–² */

.phone-frame.show-summary-list #summary-list-screen,
.phone-frame.show-summary-detail #summary-detail-screen {
  opacity: 1;
  pointer-events: auto;
}

.phone-frame.show-summary-detail #chat-screen {
  opacity: 0;
  /* ä»è¯¦æƒ…é¡µè¿”å›æ—¶ï¼Œç¡®ä¿èŠå¤©é¡µå¯è§ */
}

/* --- 2. æ‘˜è¦åˆ—è¡¨å¡ç‰‡æ ·å¼ --- */
/* â–¼â–¼â–¼ ç”¨è¿™æ®µæ–°ä»£ç ï¼Œæ›¿æ¢æ‰€æœ‰æ—§çš„ .summary-card ç›¸å…³æ ·å¼ â–¼â–¼â–¼ */

/* --- 1. æ‘˜è¦å¡ç‰‡ä¸»å®¹å™¨ --- */
.summary-card {
  background-color: #ffffff;
  border-radius: 12px;
  /* æ›´æŸ”å’Œçš„åœ†è§’ */
  padding: 16px;
  margin-bottom: 15px;
  /* å¡ç‰‡ä¹‹é—´çš„é—´è· */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  /* æ›´ç²¾è‡´çš„é˜´å½± */
  cursor: pointer;
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
  border: 1px solid rgba(0, 0, 0, 0.05);
  /* æ·»åŠ ä¸€ä¸ªææ·¡çš„è¾¹æ¡†å¢åŠ è´¨æ„Ÿ */
}

/* é¼ æ ‡æ‚¬æµ®æ—¶ï¼Œå¡ç‰‡è½»å¾®ä¸Šæµ®ï¼Œé˜´å½±åŠ æ·±ï¼Œç»™ç”¨æˆ·è§†è§‰åé¦ˆ */
.summary-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
}

/* --- 2. å¡ç‰‡å¤´éƒ¨ï¼šåŒ…å«æ ‡é¢˜å’Œæ—¶é—´ --- */
.summary-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
  padding-bottom: 8px;
  border-bottom: 1px solid #f0f0f0;
  /* é¡¶éƒ¨çš„åˆ†å‰²çº¿ */
}

.summary-card-title {
  font-size: 16px;
  font-weight: 600;
  /* æ ‡é¢˜åŠ ç²— */
  color: #1c1c1e;
}

.summary-card-timestamp {
  font-size: 12px;
  color: #8a8a8e;
  /* æ—¶é—´ç”¨æŸ”å’Œçš„ç°è‰² */
}

/* --- 3. å¡ç‰‡å†…å®¹é¢„è§ˆåŒº --- */
.summary-card-snippet {
  font-size: 14px;
  color: #3c3c43;
  /* æ­£æ–‡é¢œè‰²ç¨æ·±ä¸€äº› */
  line-height: 1.5;
  /* å¢åŠ è¡Œé«˜ï¼Œæ›´æ˜“è¯» */

  /* æ ¸å¿ƒï¼šå®ç°æœ€å¤šæ˜¾ç¤ºä¸¤è¡Œï¼Œè¶…å‡ºéƒ¨åˆ†æ˜¾ç¤ºçœç•¥å· */
  display: -webkit-box;
  line-clamp: 2;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* â–²â–²â–² æ›¿æ¢åˆ°è¿™é‡Œç»“æŸ â–²â–²â–² */
/* â–¼â–¼â–¼ ç”¨è¿™æ®µæ–°ä»£ç ï¼Œæ›¿æ¢æ—§çš„ #summary-detail-container æ ·å¼ â–¼â–¼â–¼ */
#summary-detail-container {
  background-color: #ffffff;
  border-radius: 12px;
  /* ä¸åˆ—è¡¨å¡ç‰‡ä¿æŒä¸€è‡´çš„åœ†è§’ */
  padding: 20px;
  /* å¢åŠ å†…è¾¹è·ï¼Œè®©æ–‡å­—æœ‰å‘¼å¸æ„Ÿ */
  font-size: 15px;
  line-height: 1.8;
  /* å¢å¤§è¡Œé«˜ï¼Œå¤§å¹…æå‡é•¿æ–‡æ¡ˆçš„å¯è¯»æ€§ */
  color: #1c1c1e;
  white-space: pre-wrap;
  /* ä¿æŒï¼Œç”¨äºæ­£ç¡®æ˜¾ç¤ºæ¢è¡Œ */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  /* æ·»åŠ è½»å¾®é˜´å½± */
}

/* (å¯é€‰) è®©è¯¦æƒ…é¡µé‡ŒåŠ ç²—çš„äººåæ›´å¥½çœ‹ */
#summary-detail-container strong {
  font-weight: 600;
  color: #007aff;
  /* æ¯”å¦‚ç»™ä¸ªä¸»é¢˜è“ */
}

/* â–²â–²â–² æ›¿æ¢åˆ°è¿™é‡Œç»“æŸ â–²â–²â–² */

.phone-frame.dark-mode #summary-list-screen,
.phone-frame.dark-mode #summary-detail-screen,
.phone-frame.dark-mode .summary-card,
.phone-frame.dark-mode #summary-detail-container {
  background-color: #1c1c1e;
  color: #f5f5f7;
  border-color: #3a3a3c;
}

.phone-frame.dark-mode .summary-card-title,
.phone-frame.dark-mode .summary-card-snippet {
  color: #f5f5f7;
}

.phone-frame.dark-mode .summary-card-timestamp {
  color: #8e8e93;
}

/* === END: é€šè¯æ‘˜è¦åŠŸèƒ½ä¸“å±CSS === */

/* === END: è¯­éŸ³é€šè¯åŠŸèƒ½ä¸“å±CSS (V2 - å®Œæ•´ç‰ˆ) === */

/* === (æ–°å¢) â€œè¶£å‘³æ™ƒåŠ¨â€åŠ¨ç”»çš„å…³é”®å¸§å®šä¹‰ === */
@keyframes fun-wobble {
  0% {
    transform: rotate(0deg);
  }

  25% {
    transform: rotate(-8deg);
  }

  50% {
    transform: rotate(8deg);
  }

  75% {
    transform: rotate(-4deg);
  }

  100% {
    transform: rotate(0deg);
  }
}

/* === START: AIæ¥ç”µåŠŸèƒ½ä¸“å±CSS === */

/* --- 1. â€œè¯·æ±‚æ¥ç”µâ€æŒ‰é’®çš„ä¸“å±é¢œè‰² --- */
#request-call-feature .feature-icon {
  background-color: rgba(255, 45, 85, 0.15);
  /* æ·¡çº¢è‰²èƒŒæ™¯ */
}

#request-call-feature .feature-icon svg path {
  fill: #ff2d55;
  /* é†’ç›®çš„çº¢è‰²å›¾æ ‡ */
}

/* --- 2. æ¥ç”µç•Œé¢çš„æ˜¾ç¤º/éšè—æ§åˆ¶ --- */
#incoming-call-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 7;
  /* å±‚çº§é«˜äºé€šè¯æ‘˜è¦ç­‰ç•Œé¢ */
  /* å¤ç”¨é€šè¯ç•Œé¢çš„é«˜æ–¯æ¨¡ç³ŠèƒŒæ™¯ */
  background-color: rgba(0, 0, 0, 0.25);
  -webkit-backdrop-filter: blur(20px);
  backdrop-filter: blur(20px);
}

.phone-frame.show-incoming-call #incoming-call-screen {
  opacity: 1;
  pointer-events: auto;
}

/* --- 3. æ¥ç”µç•Œé¢åº•éƒ¨çš„æŒ‰é’®å¸ƒå±€ --- */
.incoming-call-footer {
  position: absolute;
  bottom: 80px;
  left: 0;
  right: 0;
  display: flex;
  justify-content: space-around;
  width: 80%;
  margin: 0 auto;
}

.call-action {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  /* æŒ‰é’®å’Œæ–‡å­—çš„é—´è· */
  color: white;
  font-size: 14px;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
}

/* === (æ–°å¢) æ¥ç”µåŸå› æ–‡æœ¬çš„æ ·å¼ === */
#incoming-call-reason {
  margin-top: 15px;
  /* ä¸ä¸Šæ–¹çš„â€œæ­£åœ¨å‘¼å«æ‚¨â€æ‹‰å¼€è·ç¦» */
  font-size: 18px;
  /* å­—ä½“å¯ä»¥ç¨å¾®å¤§ä¸€ç‚¹ */
  font-weight: 500;
  max-width: 80%;
  /* é˜²æ­¢æ–‡æœ¬è¿‡é•¿è€Œæ¢è¡Œ */
  text-align: center;
  opacity: 0.9;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode #appointment-feature .feature-icon {
  background-color: rgba(231, 89, 153, 0.2);
}

.phone-frame.dark-mode #appointment-feature .feature-icon svg {
  stroke: #e96fa9;
}

.phone-frame.dark-mode #dating-history-feature .feature-icon {
  background-color: rgba(166, 125, 48, 0.2);
}

.phone-frame.dark-mode #dating-history-feature .feature-icon svg {
  stroke: #b58e45;
}

/* === (æ–°å¢) çº¦ä¼šåŠŸèƒ½ä¸“å± CSS (ç²¾ç¾é£æ ¼ç‰ˆ) === */

/* 1. æ€»å®¹å™¨ï¼šåº”ç”¨æ–°å­—ä½“ */
#dating-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 5;
  background-color: #ffffff;
  transition: opacity 0.25s ease-in-out;
  font-family: "Noto Serif SC", serif;
  /* åº”ç”¨æˆ‘ä»¬æ–°å¼•å…¥çš„å­—ä½“ */
}

.phone-frame.show-dating #dating-screen {
  opacity: 1;
  pointer-events: auto;
}

/* 2. åŠ è½½åŠ¨ç”»æ ·å¼ (ä¿æŒä¸å˜) */
.dating-loader {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: #ffffff;
  display: flex;
  justify-content: center;
  align-items: center;
  color: #a67d30;
  font-size: 18px;
  z-index: 10;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.25s ease-in-out;
}

.dating-loader.visible {
  opacity: 1;
  pointer-events: auto;
}

/* 3. å¼•å¯¼è®¾ç½®ç•Œé¢çš„å…¨æ–°æ ·å¼ */
.dating-setup-container {
  width: 100%;
  height: 100%;
  padding: 40px 20px;
  padding-top: max(50px, env(safe-area-inset-top) + 10px); /* å¢åŠ é¡¶éƒ¨é—´è·é¿å…è¢«çŠ¶æ€æ é®æŒ¡ */
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  /* æ ¸å¿ƒä¿®æ”¹ï¼šä½¿ç”¨ä¼˜é›…çš„æ¸å˜èƒŒæ™¯æ›¿ä»£çº¯ç™½ */
  background: linear-gradient(180deg, #fdfbf8 0%, #f5f1ea 100%);
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.5s ease-in-out;
}

.dating-setup-container.visible {
  opacity: 1;
  pointer-events: auto;
}

/* æ ‡é¢˜æ ·å¼ */
.dating-setup-container h2 {
  color: #a67d30;
  font-weight: 700;
  /* å­—ä½“åŠ ç²— */
  font-size: 24px;
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
  /* æ·»åŠ ç»†å¾®æ–‡å­—é˜´å½± */
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(166, 125, 48, 0.3);
  /* æ·»åŠ è£…é¥°æ€§ä¸‹åˆ’çº¿ */
  margin: 0 0 15px 0;
}

/* ä¸Šä¼ åŒºåŸŸçš„é€šç”¨æ ·å¼ */
.setup-section {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.setup-section label {
  font-size: 14px;
  color: #5d4a27;
  /* æ›´æ·±ã€æ›´æ­é…çš„æ£•è‰² */
}

/* ä¸Šä¼ æ¡†çš„å…¨æ–°â€œç”»æ¡†â€æ ·å¼ */
.upload-box {
  width: 90%;
  height: 100px;
  border: 1px solid rgba(166, 125, 48, 0.4);
  /* é‡‘è‰²è¾¹æ¡† */
  border-radius: 8px;
  background-color: rgba(255, 255, 255, 0.5);
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
  /* æ·»åŠ å†…é˜´å½±å¢åŠ æ·±åº¦æ„Ÿ */
  color: #a67d30;
  font-size: 16px;
  transition: background-color 0.3s, box-shadow 0.3s;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  background-size: contain;
  background-position: center;
}

.upload-box:hover {
  background-color: rgba(255, 248, 237, 0.8);
  /* é¼ æ ‡æ‚¬æµ®æ—¶æ·»åŠ å¤–å‘å…‰æ•ˆæœ */
  box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.1),
    0 0 10px rgba(166, 125, 48, 0.2);
}

/* åº•éƒ¨æŒ‰é’®çš„å…¨æ–°æ ·å¼ */
#start-dating-btn {
  width: 80%;
  margin-top: 15px;
  /* ä¸ä¸Šæ–¹å…ƒç´ æ‹‰å¼€è·ç¦» */
  padding: 12px;
  font-size: 16px;
  font-weight: 700;
  color: #ffffff;
  font-family: "Noto Serif SC", serif;
  /* ç¡®ä¿æŒ‰é’®ä¹Ÿä½¿ç”¨æ–°å­—ä½“ */
  text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
  background: linear-gradient(145deg, #c8a25d, #a67d30);
  /* é‡‘è‰²æ¸å˜ */
  border: 1px solid #8e6a23;
  /* æ·±é‡‘è‰²è¾¹æ¡† */
  border-radius: 8px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  cursor: pointer;
  transition: all 0.3s ease;
}

#start-dating-btn:hover {
  background: linear-gradient(145deg, #d4af6e, #b58e45);
  /* æ‚¬æµ®æ—¶é¢œè‰²å˜äº® */
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
  transform: translateY(-2px);
  /* è½»å¾®ä¸Šæµ®æ•ˆæœ */
}

/* === (æ–°å¢) çº¦ä¼šè®¾ç½®-èƒŒæ™¯é¢„è§ˆæ ·å¼ === */
#bg-previews-container {
  width: 100%;
  max-height: 200px;
  /* è®¾ç½®ä¸€ä¸ªæœ€å¤§é«˜åº¦ï¼Œè¶…å‡ºåˆ™æ»šåŠ¨ */
  overflow-y: auto;
  /* å…è®¸å‚ç›´æ»šåŠ¨ */
  padding: 10px;
  background-color: rgba(0, 0, 0, 0.02);
  border-radius: 8px;
  border: 1px solid rgba(166, 125, 48, 0.2);
  box-sizing: border-box;
  flex-grow: 1;
  /* è®©å®ƒåœ¨çˆ¶å®¹å™¨ä¸­å°½å¯èƒ½å æ®å‰©ä½™ç©ºé—´ */
}

.bg-preview-item {
  position: relative;
  /* ä¸ºå†…éƒ¨çš„ç»å¯¹å®šä½å…ƒç´ æä¾›åŸºå‡† */
  width: 100%;
  display: flex;
  align-items: center;
  gap: 15px;
  background-color: #fdfbf8;
  padding: 8px;
  border-radius: 6px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
  margin-bottom: 10px;
}

.preview-img {
  width: 80px;
  height: 50px;
  border-radius: 4px;
  background-size: cover;
  background-position: center;
  flex-shrink: 0;
  /* é˜²æ­¢å›¾ç‰‡è¢«å‹ç¼© */
  border: 1px solid rgba(166, 125, 48, 0.2);
}

.preview-details {
  flex-grow: 1;
  font-size: 13px;
  color: #5d4a27;
}

.preview-tags {
  font-weight: 700;
}

.preview-actions {
  display: flex;
  gap: 8px;
  margin-top: 5px;
}

.preview-actions button {
  background: none;
  border: 1px solid #a67d30;
  color: #a67d30;
  padding: 2px 8px;
  border-radius: 12px;
  font-size: 11px;
  cursor: pointer;
  transition: all 0.2s ease;
}

.preview-actions button:hover {
  background-color: #a67d30;
  color: white;
}

.preview-actions button.delete-btn {
  border-color: #c9c9c9;
  color: #c94a4a;
}

.preview-actions button.delete-btn:hover {
  background-color: #c94a4a;
  color: white;
}

.default-tag {
  position: absolute;
  top: -1px;
  left: -1px;
  background-color: #a67d30;
  color: white;
  padding: 2px 6px;
  font-size: 10px;
  font-weight: 700;
  border-radius: 6px 0 6px 0;
}

/* === (æ–°å¢) è§†è§‰å°è¯´(VN)ç•Œé¢ä¸“å± CSS === */

#vn-screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  opacity: 0;
  /* é»˜è®¤éšè— */
  pointer-events: none;
  transition: opacity 0.8s ease-in-out;
  overflow: hidden;
  /* ç¡®ä¿æ‰€æœ‰å†…å®¹éƒ½åœ¨å±å¹•å†… */
}

#vn-screen.visible {
  opacity: 1;
  pointer-events: auto;
}

/* åœºæ™¯èƒŒæ™¯ */
#vn-background {
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  transition: background-image 1s ease-in-out;
  /* èƒŒæ™¯åˆ‡æ¢æ—¶æœ‰æ·¡å…¥æ·¡å‡ºæ•ˆæœ */
}

/* è§’è‰²ç«‹ç»˜ */
#vn-character {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  height: 85%;
  /* ç«‹ç»˜æœ€é«˜å å±å¹•çš„85% */
  width: 80%;
  background-size: contain;
  background-position: center bottom;
  background-repeat: no-repeat;
  /* ç«‹ç»˜å‡ºç°/åˆ‡æ¢æ—¶çš„åŠ¨ç”» */
  transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
}

/* é¡¶éƒ¨UIæ  */
#vn-top-bar {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  /* å®½åº¦å æ»¡ */
  padding: 20px 25px;
  /* ä¸Šä¸‹å·¦å³çš„è¾¹è· */
  box-sizing: border-box;
  display: flex;
  /* ä½¿ç”¨Flexboxå¸ƒå±€ */
  justify-content: space-between;
  /* æ ¸å¿ƒï¼šè®©å­å…ƒç´ ä¸¤ç«¯å¯¹é½ */
  align-items: center;
  /* å‚ç›´å±…ä¸­ */
  z-index: 30;
}

#vn-exit-btn {
  background-color: rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  padding: 5px 15px;
  border-radius: 20px;
  font-family: "Noto Serif SC", serif;
  font-size: 13px;
  cursor: pointer;
  backdrop-filter: blur(5px);
}

/* å¯¹è¯æ¡†æ ¸å¿ƒæ ·å¼ (å¡ç‰‡é£æ ¼) */
#vn-dialog-box {
  position: absolute;
  bottom: 75px;
  left: 5%;
  width: 90%;
  min-height: 120px;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.85) 0%,
    rgba(239, 235, 228, 0.9) 100%
  );
  border: 2px solid #a67d30;
  border-radius: 12px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
  backdrop-filter: blur(8px);
  padding: 10px 15px;
  box-sizing: border-box;
  z-index: 20;
  cursor: pointer;
}

/* è§’è‰²åå®¹å™¨æ ·å¼ */
#vn-char-name-container {
  position: absolute;
  top: -18px;
  /* å‘ä¸Šåç§»ï¼Œæ‚¬æµ®åœ¨å¯¹è¯æ¡†ä¹‹ä¸Š */
  left: 20px;
  background: linear-gradient(145deg, #c8a25d, #a67d30);
  color: white;
  padding: 4px 18px;
  border-radius: 8px;
  font-size: 16px;
  font-weight: 700;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
  border: 1px solid #8e6a23;
}

/* å¯¹è¯æ–‡æœ¬æ ·å¼ */
#vn-dialog-text {
  margin-top: 25px;
  /* ä¸ºè§’è‰²åç•™å‡ºç©ºé—´ */
  color: #4a3f2d;
  font-size: 15px;
  line-height: 1.8;
}

/* === (æ–°å¢) çº¦ä¼šåŠŸèƒ½ - VNç•Œé¢è®¾ç½®æŒ‰é’®å’Œè®¾ç½®é¡µæ ·å¼ === */

/* VNç•Œé¢å³ä¸Šè§’çš„è®¾ç½®æŒ‰é’® */
#vn-settings-btn {
  /* ç§»é™¤ç»å¯¹å®šä½ï¼Œå› ä¸ºå®ƒç°åœ¨ç”±Flexboxå®¹å™¨ç®¡ç† */
  background-color: rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  padding: 5px 15px;
  border-radius: 20px;
  font-family: "Noto Serif SC", serif;
  font-size: 13px;
  cursor: pointer;
  backdrop-filter: blur(5px);
}

/* çº¦ä¼šè®¾ç½®ç•Œé¢çš„æ˜¾ç¤º/éšè—æ§åˆ¶ */
#dating-settings-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 6;
  /* å±‚çº§è¦é«˜äºVNä¸»ç•Œé¢ */
  /* ç›´æ¥å¤ç”¨å¼•å¯¼é¡µçš„èƒŒæ™¯ */
  background: linear-gradient(180deg, #fdfbf8 0%, #f5f1ea 100%);
  font-family: "Noto Serif SC", serif;
  transition: opacity 0.25s ease-in-out;
}

.phone-frame.show-dating-settings #dating-settings-screen {
  opacity: 1;
  pointer-events: auto;
}

/* === (æ–°å¢) çº¦ä¼šè®¾ç½® - èœå•åŒ–é‡æ„æ ·å¼ === */

/* 1. è®¾ç½®é¡µä¸»èœå•å®¹å™¨ */
#dating-settings-main {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  background: linear-gradient(180deg, #fdfbf8 0%, #f5f1ea 100%);
}

/* èœå•æŒ‰é’®çš„å®¹å™¨ */
.settings-menu-container {
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 15px;
  padding-top: 90px;
}

/* èœå•æŒ‰é’®çš„ç»Ÿä¸€æ ·å¼ */
.menu-button {
  width: 100%;
  padding: 15px;
  font-size: 16px;
  font-family: "Noto Serif SC", serif;
  color: #5d4a27;
  background-color: rgba(255, 255, 255, 0.7);
  border: 1px solid rgba(166, 125, 48, 0.3);
  border-radius: 8px;
  text-align: left;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

.menu-button:hover {
  background-color: #fff;
  border-color: #a67d30;
  transform: translateY(-2px);
}

/* 2. æ‰€æœ‰å­é¡µé¢çš„é€šç”¨æ ·å¼ */
.settings-submenu {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none;
  /* é»˜è®¤éšè— */
  flex-direction: column;
  background: linear-gradient(180deg, #fdfbf8 0%, #f5f1ea 100%);
}

/* å­é¡µé¢å†…å®¹æ»šåŠ¨åŒºåŸŸ */
/* å­é¡µé¢å†…å®¹æ»šåŠ¨åŒºåŸŸ (å·²ä¿®å¤é®æŒ¡é—®é¢˜) */
.settings-content-area {
  flex-grow: 1;
  overflow-y: auto;
  /* â–¼â–¼â–¼ æ ¸å¿ƒä¿®å¤ï¼šä¸ºé¡¶æ ç•™å‡º90pxçš„ç©ºé—´ â–¼â–¼â–¼ */
  padding: 90px 20px 20px 20px;
  box-sizing: border-box;
  /* ç¡®ä¿å†…è¾¹è·ä¸ä¼šå¯¼è‡´å¸ƒå±€é—®é¢˜ */
}

/* === (æ–°å¢) æ–‡æ¸¸é£æ ¼è¿”å›æŒ‰é’®æ ·å¼ === */
.vn-back-button {
  background-color: rgba(93, 74, 39, 0.6);
  /* æ·±æ£•è‰²åŠé€æ˜èƒŒæ™¯ */
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  padding: 5px 15px;
  border-radius: 20px;
  font-family: "Noto Serif SC", serif;
  font-size: 13px;
  cursor: pointer;
  backdrop-filter: blur(5px);
  transition: all 0.2s ease;
}

.vn-back-button:hover {
  background-color: rgba(121, 98, 56, 0.8);
  box-shadow: 0 0 8px rgba(255, 255, 255, 0.5);
}

/* === (æ–°å¢) å­—ä½“è®¾ç½®å­é¡µé¢ä¸“å±æ ·å¼ === */

/* ä½¿ç”¨flexå¸ƒå±€æ¥å¯¹é½æ ‡ç­¾å’Œæ§ä»¶ */
.font-setting-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 10px 0;
  border-bottom: 1px solid rgba(166, 125, 48, 0.1);
}

.font-setting-item label {
  font-size: 15px;
  color: #5d4a27;
}

/* é¢œè‰²é€‰æ‹©å™¨å’Œè¾“å…¥æ¡†çš„å®¹å™¨ */
.color-input-container {
  display: flex;
  align-items: center;
  gap: 10px;
}

.color-input-container input[type="text"] {
  width: 80px;
  text-align: center;
  border: 1px solid rgba(166, 125, 48, 0.3);
  border-radius: 6px;
  padding: 5px;
  font-family: "Noto Serif SC", serif;
}

.color-input-container input[type="color"] {
  width: 30px;
  height: 30px;
  border: none;
  padding: 0;
  border-radius: 6px;
  cursor: pointer;
}

/* å­—ä½“å¤§å°æ»‘å—çš„æ ·å¼ */
.font-slider-container {
  display: flex;
  align-items: center;
  gap: 15px;
  width: 60%;
  /* é™åˆ¶å®½åº¦ï¼Œé¿å…å¤ªé•¿ */
}

.font-slider-container input[type="range"] {
  flex-grow: 1;
  /* è®©æ»‘å—å æ®å‰©ä½™ç©ºé—´ */
}

/* === (æ–°å¢) VNç•Œé¢ - å¯¹è¯å¼•æ“ä¸“å±æ ·å¼ === */

/* 1. å¯¹è¯æ¡†å†…çš„â€œåŠ è½½ä¸­â€åŠ¨ç”» */
.dialog-loader {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100%;
  padding-top: 20px;
  /* è®©åŠ¨ç”»å‚ç›´å±…ä¸­ä¸€äº› */
}

.dialog-loader span {
  width: 8px;
  height: 8px;
  margin: 0 4px;
  background-color: #a67d30;
  border-radius: 50%;
  animation: dialog-bounce 1.4s infinite ease-in-out both;
}

.dialog-loader span:nth-child(1) {
  animation-delay: -0.32s;
}

.dialog-loader span:nth-child(2) {
  animation-delay: -0.16s;
}

@keyframes dialog-bounce {
  0%,
  80%,
  100% {
    transform: scale(0);
  }

  40% {
    transform: scale(1);
  }
}

/* 2. é€‰é¡¹æŒ‰é’®å®¹å™¨çš„æ ·å¼ */
#vn-choices-container {
  position: absolute;
  bottom: 270px;
  /* å®šä½åœ¨å¯¹è¯æ¡†æ­£ä¸Šæ–¹ */
  left: 0;
  right: 0;
  display: none;
  /* é»˜è®¤éšè— */
  flex-direction: column;
  align-items: center;
  gap: 12px;
  z-index: 25;
}

/* 3. å•ä¸ªé€‰é¡¹æŒ‰é’®çš„â€œæ–‡æ¸¸é£â€æ ·å¼ */
.vn-choice-btn {
  width: 80%;
  max-width: 300px;
  padding: 12px;
  font-size: 15px;
  font-family: "Noto Serif SC", serif;
  color: #5d4a27;
  background-color: rgba(255, 255, 255, 0.85);
  border: 1px solid rgba(166, 125, 48, 0.4);
  border-radius: 25px;
  /* èƒ¶å›Šå½¢çŠ¶ */
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(5px);
  text-align: center;
}

.vn-choice-btn:hover {
  background-color: #fff;
  border-color: #a67d30;
  transform: scale(1.03);
}

/* 4. è‡ªå®šä¹‰è¾“å…¥å¼¹çª—çš„æ ·å¼ (å¤ç”¨å·²æœ‰Modal) */
#custom-choice-modal .modal-content {
  gap: 15px;
}

#custom-choice-modal input {
  width: 90%;
  box-sizing: border-box;
}

/* === (é‡æ–°è®¾è®¡) è‡ªå®šä¹‰è¾“å…¥æ¡† - å±…ä¸­æ–‡æ¸¸å¼¹çª—é£æ ¼ === */

/* 1. å¼¹çª—é®ç½©å±‚ */
#custom-choice-modal {
  display: none;
  /* é»˜è®¤éšè— */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6);
  /* åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
  display: flex;
  /* ä½¿ç”¨flexboxå±…ä¸­ */
  justify-content: center;
  align-items: center;
  z-index: 100;
  /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
  opacity: 0;
  /* åˆå§‹é€æ˜ */
  transition: opacity 0.3s ease-out;
  /* æ·¡å…¥æ·¡å‡ºåŠ¨ç”» */
}

#custom-choice-modal.visible {
  opacity: 1;
}

/* 2. å¼¹çª—å†…å®¹åŒº - æ ¸å¿ƒæ–‡æ¸¸é£æ ¼ */
#custom-choice-modal .vn-modal-style {
  background: linear-gradient(180deg, #fdfbf8 0%, #f5f1ea 100%);
  /* æµ…è‰²æ¸å˜èƒŒæ™¯ */
  border: 2px solid #a67d30;
  /* æ£•è‰²è¾¹æ¡† */
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
  width: 90%;
  /* å®½åº¦å æ‰‹æœºå®½åº¦çš„90% */
  max-width: 350px;
  /* æœ€å¤§å®½åº¦é™åˆ¶ */
  padding: 0;
  /* ç§»é™¤é»˜è®¤å†…è¾¹è·ï¼Œè®©å†…éƒ¨header/body/footeræ§åˆ¶ */
  box-sizing: border-box;
  transform: scale(0.9);
  /* åˆå§‹ç¼©å° */
  transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
  /* ç¼©æ”¾åŠ¨ç”» */
}

#custom-choice-modal.visible .vn-modal-style {
  transform: scale(1);
  /* æ˜¾ç¤ºæ—¶æ”¾å¤§ */
}

/* 3. å¼¹çª—å†…éƒ¨å…ƒç´ çš„è°ƒæ•´ */
#custom-choice-modal .modal-header {
  padding: 15px 20px;
  border-bottom: 1px solid rgba(166, 125, 48, 0.2);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

#custom-choice-modal .modal-header h2 {
  font-size: 16px;
  color: #5d4a27;
  font-family: "Noto Serif SC", serif;
  margin: 0;
}

#custom-choice-modal .modal-close-button {
  background: none;
  border: none;
  font-size: 24px;
  color: #5d4a27;
  cursor: pointer;
  padding: 0;
  line-height: 1;
}

/* è°ƒæ•´ç¡®å®šæŒ‰é’®æ ·å¼ï¼Œä½¿å…¶ç¬¦åˆæ–‡æ¸¸é£æ ¼ */
.vn-confirm-button {
  background: linear-gradient(145deg, #c8a25d, #a67d30);
  color: white;
  padding: 8px 20px;
  border: 1px solid #8e6a23;
  border-radius: 8px;
  font-family: "Noto Serif SC", serif;
  font-size: 14px;
  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.15);
  transition: all 0.2s ease;
  bottom: 20px;
}

.vn-confirm-button:hover {
  opacity: 0.9;
  transform: translateY(-1px);
}

/* === (æ–°å¢) æ–‡ç¬”åå¥½åŠŸèƒ½ä¸“å±æ ·å¼ === */

/* 1. åå¥½å¡ç‰‡çš„ä¸»ä½“æ ·å¼ */
.preset-card {
  width: 100%;
  background-color: #fff;
  border: 1px solid rgba(166, 125, 48, 0.2);
  border-radius: 8px;
  padding: 15px;
  margin-bottom: 12px;
  box-sizing: border-box;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* 2. å¡ç‰‡å†…çš„æ–‡æœ¬å†…å®¹ */
.preset-text {
  font-size: 14px;
  color: #5d4a27;
  line-height: 1.6;
  white-space: pre-wrap;
  /* ä¿æŒç”¨æˆ·è¾“å…¥çš„æ¢è¡Œ */
}

/* 3. å¡ç‰‡åº•éƒ¨çš„æ“ä½œæŒ‰é’®åŒºåŸŸ */
.preset-actions {
  display: flex;
  justify-content: flex-end;
  /* æŒ‰é’®é å³ */
  align-items: center;
  gap: 10px;
  padding-top: 10px;
}

/* --- æ ¸å¿ƒä¿®å¤ï¼šå¢åŠ IDé€‰æ‹©å™¨ï¼Œé™å®šæ ·å¼çš„ä½œç”¨èŒƒå›´ --- */
#writing-style-settings .preset-actions button {
  background: none;
  border: 1px solid #a67d30;
  color: #a67d30;
  padding: 4px 12px;
  border-radius: 15px;
  font-size: 12px;
  font-family: "Noto Serif SC", serif;
  cursor: pointer;
  transition: all 0.2s ease;
}

/* ï¼ˆå¯é€‰ï¼‰ä¸ºäº†ä¿é™©èµ·è§ï¼Œä¹Ÿä¸º hover æ•ˆæœå’Œåˆ é™¤æŒ‰é’®å¢åŠ é™å®šï¼Œé˜²æ­¢å®ƒä»¬æœªæ¥ä¹Ÿå½±å“åˆ°å…¶ä»–åœ°æ–¹ */
#writing-style-settings .preset-actions button:hover {
  background-color: #a67d30;
  color: white;
}

#writing-style-settings .preset-actions button.delete-btn {
  color: #c94a4a;
  border-color: #c94a4a;
}

#writing-style-settings .preset-actions button.delete-btn:hover {
  background-color: #c94a4a;
  color: white;
}

/* 4. â€œå·²æ¿€æ´»â€çŠ¶æ€çš„å¡ç‰‡æ ·å¼ */
.preset-card.active {
  border-color: #a67d30;
  border-width: 2px;
  box-shadow: 0 4px 15px rgba(166, 125, 48, 0.2);
}

.preset-card.active .select-preset-btn {
  background-color: #a67d30;
  color: white;
  cursor: not-allowed;
}

/* === (å…¨æ–°) æ–‡ç¬”åå¥½å¼¹çª—ä¸“å±æ ·å¼ === */

/* 1. æ–°çš„é®ç½©å±‚æ ·å¼ */
/* === (ä¿®å¤ç‰ˆ) æ–‡ç¬”åå¥½å¼¹çª—ä¸“å±æ ·å¼ === */

/* 1. æ–°çš„é®ç½©å±‚æ ·å¼ */
.vn-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6);

  /* å¸ƒå±€ */
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 100;
  /* å®ƒç¡®å®åœ¨æœ€é¡¶å±‚ */

  /* === æ ¸å¿ƒä¿®å¤ï¼šéšèº«é€»è¾‘ === */
  opacity: 0;
  /* 1. å®ƒæ˜¯é€æ˜çš„ */
  visibility: hidden;
  /* 2. (æ–°å¢) å®ƒæ˜¯éšè—çš„ï¼Œæµè§ˆå™¨ä¼šå¿½ç•¥å®ƒçš„å­˜åœ¨ */
  pointer-events: none;
  /* 3. (æ–°å¢) å®ƒæ˜¯â€œè™šç©ºâ€çš„ï¼Œé¼ æ ‡ç‚¹å‡»ä¼šç›´æ¥ç©¿é€å®ƒç‚¹åˆ°åº•ä¸‹çš„APP */

  transition: opacity 0.3s ease-out, visibility 0.3s ease-out;
}

/* === å¿…é¡»æ·»åŠ ï¼šæ¿€æ´»çŠ¶æ€ === */
/* å½“å¼¹çª—éœ€è¦æ˜¾ç¤ºæ—¶ï¼Œæˆ‘ä»¬ç»™å®ƒåŠ ä¸Šè¿™ä¸ªç±» */
.vn-modal-overlay.active {
  opacity: 1 !important;
  visibility: visible !important;
  pointer-events: auto !important;
  /* æ¢å¤å®ä½“ï¼Œå¯ä»¥ç‚¹å‡»äº† */
}

/* 2. æ–°çš„å¼¹çª—å†…å®¹åŒºæ ·å¼ - æ ¸å¿ƒæ–‡æ¸¸é£æ ¼ */
.vn-modal-content {
  background: linear-gradient(180deg, #fdfbf8 0%, #f5f1ea 100%);
  border: 1px solid #a67d30;
  border-radius: 12px;
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
  width: 90%;
  max-width: 350px;
  padding: 0;
  box-sizing: border-box;

  /* åŠ¨ç”»æ•ˆæœ */
  transform: scale(0.95);
  transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* 3. å½“é®ç½©æ˜¾ç¤ºæ—¶ï¼Œè§¦å‘åŠ¨ç”» */
.vn-modal-overlay.visible {
  opacity: 1;
}

.vn-modal-overlay.visible .vn-modal-content {
  transform: scale(1);
}

/* 4. å¼¹çª—å†…éƒ¨ä»¶çš„æ ·å¼å¾®è°ƒ */
.vn-modal-content .modal-header {
  border-bottom-color: rgba(166, 125, 48, 0.2);
}

.vn-modal-content .modal-header h2 {
  color: #5d4a27;
  font-family: "Noto Serif SC", serif;
}

.vn-modal-content .modal-close-button {
  color: #a67d30;
}

.vn-modal-content .form-textarea {
  border-color: rgba(166, 125, 48, 0.3);
  background-color: #fff;
}

/* === (æ–°å¢) è‡ªå®šä¹‰è¾“å…¥å¼¹çª—ä¸“å±æ ·å¼ (ä¿®å¤ç‰ˆ) === */

/* 1. ä¸“å±çš„é®ç½©å±‚æ ·å¼ */
.vn-custom-modal-overlay {
  position: absolute;
  /* ç›¸å¯¹äº .phone-frame å®šä½ */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 100;

  /* é»˜è®¤éšè— */
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
}

/* 2. æ¿€æ´»çŠ¶æ€ */
.vn-custom-modal-overlay.visible {
  opacity: 1;
}

/* 3. å†…éƒ¨å†…å®¹åŒºçš„åŠ¨ç”» (å¤ç”¨å·²æœ‰æ ·å¼ï¼Œä½†é€‰æ‹©å™¨æ›´ç²¾ç¡®) */
.vn-custom-modal-overlay .vn-modal-content {
  transform: scale(0.95);
  transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

.vn-custom-modal-overlay.visible .vn-modal-content {
  transform: scale(1);
}

/* === (æ–°å¢) çº¦ä¼šè®°å½•åŠŸèƒ½ä¸“å±æ ·å¼ === */

/* 1. è®°å½•å¡ç‰‡çš„ä¸»ä½“æ ·å¼ */
.history-card {
  background-color: #fdfbf8;
  border: 1px solid rgba(166, 125, 48, 0.2);
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 20px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
  /* éšè—è£…é¥°æ€§å…ƒç´ çš„æº¢å‡ºéƒ¨åˆ† */
}

/* 2. å¡ç‰‡å¤´éƒ¨çš„æ—¥æœŸå’Œä¼™ä¼´ä¿¡æ¯ */
.history-card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 15px;
  padding-bottom: 10px;
  border-bottom: 1px dashed rgba(166, 125, 48, 0.3);
}

.history-date {
  font-size: 13px;
  color: #a67d30;
  font-weight: 700;
}

.history-partner {
  font-size: 13px;
  color: #8a8a8e;
}

/* 3. AIç”Ÿæˆçš„æ—¥è®°/æ‘˜è¦å†…å®¹ */
.history-summary {
  font-size: 15px;
  color: #5d4a27;
  line-height: 1.8;
  white-space: pre-wrap;
  /* ä¿æŒAIç”Ÿæˆçš„æ¢è¡Œ */
}

/* 4. (å¯é€‰) å¢åŠ ä¸€ä¸ªè£…é¥°æ€§çš„è§’æ ‡ */
.history-card::before {
  content: "â™¥";
  position: absolute;
  top: -10px;
  right: 10px;
  font-size: 30px;
  color: rgba(166, 125, 48, 0.1);
  transform: rotate(15deg);
}

/* === (ä¿®æ­£) çº¦ä¼šè®°å½•ç‹¬ç«‹ç•Œé¢ä¸“å±æ ·å¼ === */

/* 1. ç•Œé¢çš„é»˜è®¤çŠ¶æ€ï¼šå®Œå…¨é€æ˜ï¼Œæ— æ³•äº¤äº’ï¼Œä¸”åœ¨å±å¹•ä¸‹å±‚ */
#dating-history-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 6;
  background-color: #f0f2f5;
  font-family: "Noto Serif SC", serif;
  transition: opacity 0.3s ease-in-out;
  /* æ·»åŠ è¿‡æ¸¡åŠ¨ç”» */
}

/* 2. æ¿€æ´»çŠ¶æ€ï¼šå½“ .phone-frame æœ‰ .show-dating-history ç±»æ—¶ï¼Œç•Œé¢æµ®ç° */
.phone-frame.show-dating-history #dating-history-screen {
  opacity: 1;
  pointer-events: auto;
}

/* 3. ç¡®ä¿å†…å®¹åŒºåŸŸå¯ä»¥æ»šåŠ¨ (è¿™ä¸ªæ ·å¼æ‚¨åº”è¯¥å·²ç»æœ‰äº†ï¼Œè¯·ç¡®è®¤æ— è¯¯) */
#dating-history-container {
  padding: 90px 15px 15px 15px;
  height: 100%;
  overflow-y: auto;
  box-sizing: border-box;
}

/* 4. æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode #dating-history-screen {
  background-color: #1c1c1e;
}

/* --- æ ¸å¿ƒä¿®å¤ï¼šç¡®ä¿å†…å®¹åŒºåŸŸå¯ä»¥æ»šåŠ¨ --- */
#dating-history-container,
#style-presets-container {
  /* å°†æ ·å¼åŒæ—¶åº”ç”¨åˆ°ä¸¤ä¸ªå®¹å™¨ */
  padding: 90px 15px 15px 15px;
  /* é¡¶éƒ¨ç•™å‡ºç©ºé—´ç»™æ ‡é¢˜æ  */
  height: 100%;
  /* é«˜åº¦å æ»¡çˆ¶å®¹å™¨ */
  overflow-y: auto;
  /* å…³é”®ï¼šå†…å®¹è¶…å‡ºæ—¶ï¼Œå‚ç›´æ»šåŠ¨ */
  box-sizing: border-box;
  /* ç¡®ä¿å†…è¾¹è·ä¸ä¼šå½±å“é«˜åº¦è®¡ç®— */
}

/* === (æ–°å¢) VNç•Œé¢å³ä¸‹è§’æ“ä½œæŒ‰é’®æ ·å¼ === */
.vn-action-btn {
  position: absolute;
  bottom: 8px;
  right: 12px;
  width: 32px;
  height: 32px;
  background-color: rgba(166, 125, 48, 0.6);
  /* å¤ç”¨æ–‡æ¸¸ä¸»é¢˜è‰² */
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  backdrop-filter: blur(4px);
  transition: all 0.2s ease;
}

.vn-action-btn:hover {
  background-color: rgba(166, 125, 48, 0.8);
  transform: scale(1.1);
}

.vn-action-btn svg {
  width: 18px;
  height: 18px;
}

/* === START: é€šç”¨å¡ç‰‡æŒ‰é’®ç¾åŒ–æ ·å¼ (é€šè¯æ‘˜è¦ & çº¦ä¼šè®°å½•) === */

/* 1. ä¸ºä¸¤ç§å¡ç‰‡å†…çš„æŒ‰é’®è®¾ç½®é€šç”¨æ ·å¼ */
.summary-card .preset-actions button,
.history-card .preset-actions button {
  padding: 5px 12px;
  font-size: 13px;
  border-radius: 20px;
  /* èƒ¶å›Šå½¢çŠ¶ */
  border: none;
  cursor: pointer;
  font-weight: 500;
  transition: background-color 0.2s ease;
}

/* 2. ä¸ºä¸¤ç§å¡ç‰‡å†…çš„â€œç¼–è¾‘â€æŒ‰é’®è®¾ç½®è“è‰²ä¸»é¢˜ */
.summary-card .preset-actions .edit-btn,
.history-card .preset-actions .edit-btn {
  background-color: rgba(0, 122, 255, 0.1);
  color: #007aff;
}

.summary-card .preset-actions .edit-btn:hover,
.history-card .preset-actions .edit-btn:hover {
  background-color: rgba(0, 122, 255, 0.2);
}

/* 3. ä¸ºä¸¤ç§å¡ç‰‡å†…çš„â€œåˆ é™¤â€æŒ‰é’®è®¾ç½®çº¢è‰²ä¸»é¢˜ */
.summary-card .preset-actions .delete-btn,
.history-card .preset-actions .delete-btn {
  background-color: rgba(255, 59, 48, 0.1);
  color: #ff3b30;
}

.summary-card .preset-actions .delete-btn:hover,
.history-card .preset-actions .delete-btn:hover {
  background-color: rgba(255, 59, 48, 0.2);
}

/* === END: é€šç”¨å¡ç‰‡æŒ‰é’®ç¾åŒ–æ ·å¼ === */

/* === (æ–°å¢) çº¦ä¼šå¼•å¯¼é¡µè¿”å›æŒ‰é’®æ ·å¼ === */

/* 1. æŒ‰é’®çš„å®šä½å®¹å™¨ */
.dating-setup-header {
  position: absolute;
  top: max(50px, env(safe-area-inset-top) + 30px); /* å¢åŠ é¡¶éƒ¨è·ç¦»ï¼Œé¿å…è¢«çŠ¶æ€æ é®æŒ¡ */
  left: 20px;
  z-index: 10;
  /* ç¡®ä¿åœ¨æ ‡é¢˜ä¹‹ä¸Š */
}

/* 2. æŒ‰é’®æœ¬èº«çš„â€œæ–‡æ¸¸é£â€æ ·å¼ */
.vn-setup-back-btn {
  background-color: rgba(255, 255, 255, 0.6);
  border: 1px solid rgba(166, 125, 48, 0.3);
  color: #5d4a27;
  /* æ·±æ£•è‰²æ–‡å­—ï¼ŒåŒ¹é…ä¸»é¢˜ */
  padding: 5px 15px;
  border-radius: 20px;
  /* åœ†è§’èƒ¶å›Šå½¢çŠ¶ */
  font-family: "Noto Serif SC", serif;
  font-size: 13px;
  cursor: pointer;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  transition: all 0.2s ease;
}

.vn-setup-back-btn:hover {
  background-color: #fff;
  border-color: #a67d30;
  transform: translateY(-1px);
}

/* === (æ–°å¢) å­—ä½“åŠŸèƒ½ä¾‹å¤–è§„åˆ™ === */
/*
  è¿™æ¡è§„åˆ™ç¡®ä¿â€œçº¦ä¼šâ€å’Œâ€œçº¦ä¼šè®°å½•â€åŠŸèƒ½ä¸å—å…¨å±€å­—ä½“æ›´æ¢çš„å½±å“ï¼Œ
  å¹¶å¼ºåˆ¶å®ƒä»¬å§‹ç»ˆä½¿ç”¨ 'Noto Serif SC' è¡¬çº¿å­—ä½“ã€‚
  !important ç”¨äºè¦†ç›–JSè®¾ç½®çš„å†…è”æ ·å¼ã€‚
*/
#dating-screen,
#dating-history-screen {
  font-family: "Noto Serif SC", serif !important;
}

/* === START: Font URL Screen Styles === */

/* --- 1. Animation Control --- */

/* Default state: Font URL page is hidden */
#font-url-settings-screen {
  opacity: 0;
  pointer-events: none;
}

/* When .show-font-url is added to phone-frame... */
.phone-frame.show-font-url #beautify-screen {
  opacity: 0;
  /* Hide the beautify screen */
  pointer-events: none;
}

.phone-frame.show-font-url #font-url-settings-screen {
  opacity: 1;
  /* Show the Font URL screen */
  pointer-events: auto;
}

/* --- 2. List Item Styling --- */

.font-url-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  width: 100%;
  padding: 12px;
  background-color: #f7f7f7;
  border-radius: 10px;
  margin-bottom: 10px;
  box-sizing: border-box;
}

.font-url-text {
  font-size: 14px;
  color: #333;
  /* Prevent long URLs from breaking the layout */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  flex-grow: 1;
  /* Allow text to take up available space */
  margin-right: 10px;
}

.font-url-actions {
  display: flex;
  gap: 8px;
  flex-shrink: 0;
  /* Prevent buttons from shrinking */
}

/* We can reuse existing button styles for consistency */
.apply-font-url-btn,
.delete-font-url-btn {
  padding: 5px 12px;
  font-size: 13px;
  border-radius: 20px;
  border: none;
  cursor: pointer;
}

.apply-font-url-btn {
  background-color: rgba(0, 122, 255, 0.1);
  color: #007aff;
}

.delete-font-url-btn {
  background-color: rgba(255, 59, 48, 0.1);
  color: #ff3b30;
}

/* === (æ–°å¢) ä¿®å¤è‡ªå®šä¹‰è¾“å…¥å¼¹çª—çš„å±…ä¸­é—®é¢˜ === */
#custom-choice-modal .modal-body {
  display: flex;
  align-items: center;
  /* This centers the input horizontally */
}

/* === (æ–°å¢) æ–‡ç¬”åå¥½æ¿€æ´»çŠ¶æ€çš„æ ‡ç­¾æ ·å¼ === */
.preset-card .active-tag {
  display: none;
  /* Hide by default */
  position: absolute;
  top: -1px;
  right: -1px;
  background-color: #a67d30;
  color: white;
  padding: 2px 8px;
  font-size: 11px;
  font-weight: 700;
  border-radius: 0 8px 0 8px;
}

.preset-card.active .active-tag {
  display: block;
  /* Show when the card is active */
}

/* === (å…¨æ–°) AIå†…å¿ƒç‹¬ç™½å¼¹çª—æ ·å¼ === */

/* 1. å¼¹çª—ä¸»å®¹å™¨ */
/* === (ç¾åŒ–ç‰ˆ) AIå†…å¿ƒç‹¬ç™½æ°”æ³¡æ ·å¼ === */

/* 1. æ°”æ³¡å®¹å™¨ */
.thought-bubble {
  position: absolute;
  top: 95px;
  /* ç¨å¾®å¾€ä¸‹æŒªä¸€ç‚¹ï¼Œä¸è¦è´´ç€é¡¶æ å¤ªç´§ */
  left: 50%;
  transform: translateX(-50%) scale(0.95) translateY(-10px);
  /* åˆå§‹çŠ¶æ€ï¼šç•¥å¾®ç¼©å°å¹¶ä¸Šç§» */
  z-index: 900;
  /* æå‡å±‚çº§ï¼Œç¡®ä¿åœ¨å¤§å¤šæ•°UIä¹‹ä¸Š */

  width: 90%;
  max-width: 350px;
  padding: 18px 22px;
  box-sizing: border-box;

  /* --- æ ¸å¿ƒç¾åŒ–ï¼šå†·è°ƒç°ç™½æ¸…é€æ„Ÿ --- */
  background-color: rgba(245, 247, 249, 0.94);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);

  /* æç»†è¾¹ç¼˜çº¿å’Œç°ä»£é˜´å½± */
  border-radius: 24px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.05),
    0 8px 10px -6px rgba(0, 0, 0, 0.05);

  /* å­—ä½“è®¾ç½® */
  color: #4b5563;
  text-align: left;

  /* åŠ¨ç”»å±æ€§ */
  opacity: 0;
  visibility: hidden;
  transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  /* å¢å¼ºå¼¹æ€§åŠ¨æ•ˆ */
  pointer-events: none;
}

/* 2. æ¿€æ´»çŠ¶æ€ */
.thought-bubble.visible {
  opacity: 1;
  visibility: visible;
  transform: translateX(-50%) scale(1) translateY(0);
  /* å›åˆ°æ­£å¸¸å¤§å°å’Œä½ç½® */
  pointer-events: auto;
}

/* 3. é¡¶éƒ¨å°ä¸‰è§’ (æŒ‡å‘è§’è‰²å) */
.thought-bubble::before {
  content: "";
  position: absolute;
  top: -8px;
  /* å¾®è°ƒä½ç½® */
  left: 50%;
  transform: translateX(-50%);

  /* ä½¿ç”¨è¾¹æ¡†æ³•ç»˜åˆ¶ä¸‰è§’å½¢ */
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 8px solid #e5e7eb;
  /* ä¸ä¸»æ°”æ³¡è¾¹æ¡†è‰²ä¸€è‡´ */
}

.thought-bubble::after {
  content: "";
  position: absolute;
  top: -7px;
  left: 50%;
  transform: translateX(-50%);

  width: 0;
  height: 0;
  border-left: 7px solid transparent;
  border-right: 7px solid transparent;
  border-bottom: 7px solid #f5f7f9;
  /* é®ç›–è¾¹æ¡†ï¼Œå½¢æˆä¸€ä½“æ„Ÿ */
}

/* 4. çŠ¶æ€æ–‡æœ¬ (Status) */
#thought-bubble-status {
  font-size: 11px;
  font-weight: 700;
  color: #9ca3af;
  /* é‡‡ç”¨æ›´æŸ”å’Œçš„ä¸­æ€§ç° */
  text-transform: uppercase;
  letter-spacing: 1px;

  margin: 0 0 10px 0;
  padding-bottom: 8px;
  border-bottom: 1px solid rgba(229, 231, 235, 0.8);
  /* æç»†åˆ†å‰²çº¿ */

  display: flex;
  align-items: center;
  gap: 6px;
}

/* 5. å†…å¿ƒç‹¬ç™½æ–‡æœ¬ (Monologue) */
#thought-bubble-monologue {
  font-size: 15px;
  line-height: 1.7;
  font-weight: 400;
  margin: 0;
  padding: 0;
  color: #4b5563;
  /* æ ¸å¿ƒæ–‡å­—é¢œè‰² */

  /* ç§»é™¤æ·±è‰²èƒŒæ™¯ä¸‹çš„é˜´å½±ï¼Œå…‰è‰²ä¸»é¢˜è¿½æ±‚æç®€ */
  text-shadow: none;
}

/* === æ·±è‰²æ¨¡å¼é€‚é… === */
/* åœ¨æ·±è‰²æ¨¡å¼ä¸‹ï¼Œå¯ä»¥ç¨å¾®åŠ æ·±èƒŒæ™¯ï¼Œæˆ–è€…ä¿æŒä¸å˜(å› ä¸ºæœ¬æ¥å°±æ˜¯æ·±è‰²è®¾è®¡) */
/* === æ·±è‰²æ¨¡å¼é€‚é… === */
.phone-frame.dark-mode .thought-bubble {
  background-color: rgba(31, 41, 55, 0.92);
  border-color: rgba(75, 85, 99, 0.4);
  color: rgba(243, 244, 246, 0.9);
}

.phone-frame.dark-mode #thought-bubble-monologue {
  color: rgba(243, 244, 246, 0.9);
}

.phone-frame.dark-mode .thought-bubble::before {
  border-bottom-color: rgba(75, 85, 99, 0.4);
}

.phone-frame.dark-mode .thought-bubble::after {
  border-bottom-color: rgba(31, 41, 55, 0.92);
}

/* === (æ–°å¢) æ–‡å›¾åŠŸèƒ½ä¸“å±CSS (V2 - å¸¦é»˜è®¤æ–‡å­—) === */

/* 2. æ–‡å›¾å¡ç‰‡çš„æ ¸å¿ƒæ ·å¼ (ä¿æŒä¸å˜) */
.text-image-card {
  width: 150px;
  height: 150px;
  border-radius: 16px;
  background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 15px;
  box-sizing: border-box;
  cursor: pointer;
  transition: transform 0.2s ease, box-shadow 0.2s ease;
  position: relative;
  /* æ·»åŠ ç›¸å¯¹å®šä½ï¼Œä¸ºå†…éƒ¨æ–‡å­—å®šä½åšå‡†å¤‡ */
  overflow: hidden;
  /* éšè—è¶…å‡ºéƒ¨åˆ†ï¼Œè®©åŠ¨ç”»æ›´å¹²å‡€ */
}

.text-image-card:hover {
  transform: scale(1.03);
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
}

/* 3. ã€æ–°å¢ã€‘é»˜è®¤æ˜¾ç¤ºçš„â€œæ–‡å›¾â€è‰ºæœ¯å­—æ ·å¼ */
.text-image-card .default-text {
  /* ä½¿ç”¨è¡¬çº¿å­—ä½“ï¼Œæ›´å…·è‰ºæœ¯æ„Ÿ */
  font-family: "Noto Serif SC", serif;
  font-size: 32px;
  /* å­—ä½“ç¨å¤§ä¸€äº› */
  font-weight: 700;
  /* åŠ ç²— */
  color: rgba(0, 0, 0, 0.15);
  /* ä½¿ç”¨éå¸¸æ·¡çš„ç°è‰²ï¼Œæœ‰é«˜çº§æ„Ÿ */

  position: absolute;
  /* ç»å¯¹å®šä½ï¼Œä½¿å…¶å¯ä»¥å’Œæè¿°æ–‡å­—é‡å  */
  opacity: 1;
  /* é»˜è®¤çŠ¶æ€ä¸‹å®Œå…¨ä¸é€æ˜ */
  transition: opacity 0.4s ease-in-out;
  /* åŠ¨ç”»æ•ˆæœ */
}

/* 4. ã€ä¿®æ”¹ã€‘ç”¨æˆ·è¾“å…¥çš„æè¿°æ–‡å­—æ ·å¼ */
.text-image-card .card-text {
  font-size: 14px;
  color: #343a40;
  text-align: center;
  line-height: 1.5;

  position: absolute;
  /* ç»å¯¹å®šä½ï¼Œä½¿å…¶å¯ä»¥å’Œé»˜è®¤æ–‡å­—é‡å  */
  opacity: 0;
  /* é»˜è®¤çŠ¶æ€ä¸‹å®Œå…¨é€æ˜ */
  transition: opacity 0.4s ease-in-out;
  /* åŠ¨ç”»æ•ˆæœ */
}

/* 5. ã€æ ¸å¿ƒåŠ¨ç”»é€»è¾‘ã€‘å½“å¡ç‰‡æ‹¥æœ‰ .text-revealed ç±»æ—¶ï¼Œåè½¬ä¸¤ä¸ªæ–‡å­—çš„é€æ˜åº¦ */
.text-image-card.text-revealed .default-text {
  opacity: 0;
  /* é»˜è®¤æ–‡å­—æ¶ˆå¤± */
}

.text-image-card.text-revealed .card-text {
  opacity: 1;
  /* æè¿°æ–‡å­—æµ®ç° */
}

/* 1. ã€æ ¸å¿ƒBugä¿®å¤ã€‘.screen çš„é»˜è®¤çŠ¶æ€ */
/* æˆ‘ä»¬åœ¨è¿™é‡Œæ˜ç¡®å®šä¹‰ï¼Œä»»ä½•Appé¡µé¢åœ¨é»˜è®¤æƒ…å†µä¸‹éƒ½æ˜¯å®Œå…¨é€æ˜ä¸”ä¸å¯äº¤äº’çš„ */
.screen {
  width: 100%;
  height: 100%;
  background: #f4f4f5;
  position: absolute;
  top: 0;
  left: 0;

  /* --- æ ¸å¿ƒä¿®å¤ä»£ç  --- */
  opacity: 0;
  pointer-events: none;
  /* --- ä¿®å¤ç»“æŸ --- */

  z-index: var(--z-screen);
  transform-origin: top left;
  /* å˜æ¢çš„åŸç‚¹ï¼Œé…åˆJSè®¡ç®— */

  /* 2. ã€å®ç°ä¼˜é›…åŠ¨ç”»ã€‘å®šä¹‰è¿‡æ¸¡æ•ˆæœ */
  /* æˆ‘ä»¬ä¸º transform, opacity, border-radius è¿™ä¸‰ä¸ªå±æ€§æ·»åŠ äº†å¹³æ»‘çš„è¿‡æ¸¡åŠ¨ç”» */
  transition: transform 0.35s cubic-bezier(0.45, 0, 0.55, 1),
    opacity 0.3s ease-in-out, border-radius 0.35s cubic-bezier(0.45, 0, 0.55, 1);
}

/* 3. App æ­£åœ¨æ‰“å¼€æˆ–å·²ç»æ‰“å¼€æ—¶çš„çŠ¶æ€ */
/* è¿™ä¸ªçŠ¶æ€è®©é¡µé¢å˜å¾—å¯è§ã€å¯äº¤äº’ï¼Œå¹¶æå‡å±‚çº§ */
.screen.opening,
.screen.opened {
  opacity: 1;
  pointer-events: auto;
  z-index: var(--z-screen-active);
}

/* 4. App å·²ç»å®Œå…¨æ‰“å¼€åçš„æœ€ç»ˆæ ·å¼ */
/* è¿™ä¸ªçŠ¶æ€å®šä¹‰äº†Appé“ºæ»¡å…¨å±æ—¶çš„æœ€ç»ˆå½¢æ€ */
.screen.opened {
  transform: translate(0, 0) scale(1);
  border-radius: 0;
}

/* === è®¾ç½®é¡µé¢ç‰¹å®šå¸ƒå±€ä¿®å¤ === */
/* ä¿®å¤æ–¹æ¡ˆï¼šæ˜ç¡®è®¾ç½®é«˜åº¦å’Œæ»šåŠ¨ */
#settings-screen .settings-content-ios {
  position: absolute !important;
  top: 70px !important; /* headeré«˜åº¦ï¼š60px + padding-top 50px */
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  padding: 20px 16px 40px 16px !important; /* æ¢å¤åŸpaddingï¼Œä½†topç”±å®šä½æ§åˆ¶ */
  overflow-y: scroll !important; /* å¼ºåˆ¶æ»šåŠ¨ */
  overflow-x: hidden !important;
  -webkit-overflow-scrolling: touch !important;
  box-sizing: border-box !important;
}

/* å¼ºåˆ¶ä¿®å¤ settings-group é«˜åº¦è¢«å‹ç¼©çš„é—®é¢˜ */
/* å…¼å®¹æ€§ä¿®å¤ï¼šç§»é™¤ fit-contentï¼Œæ”¹ç”¨å…¶ä»–æ–¹å¼ç¡®ä¿é«˜åº¦æ­£ç¡® */
#settings-screen .settings-group {
  display: block !important;
  height: auto !important;
  /* ç§»é™¤ min-height: fit-contentï¼Œå› ä¸ºå¾ˆå¤šæµè§ˆå™¨ä¸æ”¯æŒ */
  min-height: auto !important;
  max-height: none !important;
  overflow: hidden !important; /* æ¢å¤ hidden ä»¥æ”¯æŒåœ†è§’ */
  /* ä¿ç•™åŸæœ‰çš„æ ·å¼ */

  border-radius: 12px !important;
  /* æ¸…é™¤ä»»ä½•å¯èƒ½çš„è´Ÿé«˜åº¦å½±å“ */
  flex-shrink: 0 !important;
}

/* ç¡®ä¿ settings-item æœ‰æ˜ç¡®çš„é«˜åº¦å¹¶æ­£ç¡®æ˜¾ç¤º */
/* è¿™æ˜¯å…³é”®ï¼šé€šè¿‡è®¾ç½® settings-item çš„é«˜åº¦æ¥æ’‘å¼€ settings-group */
#settings-screen .settings-item {
  display: flex !important;
  align-items: center !important;
  min-height: 48px !important;
  height: auto !important;
  padding-left: 16px !important;
  background-color: #f6faff !important;
  position: relative !important;
  /* ç¡®ä¿å¯è§æ€§ */
  visibility: visible !important;
  opacity: 1 !important;
  /* ä¸è¦åœ¨ item ä¸Šè®¾ç½® overflow: visibleï¼Œä¿æŒé»˜è®¤ */
}

/* ä¿®å¤ settings-content-ios å®¹å™¨ */
#settings-screen .settings-content-ios {
  display: flex !important;
  flex-direction: column !important;
  gap: 20px !important;
  /* ç¡®ä¿ä¸ä½¿ç”¨ absolute å®šä½ï¼Œä½¿ç”¨æ­£å¸¸æ–‡æ¡£æµ */
}

/* === æ–°å¢ï¼šçµåŠ¨å²›å±•å¼€åé¡¶éƒ¨çš„æ ·å¼ === */
.expanded-header {
  width: 100%;
  position: relative;
  display: flex;
  justify-content: center;
  /* å·¦å³ä¸¤ç«¯å¯¹é½ */
  align-items: flex-start;
  /* é¡¶éƒ¨å¯¹é½ */
}

/* å¤ç”¨ .song-details çš„æ ·å¼ï¼Œä½†ç¡®ä¿å®ƒä¸ä¼šè¢«å‹ç¼© */
.song-details {
  text-align: center;
  flex-shrink: 0;
}

/* æ–°å¢çš„é‚€è¯·æŒ‰é’®æ ·å¼ */
.island-action-button {
  position: absolute;
  top: -5px;
  /* å¾®è°ƒå‚ç›´ä½ç½® */
  right: -5px;
  /* å¾®è°ƒæ°´å¹³ä½ç½® */
  background: none;
  border: none;
  padding: 5px;
  cursor: pointer;
  opacity: 0.7;
  transition: opacity 0.2s;
}

.island-action-button:hover {
  opacity: 1;
}

/* === (æ›´æ–°) å¤´åƒæŒ‚ä»¶åŸºç¡€æ ·å¼ === */

/* === æ–°å¢ï¼šå¤´åƒé”šç‚¹ç³»ç»Ÿ (è§£å†³æŒ‚ä»¶ä¹±è·‘é—®é¢˜) === */

/* 1. å¤´åƒé”šç‚¹å®¹å™¨ï¼šå®ƒå°±åƒä¸€ä¸ªç›¸æ¡†ï¼Œå›ºå®šå¤§å°ï¼Œä½œä¸ºå®šä½åŸºå‡† */
.avatar-anchor {
  position: relative;
  /* å…³é”®ï¼è®©å†…éƒ¨çš„ç»å¯¹å®šä½å…ƒç´ ä»¥æˆ‘ä¸ºå‡† */
  width: 35px;
  /* å¿…é¡»ä¸ä½ å¤´åƒçš„é»˜è®¤å¤§å°ä¸€è‡´ */
  height: 35px;
  /* å¿…é¡»ä¸ä½ å¤´åƒçš„é»˜è®¤å¤§å°ä¸€è‡´ */
  flex-shrink: 0;
  /* é˜²æ­¢è¢«æ°”æ³¡æŒ¤æ‰ */
  margin: 0 8px;
  /* ä¿æŒåŸæ¥çš„é—´è· */
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 2. å¤´åƒå›¾ç‰‡æœ¬èº«ï¼šå¡«æ»¡é”šç‚¹ */
.avatar-anchor .chat-avatar {
  width: 100%;
  height: 100%;
  object-fit: cover;
  margin: 0 !important;
  /* æ¸…é™¤æ—§çš„å¤–è¾¹è·ï¼Œç”±é”šç‚¹æ§åˆ¶ */
  position: relative;
  z-index: 1;
  /* å¤´åƒåœ¨åº•å±‚ */
}

/* 3. æŒ‚ä»¶ï¼šç»å¯¹å®šä½ï¼Œé”æ­»åœ¨é”šç‚¹ä¸Š */
.avatar-pendant {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  /* é»˜è®¤å±…ä¸­ */

  /* é»˜è®¤å°ºå¯¸æ¯”å¤´åƒç¨å¤§ä¸€ç‚¹ç‚¹ï¼Œé˜²æ­¢ç›–ä½å¤´åƒè¾¹ç¼˜ */
  width: 130%;
  height: 130%;

  z-index: 2;
  /* æŒ‚ä»¶åœ¨å¤´åƒä¸Šå±‚ */
  pointer-events: none;
  /* è®©ç‚¹å‡»ç©¿é€æŒ‚ä»¶ï¼Œç‚¹åˆ°å¤´åƒ */

  background-position: center;
  background-repeat: no-repeat;
  background-size: contain;
}

/* You can add these new styles anywhere inside the main <style> tag */

/* â–¼â–¼â–¼ START: åœ¨è¿™é‡Œç²˜è´´æ–°çš„ä»£ç  â–¼â–¼â–¼ */

/* 1. Style for the purple "Block" button */
.purple-button {
  width: 100%;
  padding: 10px;
  font-weight: 500;
  /* A nice light purple */
  color: #5856d6;
  background-color: rgba(88, 86, 214, 0.1);
  border: 1px solid rgba(88, 86, 214, 0.2);
  border-radius: 8px;
  cursor: pointer;
  margin-bottom: 10px;
  /* Add some space between it and the clear button */
}

/* 2. Style for the red "You have blocked..." notice in the chat header */
#block-status-notice {
  position: absolute;
  bottom: -25px;
  left: 50%;
  transform: translateX(-50%);
  background-color: #ff3b30;
  /* Red background */
  color: white;
  padding: 2px 8px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 500;
  white-space: nowrap;
  /* Prevent text from wrapping */
}

/* 3. Style for the red exclamation mark next to unblocked messages */
/* This targets the message row when it has our special class */
.message-row.show-blocked-warning .message-content-wrapper.ai::after {
  content: "!";
  position: absolute;
  /* Position it outside and to the right of the bubble wrapper */
  right: -25px;
  top: 50%;
  transform: translateY(-50%);

  /* Style the red circle */
  background-color: #ff3b30;
  color: white;
  border-radius: 50%;
  width: 20px;
  height: 20px;

  /* Center the exclamation mark inside the circle */
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 14px;
}

/* â–²â–²â–² ç²˜è´´åˆ°è¿™é‡Œç»“æŸ â–²â–²â–² */

/* === ç¾åŒ–App å¡ç‰‡å¼å¸ƒå±€ (iOSæç®€é«˜å…‰ç‰ˆ) === */

/* 1. ç½‘æ ¼å®¹å™¨ */
.beautify-grid {
  display: grid;
  grid-template-columns: 1fr 1fr; /* ä¸¤åˆ—ç­‰å®½ */
  gap: 12px;
  padding: 16px;
  width: 100%;
  box-sizing: border-box;
}

/* 2. å•ä¸ªå¡ç‰‡æ ·å¼ */
.beautify-card {
  border-radius: 20px; /* è°ƒå¤§åœ†è§’ï¼Œæ›´æ˜¾æŸ”å’Œ */
  padding: 8px 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 8px;
  cursor: pointer;
  background: rgba(255, 255, 255, 0.5);
  border: 0.4px solid #ffffff;

  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

/* å–æ¶ˆæµ®åŠ¨é˜´å½±ï¼Œæ”¹ç”¨èƒŒæ™¯å¾®å˜å’Œå‹æ„Ÿç¼©æ”¾ */
.beautify-card:hover {
  background-color: #f9f9fb;
  border-color: #e5e5ea;
}

/* ç‚¹å‡»åé¦ˆï¼šiOS ç»å…¸çš„å‹æ„Ÿç¼©æ”¾ */
.beautify-card:active {
  transform: scale(0.95);
  background-color: #f2f2f7;
}

/* 3. å¡ç‰‡å†…å›¾æ ‡èƒŒæ™¯ (æ— é¢œè‰²ã€é«˜è´¨æ„Ÿç‰ˆ) */
.card-icon-bg {
  width: 52px;
  height: 52px;
  border-radius: 14px; /* iOS è¿ç»­æ›²ç‡æ¯”ä¾‹ */
  display: flex;
  justify-content: center;
  align-items: center;

  /* å–æ¶ˆè‰²å—å’Œé˜´å½±ï¼Œæ”¹ç”¨éå¸¸æ·¡çš„ç°è‰²èƒŒæ™¯æˆ–è½»å¾®æè¾¹ */

  border: 0.5px solid rgba(0, 0, 0, 0.03);

  /* æ¨¡æ‹Ÿå¾®å‡¹çš„é«˜å…‰è´¨æ„Ÿ */
}

/* å›¾æ ‡ SVG æ ·å¼ï¼šå›¾æ ‡é¢œè‰²ç”± HTML inline style æ§åˆ¶ */
.card-icon-bg svg {
  width: 26px;
  height: 26px;
  filter: saturate(1.2); /* ç¨å¾®æå‡å›¾æ ‡è‰²å½©é¥±å’Œåº¦ */
}

/* 4. å¡ç‰‡æ–‡å­—æ ‡ç­¾ */
.card-label {
  font-size: 11px; /* 13px æ˜¯ iOS æ ‡å‡†æ­£æ–‡å­—å· */
  font-weight: 500;
  color: #1c1c1e;
  letter-spacing: -0.3px;
}

/* === æ·±è‰²æ¨¡å¼é€‚é… === */
.phone-frame.dark-mode .beautify-card {
  background-color: #1c1c1e;
  border-color: #2c2c2e;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.phone-frame.dark-mode .card-icon-bg {
  background-color: #2c2c2e;
  border-color: rgba(255, 255, 255, 0.05);
}

.phone-frame.dark-mode .card-label {
  color: #f5f5f7;
}

.phone-frame.dark-mode .beautify-card:active {
  background-color: #2c2c2e;
}

/* === åº•éƒ¨æ‰“å¼€æŒ‰é’®æ ·å¼ === */
.drawer-trigger-btn {
  /* --- æ ¸å¿ƒå®šä½ä»£ç å¼€å§‹ --- */
  position: absolute;
  /* 1. ç»å¯¹å®šä½ï¼šæ— è§†å‘¨å›´å…ƒç´  */
  bottom: 25px;
  /* 2. è·ç¦»åº•éƒ¨ 25px */
  left: 50%;
  /* 3. è·‘åˆ°å·¦è¾¹ 50% çš„ä½ç½® */
  transform: translateX(-50%);
  /* 4. å†å¾€å›é€€è‡ªèº«å®½åº¦çš„ä¸€åŠï¼Œè¾¾æˆå®Œç¾å±…ä¸­ */
  z-index: 20;
  /* 5. ç¡®ä¿å±‚çº§å¾ˆé«˜ï¼Œæµ®åœ¨æœ€ä¸Šé¢ */
  /* --- æ ¸å¿ƒå®šä½ä»£ç ç»“æŸ --- */

  width: 30px;
  /*ç¨å¾®åŠ å¤§ä¸€ç‚¹ç‚¹ï¼Œæ›´å®¹æ˜“ç‚¹åˆ°*/
  height: 30px;
  border-radius: 50%;
  /* ä¿æŒåœ†å½¢ */

  /* è§†è§‰æ ·å¼ä¿æŒä¸å˜ */
  background-color: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);

  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transition: transform 0.2s;
}

.drawer-trigger-btn:active {
  transform: scale(0.9);
}

/* === åŠå±æŠ½å±‰å®¹å™¨æ ·å¼ === */
.app-drawer {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 60%;
  /* å æ®å±å¹• 60% é«˜åº¦ */
  background-color: rgba(245, 245, 247, 0.95);
  /* ç±»ä¼¼ iOS çš„ç£¨ç ‚ç™½ */
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 30px 30px 0 0;
  /* é¡¶éƒ¨åœ†è§’ */
  box-shadow: 0 -5px 30px rgba(0, 0, 0, 0.15);
  z-index: 100;
  /* ä¿è¯åœ¨æœ€ä¸Šå±‚ */

  /* æ ¸å¿ƒåŠ¨ç”»å±æ€§ */
  transform: translateY(100%);
  /* é»˜è®¤å‘ä¸‹å¹³ç§» 100% (éšè—) */
  transition: transform 0.4s cubic-bezier(0.32, 0.72, 0, 1);
  /* iOS é£æ ¼çš„å¼¹ç°§æ›²çº¿ */

  display: flex;
  flex-direction: column;
  align-items: center;
}

/* æ¿€æ´»çŠ¶æ€ï¼šæ»‘ä¸Šæ¥ */
.app-drawer.active {
  transform: translateY(0);
}

/* === é¡¶éƒ¨å…³é—­æ¡/æŒ‰é’®æ ·å¼ === */
.drawer-handle-container {
  width: 100%;
  height: 40px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  /* è®©ç”¨æˆ·çŸ¥é“è¿™é‡Œå¯ä»¥ç‚¹ */
}

.drawer-handle {
  width: 50px;
  height: 6px;
  background-color: #d1d1d6;
  border-radius: 3px;
}

/* æŠ½å±‰å†…å®¹åŒºåŸŸ */
.drawer-content {
  width: 100%;
  padding: 0 20px;
  box-sizing: border-box;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .drawer-trigger-btn {
  background-color: rgba(50, 50, 50, 0.6);
  border-color: rgba(255, 255, 255, 0.1);
}

.phone-frame.dark-mode .drawer-trigger-btn svg path {
  stroke: #fff;
}

.phone-frame.dark-mode .app-drawer {
  background-color: rgba(44, 44, 46, 0.95);
}

.phone-frame.dark-mode .app-drawer h3 {
  color: #fff !important;
}

.phone-frame.dark-mode .drawer-handle {
  background-color: #555;
}

/* === (ä¿®å¤ç‰ˆ) å¼€å¯å·¦å³æ‚¬æµ®æŒ‰é’®çš„äº¤äº’ === */
/* æˆ‘ä»¬æŠŠ #chat-header-actions-select åŠ åˆ°äº†é€‰æ‹©å™¨åˆ—è¡¨ä¸­ */
#chat-screen .floating-glass-btn,
#chat-screen .floating-glass-group,
#chat-header-actions-select {
  pointer-events: auto !important;
  /* å¼ºåˆ¶å¼€å¯äº¤äº’ï¼Œå¦åˆ™ç‚¹ä¸åŠ¨ */
}

/* === 1. æ¶ˆæ¯é¡µé¡¶æ ï¼šæ¶²æ€ç»ç’ƒåŒ– === */
#messages-screen .settings-header {
  background-color: transparent !important;
  border-bottom: none !important;
  height: 60px;
  z-index: 100;
  /* å…³é”®ï¼šè®©é¡¶æ æœ¬èº«ä¸é˜»æŒ¡è§†çº¿ */
}

/* 2. é¡¶æ èƒŒæ™¯ç‰¹æ•ˆï¼šå»æ‰ç™½è‰²æ¸å˜ï¼Œåªç”¨æ¨¡ç³Š */
#messages-screen .settings-header::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;

  /* â–¼â–¼â–¼ æ ¸å¿ƒä¿®æ”¹ï¼šç§»é™¤ background å±æ€§ â–¼â–¼â–¼ */
  background: transparent;

  /* åªä¿ç•™å¼ºåŠ›æ¨¡ç³Šï¼Œå½“åˆ—è¡¨åˆ’è¿‡æ—¶ä¼šå˜è™š */
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);

  /* ç»™ä¸€ä¸ªææ·¡çš„ç™½è‰²å†…å‘å…‰ï¼Œå‹¾å‹’è¾¹ç¼˜ */
  box-shadow: inset 0 -1px 0 0 rgba(255, 255, 255, 0.15);

  /* è’™ç‰ˆï¼šè®©æ¨¡ç³Šæ•ˆæœåœ¨åº•éƒ¨è‡ªç„¶æ·¡å‡ºï¼Œé¿å…ç”Ÿç¡¬çš„æ¨ªçº¿ */
  -webkit-mask-image: linear-gradient(to bottom, black 60%, transparent 100%);
  mask-image: linear-gradient(to bottom, black 60%, transparent 100%);

  pointer-events: none;
}

/* === 3. æ”¹é€ é¡¶æ çš„æ‰€æœ‰æŒ‰é’®ï¼ˆè¿”å›ã€æ·»åŠ ã€å¤šé€‰ï¼‰ === */
#messages-screen .header-text-button,
#messages-screen .header-button {
  /* èƒŒæ™¯ï¼šæä½é€æ˜åº¦çš„ç™½ï¼Œæ¥è¿‘é€æ˜ */
  background-color: rgba(255, 255, 255, 0.25) !important;

  /* å¼ºåŠ›æ¨¡ç³Šï¼šæŠŠèƒŒåçš„å£çº¸ç³Šæ‰ */
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);

  /* è¾¹æ¡†ï¼šé«˜äº®ç™½çº¿ï¼Œåˆ¶é€ ç»ç’ƒè¾¹ç¼˜åå…‰æ„Ÿ */
  border: 1px solid rgba(255, 255, 255, 0.4) !important;

  /* é˜´å½±ï¼šå¢åŠ ç«‹ä½“æ„Ÿ */
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);

  border-radius: 24px !important;
  /* æ›´åœ†æ¶¦ */
  padding: 6px 16px !important;

  /* å­—ä½“ï¼šæ·±è‰²ï¼ŒåŠ ä¸€ç‚¹é˜´å½±ä¿è¯åœ¨å¤æ‚å£çº¸ä¸Šä¹Ÿèƒ½çœ‹æ¸… */
  color: #111 !important;
  font-weight: 600 !important;
  font-size: 13px !important;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.4);

  transition: transform 0.2s;
}

/* æŒ‰é’®æŒ‰ä¸‹æ•ˆæœ */
#messages-screen .header-text-button:active,
#messages-screen .header-button:active {
  transform: scale(0.92);
  background-color: rgba(255, 255, 255, 0.4) !important;
}

/* æ ‡é¢˜ï¼šçº¯é»‘åŠ ä¸€ç‚¹å‘å…‰ï¼Œæ›´æµ®å‡¸ */
#messages-screen .settings-header h1 {
  font-weight: 700;
  font-size: 22px;
  /* åŠ å¤§ */
  color: #000;
  text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
}

/* === 4. æ·±è‰²æ¨¡å¼é€‚é… === */
.phone-frame.dark-mode #messages-screen .settings-header::before {
  /* èƒŒæ™¯å˜é»‘æ¸å˜ */
  background: linear-gradient(
    to bottom,
    rgba(0, 0, 0, 0.8) 0%,
    rgba(0, 0, 0, 0) 100%
  );
}

.phone-frame.dark-mode #messages-screen .header-text-button,
.phone-frame.dark-mode #messages-screen .header-button {
  /* æŒ‰é’®å˜æˆåŠé€æ˜é»‘ */
  background-color: rgba(60, 60, 60, 0.6) !important;
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  /* å¾®å¼±äº®è¾¹ */
  color: #fff !important;
}

.phone-frame.dark-mode #messages-screen .settings-header h1 {
  color: #fff;
  text-shadow: none;
}

/* === æ–°å¢ï¼šæ¶ˆæ¯é¡µæ‚¬æµ®åº•æ  === */
.messages-bottom-bar {
  position: absolute;
  bottom: 30px;
  /* è·ç¦»åº•éƒ¨æ‚¬æµ® */
  left: 0;
  width: 100%;
  display: flex;
  justify-content: center;
  z-index: 100;
  /* ç¡®ä¿æµ®åœ¨åˆ—è¡¨ä¸Šé¢ */
  pointer-events: none;
  /* è®©åº•æ ä¸¤ä¾§ç©ºç™½å¤„ä¸æŒ¡ä½åˆ—è¡¨æ»šåŠ¨ */
}

/* ç»ç’ƒå®¹å™¨ */
.glass-segment-control {
            pointer-events: auto;
            position: relative;
            display: flex;
            background-color: rgba(255, 255, 255, 0.65); /* æäº® */
            backdrop-filter: blur(25px) saturate(180%); /* iOS æ ¸å¿ƒæ¨¡ç³Šå‚æ•° */
            -webkit-backdrop-filter: blur(25px) saturate(180%);
            padding: 4px;
            border-radius: 100px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08); /* æ›´æŸ”å’Œçš„æŠ•å½± */
            border: 1px solid rgba(255, 255, 255, 0.5);
            width: 200px; /* ç•¥å¾®åŠ å®½ */
            height: 48px; /* æ›´åŠ é€‚åˆæ‰‹æŒ‡ç‚¹å‡»çš„é«˜åº¦ */
}

/* å•ä¸ªæŒ‰é’® */
.segment-btn {
  flex: 1;
  position: relative;
  z-index: 2;
  /* åœ¨æ»‘å—ä¹‹ä¸Š */
  border: none;
  background: none;
  font-size: 14px;
  font-weight: 500;
  color: #8e8e93;
  /* æœªé€‰ä¸­é¢œè‰² */
  cursor: pointer;
  transition: color 0.3s ease;
  border-radius: 80px;
}

/* é€‰ä¸­çŠ¶æ€çš„æ–‡å­—é¢œè‰² */
.segment-btn.active {
  color: #000;
  font-weight: 600;
}

/* é‚£ä¸ªæ»‘åŠ¨çš„ç™½è‰²èƒŒæ™¯å— */
.segment-indicator {
  position: absolute;
  top: 4px;
  left: 4px;
  width: calc(50% - 4px);
  /* å‡å»padding */
  height: calc(100% - 8px);
  background-color: #fff;
  border-radius: 100px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  z-index: 1;
  transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
  /* ä¸æ»‘çš„ iOS åŠ¨æ•ˆ */
}

/* === çŠ¶æ€åˆ‡æ¢é€»è¾‘ (é€šè¿‡ CSS ç±»æ§åˆ¶æ»‘å—ä½ç½®) === */
/* é»˜è®¤åœ¨å·¦è¾¹ (å•èŠ)ï¼Œå¦‚æœçˆ¶çº§æœ‰ .group-modeï¼Œæ»‘å—ç§»åˆ°å³è¾¹ */
.glass-segment-control.group-mode .segment-indicator {
  transform: translateX(100%);
}

/* === ä¿®æ­£ï¼šç»™åˆ—è¡¨åº•éƒ¨å¢åŠ æ›´å¤šç©ºé—´ï¼Œé˜²æ­¢è¢«åº•æ æŒ¡ä½ === */
#messages-screen .messages-content {
  padding-bottom: 100px !important;
  /* å¢åŠ åº•éƒ¨å†…è¾¹è· */
}

/* === æ·±è‰²æ¨¡å¼é€‚é… === */
.phone-frame.dark-mode .glass-segment-control {
  background-color: rgba(40, 40, 40, 0.6);
  border-color: rgba(255, 255, 255, 0.1);
}

.phone-frame.dark-mode .segment-indicator {
  background-color: #636366;
  /* æ·±ç°è‰²æ»‘å— */
}

.phone-frame.dark-mode .segment-btn.active {
  color: #fff;
}

/* === æ¶ˆæ¯é¡µé¡¶æ å›¾æ ‡æŒ‰é’®æ ·å¼ === */
#messages-screen .header-icon-button {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  /* åœ†å½¢ */

  /* ç»ç’ƒè´¨æ„Ÿ */
  background-color: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);

  /* å¸ƒå±€ */
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  padding: 0;

  /* å›¾æ ‡é¢œè‰² */
  color: #111;
  transition: all 0.2s;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode #messages-screen .header-icon-button {
  background-color: rgba(60, 60, 60, 0.6);
  border-color: rgba(255, 255, 255, 0.1);
  color: #fff;
}

/* ç‚¹å‡»åé¦ˆ */
#messages-screen .header-icon-button:active {
  transform: scale(0.9);
  background-color: rgba(255, 255, 255, 0.5);
}

/* åˆ é™¤æ¨¡å¼ä¸‹çš„ç‰¹æ®Šæ ·å¼ */
#messages-screen .header-icon-button.delete-mode-active {
  background-color: rgba(255, 59, 48, 0.1);
  border-color: rgba(255, 59, 48, 0.3);
}

/* === ç¾åŒ–å¤é€‰æ¡†æ ·å¼ === */

/* 1. éšè—åŸç”Ÿå¤é€‰æ¡†ï¼Œä½†ä¿ç•™å ä½ä»¥ä¾¿ç‚¹å‡» */
.contact-item .contact-checkbox {
  appearance: none;
  -webkit-appearance: none;
  width: 22px;
  height: 22px;
  border: 2px solid #c7c7cc;
  /* æœªé€‰ä¸­æ—¶çš„ç°è‰²è¾¹æ¡† */
  border-radius: 50%;
  /* åœ†å½¢ */
  outline: none;
  cursor: pointer;
  margin-right: 12px;
  position: relative;
  transition: all 0.2s ease;
  flex-shrink: 0;
  /* é˜²æ­¢è¢«æŒ¤å‹ */
}

/* 2. é€‰ä¸­çŠ¶æ€ï¼šå˜è“èƒŒæ™¯ï¼Œå»è¾¹æ¡† */
.contact-item .contact-checkbox:checked {
  background-color: #45494d;
  /* iOS è“ */
  border-color: #45494d;
}

/* 3. é€‰ä¸­çŠ¶æ€ï¼šç”»ä¸€ä¸ªç™½è‰²å¯¹å‹¾ */
.contact-item .contact-checkbox:checked::after {
  content: "";
  position: absolute;
  top: 45%;
  left: 50%;
  width: 5px;
  height: 9px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: translate(-50%, -60%) rotate(45deg);
}

/* 4. åˆ é™¤æ¨¡å¼ä¸‹æ˜¾ç¤ºå¤é€‰æ¡† (å¦‚æœä½ ä¹‹å‰ç”¨çš„ display:noneï¼Œè¿™é‡Œè¦ç¡®ä¿èƒ½æ˜¾ç¤º) */
.contact-list.delete-mode .contact-item .contact-checkbox {
  display: block;
  /* æˆ–è€…æ˜¯ inline-block */
}

/* === 3. æ¨¡å—åŒ–å¡ç‰‡ (Section) === */
/* ç”¨äºåŒ…è£¹ä¸€ç»„ç›¸å…³çš„è¾“å…¥æ¡† */
.modal-section {
  background-color: #ffffff;
  /* çº¯ç™½å¡ç‰‡ */
  border-radius: 12px;
  overflow: hidden;
  margin-bottom: 20px;
  /* å¢åŠ ä¸€ä¸ªææ·¡çš„è¾¹æ¡†è®©å¡ç‰‡æ›´ç«‹ä½“ (å¯é€‰) */
  border: 1px solid rgba(60, 60, 67, 0.02);
}

/* === æ ¸å¿ƒï¼šå•å…ƒæ ¼ (Cell) é…è‰²ä¼˜åŒ– === */
.modal-cell {
  display: flex;
  align-items: center;
  padding: 0 16px;
  height: 48px;
  background-color: #fff;
  /* ä¼˜åŒ–åˆ†å‰²çº¿é¢œè‰² */
  border-bottom: 1px solid #c6c6c8;
}

/* æœ€åä¸€é¡¹å»æ‰åˆ†å‰²çº¿ */
.modal-cell:last-child {
  border-bottom: none;
}

/* ã€æ”¹åŠ¨ã€‘æ ‡ç­¾é¢œè‰²å˜æŸ”å’Œ */
.modal-cell label {
  font-size: 16px;
  color: #3c3c43;
  /* æ¬¡çº§é»‘è‰²ï¼Œä¸é‚£ä¹ˆåˆºçœ¼ */
  width: 90px;
  /* ç¨å¾®åŠ å®½ä¸€ç‚¹ç»™ä¸­æ–‡è…¾ç©ºé—´ */
  flex-shrink: 0;
  font-weight: 400;
}

/* ç®€å•çš„æ ‡é¢˜æ–‡æœ¬ */
.modal-section-title {
  font-size: 13px;
  color: #8e8e93;
  margin: 0 0 6px 15px;
  /* å·¦å¯¹é½ï¼Œç•™å‡ºç¼©è¿› */
  text-transform: uppercase;
  /* å¯é€‰ï¼šå¤§å†™æ›´æœ‰è®¾è®¡æ„Ÿ */
}

/* === 4. æ§ä»¶ç¾åŒ– === */

/* è¾“å…¥æ¡†ï¼šå»è¾¹æ¡†ï¼Œèå…¥èƒŒæ™¯ */
/* ã€æ”¹åŠ¨ã€‘è¾“å…¥æ¡†æ–‡å­—æ¢å¤æ­£å¸¸ */
.modal-cell .form-input,
.modal-cell .form-select {
  flex-grow: 1;
  border: none;
  outline: none;
  text-align: right;
  font-size: 16px;
  color: #000000;
  /* ã€é‡è¦ã€‘è¾“å…¥çš„å­—æ˜¯çº¯é»‘ */
  background: transparent;
  height: 100%;
  padding: 0;
  font-weight: 400;
}

/* è¾“å…¥æ¡† placeholder é¢œè‰² (æµè§ˆå™¨é»˜è®¤æ˜¯ç°è‰²ï¼Œè¿™é‡Œæ˜¾å¼æŒ‡å®šä¸€ä¸‹) */
.modal-cell .form-input::placeholder,
.modal-cell .form-textarea::placeholder {
  color: #c7c7cc;
}

/* æ–‡æœ¬åŸŸé…è‰²ä¼˜åŒ– */
.modal-cell.textarea-cell {
  height: auto;
  padding: 12px 16px;
  flex-direction: column;
  align-items: flex-start;
}

.modal-cell.textarea-cell .form-textarea {
  width: 100%;
  border: none;
  outline: none;
  resize: none;
  font-size: 15px;
  margin-top: 8px;
  min-height: 80px;
  background-color: transparent;
  color: #000000;
  /* ã€é‡è¦ã€‘çº¯é»‘æ–‡å­— */
  line-height: 1.4;
}

/* === 5. æ·±è‰²æ¨¡å¼é€‚é… === */
.phone-frame.dark-mode .modal-content {
  background-color: rgba(28, 28, 30, 0.85);
  /* æ·±ç°èƒŒæ™¯ */
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.phone-frame.dark-mode .modal-header,
.phone-frame.dark-mode .modal-footer {
  background-color: rgba(44, 44, 46, 0.5);
  border-color: rgba(255, 255, 255, 0.1);
}

.phone-frame.dark-mode .modal-section {
  background-color: #2c2c2e;
  /* å¡ç‰‡å˜æ·± */
}

.phone-frame.dark-mode .modal-cell {
  border-bottom-color: #3a3a3c;
}

.phone-frame.dark-mode .modal-header h2,
.phone-frame.dark-mode .modal-cell label {
  color: #fff;
}

.phone-frame.dark-mode .modal-cell .form-input {
  color: #fff;
  /* æˆ–è€…ä¿æŒè“è‰² #0A84FF */
}

/* === 2. è¾“å…¥æ¡†ç¾åŒ– (å»è¾¹æ¡†ï¼Œèå…¥å•å…ƒæ ¼) === */

/* å¼ºåˆ¶é‡ç½®æ¨¡æ€æ¡†å†…æ‰€æœ‰è¾“å…¥æ¡†çš„æ ·å¼ */
#add-contact-modal .modal-cell .form-input,
#add-contact-modal .modal-cell .form-textarea {
  /* æ ¸å¿ƒï¼šå»æ‰è¾¹æ¡†å’ŒèƒŒæ™¯ */
  border: none !important;
  background-color: transparent !important;
  background: transparent !important;
  box-shadow: none !important;
  border-radius: 0 !important;

  /* æ–‡å­—æ ·å¼ */
  text-align: right;
  /* iOS é£æ ¼ï¼šå†…å®¹é å³ */
  font-size: 16px;
  color: #000 !important;
  /* è¾“å…¥çš„å†…å®¹æ˜¯é»‘è‰² */

  /* å¸ƒå±€ */
  width: 100%;
  height: 100%;
  padding: 0 !important;
  margin: 0 !important;
}

/* é’ˆå¯¹å¤šè¡Œæ–‡æœ¬åŸŸçš„ç‰¹æ®Šè°ƒæ•´ */
#add-contact-modal .modal-cell.textarea-cell .form-textarea {
  text-align: left;
  /* æ–‡æœ¬åŸŸé å·¦ */
  margin-top: 8px !important;
  min-height: 80px;
  line-height: 1.5;
}

/* å ä½ç¬¦é¢œè‰²å˜æ·¡ */
#add-contact-modal .form-input::placeholder,
#add-contact-modal .form-textarea::placeholder {
  color: #c7c7cc !important;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode #add-contact-modal .modal-cell .form-input,
.phone-frame.dark-mode #add-contact-modal .modal-cell .form-textarea {
  color: #fff !important;
}

/* ========================================= */
/* === 1. è®¾ç½®é¡µ (Settings App) ä¸“å±ä¿®å¤è¡¥ä¸ === */
/* ========================================= */

/* ä¿®å¤èƒŒæ™¯è‰²ï¼Œç¡®ä¿æ˜¯æµ…ç°ï¼Œä¸æ˜¯é€æ˜ */
#settings-screen {
  z-index: 20;
  /* ç¡®ä¿å±‚çº§æ­£ç¡® */
}

/* ä¿®å¤å†…å®¹åŒºåŸŸçš„è¾¹è·å’Œæ»šåŠ¨ */
#settings-screen .settings-content {
  padding: 110px 20px 40px 20px !important;
  /* é¿å¼€é¡¶æ ï¼Œç•™å‡ºåº•è· */
  width: 100%;
  box-sizing: border-box;
  display: block !important;
  /* é˜²æ­¢è¢« flex å½±å“ */
  overflow-y: auto;
  height: 100%;
}

/* ä¿®å¤å¡ç‰‡åˆ†ç»„ (Section) */
#settings-screen .modal-section {
  background-color: #ffffff !important;
  /* å¼ºåˆ¶çº¯ç™½èƒŒæ™¯ */
  border-radius: 12px;
  margin-bottom: 25px !important;
  /* ç»„ä¸ç»„ä¹‹é—´æ‹‰å¼€è·ç¦» */
  overflow: hidden;
  border: none !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  /* åŠ ä¸€ç‚¹ç‚¹é˜´å½± */
  width: 100%;
  /* å æ»¡å®½åº¦ */
  display: block;
  /* ç¡®ä¿æ˜¯å—çº§å…ƒç´  */
}

/* ä¿®å¤åˆ†ç»„æ ‡é¢˜ */
#settings-screen .settings-group-title {
  font-size: 13px;
  color: #6d6d72;
  margin: 0 0 8px 15px;
  /* æ ‡é¢˜å¯¹é½ */
  text-transform: uppercase;
  font-weight: 400;
}

/* ä¿®å¤å•å…ƒæ ¼ (Cell) */
#settings-screen .modal-cell {
  display: flex !important;
  align-items: center;
  justify-content: space-between;
  height: 48px !important;
  /* å›ºå®šé«˜åº¦ï¼Œé˜²æ­¢å¡Œé™· */
  padding: 0 16px !important;
  background-color: #fff !important;
  border-bottom: 1px solid #e5e5ea !important;
}

#settings-screen .modal-cell:last-child {
  border-bottom: none !important;
}

/* ä¿®å¤æ ‡ç­¾æ–‡å­— */
#settings-screen .modal-cell label {
  font-size: 16px !important;
  color: #000 !important;
  font-weight: 400;
  width: auto !important;
  /* è‡ªåŠ¨å®½åº¦ */
  flex-shrink: 0;
}

/* ä¿®å¤è¾“å…¥æ¡† (å³å¯¹é½ï¼Œæ— è¾¹æ¡†) */
#settings-screen .form-input,
#settings-screen .form-select {
  text-align: right !important;
  border: none !important;
  background: transparent !important;
  font-size: 16px !important;
  color: #007aff !important;
  /* è“è‰²æ–‡å­— */
  height: 100%;
  width: 60%;
  /* é™åˆ¶å®½åº¦ */
}

/* ä¿®å¤å¼€å…³ (Switch) */
#settings-screen .switch {
  margin-left: auto;
  /* å¼ºåˆ¶é å³ */
}

/* === è®¾ç½®é¡µå¸ƒå±€å¼ºåˆ¶ä¿®æ­£è¡¥ä¸ === */

/* 1. ä¿®å¤ç³»ç»ŸåŠŸèƒ½é‡Œçš„å¼€å…³å¯¹é½é—®é¢˜ */
#settings-screen .modal-cell {
  justify-content: space-between;
  /* å·¦å³ä¸¤ç«¯å¯¹é½ */
  width: 100%;
  box-sizing: border-box;
}

/* 2. ä¿®å¤å¼€å…³ (Switch) å¯èƒ½è¢«æŒ¤å‹æˆ–ä½ç½®ä¸å¯¹çš„é—®é¢˜ */
#settings-screen .switch {
  margin-left: auto;
  /* å¼ºåˆ¶æ¨åˆ°æœ€å³è¾¹ */
  flex-shrink: 0;
  /* é˜²æ­¢è¢«æŒ¤å‹ */
}

/* 3. ä¿®å¤ä¸ªæ€§åŒ–é‡Œçš„è·³è½¬ç®­å¤´å¸ƒå±€ */
#settings-screen .settings-action-row {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

/* 4. ä¿®å¤è¾“å…¥æ¡†é«˜åº¦å’Œå¯¹é½ */
#settings-screen .form-input,
#settings-screen .form-select {
  height: 100%;
  /* å¡«æ»¡å•å…ƒæ ¼é«˜åº¦ */
  text-align: right;
  border: none;
  background: transparent;
}

/* 5. ä¿®å¤æ¸©åº¦æ»‘å—çš„å®¹å™¨é«˜åº¦ */
#settings-screen .modal-cell[style*="column"] {
  min-height: 80px !important;
  height: auto !important;
  display: flex !important;
  flex-direction: column !important;
  justify-content: center !important;
  align-items: stretch !important;
  /* æ‹‰ä¼¸å­å…ƒç´  */
}

/* 2. é‡å†™æ»‘å—è½¨é“æ ·å¼ (é»‘è‰²é£æ ¼) */
#settings-screen .form-slider {
  appearance: none;
  -webkit-appearance: none;
  width: 100% !important;
  /* å æ»¡å®½åº¦ */
  height: 4px !important;
  /* è½¨é“é«˜åº¦ */
  background: #e5e5ea !important;
  /* æœªæ¿€æ´»éƒ¨åˆ†çš„åº•è‰² (æµ…ç°) */
  border-radius: 2px;
  outline: none;
  margin-top: 10px;
  /* ç»™ç‚¹ä¸Šè¾¹è· */

  /* æ ¸å¿ƒï¼šç”¨æ¸å˜å®ç°é»‘è‰²è¿›åº¦æ¡ */
  /* var(--progress-percent) ç”± JS åŠ¨æ€è®¡ç®—ï¼Œè¿™é‡Œé»˜è®¤ 50% */
  background: linear-gradient(
    to right,
    #000000 0%,
    #000000 var(--progress-percent, 50%),
    #e5e5ea var(--progress-percent, 50%),
    #e5e5ea 100%
  ) !important;
}

/* 3. é‡å†™æ»‘å—æŒ‰é’® (Thumb) æ ·å¼ */
#settings-screen .form-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  width: 24px !important;
  /* æŒ‰é’®å¤§ä¸€ç‚¹ï¼Œå¥½æŒ‰ */
  height: 24px !important;
  background: #ffffff !important;
  /* çº¯ç™½æŒ‰é’® */
  border: 0.5px solid rgba(0, 0, 0, 0.1) !important;
  /* å¾®å¼±æè¾¹ */
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
  /* æŠ•å½± */
  cursor: pointer;
  margin-top: -10px;
  /* å‚ç›´å±…ä¸­ä¿®æ­£ (æŒ‰é’®é«˜åº¦çš„ä¸€åŠå‡å»è½¨é“é«˜åº¦çš„ä¸€åŠ) */
}

/* å…¼å®¹ Firefox */
#settings-screen .form-slider::-moz-range-thumb {
  width: 24px !important;
  height: 24px !important;

  border: none;
  border-radius: 50%;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2) !important;
  cursor: pointer;
}

/* ================================================================= */
/* === å…¨å±€é¡¶æ ç»Ÿä¸€ (iOS 26 Glass Header System) === */
/* ================================================================= */

/* 1. é¡¶æ å®¹å™¨ï¼šç»Ÿä¸€é«˜åº¦ã€é€æ˜ã€æ¯›ç»ç’ƒ */
.settings-header {
  position: absolute !important;
  /* æ‚¬æµ® */
  top: 0;
  left: 0;
  width: 100%;
  height: 70px !important;
  /* ç»Ÿä¸€é«˜åº¦ */
  padding: 0 15px !important;
  /* ç»Ÿä¸€è¾¹è· */
  padding-top: 50px !important;
  /* é¿å¼€åˆ˜æµ· */
  box-sizing: border-box;

  /* å»æ‰æ‰€æœ‰èƒŒæ™¯ */
  /* background-color: #F5F7F9 !important; */
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  border-bottom: none !important;
  box-shadow: none !important;

  z-index: 100;

  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* 2. é¡¶æ èƒŒæ™¯å…‰æ™• (ä¼ªå…ƒç´ å®ç°æ¸å˜æ¨¡ç³Š) */
/* 2. é¡¶æ èƒŒæ™¯å…‰æ™• (å¼ºåˆ¶éšè—) */
.settings-header::before {
  display: none !important;
  content: none !important;
  background: none !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

/* 3. é¡¶æ æ ‡é¢˜ */
.settings-header h1 {
  font-size: 18px !important;
  font-weight: 600 !important;
  color: #000 !important;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  margin: 0;
  white-space: nowrap;
  text-shadow: 0 1px 10px rgba(255, 255, 255, 0.5);
  /* é˜²æ­¢èƒŒæ™¯å¤ªèŠ±çœ‹ä¸æ¸… */
  top: 58px;
}

/* 4. é€šç”¨å›¾æ ‡æŒ‰é’® (Header Icon Button) */
/* æ›¿æ¢åŸæ¥çš„ .header-text-button å’Œ .header-button */
.header-icon-button,
.header-text-button,
/* å…¼å®¹æ—§ç±»å */
.header-button

/* å…¼å®¹æ—§ç±»å */ {
  width: 40px !important;
  height: 40px !important;
  border-radius: 32px !important;
  /* åœ†å½¢ */

  /* ç»ç’ƒè´¨æ„Ÿ */
  background-color: rgba(255, 255, 255, 0.45) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.5) !important;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05) !important;

  /* å†…å®¹å±…ä¸­ */
  display: flex !important;
  justify-content: center;
  align-items: center;
  padding: 0 !important;
  /* ç»Ÿä¸€è®¾ç½®é¡¶éƒ¨é—´è· */
  margin-top: 22px !important;
  /* ä¿æŒå·¦å³å’Œåº•éƒ¨ä¸ºåŸæ¥çš„ 4px */
  margin-right: 4px !important;
  margin-bottom: 4px !important;
  margin-left: 4px !important;
  color: #1c1c1e !important;
  /* å›¾æ ‡é¢œè‰² */
  cursor: pointer;
  transition: transform 0.2s, background-color 0.2s;

  /* å¦‚æœé‡Œé¢æœ‰æ–‡å­—ï¼Œå¼ºåˆ¶éšè— (ä¸ºäº†è¿‡æ¸¡) */
  font-size: 0 !important;
}

/* æŒ‰é’®ç‚¹å‡»æ•ˆæœ */
.header-icon-button:active,
.header-text-button:active,
.header-button:active {
  transform: scale(0.9);
  background-color: rgba(255, 255, 255, 0.8) !important;
}

/* æŒ‰é’®å†…çš„ SVG æ ·å¼ */
.header-icon-button svg,
.header-text-button svg,
.header-button svg {
  width: 20px;
  height: 20px;
  stroke: currentColor;
  /* è·Ÿéšæ–‡å­—é¢œè‰² */
  stroke-width: 2;
  fill: none;
  display: block !important;
  /* ç¡®ä¿æ˜¾ç¤º */
}

/* 5. ä¿®æ­£å³ä¾§æŒ‰é’®ç»„çš„å¸ƒå±€ */
.header-actions {
  display: flex;
  gap: 10px;
  z-index: 2;
}

/* 6. æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .settings-header::before {
  background: linear-gradient(to bottom, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0));
}

.phone-frame.dark-mode .settings-header h1 {
  color: #fff !important;
  text-shadow: none;
}

.phone-frame.dark-mode .header-icon-button,
.phone-frame.dark-mode .header-text-button,
.phone-frame.dark-mode .header-button {
  background-color: rgba(60, 60, 60, 0.5) !important;
  border-color: rgba(255, 255, 255, 0.1) !important;
  color: #fff !important;
}

/* 7. ä¿®æ­£æ‰€æœ‰é¡µé¢çš„å†…å®¹é¡¶éƒ¨é—´è· (é˜²æ­¢è¢«é€æ˜é¡¶æ é®æŒ¡) */
/* è¿™ä¸€æ­¥å¾ˆå…³é”®ï¼Œå¦åˆ™å†…å®¹ä¼šé’»åˆ°é¡¶æ ä¸‹é¢ç‚¹ä¸åˆ° */
.messages-content,
.music-content,
.playlist-content,
.settings-content,
#shop-main-content,
#slacking-off-main-content,
#gacha-main-content,
#transactions-list-container,
#dating-history-container,
#dating-settings-main .settings-menu-container {
  padding-top: 100px !important;
  /* 60pxé«˜åº¦ + 50pxåˆ˜æµ· */
}

/* ========================================= */
/* === 1. å…¨å±€ App èƒŒæ™¯ç»ç’ƒåŒ– (Glass OS) === */
/* ========================================= */

/* ========================================= */
/* === 2. é¡¶æ ç™½è‰²æ¸å˜é®ç½© (White Mask) === */
/* ========================================= */

/* é‡å†™é¡¶æ èƒŒæ™¯ç‰¹æ•ˆ */
.settings-header::before {
  /* å¼ºåˆ¶éšè—é¡¶æ çš„ç™½è‰²æ¸å˜é®ç½©å±‚ */
  display: none !important;
  background: none !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  -webkit-mask-image: none !important;
  mask-image: none !important;
}

/* æ·±è‰²æ¨¡å¼é¡¶æ é€‚é… */
.phone-frame.dark-mode .settings-header::before {
  background: linear-gradient(
    to bottom,
    rgba(28, 28, 30, 0.95) 0%,
    rgba(28, 28, 30, 0.8) 60%,
    rgba(28, 28, 30, 0) 100%
  ) !important;
}

/* ========================================= */
/* === Gacha æ‚¬æµ®åº•æ ä¸“å±æ ·å¼ === */
/* ========================================= */

/* 1. åº•éƒ¨å®šä½å®¹å™¨ */
.gacha-bottom-bar {
  position: absolute;
  bottom: 30px;
  /* æ‚¬æµ®é«˜åº¦ */
  left: 0;
  width: 100%;
  display: flex;
  justify-content: center;
  /* å±…ä¸­ */
  z-index: 100;
  /* ç¡®ä¿åœ¨æœ€ä¸Šå±‚ */
  pointer-events: none;
  /* è®©ä¸¤ä¾§ç©ºç™½åŒºåŸŸä¸æŒ¡ä½ç‚¹å‡» */
}

/* 2. å¤ç”¨ .glass-segment-control çš„æ ·å¼ */
/* (å› ä¸ºæˆ‘ä»¬åœ¨æ¶ˆæ¯é¡µå·²ç»å®šä¹‰äº†å®ƒï¼Œè¿™é‡Œç›´æ¥å¤ç”¨å³å¯) */
/* è¿™é‡Œåªéœ€å¾®è°ƒä¸€ä¸‹ Gacha ä¸“å±çš„å®½åº¦ */
#gacha-segment-control {
  width: 200px;
  /* ç¨å¾®å®½ä¸€ç‚¹ */
  pointer-events: auto;
  /* æ¢å¤ç‚¹å‡» */
}

/* 3. æ»‘å—åŠ¨ç”»é€»è¾‘ */
/* é»˜è®¤åœ¨å·¦è¾¹ (SHARE)ï¼ŒåŠ ä¸Š .forum-mode ç±»åæ»‘åˆ°å³è¾¹ */
#gacha-segment-control.forum-mode .segment-indicator {
  transform: translateX(100%);
}

/* 4. ã€å…³é”®ä¿®å¤ã€‘ç»™å†…å®¹åŒºåŸŸåº•éƒ¨åŠ å«å­ */
/* å¦åˆ™æœ€åä¸€æ¡å¸–å­ä¼šè¢«æ‚¬æµ®æ æŒ¡ä½çœ‹ä¸è§ */
#gacha-main-content {
  padding-bottom: 100px !important;
}

/* ========================================= */
/* === ä¸ƒè¢‹ & æ‘¸é±¼ æ‚¬æµ®åº•æ ä¸“å±æ ·å¼ === */
/* ========================================= */

/* 1. åº•éƒ¨å®šä½å®¹å™¨ (é€šç”¨) */
.shop-bottom-bar,
.game-bottom-bar {
  position: absolute;
  bottom: 30px;
  left: 0;
  width: 100%;
  display: flex;
  justify-content: center;
  z-index: 100;
  /* ç¡®ä¿æµ®åœ¨æœ€ä¸Šå±‚ */
  pointer-events: none;
}

/* 2. èƒ¶å›Šå®½åº¦è®¾ç½® */
#shop-segment-control,
#game-segment-control {
  width: 180px;
  /* ä¸¤ä¸ªé€‰é¡¹ï¼Œç¨å¾®çª„ä¸€ç‚¹ */
  pointer-events: auto;
}

/* 3. ä¸ƒè¢‹æ»‘å—åŠ¨ç”» (åŠ ä¸Š .my-mode åå³ç§») */
#shop-segment-control.my-mode .segment-indicator {
  transform: translateX(100%);
}

/* 4. æ‘¸é±¼æ»‘å—åŠ¨ç”» (åŠ ä¸Š .savings-mode åå³ç§») */
#game-segment-control.savings-mode .segment-indicator {
  transform: translateX(100%);
}

/* 5. ã€å…³é”®ã€‘ç»™å†…å®¹åŒºåŠ åº•éƒ¨å«å­ï¼Œé˜²æ­¢è¢«é®æŒ¡ */
#shop-main-content,
#slacking-off-main-content {
  padding-bottom: 100px !important;
}

/* === 1. éŸ³ä¹ App å¤é€‰æ¡†ç¾åŒ– (å¤ç”¨ iOS é£æ ¼) === */
.playlist-checkbox,
.song-checkbox {
  appearance: none;
  -webkit-appearance: none;
  width: 22px;
  height: 22px;
  border: 2px solid #c7c7cc;
  border-radius: 50%;
  /* åœ†å½¢ */
  outline: none;
  cursor: pointer;
  position: absolute;
  /* æ­Œå•å¡ç‰‡é‡Œæ˜¯ç»å¯¹å®šä½ */
  z-index: 10;
  background-color: rgba(255, 255, 255, 0.8);
  /* ç¨å¾®ç»™ç‚¹èƒŒæ™¯ï¼Œé˜²æ­¢çœ‹ä¸æ¸… */
}

/* æ­Œå•å¡ç‰‡å¤é€‰æ¡†ä½ç½®å¾®è°ƒ */
.playlist-checkbox {
  top: 8px;
  right: 8px;
}

/* æ­Œæ›²åˆ—è¡¨å¤é€‰æ¡†ä½ç½®å¾®è°ƒ */
.song-checkbox {
  position: relative;
  /* åˆ—è¡¨é‡Œæ˜¯ç›¸å¯¹å®šä½ */
  margin-right: 12px;
  background-color: transparent;
}

/* é€‰ä¸­çŠ¶æ€ï¼šå˜è“ + å¯¹å‹¾ */
.playlist-checkbox:checked,
.song-checkbox:checked {
  background-color: #007aff;
  border-color: #007aff;
}

.playlist-checkbox:checked::after,
.song-checkbox:checked::after {
  content: "";
  position: absolute;
  top: 45%;
  left: 50%;
  width: 5px;
  height: 9px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: translate(-50%, -60%) rotate(45deg);
}

/* åˆ é™¤æ¨¡å¼ä¸‹æ‰æ˜¾ç¤º */
.playlist-checkbox,
.song-checkbox {
  display: none;
}

.playlist-grid.delete-mode .playlist-checkbox,
.song-list.delete-mode .song-checkbox {
  display: block;
}

.icon-setting-item,
.preset-item {
  /* å¢åŠ è¾¹æ¡†å’Œæ›´æ˜æ˜¾çš„é˜´å½± */
  border: 1px solid rgba(0, 0, 0, 0.1) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06) !important;
  background-color: #ffffff !important;
  /* ç¡®ä¿èƒŒæ™¯çº¯ç™½ */
  margin-bottom: 12px !important;
  /* æ‹‰å¼€é—´è· */
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .icon-setting-item,
.phone-frame.dark-mode .preset-item {
  border: 1px solid rgba(255, 255, 255, 0.15) !important;
  background-color: #2c2c2e !important;
}

/* ç¾¤èŠæ¨¡å¼é€‰æ‹©å¡ç‰‡æ ·å¼ */
.group-mode-card {
  /* ä½¿ç”¨ææ·¡çš„ç°è‰²èƒŒæ™¯ï¼Œè€Œä¸æ˜¯çº¯ç™½ï¼Œå½¢æˆå±‚çº§æ„Ÿ */
  background-color: #f9f9f9 !important;
  border: 1px solid rgba(0, 0, 0, 0.03) !important;
  /* å‡ ä¹çœ‹ä¸è§çš„æè¾¹ */
  border-radius: 18px !important;
  /* åœ†æ¶¦ */
  padding: 18px !important;

  display: flex;
  align-items: center;
  gap: 16px;
  /* å›¾æ ‡å’Œæ–‡å­—é—´è· */

  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: none !important;
  /* å»æ‰é˜´å½±ï¼Œæ›´æ‰å¹³ */
}

.group-mode-card:active {
  background-color: #f0f0f0 !important;
  /* æŒ‰ä¸‹å˜æ·±ä¸€ç‚¹ */
  transform: scale(0.98);
}

.group-mode-card .mode-icon {
  width: 44px !important;
  height: 44px !important;
  border-radius: 12px !important;
  /* iOS å›¾æ ‡åœ†è§’ */
  display: flex;
  justify-content: center;
  align-items: center;
  flex-shrink: 0;

  /* é»˜è®¤èƒŒæ™¯è‰² (é˜²é”™) */
  background-color: rgba(0, 0, 0, 0.05);
}

/* å›¾æ ‡ SVG å¤§å° */
.group-mode-card .mode-icon svg {
  width: 24px;
  height: 24px;
}

.group-mode-card .mode-info h3 {
  margin: 0 0 5px 0;
  font-size: 16px;
  font-weight: 600;
  color: #333;
}

.group-mode-card .mode-info p {
  margin: 0;
  font-size: 12px;
  color: #888;
}

/* é€‰äººåˆ—è¡¨æ ·å¼å¾®è°ƒ */
#group-member-list .contact-item {
  padding: 10px 20px;
  background: transparent;
  box-shadow: none;
  border-bottom: 1px solid #f0f0f0;
  border-radius: 0;
}

/* ç¾¤èŠæˆå‘˜ç½‘æ ¼å¸ƒå±€ */
.group-members-grid {
  display: grid;
  grid-template-columns: repeat(5, 1fr);
  /* ä¸€è¡Œ5ä¸ª */
  gap: 15px 10px;
  /* è¡Œé—´è·15ï¼Œåˆ—é—´è·10 */
}

/* å•ä¸ªæˆå‘˜é¡¹ */
.group-member-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 5px;
  cursor: pointer;
  position: relative;
}

.member-delete-btn {
  display: none;
  /* é»˜è®¤ä¸æ˜¾ç¤º */
  position: absolute;
  top: -6px;
  right: -6px;
  width: 20px;
  height: 20px;
  background-color: rgba(255, 59, 48, 1);
  /* iOS çº¢è‰² */
  border-radius: 50%;
  color: white;
  font-size: 16px;
  line-height: 18px;
  /* å‚ç›´å±…ä¸­å¾®è°ƒ */
  text-align: center;
  cursor: pointer;
  z-index: 10;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* 3. å½“ç½‘æ ¼è¿›å…¥åˆ é™¤æ¨¡å¼æ—¶ï¼Œæ˜¾ç¤ºæŒ‰é’® */
.group-members-grid.delete-mode .member-delete-btn {
  display: block;
  animation: pop-in 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

/* 4. å®šä¹‰ä¸€ä¸ªå°å¼¹è·³åŠ¨ç”» */
@keyframes pop-in {
  0% {
    transform: scale(0);
  }

  100% {
    transform: scale(1);
  }
}

/* 5. ç®€å•çš„æŠ–åŠ¨åŠ¨ç”» (å¯é€‰ï¼Œå¢åŠ ç”ŸåŠ¨æ„Ÿ) */
.group-members-grid.delete-mode .group-member-item {
  animation: shake 0.25s infinite alternate;
}

@keyframes shake {
  0% {
    transform: rotate(-1deg);
  }

  100% {
    transform: rotate(1deg);
  }
}

/* æˆå‘˜å¤´åƒ */
.group-member-avatar {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  /* ç¨å¾®å¸¦ç‚¹åœ†è§’ï¼Œæˆ–è€…æ”¹æˆ 50% å˜åœ† */
  object-fit: cover;
  background-color: #f0f0f0;
}

/* æˆå‘˜åå­— */
.group-member-name {
  font-size: 11px;
  color: #666;
  text-align: center;
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* é‚£ä¸ªå¤§å¤§çš„åŠ å·æŒ‰é’® */
.add-member-btn-placeholder {
  width: 48px;
  height: 48px;
  border-radius: 8px;
  border: 1px dashed #ccc;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  color: #999;
  font-size: 24px;
  font-weight: 300;
}

/* === ä¿®å¤å±‚çº§é—®é¢˜ === */
/* ç¡®ä¿ä¸€çº§å¼¹çª— (ç¾¤èŠè®¾ç½®) çš„å±‚çº§æ˜¯ 1000 */
#group-info-modal {
  z-index: 1000;
}

/* ç¡®ä¿äºŒçº§å¼¹çª— (ç¼–è¾‘æˆå‘˜ã€æ–°å»ºæˆå‘˜ã€ä¿®æ”¹æˆ‘çš„åç‰‡) çš„å±‚çº§æ›´é«˜ï¼Œæ¯”å¦‚ 1100 */
#edit-member-modal,
#add-group-member-modal,
#edit-group-user-modal {
  z-index: 1100 !important;
  /* å¼ºåˆ¶è¦†ç›– */
}

/* ç²˜è´´åˆ° style æ ‡ç­¾å†… */
#group-info-modal {
  z-index: 1000 !important;
}

#edit-group-user-modal,
#edit-member-modal,
#add-group-member-modal {
  z-index: 1100 !important;
}

/* éšè—ç¾¤èŠè®¾ç½®å¼¹çª—å³ä¸Šè§’çš„å…³é—­æŒ‰é’® */
#group-info-close-btn {
  display: none !important;
}

/* === ç¾¤èŠä¸“å±æ ·å¼ === */

/* ç¾¤æ˜µç§° (æ˜¾ç¤ºåœ¨æ°”æ³¡ä¸Šæ–¹) */
.group-nickname {
  font-size: 12px;
  color: #8e8e93;
  /* æµ…ç°è‰² */
  margin-bottom: 2px;
  margin-left: 4px;
  /* AIæ˜µç§°é å·¦ä¸€ç‚¹ */
  margin-right: 4px;
  /* ç”¨æˆ·æ˜µç§°é å³ä¸€ç‚¹ */
  max-width: 150px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* è°ƒæ•´å†…å®¹åŒ…è£…å™¨ï¼Œè®©å®ƒå‚ç›´æ’åˆ— (ä¸Šï¼šæ˜µç§°ï¼Œä¸‹ï¼šæ°”æ³¡) */
.message-content-wrapper {
  display: flex;
  /* flex-direction: column;  */
  /* é»˜è®¤å·¦å¯¹é½ (AI) */
  align-items: flex-start;
}

/* ç”¨æˆ·å‘çš„æ¶ˆæ¯ï¼Œå†…å®¹åŒ…è£…å™¨é å³å¯¹é½ */
.message-content-wrapper.user {
  align-items: flex-end;
}

/* === æ–°å¢ï¼šå¤´åƒä¸æ˜µç§°å‚ç›´å †å å¸ƒå±€ === */

/* 1. å¤´åƒå®¹å™¨ï¼šåŒ…è£¹å¤´åƒå›¾ç‰‡å’Œæ˜µç§° */
.chat-avatar-container {
  display: flex;
  flex-direction: column;
  /* å‚ç›´æ’åˆ— */
  align-items: center;
  /* æ°´å¹³å±…ä¸­ */
  justify-content: flex-end;
  /* é åº•éƒ¨å¯¹é½ */
  margin: 0 8px;
  /* ä¸æ°”æ³¡ä¿æŒé—´è· */
  flex-shrink: 0;
  /* é˜²æ­¢è¢«å‹ç¼© */
  max-width: 60px;
  /* é™åˆ¶æœ€å¤§å®½åº¦ï¼Œé˜²æ­¢æ˜µç§°æ’‘å¼€å¤ªå¤§ */
  position: relative !important;
}

/* 2. æ˜µç§°æ ·å¼ (ä½äºå¤´åƒä¸‹æ–¹) */
.group-nickname {
  font-size: 10px;
  /* å­—ä½“æ›´å°æ›´ç²¾è‡´ */
  color: #8e8e93;
  /* æ¬¡çº§ç°è‰² */
  margin-top: 4px;
  /* ä¸ä¸Šæ–¹å¤´åƒçš„è·ç¦» */
  text-align: center;
  line-height: 1.2;

  /* æ–‡æœ¬æˆªæ–­å¤„ç† */
  width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 3. æ¶ˆæ¯è¡Œå¸ƒå±€å¾®è°ƒ */
.message-row {
  align-items: flex-end;
  /* ç¡®ä¿æ‰€æœ‰å…ƒç´ ï¼ˆå®¹å™¨ã€æ°”æ³¡ï¼‰åº•éƒ¨å¯¹é½ */
  margin-bottom: 15px;
}

/* 4. æ°”æ³¡åŒ…è£…å™¨å¤ä½ (ä¸éœ€è¦å‚ç›´æ’åˆ—äº†ï¼Œå› ä¸ºåå­—ç§»èµ°äº†) */
.group-message-wrapper {
  display: flex;
  /* æ¢å¤ Flex */
  flex-direction: column;
  /* ä¿æŒæ°”æ³¡å†…éƒ¨å¯èƒ½çš„å¤šå…ƒç´ å‚ç›´ */
  max-width: 70%;
  min-width: 0;
}

/* ç§»é™¤ä¹‹å‰çš„ marginï¼Œæ”¹ç”± avatar-container æ§åˆ¶é—´è· */
.group-message-wrapper.ai {
  margin-left: 0;
  align-items: flex-start;
}

.group-message-wrapper.user {
  margin-right: 0;
  align-items: flex-end;
}

/* === ä¿®å¤ç¾¤èŠç”¨æˆ·æ¶ˆæ¯å¯¹é½é—®é¢˜ === */

/* 1. ç”¨æˆ·æ¶ˆæ¯è¡Œï¼šå†…å®¹é å³å¯¹é½ */
.message-row:has(.group-message-wrapper.user) {
  justify-content: flex-end;
  /* æ•´ä¸ªè¡Œå†…å®¹é å³ */
}

/* 2. ç”¨æˆ·æ¶ˆæ¯åŒ…è£…å™¨ï¼šå†…å®¹é å³å¯¹é½ */
.group-message-wrapper.user {
  align-items: flex-end;
  /* æ°”æ³¡å†…éƒ¨å…ƒç´ é å³ */
  margin-right: 0;
  /* ç§»é™¤ä¹‹å‰çš„ margin */
  margin-left: auto;
  /* ç¡®ä¿è‡ªèº«é å³ */
}

/* 3. ç”¨æˆ·å¤´åƒå®¹å™¨ï¼šè°ƒæ•´ä½ç½® */
/* æ³¨æ„ï¼šæˆ‘ä»¬åœ¨ JS é‡Œå·²ç»é€šè¿‡ appendChild çš„é¡ºåºæŠŠå¤´åƒæ”¾åœ¨äº†å³è¾¹ï¼Œ
   ä½†ä¸ºäº†ä¿é™©èµ·è§ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ order å±æ€§æ¥æ§åˆ¶è§†è§‰é¡ºåº */
.message-row:has(.group-message-wrapper.user) .chat-avatar-container {
  order: 2;
  /* è§†è§‰ä¸Šè®©å¤´åƒåœ¨æœ€åï¼ˆæœ€å³ï¼‰ */
  margin-left: 8px;
  /* å¤´åƒå·¦ä¾§ç•™ç™½ */
  margin-right: 0;
}

.message-row:has(.group-message-wrapper.user) .group-message-wrapper {
  order: 1;
  /* è§†è§‰ä¸Šè®©æ°”æ³¡åœ¨å¤´åƒå·¦è¾¹ */
}

/* === iOS 26 é£æ ¼æŒ‰é’®ç¾åŒ– (æ–°å»ºæ­Œå• & å¯¼å…¥æ­Œæ›²) === */

.add-playlist-button,
.import-button {
  /* 1. ç»ç’ƒè´¨æ„ŸèƒŒæ™¯ */
  background-color: rgba(255, 255, 255, 0.45) !important;
  /* åŠé€æ˜ç™½ */
  backdrop-filter: blur(20px) !important;
  /* å¼ºåŠ›æ¨¡ç³Š */
  -webkit-backdrop-filter: blur(20px) !important;

  /* 2. ç²¾è‡´è¾¹æ¡†ä¸é˜´å½± */
  border: 1px solid rgba(255, 255, 255, 0.6) !important;
  /* äº®è‰²ç»†è¾¹æ¡† */
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05) !important;
  /* æŸ”å’ŒæŠ•å½± */

  /* 3. å­—ä½“ä¸å½¢çŠ¶ */
  color: #007aff !important;
  /* è‹¹æœè“ */
  font-weight: 600 !important;
  border-radius: 20px !important;
  /* èƒ¶å›Šåœ†è§’ */

  /* 4. äº¤äº’åŠ¨ç”» */
  transition: transform 0.2s, background-color 0.2s !important;

  /* 5. ç¡®ä¿å¸ƒå±€æ­£ç¡® */
  display: block;
  margin: 0 auto 20px auto;
  /* ä¿æŒå±…ä¸­å’Œé—´è· */
  width: fit-content;
  /* å®½åº¦é€‚åº”æ–‡å­—ï¼Œæˆ–è€…ä½ å¯ä»¥ä¿ç•™ width: 100% */
  min-width: 140px;
  /* ç»™ä¸ªæœ€å°å®½åº¦å¥½çœ‹ç‚¹ */
  padding: 10px 24px !important;
}

/* æ‚¬åœ/æŒ‰ä¸‹æ•ˆæœ */
.add-playlist-button:active,
.import-button:active {
  transform: scale(0.96);
  /* æŒ‰ä¸‹å¾®ç¼© */
  background-color: rgba(255, 255, 255, 0.65) !important;
  /* é¢œè‰²å˜å® */
}

/* === æ·±è‰²æ¨¡å¼é€‚é… === */
.phone-frame.dark-mode .add-playlist-button,
.phone-frame.dark-mode .import-button {
  background-color: rgba(60, 60, 60, 0.5) !important;
  /* æ·±è‰²åŠé€æ˜ */
  border: 1px solid rgba(255, 255, 255, 0.1) !important;
  color: #0a84ff !important;
  /* æ·±è‰²æ¨¡å¼ä¸‹çš„äº®è“ */
}

/* === ä¿®å¤ï¼šå®å¿ƒå›¾æ ‡ä¸“ç”¨æ ·å¼ (é˜²æ­¢å˜ç²—) === */
/* åªè¦ç»™ svg åŠ ä¸Š class="icon-filled" å°±ä¼šç”Ÿæ•ˆ */
.header-icon-button svg.icon-filled,
.header-button svg.icon-filled,
.app-icon svg.icon-filled {
  stroke: none !important;
  /* å¼ºåˆ¶å…³é—­æè¾¹ */
  stroke-width: 0 !important;
  /* å¼ºåˆ¶æè¾¹å®½åº¦ä¸º0 */
  fill: currentColor !important;
  /* å¼ºåˆ¶ä½¿ç”¨å¡«å……è‰² */
}

#music-screen,
#worldbook-screen,
#worldbook-groups-screen,
#worldbook-group-detail-screen,
#beautify-screen,
#gacha-screen,
#shop-screen,
#slacking-off-screen,
#transactions-screen,
#cart-screen,
#orders-screen,
#dating-history-screen,
#font-url-settings-screen,
#preset-management-screen,
#icon-settings-screen,
#clock-settings-screen,
#motto-settings-screen,
#appname-settings-screen,
#summary-list-screen,
#summary-detail-screen {
  /* èƒŒæ™¯æ”¹ä¸ºåŠé€æ˜ (ç¨å¾®å®ä¸€ç‚¹ï¼Œå‡å°‘é€å‡ºçš„æ‚ä¹±æ„Ÿ) */
  background-color: rgba(242, 242, 247, 0.85) !important;
  background-image: none !important;
}

/* 2. å†…å®¹å®¹å™¨ï¼šå½»åº•é€æ˜åŒ– */
/* è¿™ä¸€æ­¥æ˜¯ä¸ºäº†é˜²æ­¢é‡Œé¢çš„ div è¿˜æœ‰ç™½è‰²èƒŒæ™¯æŒ¡ä½ä¸Šé¢çš„ç»ç’ƒæ•ˆæœ */
.scrollable-list-container,
.music-content,
.settings-content,
.playlist-content,
#shop-main-content,
#gacha-main-content,
#slacking-off-main-content,
#transactions-list-container,
#dating-history-container,
#font-url-list-container,
#icon-list-container,
#preset-list-container {
  background: transparent !important;
  background-color: transparent !important;
  box-shadow: none !important;
}

#api-model {
  max-width: 100%;
  /* é™åˆ¶å®½åº¦ä¸è¶…è¿‡çˆ¶å®¹å™¨ */
  width: 100%;
  /* å¡«æ»¡å¯ç”¨ç©ºé—´ */

  /* æ–‡å­—è¿‡é•¿æ˜¾ç¤ºçœç•¥å· (å¯¹éƒ¨åˆ†æµè§ˆå™¨æœ‰æ•ˆ) */
  text-overflow: ellipsis;
  white-space: nowrap;
  overflow: hidden;
}

/* å¦‚æœæ˜¯åŸç”Ÿ select çš„ä¸‹æ‹‰é€‰é¡¹å¤ªé•¿ï¼Œè¿™æ˜¯æµè§ˆå™¨è¡Œä¸ºï¼Œ
   ä½†æˆ‘ä»¬å¯ä»¥é™åˆ¶ select æœ¬èº«ä¸æ’‘å¤§å¸ƒå±€ */
.modal-cell {
  overflow: hidden;
  /* é˜²æ­¢å•å…ƒæ ¼è¢«æ’‘å¤§ */
}

/* ========================================== */
/* === çŠ¶æ€æ /
        /* ========================================== */

.status-bar {
  /* 1. å¼ºåˆ¶ç»å¯¹å®šä½ï¼Œç¡®ä¿å®ƒæµ®èµ·æ¥ */
  position: absolute !important;
  top: 14px !important;
  /* è·ç¦»é¡¶éƒ¨è·ç¦» */
  left: 0 !important;
  width: 100% !important;
  height: 20px !important;

  /* 2. å¸ƒå±€ï¼šä¸¤ç«¯å¯¹é½ï¼Œå·¦å³ç•™è¾¹è· */
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  padding: 0 28px !important;
  /* é¿å¼€åœ†è§’ */
  box-sizing: border-box !important;

  /* 3. æ ¸å¿ƒï¼šå±‚çº§è®¾ä¸ºæœ€é«˜ï¼Œé˜²æ­¢è¢« App é®æŒ¡ */
  z-index: 99999 !important;
  pointer-events: none !important;
  /* è®©ç‚¹å‡»ç©¿é€ */

  /* 4. å­—ä½“é¢œè‰² */
  color: #000000;
  /* é»˜è®¤é»‘è‰² */
  font-size: 12px !important;
  font-weight: 600 !important;
  font-family: inherit !important;
}

.sb-left-container {
  display: flex;
  align-items: center;
  padding-left: 1px;
  /* ç¨å¾®ç¦»å·¦è¾¹æ¡†è¿œä¸€ç‚¹ */
  font-size: 14.5px;
  /* ç¨å¾®è°ƒæ•´å¤§å° */
  padding-top: 8px;
}

.sb-right-container {
  display: flex;
  align-items: center;
  gap: 6px;
  /* æ ¸å¿ƒï¼šæ§åˆ¶å³ä¾§å›¾æ ‡ä¹‹é—´çš„é—´è·ï¼Œè®©å®ƒä»¬ä¸è¦æŒ¤åœ¨ä¸€èµ· */
  padding-right: 1px;
  /* ç¨å¾®ç¦»å³è¾¹æ¡†è¿œä¸€ç‚¹ */
  padding-top: 8px;
}

/* å›¾æ ‡é€šç”¨æ ·å¼ */
.status-icon {
  display: block !important;
}

/* æ·±è‰²æ¨¡å¼é€‚é…ï¼šå¼ºåˆ¶å˜ç™½ */
.phone-frame.dark-mode .status-bar {
  color: #ffffff !important;
}

/* éšè—çŠ¶æ€æ  */
.phone-frame.hide-status-bar .status-bar {
  display: none !important;
}

/* === å…³äºæœ¬æœºé¡µé¢æ ·å¼ === */

/* 1. é¡¶éƒ¨å¤§å›¾å¡ç‰‡ */
.device-hero-card {
  width: 90%;
  height: 240px;
  /* é«˜åº¦ */
  border-radius: 20px;
  margin-bottom: 20px;
  background-image: url("https://i.postimg.cc/HkmRC516/17728ccabceb396037e09ea2f3c65db8-720.jpg");
  /* ä½ çš„å›¾ç‰‡URL */
  background-size: cover;
  background-position: center;
  position: relative;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);

  /* è®©æ–‡å­—å±…ä¸­æ˜¾ç¤º */
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  color: white;
}

/* è¿™é‡Œçš„æ–‡å­—æ ·å¼æ˜¯ç›´æ¥å†™åœ¨å›¾ç‰‡ä¸Šçš„ï¼Œå¦‚æœä½ æ¢å›¾ç‰‡è‡ªå¸¦æ–‡å­—ï¼Œå¯ä»¥æŠŠä¸‹é¢ .hero-content éšè— */
.hero-content {
  /* å¦‚æœä½ çš„èƒŒæ™¯å›¾å·²ç»æœ‰æ–‡å­—äº†ï¼Œå°±æŠŠ display æ”¹ä¸º none */
  display: none;
  flex-direction: column;
  gap: 5px;
}

/* 2. ç½‘æ ¼å¸ƒå±€å®¹å™¨ */
.device-info-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  /* ä¸¤åˆ— */
  gap: 12px;
}

/* 3. å°æ–¹å—å¡ç‰‡ */
.info-card {
  background-color: #ffffff;
  border-radius: 16px;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
}

.info-icon {
  font-size: 24px;
  margin-bottom: 5px;
}

/* 4. è¿›åº¦æ¡æ ·å¼ */
.info-progress-bar {
  width: 100%;
  height: 6px;
  background-color: #f0f0f0;
  border-radius: 3px;
  margin-bottom: 10px;
  overflow: hidden;
}

.info-progress-bar .progress {
  height: 100%;
  /* å½©è™¹æ¸å˜è‰² */
  background-color: #000000;
  border-radius: 3px;
}

/* 5. æ–‡å­—æ ·å¼ */
.info-label {
  font-size: 13px;
  color: #8e8e93;
}

.info-value {
  font-size: 16px;
  font-weight: 600;
  color: #1d1d1f;
  line-height: 1.4;
}

/* 6. é•¿æ¡åˆ—è¡¨å¡ç‰‡ (å æ®æ•´è¡Œ) */
.info-list-card {
  grid-column: 1 / -1;
  /* è·¨è¶Šä¸¤åˆ— */
  background-color: #ffffff;
  border-radius: 16px;
  padding: 5px 20px;
  /* ä¸Šä¸‹å†…è¾¹è·å°ä¸€ç‚¹ï¼Œç”± row æ’‘å¼€ */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.03);
}

/* åˆ—è¡¨è¡Œ */
.info-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  /* å‚ç›´å±…ä¸­ */
  padding: 15px 0;
  border-bottom: 1px solid #f5f5f5;
  font-size: 15px;
}

.info-row:last-child {
  border-bottom: none;
}

.info-row .label {
  color: #1d1d1f;
  font-weight: 500;
}

.info-row .value {
  color: #8e8e93;
  text-align: right;
}

/* ç‰¹æ®Šæ ·å¼ï¼šå‚ç›´æ’åˆ—çš„è¡Œ (å¦‚æ‘„åƒå¤´ä¿¡æ¯) */
.info-row.vertical {
  align-items: flex-start;
  /* é¡¶éƒ¨å¯¹é½ */
}

.info-row .value.right-align {
  text-align: right;
  line-height: 1.6;
}

/* æ ‡ç­¾æ ·å¼ (+12GB) */
.tag {
  background-color: #f2f2f7;
  padding: 2px 6px;
  border-radius: 4px;
  font-size: 12px;
  color: #1d1d1f;
  margin-left: 5px;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .info-card,
.phone-frame.dark-mode .info-list-card {
  background-color: #2c2c2e;
}

.phone-frame.dark-mode .info-label,
.phone-frame.dark-mode .info-row .value {
  color: #8e8e93;
}

.phone-frame.dark-mode .info-value,
.phone-frame.dark-mode .info-row .label {
  color: #fff;
}

.phone-frame.dark-mode .info-row {
  border-bottom-color: #38383a;
}

.phone-frame.dark-mode .tag {
  background-color: #3a3a3c;
  color: #fff;
}

/* é»˜è®¤çŠ¶æ€ï¼šå…³äºæœ¬æœºé¡µéšè— */
#about-device-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 25;
  /* æ¯”è®¾ç½®é¡µé«˜ */
  transform: translateX(20px);
  /* åˆå§‹ä½ç½®ç¨å¾®åå³ */
  transition: all 0.3s ease;
}

/* æ¿€æ´»çŠ¶æ€ */
.phone-frame.show-about-device #about-device-screen {
  opacity: 1;
  pointer-events: auto;
  transform: translateX(0);
}

/* ========================================== */
/* === ä¿®å¤ï¼šä¸ƒè¢‹å•†åŸåˆ†ç±»æ å¸é¡¶ (Sticky Fix) === */
/* ========================================== */

/* 1. é‡ç½®ä¸»å®¹å™¨çš„å†…è¾¹è· */
/* æ¢å¤é¡¶éƒ¨ç•™ç™½ï¼Œç»™é¡¶æ ç•™å‡ºç©ºé—´ï¼Œå»æ‰ä¹‹å‰çš„ margin hacks */
#shop-main-content {
  overflow-y: auto !important;
  /* ç¡®ä¿å®ƒæ˜¯æ»šåŠ¨å®¹å™¨ */
  height: 100% !important;
}

/* 2. ä¿®å¤åˆ†ç±»æ çš„å¸é™„é€»è¾‘ */
.category-tabs {
  /* å¿…é¡»æ˜¯ sticky */

  position: fixed !important;

  /* ç§»é™¤ä¹‹å‰çš„ margin hack */
  margin-top: 0px !important;

  /* å±‚çº§ï¼šè¦æ¯”ä¸‹é¢çš„å•†å“é«˜ï¼Œä½†æ¯”é¡¶æ (z-index:100)ä½ */
  z-index: 15 !important;

  padding: 20px 20px;
  /* éšè—æ»šåŠ¨æ¡ä½†å…è®¸æ°´å¹³æ»šåŠ¨ */
  overflow-x: auto !important;
  overflow-y: hidden !important;
  -webkit-overflow-scrolling: touch !important;
  scrollbar-width: none !important;
  /* Firefox */
  -ms-overflow-style: none !important;
  /* IE/Edge */
}

.category-tabs {
  display: flex !important;
  align-items: center limportant;
  padding: 0 8px !important;
  white-space: nowraplimportant;
  /*è‡ªåŠ¨å®½åº¦ï¼Œè®©å†…å®¹å†³å®šå®¹å™¨å®½åº¦*/
  width: max-content limportant;
  min-width: 100% !important;
}

/* 3. ç¡®ä¿ä¸­é—´çš„é¢æ¿å®¹å™¨ä¸é˜»æŒ¡ sticky */
#shopping-content-panel {
  overflow: visible !important;
  /* å…³é”®ï¼šä¸èƒ½æ˜¯ hidden æˆ– autoï¼Œå¦åˆ™ sticky å¤±æ•ˆ */
  height: auto !important;
}

#chat-screen {
  /* æš‚æ—¶å»æ‰æ¯›ç»ç’ƒï¼Œé˜²æ­¢åŠ¨ç”»å¡é¡¿ */
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;

  /* ä¿æŒåŠé€æ˜èƒŒæ™¯ï¼Œä¸è‡³äºå¤ªä¸‘ */
  background-color: rgba(242, 242, 247, 0.95) !important;

  /* å¼ºè¡Œå¼€å¯ GPU åŠ é€Ÿ */
  will-change: transform, opacity;
  transform: translate3d(0, 0, 0);
  /* è§¦å‘ 3D åŠ é€Ÿ */

  /* ä¼˜åŒ–è¿‡æ¸¡æ›²çº¿ */
  transition: transform 0.35s cubic-bezier(0.19, 1, 0.22, 1),
    opacity 0.35s cubic-bezier(0.19, 1, 0.22, 1);
}

/* 2. é™æ­¢çŠ¶æ€ï¼šåŠ¨ç”»ç»“æŸåï¼ŒåŠ å›æ¯›ç»ç’ƒ */
/* æ‰¾åˆ°è¿™æ®µ (å¤§çº¦åœ¨ 1680 è¡Œé™„è¿‘) */
#chat-screen.settled {
  background-color: transparent !important;
  transform: none !important;
  will-change: auto !important;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode #chat-screen {
  background-color: rgba(28, 28, 30, 0.95) !important;
}

.phone-frame.dark-mode #chat-screen.settled {
  background-color: rgba(28, 28, 30, 0.75) !important;
}

/* 4. æ–‡å­—æ’ç‰ˆ */
.group-mode-card .mode-info {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.group-mode-card .mode-info h3 {
  margin: 0;
  font-size: 16px;
  font-weight: 600;
  color: #1c1c1e;
  letter-spacing: 0.3px;
}

.group-mode-card .mode-info p {
  margin: 0;
  font-size: 13px;
  color: #8e8e93;
  /* æ¬¡çº§ç°è‰² */
  font-weight: 400;
}

/* === ä¸“å±é…è‰² (å…³é”®ç¾åŒ–ç‚¹) === */

/* æ¨¡å¼1ï¼šé€‰æ‹©è§’è‰² (è“è‰²ç³») */
#mode-select-existing .mode-icon {
  background-color: rgba(0, 122, 255, 0.1) !important;
  /* æ·¡è“èƒŒæ™¯ */
}

#mode-select-existing .mode-icon svg path {
  fill: #007aff !important;
  /* äº®è“å›¾æ ‡ */
}

/* æ¨¡å¼2ï¼šæ–°å»ºç©ºç™½ (ç»¿è‰²ç³») */
#mode-create-empty .mode-icon {
  background-color: rgba(52, 199, 89, 0.1) !important;
  /* æ·¡ç»¿èƒŒæ™¯ */
}

#mode-create-empty .mode-icon svg path {
  fill: #34c759 !important;
  /* äº®ç»¿å›¾æ ‡ */
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .group-mode-card {
  background-color: rgba(44, 44, 46, 0.5) !important;
  border-color: rgba(255, 255, 255, 0.05) !important;
}

.phone-frame.dark-mode .group-mode-card h3 {
  color: #fff !important;
}

/* === å¾®è°ƒï¼šæŠŠ 5G å›¾æ ‡å¾€ä¸Šæä¸€ç‚¹ === */
.sb-left .status-icon:last-child {
  /* translateY è´Ÿå€¼è¡¨ç¤ºå‘ä¸Šç§»åŠ¨ */
  /* ä½ å¯ä»¥æŠŠ -1.5px æ”¹æˆ -2px æˆ– -1px æ¥å¾®è°ƒé«˜åº¦ */
  transform: translateY(-0.7px);
}

/* ======================================================= */
/* === èƒ½é¡µé¢å±‚çº§æå‡è¡¥ä¸ === */
/* ======================================================= */

/* èŠå¤©ç•Œé¢çš„å±‚çº§é€šå¸¸æ˜¯ 20ï¼Œæ‰€ä»¥å­åŠŸèƒ½å¿…é¡»å¤§äº 20 */
#voice-call-screen,
/* è¯­éŸ³é€šè¯ */
#summary-list-screen,
/* é€šè¯æ‘˜è¦åˆ—è¡¨ */
#summary-detail-screen,
/* æ‘˜è¦è¯¦æƒ… */
#dating-screen,
/* çº¦ä¼šä¸»ç•Œé¢ */
#dating-setup-screen,
/* çº¦ä¼šå¼•å¯¼é¡µ */
#dating-settings-screen,
/* çº¦ä¼šè®¾ç½®é¡µ */
#dating-history-screen,
/* çº¦ä¼šè®°å½• */
#incoming-call-screen,
/* æ¥ç”µç•Œé¢ */
#vn-screen

/* è§†è§‰å°è¯´ç•Œé¢ */ {
  z-index: 50 !important;
  /* å¼ºåˆ¶ç½®é¡¶ï¼Œè¦†ç›–èŠå¤©ç•Œé¢ */
}

/* ç¡®ä¿é®ç½©å±‚ï¼ˆå¦‚è¾“å…¥æ¡†ã€é€‰æ‹©æ¡†ï¼‰æ¯”è¿™äº›é¡µé¢æ›´é«˜ */
.modal-overlay,
.voice-panel-overlay,
#image-preview-modal {
  z-index: 1000 !important;
}

/* ======================================================= */
/* === æ ¸å¿ƒä¿®å¤ï¼šå›¾æ ‡é¢„è®¾ç•Œé¢æ— æ³•æ»‘åŠ¨ & å±‚çº§é—®é¢˜ === */
/* ======================================================= */

/* 1. æš´åŠ›æå‡é¢„è®¾ç•Œé¢çš„å±‚çº§ï¼Œé˜²æ­¢è¢«å…¶ä»–é€æ˜å›¾å±‚é®æŒ¡ */
.phone-frame.show-presets #preset-management-screen {
  z-index: 60 !important;
  /* åŸæ¥æ˜¯ 3ï¼Œç°åœ¨æå‡åˆ° 60ï¼Œé«˜äºæ‰€æœ‰æ™®é€šé¡µé¢ */
  pointer-events: auto !important;
  /* å¼ºåˆ¶å¼€å¯äº¤äº’ */
}

/* 2. å¼ºåˆ¶ä¿®å¤é¢„è®¾ç•Œé¢çš„æ»šåŠ¨å®¹å™¨ */
#preset-management-screen .settings-content {
  /* ç¡®ä¿å®¹å™¨å æ»¡é«˜åº¦ï¼Œå¦åˆ™æ— æ³•äº§ç”Ÿæ»šåŠ¨æ¡ */
  height: 100% !important;

  /* å¼ºåˆ¶å¼€å¯å‚ç›´æ»šåŠ¨ */
  overflow-y: auto !important;
  overflow-x: hidden !important;

  /* ç¡®ä¿å¸ƒå±€æ¨¡å¼æ­£ç¡®ï¼Œé˜²æ­¢ flex å¸ƒå±€å¯¼è‡´æ— æ³•æ»šåŠ¨ */
  display: block !important;

  /* é¡¶éƒ¨é¿è®©åˆ˜æµ·å’Œæ ‡é¢˜æ  (ç¡®ä¿ä¸è¢«é®æŒ¡) */
  padding-top: 110px !important;
  padding-bottom: 40px !important;
  /* åº•éƒ¨ç•™ç™½ */

  box-sizing: border-box !important;
}

/* 3. ä¿®å¤å†…éƒ¨åˆ—è¡¨å®¹å™¨çš„é«˜åº¦ï¼Œè®©å®ƒç”±å†…å®¹æ’‘å¼€ */
#preset-list-container {
  height: auto !important;
  overflow: visible !important;
  /* è®©çˆ¶å®¹å™¨è´Ÿè´£æ»šåŠ¨ */
  padding-bottom: 50px;
  /* é¢å¤–åº•éƒ¨å«ç‰‡ */
}

/* --- ä¿®å¤ï¼šåŠ è½½æ›´å¤šæŒ‰é’®çš„ä¸“å±æ ·å¼ --- */
#load-more-messages-btn {
  /* 1. ç¡®ä¿å®ƒæ˜¯å—çº§è¡¨ç°ï¼Œèƒ½å¤Ÿå“åº” margin: auto å±…ä¸­ */
  display: block;

  /* 2. ä¹Ÿæ˜¯æ ¸å¿ƒï¼šç»™å®ƒè¶³å¤Ÿçš„ä¸Šä¸‹ç©ºé—´ */
  /* ä¸Šè¾¹è· 20pxï¼Œå·¦å³ auto (å®ç°æ°´å¹³å±…ä¸­)ï¼Œä¸‹è¾¹è· 20px */
  margin: 20px auto 20px auto;

  /* 3. é˜²æ­¢å®ƒå¤ªå®½æˆ–å¤ªçª„ */
  width: fit-content;

  /* 4. æå‡å±‚çº§ï¼Œç¡®ä¿ä¸è¢«æŸäº›å¥‡æ€ªçš„èƒŒæ™¯é®æŒ¡ */
  position: relative;
  z-index: 5;

  /* 5. ç®€å•çš„ç¾åŒ–ï¼Œè®©å®ƒçœ‹èµ·æ¥åƒä¸ªæŒ‰é’®è€Œä¸æ˜¯æ–‡å­— */
  background-color: rgba(0, 0, 0, 0.05);
  /* æ·¡æ·¡çš„èƒŒæ™¯ */
  color: #007aff;
  padding: 8px 16px;
  border-radius: 20px;
  font-size: 13px;
  font-weight: 500;
  border: none;
  cursor: pointer;
}

/* --- 1. ç¦ç”¨æ–‡å­—é€‰æ‹© --- */
.chat-bubble,
.message-row {
  -webkit-user-select: none;
  /* Safari */
  -moz-user-select: none;
  /* Firefox */
  -ms-user-select: none;
  /* IE10+/Edge */
  user-select: none;
  /* Standard */
}

/* --- 2. é•¿æŒ‰æ“ä½œèœå• (é»‘è‰²æ°”æ³¡) --- */
#msg-action-menu {
  position: absolute;
  z-index: 1000;
  background-color: #1f1f1f;
  border-radius: 12px;
  padding: 6px 10px;
  display: none;
  /* é»˜è®¤éšè— */
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
  pointer-events: auto !important;
  animation: menu-pop 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  flex-direction: row;
  gap: 8px;
}

#msg-action-menu::after {
  content: "";
  position: absolute;
  bottom: -6px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 6px 6px 0;
  border-style: solid;
  border-color: #1f1f1f transparent transparent transparent;
}

@keyframes menu-pop {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }

  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.action-menu-btn {
  background: none;
  border: none;
  color: white;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  font-size: 10px;
  cursor: pointer;
  padding: 0 5px;
}

/* --- 3. è¾“å…¥æ¡†ä¸Šæ–¹çš„å›å¤é¢„è§ˆæ¡ --- */
/* --- ä¿®å¤ç‰ˆï¼šè¾“å…¥æ¡†ä¸Šæ–¹çš„å›å¤é¢„è§ˆæ¡ --- */
/* --- ä¿®å¤ç‰ˆï¼šè¾“å…¥æ¡†ä¸Šæ–¹çš„å›å¤é¢„è§ˆæ¡ --- */
#reply-preview-bar {
  position: absolute;
  bottom: 93px;
  /* æ ¹æ®ä½ çš„å¸ƒå±€è°ƒæ•´ */
  left: 15px;
  right: 15px;
  /* background-color: rgba(245, 245, 245, 0.95); */
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-radius: 20px;
  padding: 10px 15px;

  /* â–¼â–¼â–¼ æ ¸å¿ƒä¿®å¤ï¼šåªä¿ç•™ display: none â–¼â–¼â–¼ */
  display: none;
  /* â–²â–²â–² åˆ æ‰äº†åŸæ¥çš„ display: flex â–²â–²â–² */

  /* Flex å¸ƒå±€å±æ€§ä¿ç•™ï¼Œç­‰ JS æŠŠå®ƒè®¾ä¸º flex æ—¶å°±ä¼šç”Ÿæ•ˆ */
  align-items: center;
  justify-content: space-between;
  gap: 10px;

  /* border-left: 4px solid #007AFF; */
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.05);
  z-index: 19;
  animation: slide-up 0.2s ease-out;
}

/* æ–°å¢ï¼šä¸“é—¨åŒ…è£¹æ–‡å­—çš„å®¹å™¨ */
.reply-text-wrapper {
  flex: 1;
  /* å æ®å‰©ä½™æ‰€æœ‰ç©ºé—´ */
  min-width: 0;
  /* ã€å…³é”®ã€‘å…è®¸ flex å­é¡¹æ”¶ç¼©åˆ°æ¯”å†…å®¹æ›´å°ï¼Œè§¦å‘çœç•¥å· */
  display: flex;
  flex-direction: column;
}

.reply-content-text {
  font-size: 13px;
  color: #666;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 100%;
  /* ç¡®ä¿å¡«æ»¡çˆ¶å®¹å™¨ */
}

.reply-close-btn {
  background: none;
  border: none;
  color: #999;
  font-size: 20px;
  padding: 5px;
  cursor: pointer;
  flex-shrink: 0;
  /* ã€å…³é”®ã€‘ç¦æ­¢æŒ‰é’®è¢«å‹ç¼© */
}

@keyframes slide-up {
  from {
    transform: translateY(10px);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* æ–°å¢ï¼šä¸“é—¨åŒ…è£¹æ–‡å­—çš„å®¹å™¨ */
.reply-text-wrapper {
  flex: 1;
  /* å æ®å‰©ä½™æ‰€æœ‰ç©ºé—´ */
  min-width: 0;
  /* ã€å…³é”®ã€‘å…è®¸ flex å­é¡¹æ”¶ç¼©åˆ°æ¯”å†…å®¹æ›´å°ï¼Œè§¦å‘çœç•¥å· */
  display: flex;
  flex-direction: column;
}

.reply-content-text {
  font-size: 13px;
  color: #666;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 100%;
  /* ç¡®ä¿å¡«æ»¡çˆ¶å®¹å™¨ */
}

.reply-close-btn {
  background: none;
  border: none;
  color: #999;
  font-size: 18px;
  padding: 5px;
  cursor: pointer;
  flex-shrink: 0;
  /* ã€å…³é”®ã€‘ç¦æ­¢æŒ‰é’®è¢«å‹ç¼© */
}

/* --- 4. æ¶ˆæ¯æ°”æ³¡å†…çš„å¼•ç”¨æ ·å¼ (Reply Quote) --- */
.reply-quote-container {
  background-color: rgba(0, 0, 0, 0.05);
  /* æ·¡æ·¡çš„èƒŒæ™¯ */
  border-radius: 8px;
  padding: 4px 8px;
  margin-bottom: 2px;
  /* border-left: 3px solid rgba(0, 0, 0, 0.2); */
  display: flex;
  flex-direction: column;
  font-size: 10px;
  cursor: pointer;
  /* å¯ç‚¹å‡»è·³è½¬ */
  
  /* ã€å…³é”®ä¿®å¤ã€‘é™åˆ¶å¼•ç”¨æ¡†çš„æœ€å¤§å®½åº¦ï¼Œé˜²æ­¢æ’‘ç ´æ°”æ³¡ */
  max-width: 240px; 
  box-sizing: border-box;
}

/* åœ¨æ·±è‰²æ¨¡å¼ä¸‹çš„é€‚é… */
.phone-frame.dark-mode .reply-quote-container {
  background-color: rgba(255, 255, 255, 0.1);
  border-left-color: rgba(255, 255, 255, 0.3);
}

.reply-quote-name {
  font-weight: 600;
  margin-bottom: 2px;
  opacity: 0.8;
}

.reply-quote-text {
  opacity: 0.7;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* --- 5. Markdown å¼•ç”¨æ ·å¼ (Blockquote) - ä¿®å¤é•¿æ–‡æœ¬æº¢å‡º --- */
blockquote {
  margin: 4px 0;
  padding-left: 10px;
  border-left: 3px solid rgba(0, 0, 0, 0.2);
  opacity: 0.8;
  font-size: 0.95em;
  /* æ ¸å¿ƒï¼šå…è®¸é•¿æ–‡æœ¬æ¢è¡Œ */
  white-space: pre-wrap; 
  word-break: break-all;
  overflow-wrap: break-word;
  max-width: 100%;
}

/* æ·±è‰²æ¨¡å¼ä¸‹çš„ Blockquote */
.phone-frame.dark-mode blockquote {
    border-left-color: rgba(255, 255, 255, 0.3);
}

/* --- èŠå¤©è®°å½•å¡ç‰‡ä¸“å±æ ·å¼ (ä¿®å¤äº¤äº’ç‰ˆ) --- */
.history-card-bubble {
  /* 1. å¼ºåˆ¶å¼€å¯é¼ æ ‡/æ‰‹æŒ‡äº¤äº’ï¼Œæ— è§†çˆ¶çº§çš„é˜»æ‹¦ */
  pointer-events: auto !important;

  /* 2. æå‡å±‚çº§ï¼Œé˜²æ­¢è¢«éšå½¢å›¾å±‚é®æŒ¡ */
  position: relative !important;
  z-index: 10 !important;

  /* åŸæœ‰æ ·å¼ä¿æŒ */
  background: white;
  border-radius: 12px;
  padding: 12px;
  width: 220px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  cursor: pointer;
  overflow: hidden;
  text-align: left;
}

/* ç»™å¡ç‰‡åŠ ä¸ªæŒ‰ä¸‹å»çš„æ•ˆæœï¼Œè®©ä½ çŸ¥é“ç‚¹æ²¡ç‚¹åˆ° */
.history-card-bubble:active {
  transform: scale(0.98);
  background-color: #f5f5f5;
}

/* 1. ä»»æ„é—¨æŒ‰é’®é¢œè‰² (é’è‰²ç³») */

/* 2. ã€æ ¸å¿ƒã€‘ä¸­é—´åŠ¨ä½œ/æ—ç™½æ¶ˆæ¯çš„æ ·å¼ */
.action-message-container {
  display: flex;
  justify-content: center;
  margin: 15px 0;
  /* ä¸Šä¸‹ç•™å‡ºè·ç¦» */
  width: 100%;
  pointer-events: none;
  /* è®©å®ƒä¸é˜»æŒ¡ç‚¹å‡» */
}

.action-message-text {
  font-size: 12px;
  color: #8e8e93;
  /* æµ…ç°è‰²æ–‡å­— */
  background-color: rgba(242, 242, 247, 0.6);
  /* ææ·¡çš„èƒŒæ™¯ */
  padding: 4px 12px;
  border-radius: 12px;
  text-align: center;
  max-width: 80%;
  /* â–¼â–¼â–¼ æ ¸å¿ƒä¿®å¤ï¼šå¿…é¡»åŠ ä¸Šè¿™ä¸€è¡Œï¼ â–¼â–¼â–¼ */
  pointer-events: auto !important;
  /* è®©æ–‡å­—éƒ¨åˆ†æ¢å¤å¯ç‚¹å‡»çŠ¶æ€ */
  cursor: pointer;
  /* åŠ ä¸Šæ‰‹å‹é¼ æ ‡ï¼Œæç¤ºå¯ç‚¹å‡» */

  /* ç¨å¾®åŠ ä¸€ç‚¹æ¨¡ç³Šæ»¤é•œï¼Œå¢åŠ é«˜çº§æ„Ÿ */
  backdrop-filter: blur(5px);
  -webkit-backdrop-filter: blur(5px);
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .action-message-text {
  color: #98989d;
  background-color: rgba(60, 60, 60, 0.4);
}

/* === èŠå¤©è®°å½•è¯¦æƒ…é¡µ å¼ºåŠ›ä¿®å¤ç‰ˆ === */

#history-detail-overlay {
  background-color: #fff !important;
  /* å¼ºåˆ¶è¦†ç›–åŸæ¥çš„é€æ˜é»‘ */
  align-items: stretch !important;
  /* è®©å†…å®¹æ‹‰ä¼¸å¡«æ»¡ */
  padding: 0 !important;
  /* ç§»é™¤å†…è¾¹è·ï¼Œç”±å†…éƒ¨å…ƒç´ æ§åˆ¶ */
  display: none;
  /* é»˜è®¤éšè— */
  flex-direction: column;
  /* å‚ç›´æ’åˆ—ï¼šé¡¶æ  + å†…å®¹ */
  z-index: 2000 !important;
  /* ä¿è¯åœ¨æœ€æœ€é¡¶å±‚ */
}

/* 2. è¯¦æƒ…é¡µé¡¶æ ï¼šæ¨¡ä»¿ iOS å¯¼èˆªæ  */
#history-detail-overlay .settings-header {
  position: relative !important;
  /* ç›¸å¯¹å®šä½ï¼Œä¸æ‚¬æµ®è¦†ç›–å†…å®¹ */
  flex-shrink: 0;
  /* é˜²æ­¢è¢«æŒ¤å‹ */
  background-color: #f5f5f7 !important;
  /* æµ…ç°åº•è‰² */
  border-bottom: 1px solid #e5e5e5;
  /* åº•éƒ¨ç»†çº¿ */
  padding-top: 50px !important;
  /* é¿å¼€åˆ˜æµ· */
  height: auto !important;
  min-height: 44px;
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
}

/* é¡¶æ æ ‡é¢˜ */
#history-detail-title {
  font-size: 17px;
  font-weight: 600;
  color: #000;
  text-align: center;
  flex: 1;
  margin: 0 10px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 3. å†…å®¹æ»šåŠ¨åŒºåŸŸ */
#history-detail-content {
  flex: 1;
  /* å æ®å‰©ä½™ç©ºé—´ */
  overflow-y: auto;
  /* å…è®¸å‚ç›´æ»šåŠ¨ */
  padding: 20px 15px !important;
  /* å†…å®¹å†…è¾¹è· */
  background-color: #f5f5f7 !important;
  /* æ•´ä½“æµ…ç°èƒŒæ™¯ */
  box-sizing: border-box;
  -webkit-overflow-scrolling: touch;
  /* iOS æ»šåŠ¨å›å¼¹ */
}

/* --- 4. å•æ¡æ¶ˆæ¯æ ·å¼ (ä»¿å¾®ä¿¡èŠå¤©è®°å½•) --- */
/* æ¶ˆæ¯è¡Œå®¹å™¨ */
.history-row {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  /* ç»Ÿä¸€é å·¦ */
  margin-bottom: 15px;
  width: 100%;
}

/* å‘è¨€äººä¿¡æ¯ (åå­— + æ—¶é—´) */
.history-meta {
  font-size: 12px;
  color: #8e8e93;
  /* æ¬¡çº§ç°è‰² */
  margin-bottom: 4px;
  padding-left: 4px;
  max-width: 80%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* æ°”æ³¡æœ¬ä½“ */
.history-bubble {
  background-color: #ffffff;
  /* çº¯ç™½æ°”æ³¡ */
  color: #1c1c1e;
  /* æ·±é»‘æ–‡å­— */
  padding: 10px 14px;
  font-size: 15px;
  line-height: 1.5;
  border-radius: 12px;
}

/* --- ä¼˜åŒ–ï¼šå¼ºåˆ¶å¼€å¯ GPU åŠ é€Ÿï¼Œè§£å†³åŠ¨ç”»å’Œæ»šåŠ¨æ‰å¸§ --- */
.phone-frame,
.screen,
.modal-content,
.chat-messages-container,
.dynamic-island,
.features-panel {
  /* å¼€å¯ 3D å˜æ¢ï¼Œå¼ºåˆ¶ GPU ä»‹å…¥ */
  transform: translate3d(0, 0, 0);
  /* å‘Šè¯‰æµè§ˆå™¨è¿™äº›å±æ€§ä¼šå˜åŒ–ï¼Œæå‰åšå¥½ä¼˜åŒ–å‡†å¤‡ */
  will-change: transform, opacity;
  /* æŸäº›è®¾å¤‡ä¸Šå¯ä»¥æå‡æ»šåŠ¨æµç•…åº¦ */
  -webkit-overflow-scrolling: touch;
}

/* é’ˆå¯¹æ¯›ç»ç’ƒå…ƒç´ çš„ç‰¹æ®Šä¼˜åŒ–ï¼Œé˜²æ­¢æ»šåŠ¨æ—¶é—ªçƒ */
.chat-header,
.chat-input-area,
.features-panel,
.glass-segment-control {
  /* è¿™æ˜¯ä¸€ä¸ªæ¸²æŸ“å±‚çº§çš„é»‘ç§‘æŠ€ï¼Œèƒ½ç¨³å®šæ··åˆæ¨¡å¼çš„æ¸²æŸ“ */
  isolation: isolate;
}

/* é’ˆå¯¹æ‰‹æœºç«¯çš„æ€§èƒ½ä¼˜åŒ– */
@media (max-width: 600px) {
  /* 1. å…³é—­å®æ—¶æ¨¡ç³Šï¼Œæå¤§æå‡æ»šåŠ¨æ€§èƒ½ */
  .messages-content,
  .music-content,
  .settings-content,
  .glass-segment-control,
  #shop-main-content,
  #gacha-main-content {
    /* åŸæ¥æ˜¯ blur(10px)ï¼Œæ”¹ä¸º none ç¦ç”¨æ¨¡ç³Š */
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  /* æ·±è‰²æ¨¡å¼ä¸‹çš„èƒŒæ™¯è¡¥å¿ */
  .phone-frame.dark-mode .messages-content,
  .phone-frame.dark-mode #shop-main-content {
    background-color: rgba(28, 28, 30, 0.98) !important;
  }
}

@media (max-width: 600px) {
  .product-card,
  .beautify-card,
  .contact-item {
    /* æ‰‹æœºç«¯ä½¿ç”¨æ›´ç®€å•çš„é˜´å½±ï¼Œå‡å°‘æ¸²æŸ“å‹åŠ› */
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05) !important;
  }
}

/* 1. å¡ç‰‡æ•´ä½“å®¹å™¨ */
.file-msg-card {
  /* å¸ƒå±€ */
  display: flex;
  align-items: center;

  /* å°ºå¯¸ - ä¸¥æ ¼ä¿ç•™ä½ è¦æ±‚çš„å°ºå¯¸ */
  min-width: 200px;
  max-width: 260px;
  padding: 12px;

  /* å¤–è§‚ - è¿™é‡Œçš„æ”¹åŠ¨æ˜¯æ ¸å¿ƒ */
  background-color: #ffffff;
  border-radius: 16px;
  /* åŠ å¤§åœ†è§’ï¼Œæ›´åœ†æ¶¦å¯çˆ± */

  /* è¾¹æ¡†ï¼šæ”¹æˆéå¸¸æ·¡çš„é¢œè‰²ï¼Œä¸å†ç”¨é»‘è‰²åŠé€æ˜ï¼Œæ”¹ç”¨å†·ç°è‰² */
  border: 1px solid #eff1f5;

  /* é˜´å½±ï¼šä¸å†ç”¨é»‘è‰²ï¼ä½¿ç”¨ä½é¥±å’Œåº¦çš„è“ç°è‰²é˜´å½±ï¼Œå»é™¤â€œè„â€çš„æ„Ÿè§‰ */
  /* å‚æ•°ï¼šæ°´å¹³0 å‚ç›´4 æ¨¡ç³Š16 é¢œè‰² */
  box-shadow: 0 4px 16px rgba(100, 116, 139, 0.08);

  /* äº¤äº’ - å»æ‰äº† Hoverï¼Œåªä¿ç•™ç‚¹å‡»åŠ¨æ•ˆçš„è¿‡æ¸¡ */
  cursor: pointer;
  transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1), background-color 0.2s;
  position: relative;
  overflow: hidden;
  /* ä¿è¯å†…éƒ¨å…ƒç´ ä¸æº¢å‡ºåœ†è§’ */
}

/* åˆ é™¤äº† :hover æ ·å¼ï¼Œåªä¿ç•™ç‚¹å‡»æ•ˆæœ */
.file-msg-card:active {
  transform: scale(0.96);
  /* æŒ‰å‹æ„Ÿæ˜æ˜¾ä¸€ç‚¹ */
  background-color: #f8fafc;
  /* å¾®å¾®å˜ç° */
}

/* 2. å·¦ä¾§å›¾æ ‡åŒºåŸŸ */
.file-card-icon {
  width: 44px;
  height: 44px;
  border-radius: 10px;
  /* ç¨å¾®åœ†æ¶¦ä¸€ç‚¹ */

  /* é…è‰²æ ¸å¿ƒï¼šé»˜è®¤ç»™ä¸€ä¸ªæŸ”å’Œçš„æ¸å˜ï¼Œè§£å†³â€œå¤ªç´ â€çš„é—®é¢˜ */
  /* å¦‚æœ JS ä¼šè¦†ç›–è¿™ä¸ªèƒŒæ™¯è‰²ï¼Œå»ºè®®åœ¨ JS é‡Œä¹Ÿç”¨æ¸å˜ï¼Œæˆ–è€…ä¿ç•™è¿™ä¸ªä½œä¸ºåº•è‰² */
  background: linear-gradient(135deg, #e2e8f0 0%, #cbd5e1 100%);

  /* ç»™æ–‡å­—åŠ ä¸€ç‚¹é˜´å½±ï¼Œé˜²æº¢å‡º */
  display: flex;
  justify-content: center;
  align-items: center;
  margin-right: 12px;

  /* å­—ä½“æ ·å¼ */
  font-size: 11px;
  font-weight: 700;
  color: #475569;
  /* æ–‡å­—ä¸è¦çº¯ç™½ï¼Œç”¨æ·±ç°æ˜¾å¾—æ›´èåˆï¼Œé™¤éèƒŒæ™¯å¾ˆæ·± */
  letter-spacing: 0.5px;
  flex-shrink: 0;
}

/* 4. æ–‡ä»¶å */
.file-card-name {
  font-size: 15px;
  font-weight: 600;
  /* åŠ ç²—ä¸€ç‚¹ç‚¹ï¼Œæå‡è´¨æ„Ÿ */

  /* ä½¿ç”¨æ·±è“ç°è‰²ï¼Œæ¯”çº¯é»‘æ›´æœ‰é«˜çº§æ„Ÿ */
  color: #334155;

  margin-bottom: 3px;
  line-height: 1.3;

  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* 5. æ–‡ä»¶å¤§å° */
.file-card-size {
  font-size: 12px;
  /* ä½¿ç”¨å†·è°ƒç°è‰²ï¼Œçœ‹èµ·æ¥ä¸è„ */
  color: #94a3b8;
  font-weight: 400;
}

.file-card-icon {
  /* ...ä¹‹å‰çš„ä»£ç ... */
  /* æ–‡å­—é˜´å½±ï¼šç»™ç™½è‰²æ–‡å­—åŠ ä¸€ç‚¹ç‚¹æµ…æµ…çš„é˜´å½±ï¼Œå¢åŠ ç«‹ä½“æ„Ÿ */
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.5);
}

/* === ä¸ƒæµª APP ä¸“å±æ ·å¼ === */

/* 1. ç€‘å¸ƒæµå¸ƒå±€æ ¸å¿ƒ */
.qilang-waterfall {
  column-count: 2;
  /* åŒåˆ—å¸ƒå±€ */
  column-gap: 12px;
  /* åˆ—é—´è· */
  padding: 0 10px;
  box-sizing: border-box;
}

/* 2. å¸–å­å¡ç‰‡æ ·å¼ */
/* æ‰¾åˆ° .qilang-cardï¼Œæ›´æ–°ä¸ºä»¥ä¸‹ä»£ç  */
.qilang-card {
  /* --- åŸæœ‰å±æ€§ä¿æŒä¸å˜ --- */
  break-inside: avoid;
  -webkit-column-break-inside: avoid;
  background-color: #fff;
  border-radius: 8px;
  padding: 12px;
  /* æŠŠåŸæ¥çš„ 15px æ”¹å°ä¸€ç‚¹ï¼Œç»™æ–‡å­—è…¾å‡ºæ›´å¤šç©ºé—´ */
  margin-bottom: 12px;
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 80px;
  /* å‡å°å†…éƒ¨å…ƒç´ é—´è·ï¼Œè®©å¡ç‰‡æ›´ç´§å‡‘ */

  /* --- â–¼â–¼â–¼ æ ¸å¿ƒä¿®å¤ä»£ç  â–¼â–¼â–¼ --- */
  box-sizing: border-box;
  /* ç¡®ä¿å†…è¾¹è·ä¸æ’‘å¤§å®½åº¦ */
  width: 100%;
  /* å¼ºåˆ¶å æ»¡åˆ—å®½ */
  overflow: hidden;
  /* æº¢å‡ºéƒ¨åˆ†ç›´æ¥åˆ‡æ‰ï¼Œé˜²æ­¢ç ´åå¸ƒå±€ */
  word-break: break-all;
  /* ã€å…³é”®ã€‘å¼ºåˆ¶æ‰“æ–­é•¿å•è¯/é•¿ç¬¦å·ï¼Œé˜²æ­¢#æ ‡ç­¾æ’‘ç ´å¡ç‰‡ */
  /* --- â–²â–²â–² ä¿®å¤ç»“æŸ â–²â–²â–² --- */

  cursor: pointer;
  transition: transform 0.2s ease;
}

.qilang-card:active {
  transform: scale(0.98);
}

/* å¤§å­—æ ‡é¢˜ */
/* æ‰¾åˆ° .q-card-titleï¼Œæ›´æ–°ä¸ºä»¥ä¸‹ä»£ç  */
.q-card-title {
  /* --- â–¼â–¼â–¼ æ ¸å¿ƒä¿®å¤ä»£ç  â–¼â–¼â–¼ --- */
  font-size: 22px;
  /* ä» 20px æ”¹ä¸º 15pxï¼ŒåŒåˆ—å¸ƒå±€æ›´ç²¾è‡´ */
  line-height: 1.4;
  /* å¢åŠ è¡Œé«˜ï¼Œæ–‡å­—å‘¼å¸æ„Ÿæ›´å¼º */
  font-weight: 700;
  /* ä¿æŒåŠ ç²— */
  /* --- â–²â–²â–² ä¿®å¤ç»“æŸ â–²â–²â–² --- */

  color: #000;
  margin-bottom: 4px;

  /* ä¿æŒåŸæ¥çš„çœç•¥å·é€»è¾‘ */
  display: -webkit-box;
  line-clamp: 3;
  -webkit-line-clamp: 3;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* å¡ç‰‡åº•éƒ¨ä¿¡æ¯ */
.q-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 11px;
  color: #8e8e93;
  margin-top: 5px;
}

/* é¢„è§ˆæ­£æ–‡ (å­—ä½“å°ä¸€ç‚¹ï¼Œç°ä¸€ç‚¹) */
.q-card-preview {
  font-size: 13px;
  color: #666;
  margin-bottom: 8px;

  /* é™åˆ¶æ˜¾ç¤º 2 è¡Œ */
  display: none;
  line-clamp: 2;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

/* åº•éƒ¨æ ç¾åŒ– */
.q-card-footer {
  margin-top: auto;
  /* æ¨åˆ°åº•éƒ¨ */
  padding-top: 8px;
  border-top: 1px dashed #eee;
  /* åŠ ä¸ªè™šçº¿æ›´æœ‰è®¾è®¡æ„Ÿ */
}

/* 3. ä¾§è¾¹æ æ ·å¼ */
.qilang-sidebar {
  position: absolute;
  top: 0;
  left: 0;
  width: 260px;
  /* ä¾§è¾¹æ å®½åº¦ */
  height: 100%;
  background-color: #f2f2f7;
  /* iOS é£æ ¼èƒŒæ™¯ */
  z-index: 200;
  /* é«˜äºå†…å®¹ */
  transform: translateX(-100%);
  /* é»˜è®¤éšè—åœ¨å·¦ä¾§ */
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 2px 0 15px rgba(0, 0, 0, 0.1);
  display: flex;
  flex-direction: column;
}

.qilang-sidebar.active {
  transform: translateX(0);
  /* æ»‘å‡º */
}

/* ä¾§è¾¹æ é®ç½© */
.qilang-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.3);
  z-index: 199;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
  backdrop-filter: blur(2px);
}

.qilang-overlay.active {
  opacity: 1;
  pointer-events: auto;
}

.sidebar-header {
  padding: 60px 20px 20px;
  font-size: 24px;
  font-weight: bold;
  color: #1c1c1e;
}

.sidebar-menu {
  flex-grow: 1;
  padding: 10px;
}

.sidebar-item {
  padding: 15px 20px;
  margin-bottom: 8px;
  border-radius: 12px;
  font-size: 16px;
  color: #333;
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: 12px;
  transition: background-color 0.2s;
}

.sidebar-item:active {
  background-color: rgba(0, 0, 0, 0.05);
}

.sidebar-icon {
  font-size: 20px;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .qilang-card {
  background-color: #2c2c2e;
  border-color: rgba(255, 255, 255, 0.05);
}

.phone-frame.dark-mode .q-card-title {
  color: #fff;
}

.phone-frame.dark-mode .qilang-sidebar {
  background-color: #1c1c1e;
}

.phone-frame.dark-mode .sidebar-header,
.phone-frame.dark-mode .sidebar-item {
  color: #fff;
}

/* === ä¸ƒæµª App çš„æ˜¾ç¤º/éšè—åŠ¨ç”»æ§åˆ¶ === */
#qilang-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  display: flex;
  flex-direction: column;
  background-color: #f2f2f7;
  /* é»˜è®¤æµ…ç°èƒŒæ™¯ */
}

/* å½“ phone-frame æ‹¥æœ‰ .show-qilang ç±»åæ—¶ */
.phone-frame.show-qilang #home-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
}

.phone-frame.show-qilang #qilang-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 20;
  /* ç¡®ä¿å±‚çº§è¶³å¤Ÿé«˜ */
}

/* === ä¸ƒæµª è¯¦æƒ…é¡µ & å‘å¸–å¼¹çª—æ ·å¼ === */

/* 1. å­é¡µé¢å®¹å™¨ (è¯¦æƒ…é¡µ) */
.qilang-sub-screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #fff;
  z-index: 210;
  /* æ¯”ä¾§è¾¹æ è¿˜è¦é«˜ */
  transform: translateX(100%);
  /* é»˜è®¤åœ¨å³ä¾§å±å¹•å¤– */
  transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
  display: flex;
  flex-direction: column;
}

.qilang-sub-screen.active {
  transform: translateX(0);
  /* æ»‘å…¥å±å¹• */
}

/* 2. è¯¦æƒ…é¡µå†…å®¹ */
.q-detail-main {
  padding: 20px;
  border-bottom: 2px solid #f2f2f7;
}

.q-detail-author-row {
  display: flex;
  align-items: center;
  margin-bottom: 15px;
}

.q-avatar-placeholder {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  margin-right: 10px;
}

.q-author-info {
  flex-grow: 1;
}

.q-name {
  font-weight: 600;
  font-size: 13px;
}

.q-time {
  font-size: 12px;
  color: #999;
}

.q-follow-btn {
  padding: 4px 12px;
  border: 1px solid #5e5ce6;
  color: #5e5ce6;
  border-radius: 14px;
  background: none;
  font-size: 12px;
  font-weight: 600;
}

.q-detail-title {
  font-size: 20px;
  font-weight: 700;
  margin-bottom: 10px;
  line-height: 1.4;
}

.q-detail-body {
  font-size: 16px;
  line-height: 1.8;
  color: #333;
  margin-bottom: 20px;
  white-space: pre-wrap;
  /* å…è®¸æ¢è¡Œ */
}

.q-detail-tags {
  color: #5e5ce6;
  font-size: 14px;
}

/* 3. è¯„è®ºåŒº */
.q-comments-header {
  padding: 15px 20px;
  font-weight: 600;
  color: #666;
  font-size: 14px;
}

.q-comment-user {
  font-weight: 600;
  font-size: 13px;
  color: #444;
}

.q-comment-text {
  font-size: 14px;
  color: #333;
}

.q-comment-actions {
  margin-top: 6px;
  font-size: 11px;
  color: #999;
  display: flex;
  gap: 15px;
}

/* 4. åº•éƒ¨è¯„è®ºæ  */
.q-detail-footer {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 50px;
  background: #fff;
  border-top: 1px solid #eee;
  display: flex;
  align-items: center;
  padding: 0 15px;
  box-sizing: border-box;
}

#q-detail-input {
  flex-grow: 1;
  background: #f2f2f7;
  border: none;
  padding: 8px 15px;
  border-radius: 20px;
  margin-right: 10px;
  outline: none;
}

#q-detail-send-btn {
  color: #5e5ce6;
  font-weight: 600;
  background: none;
  border: none;
}

/* 5. å‘å¸–å¼¹çª— */
.qilang-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  z-index: 220;
  display: none;
  /* é»˜è®¤éšè— */
  align-items: flex-end;
  /* åº•éƒ¨å¯¹é½ */
}

.qilang-modal-overlay.active {
  display: flex;
}

.qilang-modal-content {
  width: 100%;
  height: 90%;
  /* å å±å¹•90%é«˜åº¦ */
  background: #fff;
  border-radius: 20px 20px 0 0;
  display: flex;
  flex-direction: column;
  animation: slideUp 0.3s ease-out;
}

@keyframes slideUp {
  from {
    transform: translateY(100%);
  }

  to {
    transform: translateY(0);
  }
}

.qilang-modal-header {
  padding: 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 1px solid #f0f0f0;
}

.qilang-modal-header h3 {
  margin: 0;
  font-size: 16px;
}

.qilang-modal-header button {
  background: none;
  border: none;
  font-size: 15px;
  color: #666;
}

.qilang-modal-header .primary-btn {
  background: #5e5ce6;
  color: white;
  padding: 6px 15px;
  border-radius: 20px;
  font-weight: 600;
}

.qilang-modal-body {
  padding: 20px;
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.q-input-title {
  font-size: 18px;
  font-weight: bold;
  border: none;
  outline: none;
  width: 100%;
}

.q-input-body {
  flex-grow: 1;
  border: none;
  outline: none;
  font-size: 15px;
  resize: none;
  font-family: inherit;
}

.q-input-tags-row {
  display: flex;
  align-items: center;
  border-top: 1px solid #f0f0f0;
  padding-top: 15px;
}

.q-tag-icon {
  margin-right: 5px;
  color: #5e5ce6;
  font-weight: bold;
}

#qilang-post-tags-input {
  border: none;
  outline: none;
  flex-grow: 1;
  color: #5e5ce6;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .qilang-sub-screen,
.phone-frame.dark-mode .qilang-modal-content,
.phone-frame.dark-mode .q-detail-footer {
  background-color: #1c1c1e;
}

.phone-frame.dark-mode .q-detail-title,
.phone-frame.dark-mode .q-detail-body,
.phone-frame.dark-mode .q-comment-text,
.phone-frame.dark-mode .qilang-modal-header h3,
.phone-frame.dark-mode .q-input-title,
.phone-frame.dark-mode .q-input-body {
  color: #fff;
}

.phone-frame.dark-mode .q-detail-main {
  border-bottom-color: #2c2c2e;
}

.phone-frame.dark-mode #q-detail-input {
  background-color: #2c2c2e;
  color: #fff;
}

.phone-frame.dark-mode .qilang-modal-header {
  border-bottom-color: #2c2c2e;
}

/* === ä¿®å¤ï¼šä¸ƒæµªå†…å®¹åŒºåŸŸæ»šåŠ¨ === */
#qilang-content {
  /* 1. å¼ºåˆ¶å æ»¡å‰©ä½™ç©ºé—´ */
  height: 100% !important;

  /* 2. å…è®¸å‚ç›´æ»šåŠ¨ */
  overflow-y: auto !important;

  /* 3. ç¡®ä¿å†…è¾¹è·ä¸æ’‘å¤§ç›’å­ï¼Œå¯¼è‡´è®¡ç®—é”™è¯¯ */
  box-sizing: border-box !important;

  /* 4. å¢åŠ åº•éƒ¨ç•™ç™½ï¼Œé˜²æ­¢æœ€åä¸€å¼ å¡ç‰‡è¢«åº•éƒ¨æ“ä½œæ æŒ¡ä½ */
  padding-bottom: 120px !important;

  /* 5. iOS é¡ºæ»‘æ»šåŠ¨æ”¯æŒ */
  -webkit-overflow-scrolling: touch;
}

/* === è¯„è®ºå¼¹å‡ºåŠ¨ç”» === */
@keyframes commentPop {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }

  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.q-comment-item.pop-in {
  animation: commentPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
}

/* è°ƒæ•´å›¾æ ‡å¯¹é½ */
.q-card-footer svg {
  display: block;
  /* æ¶ˆé™¤å›¾ç‰‡åº•éƒ¨é—´éš™ */
}

/* --- ä¿®å¤ä¸ƒæµªè¯¦æƒ…é¡µæ»šåŠ¨é—®é¢˜ --- */
#qilang-detail-view .settings-content {
  /* 1. è®©å†…å®¹åŒºåŸŸå æ®é™¤å»é¡¶æ å’Œåº•æ åçš„æ‰€æœ‰å‰©ä½™ç©ºé—´ */
  flex-grow: 1;

  /* 2. å…³é”®ï¼šFlexå­é¡¹åœ¨ä¸»è½´æ–¹å‘è‹¥è¦æ»šåŠ¨ï¼Œé€šå¸¸éœ€è¦è®¾ç½®åŸºå‡†é«˜åº¦ä¸º0æˆ–auto */
  height: 0;

  /* 3. å…è®¸å‚ç›´æ–¹å‘æ»šåŠ¨ */
  overflow-y: auto;

  /* 4. ä¼˜åŒ–ï¼šå¢åŠ iOSçš„æƒ¯æ€§æ»šåŠ¨æ•ˆæœï¼Œæ‰‹æ„Ÿæ›´é¡ºæ»‘ */
  -webkit-overflow-scrolling: touch;
}

/* === ä¸ƒæµªè¯¦æƒ…é¡µèœå• === */
.q-action-menu {
  position: absolute;
  top: 60px;
  right: 15px;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  width: 140px;
  z-index: 220;
  overflow: hidden;
  animation: menuFadeIn 0.2s ease-out;
}

@keyframes menuFadeIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }

  to {
    opacity: 1;
    transform: scale(1);
  }
}

.q-menu-item {
  padding: 12px 15px;
  display: flex;
  align-items: center;
  gap: 10px;
  font-size: 14px;
  color: #333;
  cursor: pointer;
  transition: background-color 0.2s;
}

.q-menu-item:active {
  background-color: #f5f5f5;
}

.q-menu-item.delete {
  color: #ff3b30;
  border-top: 1px solid #f0f0f0;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .q-action-menu {
  background-color: #2c2c2e;
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.phone-frame.dark-mode .q-menu-item {
  color: #fff;
}

.phone-frame.dark-mode .q-menu-item.delete {
  border-top-color: rgba(255, 255, 255, 0.1);
}

/* === ä¸ƒæµªä¾§è¾¹æ èº«ä»½é€‰æ‹© === */
.sidebar-identity-section {
  padding: 0 20px 20px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  margin-bottom: 10px;
}

.sidebar-section-title {
  font-size: 12px;
  color: #8e8e93;
  margin-bottom: 10px;
}

.sidebar-identity-list {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  /* å…è®¸æ¨ªå‘æ»šåŠ¨ */
  padding-bottom: 5px;
  /* éšè—æ»šåŠ¨æ¡ */
  scrollbar-width: none;
}

.sidebar-identity-list::-webkit-scrollbar {
  display: none;
}

.q-identity-avatar {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  border: 2px solid transparent;
  /* é»˜è®¤æ— è¾¹æ¡† */
  cursor: pointer;
  flex-shrink: 0;
  background-size: cover;
  background-position: center;
  transition: all 0.2s;
  position: relative;
}

/* é€‰ä¸­çŠ¶æ€ï¼šåŠ ä¸ªè“åœˆ */
.q-identity-avatar.active {
  border-color: #5e5ce6;
  transform: scale(1.1);
  box-shadow: 0 4px 10px rgba(94, 92, 230, 0.3);
}

/* === ç°ä»£åŒ–è¯„è®ºåŒºæ ·å¼ (Modern App Style) === */

/* 1. è¯„è®ºåˆ—è¡¨å®¹å™¨ */
#q-comments-list {
  padding-bottom: 20px;
}

/* 2. å•æ¡è¯„è®ºå®¹å™¨ (Flexå¸ƒå±€) */
.q-comment-item {
  display: flex;
  gap: 12px;
  /* å¤´åƒä¸å†…å®¹çš„é—´è· */

  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  /* ææ·¡çš„åˆ†å‰²çº¿ */

  /* åŠ¨ç”»åˆå§‹çŠ¶æ€ï¼šé€æ˜ä¸”ç¨å¾®å‘ä¸‹åç§» */
  opacity: 0;
  transform: translateY(15px);
  transition: opacity 0.4s ease, transform 0.4s ease;
}

/* 3. åŠ¨ç”»æ¿€æ´»çŠ¶æ€ */
.q-comment-item.visible {
  opacity: 1;
  transform: translateY(0);
}

/* 4. å¤´åƒæ ·å¼ */
.q-comment-avatar-img {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  flex-shrink: 0;
  background-size: cover;
  background-position: center;
  background-color: #f0f0f0;
}

/* 5. å³ä¾§å†…å®¹åŒºåŸŸ */
.q-comment-main {
  flex-grow: 1;
  min-width: 0;
  /* é˜²æ­¢å†…å®¹æ’‘å¼€ */
}

/* ç”¨æˆ·åè¡Œ */
.q-comment-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 4px;
}

.q-comment-user {
  font-size: 14px;
  font-weight: 600;
  color: #666;
  /* æ¬¡çº§ç°ï¼Œä¸æŠ¢çœ¼ */
}

/* è¯„è®ºæ­£æ–‡ */
.q-comment-text {
  font-size: 15px;
  color: #333;
  /* ä¸»è‰²æ·±é»‘ */
  line-height: 1.6;
  margin-bottom: 8px;
  word-break: break-word;
  /* é˜²æ­¢é•¿ä¸²å­—ç¬¦ç ´åå¸ƒå±€ */
}

/* åº•éƒ¨æ“ä½œæ  (æ—¶é—´ã€å›å¤æŒ‰é’®) */
.q-comment-footer {
  display: flex;
  align-items: center;
  gap: 15px;
  font-size: 12px;
  color: #999;
}

.q-reply-trigger {
  font-weight: 500;
  cursor: pointer;
  color: #5e5ce6;
  /* ä½ çš„ä¸»é¢˜è‰² */
}

/* === å­è¯„è®º/æ¥¼ä¸­æ¥¼ æ ·å¼ (ç°è‰²èƒŒæ™¯å—) === */
.q-sub-comments-box {
  margin-top: 10px;
  background-color: #f7f7f9;
  /* æµ…ç°èƒŒæ™¯ */
  border-radius: 8px;
  padding: 10px 12px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* å­è¯„è®ºå•è¡Œ */
.q-sub-item {
  font-size: 14px;
  line-height: 1.5;
  color: #333;
}

.q-sub-user {
  font-weight: 600;
  color: #666;
  margin-right: 4px;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .q-comment-user {
  color: #aaa;
}

.phone-frame.dark-mode .q-comment-text {
  color: #eee;
}

.phone-frame.dark-mode .q-sub-comments-box {
  background-color: #2c2c2e;
}

.phone-frame.dark-mode .q-sub-user {
  color: #aaa;
}

.phone-frame.dark-mode .q-sub-item {
  color: #ddd;
}

/* === ç°ä»£åŒ–è¯„è®ºåŒºæ ·å¼ (ä¼˜åŒ–ç‰ˆ) === */

/* 1. å•æ¡ä¸»è¯„è®ºå®¹å™¨ */
.q-comment-item {
  display: flex;
  gap: 12px;
  /* å¤´åƒä¸å³ä¾§å†…å®¹çš„é—´è· */
  padding: 18px 0;
  /* ä¸Šä¸‹é—´è·å¢åŠ ï¼Œè§£å†³æ‹¥æŒ¤ */
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  /* ææ·¡åˆ†å‰²çº¿ */

  /* åŠ¨ç”»åˆå§‹çŠ¶æ€ */
  opacity: 0;
  transform: translateY(10px);
  transition: all 0.3s ease-out;
}

.q-comment-item.visible {
  opacity: 1;
  transform: translateY(0);
}

/* 2. å¤´åƒ */
.q-comment-avatar-img {
  width: 40px;
  /* ç¨å¾®åŠ å¤§å¤´åƒ */
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  flex-shrink: 0;
  /* é˜²æ­¢å¤´åƒè¢«æŒ¤æ‰ */
  background-color: #f0f0f0;
}

/* 3. å³ä¾§ä¸»ä½“åŒºåŸŸ */
.q-comment-main {
  flex-grow: 1;
  min-width: 0;
}

/* ç”¨æˆ·åè¡Œ */
.q-comment-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 6px;
}

.q-comment-user {
  font-size: 15px;
  font-weight: 600;
  color: #333;
  /* æ·±è‰² */
}

/* è¯„è®ºå†…å®¹ */
.q-comment-text {
  font-size: 15px;
  color: #444;
  line-height: 1.6;
  /* å¢åŠ è¡Œé«˜ï¼Œæå‡å¯è¯»æ€§ */
  margin-bottom: 10px;
}

/* åº•éƒ¨æ“ä½œæ  */
.q-comment-footer {
  display: flex;
  align-items: center;
  gap: 20px;
  /* æ‹‰å¼€æ—¶é—´ä¸å›å¤æŒ‰é’®çš„è·ç¦» */
  font-size: 12px;
  color: #999;
}

.q-reply-trigger {
  font-weight: 500;
  cursor: pointer;
  color: #5e5ce6;
  /* ä¸»é¢˜è‰² */
  padding: 2px 8px;
  /* å¢åŠ ç‚¹å‡»åŒºåŸŸ */
}

/* === å…³é”®ï¼šæ¥¼ä¸­æ¥¼ (ç°è‰²èƒŒæ™¯å—) === */
.q-sub-comments-box {
  margin-top: 10px;
  background-color: #f7f7f9;
  /* æµ…ç°èƒŒæ™¯ */
  border-radius: 8px;
  padding: 12px;
  /* å†…è¾¹è· */
  display: flex;
  flex-direction: column;
  gap: 8px;
  /* å­è¯„è®ºä¹‹é—´çš„é—´è· */
}

/* å­è¯„è®ºå•è¡Œ */
.q-sub-item {
  font-size: 14px;
  line-height: 1.5;
  color: #333;
}

.q-sub-user {
  font-weight: 600;
  color: #333;
  margin-right: 4px;
}

/* === ä¿®å¤ï¼šä¸ƒæµªè¯¦æƒ…é¡µå¸ƒå±€é—®é¢˜ === */

/* 1. å¼ºåˆ¶è¦†ç›–å…¨å±€çš„å±…ä¸­è®¾ç½®ï¼Œæ”¹ä¸ºæ‹‰ä¼¸å¡«æ»¡ */
#qilang-detail-view .settings-content {
  align-items: stretch !important;
  /* å…³é”®ï¼šè®©å­å…ƒç´ å®½åº¦è‡ªåŠ¨æ’‘æ»¡ */
  text-align: left !important;
  /* å…³é”®ï¼šæ–‡å­—å·¦å¯¹é½ */
  width: 100% !important;
}

/* 2. ä¼˜åŒ–è¯¦æƒ…é¡µä¸»ä½“å®¹å™¨ */
.q-detail-main {
  width: 100%;
  box-sizing: border-box;
  /* ç¡®ä¿å†…è¾¹è·ä¸æ’‘çˆ†å®½åº¦ */
  padding: 20px;
  background-color: #fff;
  margin-bottom: 10px;
}

/* 3. ä¼˜åŒ–æ ‡é¢˜å’Œæ­£æ–‡çš„æ˜¾ç¤º */
.q-detail-title {
  text-align: left;
  width: 100%;
  display: block;
}

.q-detail-body {
  text-align: justify;
  /* ä¸¤ç«¯å¯¹é½ï¼Œé˜…è¯»ä½“éªŒæ›´å¥½ */
  width: 100%;
  white-space: pre-wrap;
  /* ä¿ç•™æ¢è¡Œ */
}

/* === æ–°å¢ï¼šå­è¯„è®ºå›å¤æŒ‰é’®æ ·å¼ === */
.q-sub-item {
  position: relative;
  /* ä¸ºç»å¯¹å®šä½åšå‡†å¤‡ */
  padding-right: 40px;
  /* å³ä¾§ç•™å‡ºç©ºé—´ç»™æŒ‰é’® */
}

/* å°å›å¤æŒ‰é’® */
.q-sub-reply-btn {
  font-size: 12px;
  color: #5e5ce6;
  cursor: pointer;
  margin-left: 8px;
  font-weight: 500;
  opacity: 0.8;
}

.q-sub-reply-btn:active {
  opacity: 0.5;
}

/* ========================================= */
/* === ğŸš§ æ–½å·¥ä¸­ï¼šæš‚æ—¶ç¦ç”¨åº•éƒ¨æŠ½å±‰æŒ‰é’® === */
/* ========================================= */

#open-drawer-btn {
  /* 1. æ ¸å¿ƒï¼šç¦æ­¢ä¸€åˆ‡é¼ æ ‡å’Œæ‰‹æŒ‡çš„äº¤äº’ */
  pointer-events: none !important;

  /* 2. è§†è§‰ï¼šæŠŠé€æ˜åº¦é™ä½ï¼Œè®©å®ƒçœ‹èµ·æ¥åƒæ˜¯â€œç¦ç”¨â€çŠ¶æ€ */
  opacity: 0.3 !important;

  /* 3. (å¯é€‰) å˜æˆé»‘ç™½ï¼Œå¢åŠ ä¸€ç§â€œä¸å¯ç”¨â€çš„æ„Ÿè§‰ */
  filter: grayscale(100%) !important;
}

/* ========================================= */
/* === â° æ¶ˆæ¯æ—¶é—´æˆ³æ ·å¼ === */
/* ========================================= */

/* ========================================= */
/* === â° æ—¶é—´æˆ³å¸ƒå±€ç»ˆæä¿®å¤ç‰ˆ === */
/* ========================================= */

/* 1. å®¹å™¨æ ¸å¿ƒå¸ƒå±€ï¼šæ¨ªå‘æ’åˆ— + åº•éƒ¨å¯¹é½ */
.message-content-wrapper {
  display: flex !important;

  /* å¼ºåˆ¶æ¨ªå‘æ’åˆ— (å·¦å³ç»“æ„)ï¼Œæ‹’ç»ä¸Šä¸‹ç»“æ„ */
  flex-direction: row !important;

  /* è®©æ‰€æœ‰å…ƒç´ ï¼ˆå¤´åƒã€æ°”æ³¡ã€æ—¶é—´ï¼‰éƒ½æ²‰åº•å¯¹é½ */
  align-items: flex-end !important;

  gap: 6px !important;
  /* å…ƒç´ ä¹‹é—´çš„é—´è· */
  margin-bottom: 10px !important;
  /* è¡Œä¸è¡Œä¹‹é—´çš„é—´è· */
}

/* 2. ç”¨æˆ·æ¶ˆæ¯ (å³ä¾§) */
/* åˆ©ç”¨ row-reverse å®ç°ï¼š[æ—¶é—´] [æ°”æ³¡] [å¤´åƒ] çš„è§†è§‰é¡ºåº */
.message-content-wrapper.user {
  flex-direction: row-reverse !important;
}

/* 3. AI æ¶ˆæ¯ (å·¦ä¾§) */
/* ä¿æŒé»˜è®¤é¡ºåºï¼š[å¤´åƒ] [æ°”æ³¡] [æ—¶é—´] */
.message-content-wrapper.ai {
  flex-direction: row !important;
}

/* 4. æ—¶é—´æˆ³æ ·å¼ç¾åŒ– */
.message-timestamp {
  /* --- æ ¸å¿ƒï¼šç»§æ‰¿å…¨å±€å­—ä½“ --- */
  font-family: inherit !important;

  font-size: 11px !important;
  color: rgba(0, 0, 0, 0.4) !important;
  /* æµ…ç°è‰² */

  /* å¾®è°ƒé«˜åº¦ï¼Œé˜²æ­¢å’Œæ°”æ³¡åº•éƒ¨è´´å¾—å¤ªæ­» */
  margin-bottom: 2px !important;

  /* ç¦æ­¢æ—¶é—´æ¢è¡Œ */
  white-space: nowrap !important;

  /* ç¦æ­¢æ—¶é—´è¢«æŒ¤å‹å˜å½¢ */
  flex-shrink: 0 !important;
}

/* 5. æ¸…é™¤å¤´åƒè¾¹è· (ç”± gap ç»Ÿä¸€æ§åˆ¶) */
.chat-avatar {
  margin: 0 !important;
}

/* 6. æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .message-timestamp {
  color: rgba(255, 255, 255, 0.4) !important;
}

/* === æ–°ç‰ˆè¯­éŸ³æ°”æ³¡æ ·å¼ === */

/* 1. è¯­éŸ³æ¶ˆæ¯çš„æ•´ä½“å®¹å™¨ï¼šç¡®ä¿æ°”æ³¡å‚ç›´æ’åˆ— (ä¸Šè¯­éŸ³ï¼Œä¸‹æ–‡å­—) */
.voice-message-wrapper {
  display: flex;
  flex-direction: column;
  max-width: 100%;
}

/* é’ˆå¯¹ç”¨æˆ·(User)å’ŒAIçš„å¯¹é½æ–¹å¼ */
.message-content-wrapper.user .voice-message-wrapper {
  align-items: flex-end;
  /* ç”¨æˆ·é å³ */
}

.message-content-wrapper.ai .voice-message-wrapper {
  align-items: flex-start;
  /* AIé å·¦ */
}

.voice-audio-bubble {
  cursor: pointer;
  min-width: 18px;
  /* æœ€å°å®½åº¦ */
  max-width: 18px;
  position: relative;
  transition: opacity 0.2s;
}

.voice-audio-bubble:active {
  opacity: 0.8;
  /* ç‚¹å‡»åé¦ˆ */
}

/* 3. ä¸‹åŠéƒ¨åˆ†ï¼šç¿»è¯‘æ–‡æœ¬ (ç°è‰²åœ†è§’çŸ©å½¢) */
.voice-text-panel {
  margin-top: 6px;
  padding: 8px 10px;
  background-color: #ffffff;
  border-radius: 13px;
  font-size: 12px;
  color: #333;
  line-height: 1.5;
  word-break: break-word;
  /* å…è®¸é•¿æ–‡æœ¬æ¢è¡Œ */
  max-width: 240px;
  /* é™åˆ¶æœ€å¤§å®½åº¦ï¼Œé˜²æ­¢å¤ªå®½ */
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
  align-items: flex-start !important;

  /* æ ¸å¿ƒåŠ¨ç”»ï¼šé»˜è®¤éšè—ï¼Œé€šè¿‡é«˜åº¦å’Œé€æ˜åº¦åšè¿‡æ¸¡ */
  /* --- ä¿®å¤ï¼šé»˜è®¤ä¸éšè—ï¼Œæˆ–è€…ä»…é€šè¿‡ display æ§åˆ¶ --- */
  display: none; /* JS ä¼šåˆ‡æ¢è¿™ä¸ª */
  opacity: 0; /* é…åˆ fade-in åŠ¨ç”» */
  transform: translateY(-5px);
  transition: opacity 0.3s ease, transform 0.3s ease;
}

/* æ¿€æ´»æ˜¾ç¤ºæ—¶çš„æ ·å¼ */
.voice-text-panel.visible {
  display: block !important;
  opacity: 1 !important;
  transform: translateY(0) !important;
}

/* åŠ¨ç”»è¾…åŠ©ç±» */
.voice-text-panel.fade-in {
  opacity: 1;
  transform: translateY(0);
}

/* è¯­éŸ³æ³¢çº¹å›¾æ ‡å¾®è°ƒ */
.voice-icon-svg {
  width: 20px;
  height: 20px;
}

/* === é•¿æŒ‰èœå•å›¾æ ‡ç»Ÿä¸€æ§åˆ¶ === */
#msg-action-menu .action-menu-btn svg {
  width: 18px !important;
  height: 18px !important;
  min-width: 18px;
  min-height: 18px;
  pointer-events: none;
  fill: currentColor;
}

/* === æ€§èƒ½ä¼˜åŒ–è¡¥ä¸ === */

/* 1. å¼ºåˆ¶å¼€å¯ç¡¬ä»¶åŠ é€Ÿ */
.phone-frame,
.screen,
.modal-content,
.chat-messages-container,
.dynamic-island,
.features-panel {
  /* å¼€å¯ 3D å˜æ¢ï¼Œå¼ºåˆ¶ GPU ä»‹å…¥ */
  transform: translate3d(0, 0, 0);
  /* å‘Šè¯‰æµè§ˆå™¨è¿™äº›å±æ€§ä¼šå˜åŒ–ï¼Œæå‰åšå¥½ä¼˜åŒ–å‡†å¤‡ */
  will-change: transform, opacity;
  /* æŸäº›è®¾å¤‡ä¸Šå¯ä»¥æå‡æ»šåŠ¨æµç•…åº¦ */
  -webkit-overflow-scrolling: touch;
}

/* 2. é’ˆå¯¹æ¯›ç»ç’ƒå…ƒç´ çš„ç‰¹æ®Šä¼˜åŒ– */
/* è¿™é‡Œçš„åŸç†æ˜¯ï¼šç»™ä¸€ä¸ªç‹¬ç«‹çš„æ¸²æŸ“å±‚ï¼Œé˜²æ­¢èƒŒæ™¯æ»šåŠ¨æ—¶é¢‘ç¹é‡ç»˜ */
.chat-header,
.chat-input-area,
.features-panel,
.glass-segment-control {
  isolation: isolate;
}

/* ä¸»åŠ¨æ¶ˆæ¯è®¾ç½®åˆ—è¡¨æ ·å¼ */
.proactive-item {
  display: flex;
  align-items: center;
  padding: 12px 15px 12px 0;
  border-bottom: 1px solid #e5e5ea;
}

.proactive-item:last-child {
  border-bottom: none;
}

.proactive-item img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  margin-right: 12px;
  object-fit: cover;
}

.proactive-item label {
  flex-grow: 1;
  font-size: 16px;
  color: #000;
}

/* === é«˜æ–¯æ¨¡ç³Šé€šçŸ¥æ¨ªå¹… === */
#notification-banner-container {
  position: fixed;
  top: 40px;
  /* é¿å¼€çŠ¶æ€æ  */
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 350px;
  z-index: var(--z-system-banner);
  /* é€šçŸ¥æ¨ªå¹…å±‚çº§ */
  display: flex;
  flex-direction: column;
  gap: 10px;
  pointer-events: none;
  /* è®©ç‚¹å‡»ç©¿é€ï¼Œä¸æŒ¡æ“ä½œ */
}

.glass-banner {
  background: rgba(255, 255, 255, 0.75);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 22px;
  padding: 12px 16px;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.5);
  display: flex;
  align-items: center;
  gap: 12px;

  /* åŠ¨ç”» */
  opacity: 0;
  transform: translateY(-20px) scale(0.95);
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.glass-banner.show {
  opacity: 1;
  transform: translateY(0) scale(1);
}

.glass-banner img {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  flex-shrink: 0;
}

.glass-banner-content {
  flex-grow: 1;
  min-width: 0;
}

.glass-banner-title {
  font-size: 15px;
  font-weight: 600;
  color: #000;
  margin-bottom: 2px;
}

.glass-banner-text {
  font-size: 14px;
  color: #333;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .glass-banner {
  background: rgba(40, 40, 40, 0.75);
  border-color: rgba(255, 255, 255, 0.1);
}

.phone-frame.dark-mode .glass-banner-title {
  color: #fff;
}

.phone-frame.dark-mode .glass-banner-text {
  color: #ddd;
}

/* === ä¸»åŠ¨æ¶ˆæ¯ç•Œé¢ä¸“å±ä¿®å¤ === */
#proactive-settings-screen .settings-content {
  /* 1. å¼ºåˆ¶å æ»¡é«˜åº¦ï¼Œé¢„ç•™é¡¶æ ç©ºé—´ */
  height: 100% !important;
  padding-top: 100px !important;
  /* å¢åŠ é¡¶éƒ¨ç•™ç™½ï¼Œä¸é¡¶å¤´ */
  padding-bottom: 40px !important;
  padding-left: 16px !important;
  /* å·¦å³ç•™ç™½ï¼Œè§£å†³è´´è¾¹é—®é¢˜ */
  padding-right: 16px !important;
  box-sizing: border-box !important;

  /* 2. æ ¸å¿ƒï¼šå¼€å¯å‚ç›´æ»šåŠ¨ */
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch;
  /* iOSé¡ºæ»‘æ»šåŠ¨ */

  /* 3. å¸ƒå±€è°ƒæ•´ */
  display: block !important;
  background-color: #f2f2f7;
  /* ç»Ÿä¸€èƒŒæ™¯è‰² */
}

/* åˆ—è¡¨é¡¹ç¾åŒ–ï¼šå¤§å¤´åƒã€å¤§é—´è· */
.proactive-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  /* å¢åŠ å†…è¾¹è· */
  border-bottom: 1px solid #e5e5ea;
  background-color: #fff;
  transition: background-color 0.2s;
}

.proactive-item:last-child {
  border-bottom: none;
}

.proactive-item:active {
  background-color: #f5f5f5;
}

.proactive-item img {
  width: 48px;
  /* å¤´åƒåŠ å¤§ */
  height: 48px;
  border-radius: 10px;
  /* æ›´ç°ä»£çš„åœ†è§’ */
  margin-right: 16px;
  object-fit: cover;
  border: 0.5px solid rgba(0, 0, 0, 0.1);
}

.proactive-item label {
  flex-grow: 1;
  font-size: 17px;
  /* å­—å·åŠ å¤§ï¼Œæ›´æ¸…æ™° */
  color: #1c1c1e;
  font-weight: 500;
}

/* å¤é€‰æ¡†ç¾åŒ– */
.proactive-checkbox {
  width: 24px;
  height: 24px;
  accent-color: #007aff;
  cursor: pointer;
}

/* proactive-settings-screen ä½œä¸ºäºŒçº§é¡µé¢ï¼Œå±‚çº§é«˜äº settings-screen */
#proactive-settings-screen.opened {
  z-index: var(--z-screen-secondary);
}

/* ios-settings-screen ä½œä¸ºäºŒçº§é¡µé¢ï¼Œå±‚çº§é«˜äº settings-screen */
#ios-settings-screen.opened {
  z-index: var(--z-screen-secondary);
}

/* ========================================
   iOS Tuner é‡æ–°è®¾è®¡ - å‚è€ƒ iosnative.html
   ======================================== */

.ios-tuner-redesign {
  background-color: #F2F2F7 !important;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", sans-serif;
  color: #1C1C1E;
  position: relative;
  overflow: hidden;
}

/* èƒŒæ™¯ç‚¹é˜µå›¾æ¡ˆ */
.ios-tuner-bg-pattern {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: radial-gradient(#d1d1d6 1px, transparent 1px);
  background-size: 20px 20px;
  opacity: 0.35;
  z-index: 0;
  pointer-events: none;
}

/* é¡¶éƒ¨å¯¼èˆªæ  */
.ios-tuner-nav {
  position: relative;
  z-index: 10;
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 50px 16px 16px 16px;
  box-sizing: border-box;
}

.ios-tuner-nav-title {
  font-size: 15px;
  font-weight: 600;
  color: #1C1C1E;
}

/* è¿”å›æŒ‰é’® - çº¯ç®­å¤´æ— èƒŒæ™¯ */
.ios-tuner-back-btn {
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 0;
  margin-left: -10px;
  transition: opacity 0.2s;
}

.ios-tuner-back-btn:active {
  opacity: 0.5;
}

.ios-tuner-back-btn svg {
  width: 24px;
  height: 24px;
  color: #007AFF;
}

/* ä¸»å®¹å™¨ */
.ios-tuner-container {
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: 440px;
  margin: 0 auto;
  padding: 0 20px 40px 20px;
  display: flex;
  flex-direction: column;
  gap: 20px;
  box-sizing: border-box;
  overflow-y: auto;
  height: calc(100% - 90px);
  -webkit-overflow-scrolling: touch;
}

/* é¢„è§ˆå¡ç‰‡ */
.ios-tuner-preview-card {
  background: #FFFFFF;
  border-radius: 24px;
  padding: 30px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  position: relative;
  overflow: hidden;
  min-height: 260px;
}

/* æ¨¡æ‹Ÿæ‰‹æœº */
.ios-tuner-mockup-phone {
  width: 130px;
  height: 200px;
  border: 4px solid #333;
  border-radius: 20px;
  position: relative;
  background: #fff;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  overflow: hidden;
  transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.ios-tuner-mockup-content {
  flex: 1;
  background: #f5f5f5;
  margin: 4px;
  border-radius: 14px 14px 0 0;
  display: flex;
  flex-direction: column;
  padding: 10px;
  gap: 6px;
}

.ios-tuner-skeleton-line {
  height: 8px;
  background: #e0e0e0;
  border-radius: 4px;
}

.ios-tuner-skeleton-line.w-80 { width: 80%; }
.ios-tuner-skeleton-line.w-60 { width: 60%; }
.ios-tuner-skeleton-line.w-40 { width: 40%; }

/* å®‰å…¨åŒºæŒ‡ç¤ºå™¨ */
.ios-tuner-safe-area {
  background: rgba(255, 59, 48, 0.15);
  border-top: 1px dashed #FF3B30;
  height: 20px;
  width: 100%;
  transition: height 0.1s linear;
  display: flex;
  align-items: center;
  justify-content: center;
}

.ios-tuner-safe-area::after {
  content: "Safe Area";
  font-size: 8px;
  color: #FF3B30;
  font-weight: 700;
}

/* æ§åˆ¶å¡ç‰‡ */
.ios-tuner-control-card {
  background: #FFFFFF;
  border-radius: 24px;
  padding: 24px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
}

.ios-tuner-control-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-end;
  margin-bottom: 20px;
}

.ios-tuner-label-group h2 {
  margin: 0;
  font-size: 15px;
  font-weight: 600;
  color: #8E8E93;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.ios-tuner-label-group p {
  margin: 4px 0 0 0;
  font-size: 12px;
  color: #AEAEB2;
  font-weight: 400;
}

/* æ•°å€¼å¾½ç«  */
.ios-tuner-value-badge {
  font-family: "SF Mono", Menlo, monospace;
  font-size: 20px;
  font-weight: 700;
  color: #1C1C1E;
  background: #F2F2F7;
  padding: 6px 14px;
  border-radius: 10px;
  min-width: 80px;
  text-align: center;
  transition: color 0.2s, background 0.2s;
}

/* æ»‘å—å®¹å™¨ */
.ios-tuner-slider-wrapper {
  position: relative;
  height: 44px;
  display: flex;
  align-items: center;
}

.ios-tuner-slider-fill {
  position: absolute;
  left: 0;
  top: 19px;
  height: 6px;
  background: #8E8E93;
  border-radius: 3px;
  pointer-events: none;
  width: 50%;
  z-index: 1;
  transition: background 0.2s;
}

/* æ»‘å—è¾“å…¥ */
.ios-tuner-slider-wrapper input[type=range] {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  background: transparent;
  z-index: 2;
  position: relative;
}

.ios-tuner-slider-wrapper input[type=range]:focus {
  outline: none;
}

.ios-tuner-slider-wrapper input[type=range]::-webkit-slider-runnable-track {
  width: 100%;
  height: 6px;
  cursor: pointer;
  background: #E5E5EA;
  border-radius: 3px;
}

.ios-tuner-slider-wrapper input[type=range]::-webkit-slider-thumb {
  height: 28px;
  width: 28px;
  border-radius: 50%;
  background: #FFFFFF;
  cursor: pointer;
  -webkit-appearance: none;
  appearance: none;
  margin-top: -11px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.15), 0 0 0 1px rgba(0,0,0,0.05);
  transition: transform 0.1s ease;
}

.ios-tuner-slider-wrapper input[type=range]:active::-webkit-slider-thumb {
  transform: scale(1.1);
}

/* æ»‘å—æ ‡ç­¾ */
.ios-tuner-slider-labels {
  display: flex;
  justify-content: space-between;
  margin-top: 8px;
  font-size: 12px;
  color: #8E8E93;
  font-weight: 500;
}

/* ä¿¡æ¯å¡ç‰‡ */
.ios-tuner-info-card {
  background: #FFFFFF;
  border-radius: 20px;
  padding: 20px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.04);
  display: flex;
  gap: 16px;
  align-items: flex-start;
}

.ios-tuner-info-icon {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  background: #F4F4F5;
  border:1px solid rgba(0,0,0,0.03);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.ios-tuner-info-icon svg {
  color: #8e8e93;
}

.ios-tuner-info-content {
  flex: 1;
}

.ios-tuner-info-content p {
  margin: 0 0 10px 0;
  font-size: 14px;
  line-height: 1.5;
  color: #3C3C43;
}

.ios-tuner-info-content strong {
  color: #1C1C1E;
  font-weight: 600;
}

.ios-tuner-info-content ul {
  margin: 0;
  padding-left: 18px;
  font-size: 13px;
  color: #8E8E93;
  line-height: 1.8;
}

.ios-tuner-info-content li {
  margin-bottom: 2px;
}

.ios-tuner-highlight {
  color: #007AFF;
  font-weight: 600;
}

/* é‡ç½®æŒ‰é’® */
.ios-tuner-reset-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 16px;
  background: #1C1C1E;
  color: #fff;
  border: none;
  border-radius: 16px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
  transition: transform 0.1s, opacity 0.2s;
}

.ios-tuner-reset-btn:active {
  transform: scale(0.98);
  opacity: 0.9;
}

.ios-tuner-reset-btn svg {
  flex-shrink: 0;
}

/* === æ–°å¢ï¼šåŠ¨æ€ç”µæ± ç»„ä»¶æ ·å¼ === */

/* 1. å®¹å™¨ */
.battery-container {
  position: relative;
  width: 30px;
  /* æ¢å¤æ­£å¸¸å°ºå¯¸ï¼Œä¸å†æ”¾å¤§ */
  height: 12px;
  margin-left: -3px;
  /* ç»™å·¦è¾¹çš„WiFiå›¾æ ‡ç•™ç‚¹ç©ºéš™ */
  /* å‚ç›´å±…ä¸­å¾®è°ƒï¼Œå¦‚æœçœ‹èµ·æ¥åä¸Šæˆ–åä¸‹ï¼Œå¯ä»¥è°ƒæ•´è¿™ä¸ªå€¼ */
  top: 0px;
}

/* 2. å¤–å£³ä¸ç”µé‡ */
.battery-shell-svg {
  display: block;
  width: 100%;
  height: 100%;
  overflow: visible;
}

/* é»˜è®¤é¢œè‰² (æµ…è‰²æ¨¡å¼ä¸‹ä¸ºé»‘è‰²) */
.shell-stroke {
  stroke: #000000;
  transition: stroke 0.3s;
}

.shell-fill {
  fill: #000000;
  transition: fill 0.3s;
}

#battery-level {
  fill: #000000;
  transition: width 0.3s ease-out, fill 0.3s;
}

/* 3. é—ªç”µå›¾æ ‡ */
.battery-bolt-svg {
  position: absolute;
  top: 50%;
  left: 46%;
  transform: translate(-50%, -50%);
  width: 10px;
  height: 14px;
  z-index: 2;
  display: none;
  /* é»˜è®¤ä¸æ˜¾ç¤º */
}

/* é—ªç”µé»˜è®¤æ ·å¼ */
.bolt-path {
  fill: #000000;
  stroke: transparent;
  stroke-width: 1.3;
}

/* === çŠ¶æ€å˜åŒ–é€»è¾‘ === */

/* å……ç”µä¸­ï¼šç”µé‡å˜ç»¿ï¼Œé—ªç”µå˜é»‘èŠ¯ç™½è¾¹ */
.battery-container.charging #battery-level {
  fill: #00d26a !important;
}

.battery-container.charging .bolt-path {
  fill: #000000 !important;
  stroke: #ffffff !important;
}

/* ä½ç”µé‡ï¼šå˜çº¢ */
.battery-container.low #battery-level {
  fill: #ff3b30 !important;
}

/* === æ·±è‰²æ¨¡å¼é€‚é… (é€‚é… .phone-frame.dark-mode) === */

/* å¤–å£³å˜ç™½ */
.phone-frame.dark-mode .shell-stroke {
  stroke: #ffffff;
  opacity: 0.8;
}

.phone-frame.dark-mode .shell-fill {
  fill: #ffffff;
  opacity: 0.8;
}

/* ç”µé‡æ¡å˜ç™½ (éå……ç”µ/éä½ç”µé‡æ—¶) */
.phone-frame.dark-mode #battery-level {
  fill: #ffffff;
}

/* æ³¨æ„ï¼šå……ç”µæ—¶å› ä¸ºåŠ äº† !importantï¼Œç»¿è‰²ä¼šè¦†ç›–ä¸Šé¢çš„ç™½è‰²ï¼Œè¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ */

/* === å“‡å‘œ (Wow) APP ä¸“å±æ ·å¼ === */

/* 1. åŸºç¡€å®¹å™¨ä¸èƒŒæ™¯ */
#wow-screen {
  /* è¦†ç›–é»˜è®¤çš„ç™½è‰²èƒŒæ™¯ï¼Œæ”¹ä¸ºé€æ˜ä»¥ä¾¿æ˜¾ç¤ºæå…‰ */
  background: #eef2f5 !important;
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
  color: #2d3436;
  overflow: hidden;
}

/* æå…‰èƒŒæ™¯åŠ¨ç”» */
#wow-screen .wow-ambient-bg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
}

#wow-screen .wow-blob {
  position: absolute;
  border-radius: 50%;
  filter: blur(60px);
  opacity: 0.6;
  animation: wow-float 10s infinite alternate ease-in-out;
}

#wow-screen .wow-blob-1 {
  top: -10%;
  left: -10%;
  width: 250px;
  height: 250px;
  background: #a29bfe;
}

#wow-screen .wow-blob-2 {
  bottom: 10%;
  right: -10%;
  width: 200px;
  height: 200px;
  background: #74b9ff;
  animation-delay: -5s;
}

#wow-screen .wow-blob-3 {
  top: 40%;
  left: 30%;
  width: 150px;
  height: 150px;
  background: #fab1a0;
  opacity: 0.4;
  animation-delay: -2s;
}

@keyframes wow-float {
  0% {
    transform: translate(0, 0) scale(1);
  }

  100% {
    transform: translate(20px, -20px) scale(1.1);
  }
}

/* 2. ä¸»å®¹å™¨ */
#wow-screen .wow-container {
  position: relative;
  z-index: 1;
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* 3. ç»ç’ƒé¡¶æ  */
/* === ä¿®å¤ï¼šé¡¶æ å¸ƒå±€ (ä¸‹ç§»é¿å¼€åˆ˜æµ·) === */
#wow-screen .wow-header {
  /* 1. å¢åŠ é¡¶éƒ¨å†…è¾¹è·ï¼ŒæŠŠå†…å®¹é¡¶ä¸‹æ¥ */
  padding-top: 50px !important;

  /* 2. é«˜åº¦æ”¹ä¸ºè‡ªåŠ¨ï¼Œæˆ–è€…è®¾å¤§ä¸€ç‚¹ */
  height: auto !important;
  min-height: 50px !important;
  padding-bottom: 10px !important;

  /* 3. å·¦å³è¾¹è· */
  padding-left: 15px;
  padding-right: 15px;

  /* 4. ä¿æŒå¸ƒå±€ */
  display: flex;
  justify-content: space-between;
  align-items: center;

  /* 5. ç»ç’ƒæ•ˆæœä¿æŒä¸å˜ */
  position: sticky;
  top: 0;
  z-index: 100;

  /* 6. ç¡®ä¿ç›’å­æ¨¡å‹æ­£ç¡®ï¼Œé˜²æ­¢æ’‘ç ´ */
  box-sizing: border-box;
}

#wow-screen .wow-logo {
  font-size: 18px;
  font-weight: 800;
  background: linear-gradient(135deg, #2d3436 0%, #636e72 100%);
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

#wow-screen .wow-header-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 2px solid #fff;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  object-fit: cover;
}

#wow-screen .wow-icon-btn {
  background: none;
  border: none;
  padding: 5px;
  color: #2d3436;
  cursor: pointer;
}

/* 4. æ ¸å¿ƒç»„ä»¶ï¼šWow Glass Card (ç»ç’ƒå¡ç‰‡) */
#wow-screen .wow-glass-card {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.7) 0%,
    rgba(255, 255, 255, 0.4) 100%
  );
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 20px;
  padding: 20px;
  margin-bottom: 20px;
  border: 1px solid rgba(255, 255, 255, 0.8);
  border-right: 1px solid rgba(255, 255, 255, 0.4);
  border-bottom: 1px solid rgba(255, 255, 255, 0.4);

  position: relative;
}

/* 5. å‘å¸ƒæ¡†ç‰¹å®šæ ·å¼ */
#wow-screen .wow-create-box {
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 15px;
  margin-top: 10px;
}

#wow-screen .wow-input-wrapper {
  flex: 1;
}

#wow-screen .wow-glass-input {
  width: 100%;
  border: none;
  background: rgba(255, 255, 255, 0.5);
  padding: 10px 15px;
  border-radius: 12px;
  font-size: 14px;
  box-shadow: inset 2px 2px 5px rgba(166, 171, 189, 0.1);
}

#wow-screen .wow-glass-btn-small {
  width: 40px;
  height: 40px;
  border-radius: 12px;
  border: none;
  background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 4px 10px rgba(9, 132, 227, 0.3);
}

/* 6. å†…å®¹æ»šåŠ¨åŒº */
#wow-screen .wow-content-area {
  flex: 1;
  overflow-y: auto;
  padding: 10px 15px;
  scroll-behavior: smooth;
}

#wow-screen .wow-page {
  display: none;
}

#wow-screen .wow-page.active {
  display: block;
  animation: wow-fade-in 0.3s ease;
}

@keyframes wow-fade-in {
  from {
    opacity: 0;
    transform: translateY(10px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* 7. å¸–å­å†…å®¹æ ·å¼ */
#wow-screen .wow-post-header {
  display: flex;
  gap: 10px;
  align-items: center;
  margin-bottom: 10px;
}

#wow-screen .wow-post-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
  border: 1px solid #fff;
}

#wow-screen .wow-post-name {
  font-weight: 700;
  font-size: 15px;
  color: #2d3436;
}

#wow-screen .wow-post-time {
  font-size: 11px;
  color: #888;
}

#wow-screen .wow-post-text {
  font-size: 14px;
  color: #444;
  line-height: 1.6;
  margin-bottom: 10px;
}

#wow-screen .wow-comment-section {
  background: rgba(255, 255, 255, 0.4);
  border-radius: 12px;
  padding: 10px;
  margin-top: 10px;
}

#wow-screen .wow-comment-item {
  display: flex;
  gap: 8px;
  margin-bottom: 6px;
  font-size: 13px;
}

#wow-screen .wow-comment-user {
  font-weight: 600;
  color: #0984e3;
  flex-shrink: 0;
}

#wow-screen .wow-comment-text {
  color: #555;
}

/* 8. åº•éƒ¨æ‚¬æµ® Dock */
#wow-screen .wow-dock-container {
  position: absolute;
  bottom: 20px;
  width: 100%;
  display: flex;
  justify-content: center;
  pointer-events: none;
}

#wow-screen .wow-glass-dock {
  pointer-events: auto;
  background: rgba(255, 255, 255, 0.65);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  padding: 5px 20px;
  border-radius: 30px;
  display: flex;
  gap: 30px;
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.5);
}

#wow-screen .wow-nav-btn {
  background: none;
  border: none;
  color: #b2bec3;
  padding: 10px;
  transition: all 0.2s;
}

#wow-screen .wow-nav-btn.active {
  color: #0984e3;
  transform: scale(1.1);
}

/* 9. èº«ä»½é€‰æ‹©å¼ºåˆ¶å¼¹çª— */
#wow-screen .wow-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(10px);
  z-index: 200;
  display: none;
  justify-content: center;
  align-items: center;
}

#wow-screen .wow-modal-card {
  background: white;
  width: 80%;
  border-radius: 20px;
  padding: 25px;
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
  text-align: center;
}

#wow-screen .wow-identity-list {
  margin-top: 20px;
  max-height: 300px;
  overflow-y: auto;
}

#wow-screen .wow-identity-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px;
  border-bottom: 1px solid #f0f0f0;
  cursor: pointer;
}

#wow-screen .wow-identity-item:hover {
  background: #f5f5f5;
  border-radius: 10px;
}

#wow-screen .wow-identity-item img {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  object-fit: cover;
}

/* 10. æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode #wow-screen {
  background: #2c2c2e !important;
}

.phone-frame.dark-mode #wow-screen .wow-glass-card {
  background: linear-gradient(
    135deg,
    rgba(50, 50, 50, 0.7) 0%,
    rgba(30, 30, 30, 0.4) 100%
  );
  border-color: rgba(255, 255, 255, 0.1);
}

.phone-frame.dark-mode #wow-screen .wow-post-name,
.phone-frame.dark-mode #wow-screen .wow-post-text {
  color: #eee;
}

.phone-frame.dark-mode #wow-screen .wow-header {
  background: rgba(0, 0, 0, 0.3);
}

/* æ§åˆ¶ Wow APP çš„æ˜¾ç¤ºä¸éšè— */
#wow-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
  /* é»˜è®¤åœ¨ä¸‹å±‚ */
  transition: opacity 0.3s ease, transform 0.3s ease;
  transform: scale(0.95);
  /* åˆå§‹å¾®ç¼© */
}

.phone-frame.show-wow #home-screen {
  opacity: 0;
  pointer-events: none;
  z-index: 1;
}

.phone-frame.show-wow #wow-screen {
  opacity: 1;
  pointer-events: auto;
  z-index: 100;
  transform: scale(1);
  /* æ”¾å¤§æ˜¾ç¤º */
}

/* === å“‡å‘œ (Wow) APP è¡¥å…¨æ ·å¼ === */

/* 1. å‘å¸ƒå¼¹çª— (Compose Modal) */
.wow-compose-modal {
  display: none;
  /* é»˜è®¤éšè— */
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #f5f5f5;
  /* æµ…ç°èƒŒæ™¯ */
  z-index: 9999;
  flex-direction: column;
}

.wow-compose-modal.active {
  display: flex;
}

.wow-compose-header {
  display: flex;
  justify-content: space-between;
  padding: 50px 20px 20px 20px;
  align-items: center;
}

.wow-compose-textarea {
  flex: 1;
  border: none;
  padding: 20px;
  font-size: 16px;
  background: transparent;
  outline: none;
  resize: none;
  font-family: inherit;
}

.wow-publish-btn {
  background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
  color: white;
  border: none;
  padding: 6px 20px;
  border-radius: 20px;
  font-weight: 600;
}

/* 2. è¯¦æƒ…é¡µ (Detail View) - æ ¸å¿ƒéƒ¨åˆ† */
.wow-detail-view {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(240, 244, 248, 0.98);
  backdrop-filter: blur(20px);
  z-index: 150;
  display: flex;
  flex-direction: column;
  transform: translateX(100%);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.wow-detail-view.show {
  transform: translateX(0);
}

.wow-detail-nav {
  padding-top: 40px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding-left: 15px;
  padding-right: 15px;
}

.wow-detail-content {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
  padding-bottom: 100px;
}

.wow-divider {
  height: 1px;
  background: rgba(0, 0, 0, 0.05);
  margin: 20px 0;
}

/* åº•éƒ¨è¯„è®ºè¾“å…¥æ¡† */
.wow-detail-input-area {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  padding: 10px 15px 30px 15px;
  /* é€‚é…åº•éƒ¨å®‰å…¨åŒº */
  background: rgba(255, 255, 255, 0.9);
  border-top: 1px solid rgba(0, 0, 0, 0.05);
  display: flex;
  gap: 10px;
  align-items: center;
}

.wow-main-input {
  flex: 1;
  height: 38px;
  border-radius: 19px;
  border: 1px solid #ddd;
  padding: 0 15px;
  background: #f9f9f9;
  outline: none;
}

.wow-send-btn {
  color: #0984e3;
  font-weight: 600;
  padding: 5px 10px;
  cursor: pointer;
}

/* 3. è¯„è®ºæ ·å¼ (å¤åˆ»æºæ–‡ä»¶) */
.wow-comment-node {
  margin-bottom: 20px;
}

.wow-comment-main {
  display: flex;
  gap: 10px;
}

.wow-comment-bubble {
  background: rgba(255, 255, 255, 0.7);
  padding: 10px 14px;
  border-radius: 4px 16px 16px 16px;
  min-width: 60%;
  display: inline-block;
}

.wow-comment-author {
  font-weight: 700;
  font-size: 13px;
  color: #444;
}

.wow-comment-text {
  font-size: 14px;
  color: #2d3436;
  margin-top: 2px;
}

.wow-comment-actions {
  margin-top: 6px;
  font-size: 12px;
  color: #888;
  display: flex;
  gap: 15px;
}

.wow-reply-btn {
  color: #0984e3;
  font-weight: 600;
  cursor: pointer;
}

/* æ¥¼ä¸­æ¥¼ (Sub-comments) */
.wow-sub-comments {
  margin-left: 46px;
  margin-top: 8px;
  border-left: 2px solid rgba(0, 0, 0, 0.05);
  padding-left: 10px;
}

.wow-sub-item {
  margin-bottom: 8px;
  font-size: 13px;
  padding: 8px 12px;
  background: rgba(255, 255, 255, 0.4);
  border-radius: 8px;
}

.wow-reply-arrow {
  color: #999;
  margin: 0 4px;
  font-size: 10px;
}

/* 4. ä¸ªäººä¸­å¿ƒæ ·å¼ */
.wow-profile-header {
  text-align: center;
  margin-top: 20px;
  margin-bottom: 20px;
}

.wow-profile-avatar-large {
  width: 90px;
  height: 90px;
  border-radius: 50%;
  border: 4px solid #fff;
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
  object-fit: cover;
}

.wow-stats-row {
  display: flex;
  justify-content: space-around;
  text-align: center;
  padding: 10px 0;
}

.wow-stat-num {
  font-weight: 800;
  font-size: 18px;
}

.wow-stat-label {
  font-size: 12px;
  color: #888;
}

/* 5. æ¶ˆæ¯é¡µæ ·å¼ */
.wow-notif-item {
  display: flex;
  align-items: flex-start;
  gap: 12px;
  padding: 15px 0;
  border-bottom: 1px solid rgba(0, 0, 0, 0.03);
}

.wow-notif-icon {
  width: 36px;
  height: 36px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  flex-shrink: 0;
  font-size: 16px;
}

.icon-like {
  background: linear-gradient(135deg, #ff7675, #d63031);
}

.icon-comment {
  background: linear-gradient(135deg, #74b9ff, #0984e3);
}

.wow-notif-content {
  flex: 1;
  font-size: 14px;
}

.wow-notif-time {
  font-size: 12px;
  color: #999;
  margin-top: 4px;
}

/* 6. å‘å¸ƒæ¡æ ·å¼ (é¦–é¡µ) */
.wow-compose-trigger {
  display: flex;
  gap: 12px;
  align-items: center;
  cursor: pointer;
  padding: 15px;
}

.wow-fake-input {
  flex: 1;
  background: rgba(255, 255, 255, 0.4);
  padding: 10px 15px;
  border-radius: 20px;
  color: #999;
  font-size: 14px;
  border: 1px solid rgba(255, 255, 255, 0.3);
}

/* 7. å¸–å­å¡ç‰‡å†…éƒ¨å¾®è°ƒ */
.wow-action-bar {
  display: flex;
  justify-content: space-between;
  padding-top: 10px;
  border-top: 1px solid rgba(0, 0, 0, 0.05);
  margin-top: 10px;
}

.wow-action-btn {
  color: #636e72;
  font-size: 13px;
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 5px;
  cursor: pointer;
}

.wow-user-meta {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 10px;
}

.wow-user-info h4 {
  font-size: 15px;
  font-weight: 700;
  color: #2d3436;
  margin: 0;
}

.wow-user-info span {
  font-size: 12px;
  color: #636e72;
}

/* 8. æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .wow-detail-view {
  background: #2c2c2e;
}

.phone-frame.dark-mode .wow-detail-nav {
  background: #1c1c1e;
  border-bottom-color: #3a3a3c;
  color: #fff;
}

.phone-frame.dark-mode .wow-detail-input-area {
  background: #1c1c1e;
  border-top-color: #3a3a3c;
}

.phone-frame.dark-mode .wow-main-input {
  background: #3a3a3c;
  border-color: #48484a;
  color: #fff;
}

.phone-frame.dark-mode .wow-compose-modal {
  background: #1c1c1e;
  color: #fff;
}

.phone-frame.dark-mode .wow-compose-textarea {
  color: #fff;
}

.phone-frame.dark-mode .wow-comment-bubble {
  background: #3a3a3c;
  color: #fff;
}

.phone-frame.dark-mode .wow-comment-author {
  color: #ccc;
}

.phone-frame.dark-mode .wow-comment-text {
  color: #eee;
}

.phone-frame.dark-mode .wow-sub-item {
  background: #3a3a3c;
}

.phone-frame.dark-mode .wow-notif-content {
  color: #eee;
}

.phone-frame.dark-mode .wow-user-info h4 {
  color: #fff;
}

.wow-notification-toast {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%) translateY(-200px);
  /* é»˜è®¤éšè—åœ¨é¡¶éƒ¨ */
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  padding: 12px 20px;
  border-radius: 50px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
  display: flex;
  align-items: center;
  gap: 10px;
  z-index: 9999;
  transition: transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
  border: 1px solid rgba(255, 255, 255, 0.8);
  pointer-events: auto !important;
  cursor: pointer;
  /* é¼ æ ‡æ‰‹åŠ¿ */
}

.wow-notification-toast.show {
  transform: translateX(-50%) translateY(0);
}

.wow-notif-text {
  font-size: 14px;
  font-weight: 600;
  color: #333;
}

/* === å“‡å‘œ APP ä¸“å±å¤´åƒä¿®å¤ === */
#wow-screen .wow-user-meta .avatar,
/* å¸–å­ä½œè€…å¤´åƒ */
#wow-screen .wow-comment-main .avatar

/* è¯„è®ºåŒºè·¯äººå¤´åƒ */ {
  border-radius: 25px !important;
  /* å¼ºåˆ¶åœ†è§’ 25px */
  width: 44px !important;
  /* ç¨å¾®åŠ å¤§ä¸€ç‚¹å°ºå¯¸ä»¥é€‚é…åœ†è§’ */
  height: 44px !important;
  object-fit: cover;
  border: 1px solid rgba(255, 255, 255, 0.5);
  /* åŠ ä¸ªæ·¡æ·¡çš„ç™½è¾¹å¢åŠ è´¨æ„Ÿ */
}

/* ä¿æŒé¡¶æ ä¸»è§’å¤´åƒä¸ºåœ†å½¢ (å¦‚æœä½ æƒ³ä¸»è§’ä¹Ÿæ˜¯25pxï¼ŒæŠŠä¸‹é¢è¿™æ®µåˆ æ‰) */
#wow-screen .wow-header-avatar {
  border-radius: 50% !important;
}

/* === ä¿®å¤ï¼šå‘å¸ƒé¡µå–æ¶ˆæŒ‰é’®ç¾åŒ– === */
#wow-compose-cancel-btn {
  background: transparent !important;
  /* å»æ‰ç°è‰²èƒŒæ™¯ */
  border: none !important;
  /* å»æ‰è¾¹æ¡† */
  color: #8e8e93 !important;
  /* iOS æ ‡å‡†æ¬¡çº§ç°è‰² */
  font-size: 16px !important;
  font-weight: 400 !important;
  padding: 8px 12px !important;
  /* å¢åŠ ç‚¹å‡»åŒºåŸŸ */
  cursor: pointer;
  transition: opacity 0.2s;
}

#wow-compose-cancel-btn:active {
  opacity: 0.5;
  /* ç‚¹å‡»æ—¶çš„åé¦ˆ */
}

/* é¡ºä¾¿ä¼˜åŒ–ä¸€ä¸‹å‘å¸ƒæŒ‰é’®ï¼Œè®©å®ƒå’Œå–æ¶ˆæŒ‰é’®å¯¹é½ */
.wow-publish-btn {
  box-shadow: 0 4px 10px rgba(9, 132, 227, 0.3);
  /* åŠ ç‚¹æŠ•å½±æ›´ç«‹ä½“ */
}

/* === ä¿®å¤ï¼šè¯„è®ºè¾“å…¥æ å¸ƒå±€ === */
.wow-detail-input-area {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;

  /* æ ¸å¿ƒå¸ƒå±€ */
  display: flex;
  align-items: center;
  gap: 10px;
  /* è¾“å…¥æ¡†å’ŒæŒ‰é’®çš„é—´è· */

  padding: 10px 15px 30px 15px;
  /* åº•éƒ¨ç•™å‡ºå®‰å…¨è·ç¦» */
  background: rgba(255, 255, 255, 0.95);
  border-top: 1px solid rgba(0, 0, 0, 0.05);
  box-sizing: border-box;
  /* ç¡®ä¿ padding ä¸ä¼šæ’‘ç ´å®½åº¦ */
  z-index: 200;
}

/* è¾“å…¥æ¡†ï¼šè‡ªåŠ¨å æ®å‰©ä½™ç©ºé—´ */
.wow-main-input {
  flex: 1;
  /* å…³é”®ï¼šå æ»¡å‰©ä½™å®½åº¦ */
  min-width: 0;
  /* é˜²æ­¢è¢«é•¿å†…å®¹æ’‘å¤§ */
  height: 36px;
  border-radius: 18px;
  border: 1px solid #ddd;
  padding: 0 15px;
  background: #f9f9f9;
  outline: none;
  font-size: 14px;
}

/* å‘é€æŒ‰é’®ï¼šé˜²æ­¢è¢«å‹ç¼© */
.wow-send-btn {
  flex-shrink: 0;
  /* å…³é”®ï¼šç¦æ­¢è¢«æŒ¤å‹ */
  color: #0984e3;
  font-weight: 600;
  padding: 5px 10px;
  cursor: pointer;
  white-space: nowrap;
  /* å…³é”®ï¼šé˜²æ­¢æ–‡å­—æ¢è¡Œ */
}

/* === è¯„è®ºåŠ è½½åŠ¨ç”» === */
.wow-comment-node {
  /* åˆå§‹çŠ¶æ€ï¼šé€æ˜ä¸”ç¨å¾®å‘ä¸‹åç§» */
  opacity: 0;
  transform: translateY(20px);

  /* å®šä¹‰åŠ¨ç”»ï¼šåç§° æ—¶é•¿ æ›²çº¿ ä¿æŒç»“æŸçŠ¶æ€ */
  animation: commentSlideUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
}

/* å®šä¹‰å…³é”®å¸§ */
@keyframes commentSlideUp {
  0% {
    opacity: 0;
    transform: translateY(20px);
  }

  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.wow-action-bar {
  display: grid;
  /* å˜æˆç½‘æ ¼å¸ƒå±€ */
  grid-template-columns: repeat(4, 1fr);
  /* å¼ºåˆ¶åˆ†æˆ4ç­‰ä»½ */
  justify-items: center;
  /* å›¾æ ‡æ°´å¹³å±…ä¸­ */
  align-items: center;
  /* å‚ç›´å±…ä¸­ */
  padding-top: 10px;
  border-top: 1px solid rgba(0, 0, 0, 0.05);
  margin-top: 10px;
}

/* é¡ºä¾¿ä¼˜åŒ–ä¸€ä¸‹æŒ‰é’®æ ·å¼ï¼Œè®©å®ƒå¡«æ»¡æ ¼å­ */
.wow-action-btn {
  color: #636e72;
  font-size: 13px;
  display: flex;
  align-items: center;
  justify-content: center;
  /* å±…ä¸­ */
  gap: 6px;
  padding: 5px;
  cursor: pointer;
  width: 100%;
  /* å æ»¡æ ¼å­ */
}

.wow-nav-btn.active {
  color: #007aff;
  /* å˜æˆè“è‰² */
  transform: none;
  /* ã€å…³é”®ã€‘å»æ‰æ”¾å¤§æ•ˆæœ */
}

/* æ–°å¢ï¼šå¼ºåˆ¶è®©é€‰ä¸­çŠ¶æ€ä¸‹çš„ SVG æè¾¹å˜è“ */
.wow-nav-btn.active svg path,
.wow-nav-btn.active svg circle,
.wow-nav-btn.active svg rect {
  stroke: #007aff !important;
  fill: #007aff !important;
  /* å¦‚æœå›¾æ ‡æ˜¯å¡«å……å‹çš„ï¼ŒåŠ è¿™è¡Œ */
}

/* å‘å¸ƒæŒ‰é’®æ‰©æ•£åŠ¨ç”»å±‚ */
#wow-publish-ripple {
  position: fixed;
  bottom: 40px;
  /* ä»åº•æ å¤§æ¦‚ä½ç½®å¼€å§‹ */
  left: 50%;
  width: 20px;
  height: 20px;
  background-color: #ffffff;
  /* æ‰©æ•£å‡ºçš„èƒŒæ™¯è‰² */
  border-radius: 50%;
  transform: translate(-50%, 0) scale(0);
  /* åˆå§‹ä¸å¯è§ */
  z-index: 9999;
  /* æœ€é¡¶å±‚ */
  pointer-events: none;
}

/* æ¿€æ´»åŠ¨ç”» */
#wow-publish-ripple.animating {
  transition: transform 0.5s cubic-bezier(0.25, 0.8, 0.25, 1);
  transform: translate(-50%, -50%) scale(100);
  /* æ”¾å¤§åˆ°é“ºæ»¡å±å¹• */
}

/* 1. å¡ç‰‡æœ¬ä½“ï¼šå‡å°å†…è¾¹è·å’Œå¤–è¾¹è· */
.wow-glass-card {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(12px);
  border-radius: 12px;
  /* åœ†è§’ç¨å¾®æ”¹å°ä¸€ç‚¹ç‚¹ */
  border: 1px solid rgba(255, 255, 255, 0.6);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.03);

  /* â–¼â–¼â–¼ ä¿®æ”¹è¿™é‡Œ â–¼â–¼â–¼ */
  padding: 10px 12px;
  /* ä¸Šä¸‹10pxï¼Œå·¦å³12px (åŸæ¥å¯èƒ½æ˜¯ 15px) */
  margin-bottom: 10px;
  /* å¡ç‰‡ä¹‹é—´çš„è·ç¦»ä¹Ÿæ‹‰è¿‘ç‚¹ */
  /* â–²â–²â–² ä¿®æ”¹ç»“æŸ â–²â–²â–² */
}

/* 2. åå­—å’Œæ—¶é—´ */
.wow-user-info h4 {
  margin: 0;
  font-size: 13px;
  /* åŸæ¥å¯èƒ½æ˜¯ 14-15px */
  color: #333;
}

.wow-user-info span {
  font-size: 10px;
  /* æ—¶é—´æ”¹å° */
  color: #999;
}

/* 3. å¸–å­æ­£æ–‡ */
.post-text {
  font-size: 13px;
  /* æ­£æ–‡æ”¹å° (åŸæ¥å¯èƒ½æ˜¯ 15px) */
  line-height: 1.5;
  /* è¡Œé«˜ç¨å¾®ç´§å‡‘ç‚¹ */
  color: #444;
  margin: 6px 0 10px 0;
  /* å‡å°‘æ–‡å­—å’Œå›¾ç‰‡çš„è·ç¦» */
}

/* 4. åº•éƒ¨æŒ‰é’®æ æ–‡å­— */
.wow-action-btn {
  font-size: 11px;
  /* åº•éƒ¨æ•°å­—æ”¹å° */
  /* å›¾æ ‡å¦‚æœå¤ªå¤§ï¼Œå¯ä»¥ç”¨ä¸‹é¢è¿™è¡Œæ•´ä½“ç¼©å° */
  /* transform: scale(0.9); */
}

/* å¼ºè¡ŒæŠŠæ‰€æœ‰å¡ç‰‡åº•éƒ¨çš„ SVG å›¾æ ‡ç¼©å° */
.wow-action-btn svg {
  width: 16px !important;
  height: 16px !important;
}

/* å¦‚æœä½ çš„SVGæ˜¯çº¿æ¡é£æ ¼(stroke)è€Œä¸æ˜¯å¡«å……é£æ ¼(fill)ï¼Œè¯·ç”¨ä¸‹é¢è¿™æ®µï¼š
#narration-toggle-feature svg path {
    stroke: #9C27B0 !important;
    fill: none !important;
} 
*/
body.hide-narration-mode .action-message-text {
  display: none !important;
}

/* (å¯é€‰) ä¸ºäº†è®©è¿‡æ¸¡æ›´è‡ªç„¶ï¼Œå¯ä»¥åŠ ä¸ªæ·¡å‡ºåŠ¨ç”»ï¼Œä¸åŠ ä¹Ÿå¯ä»¥ */
.action-message-text {
  transition: opacity 0.3s;
}

/* ========================================================== */
/* === æ—ç™½æ¨¡å¼æ§åˆ¶ï¼šå½»åº•ç§»é™¤å ä½ === */
/* ========================================================== */

/* å½“ body åŠ ä¸Šäº† hide-narration-mode ç±»æ—¶ */
/* æ‰¾åˆ° .action-message-text è¿™ä¸ªå…ƒç´ ï¼Œç›´æ¥è®©å®ƒæ¶ˆå¤±ï¼Œä¸å ä»»ä½•ç©ºé—´ */
/* ========================================================== */
/* === æ—ç™½æ¨¡å¼æ§åˆ¶ï¼šè¿æ ¹æ‹”èµ·ç‰ˆ === */
/* ========================================================== */

/* æ‰¾åˆ°æ‰€æœ‰å¸¦æœ‰ action-row æ ‡è®°çš„æ¶ˆæ¯è¡Œï¼Œç›´æ¥æ•´è¡Œæ¶ˆå¤± */
body.hide-narration-mode .message-row.action-row {
  display: none !important;
}

/* ä¸ºäº†ä¿é™©ï¼Œå¦‚æœæœ‰çš„ç»“æ„ä¸ä¸€æ ·ï¼Œæˆ‘ä»¬ä¹ŸæŠŠå®¹å™¨å±‚éšè—æ‰ */
body.hide-narration-mode .action-message-container {
  display: none !important;
}

/* === ğŸ’‰ ä¿®å¤ï¼šé˜²æ­¢é¡¶éƒ¨è¯­å½•/æ—¶é’Ÿé®æŒ¡ç¬¬ä¸€æ’ APP === */

/* 1. è®©é¡¶éƒ¨å®¹å™¨â€œé€ä¼ â€ç‚¹å‡» */
/* è¿™ä¸€æ­¥æœ€å…³é”®ï¼å®ƒå‘Šè¯‰æµè§ˆå™¨ï¼šè¿™ä¸€å¤§å—åŒºåŸŸæ˜¯é€æ˜çš„ï¼Œé¼ æ ‡ç‚¹å‡»æ—¶ç›´æ¥ç©¿è¿‡å»ï¼Œä¸è¦æ‹¦ç€ï¼ */
.header-content {
  pointer-events: none !important;
  position: relative;
  z-index: 10;
}

/* 2. åªæ¢å¤â€œæ—¶é’Ÿâ€å’Œâ€œè¯­å½•â€è¿™ä¸¤ä¸ªå°ä¸œè¥¿çš„ç‚¹å‡» */
/* è¿™æ ·ä½ ä¾ç„¶å¯ä»¥ç‚¹æ—¶é’Ÿæ”¹é¢œè‰²ï¼Œç‚¹è¯­å½•å†™å­—ï¼Œä½†å®ƒä»¬æ—è¾¹çš„ç©ºåœ°ä¸ä¼šæŒ¡ä½APP */
.clock,
.motto-container {
  pointer-events: auto !important;
}

/* 3. é™åˆ¶è¯­å½•å®¹å™¨çš„é«˜åº¦ï¼Œé˜²æ­¢å®ƒæ— é™è†¨èƒ€ */
/* è¿™å°±æ˜¯å¯¼è‡´â€œå¼¹å‡ºè¾“å…¥å†å²â€çš„çœŸå‡¶ï¼Œé™åˆ¶å®ƒçš„é«˜åº¦ï¼Œå®ƒå°±è€å®äº† */
.motto-container {
  max-height: 50px;
  /* é™åˆ¶æœ€å¤§é«˜åº¦ */
  overflow: visible;
  /* å…è®¸å†…å®¹æ˜¾ç¤º */
  margin-bottom: 20px;
  /* ä¿æŒé—´è· */
  display: flex;
  /* ç¡®ä¿å¸ƒå±€ç´§å‡‘ */
  justify-content: center;
  align-items: center;
}

/* 4. æå‡ç¬¬ä¸€æ’ APP çš„å±‚çº§ */
/* å¼ºè¡Œè®© APP æµ®åœ¨æ‰€æœ‰â€œéšå½¢è¾¹æ¡†â€çš„ä¸Šé¢ï¼Œç¡®ä¿æ€ä¹ˆç‚¹éƒ½èƒ½ç‚¹åˆ° */
.app-grid {
  position: relative;
  z-index: 20 !important;
  /* æ¯” header-content é«˜ */
}

/* 5. é¡ºæ‰‹ä¿®å¤é‚£ä¸ªæ‹¼å†™é”™è¯¯çš„ padding (7cap -> 0) */
.content {
  /* åŸä»£ç å†™é”™æˆäº† 7capï¼Œå¯¼è‡´æµè§ˆå™¨è§£æå¼‚å¸¸ï¼Œå¯èƒ½é€ æˆå¸ƒå±€é”™ä½ */
  padding: 70px 0 0 0 !important;
}

.monologueToggle {
  /* 1. ã€æ ¸å¿ƒã€‘è®©å®½åº¦é€‚åº”å†…å®¹ï¼Œä¸å†éœ¸å æ•´è¡Œ */
  width: fit-content !important;

  /* 3. å¦‚æœæ˜¯ Flex å¸ƒå±€é‡Œçš„å­å…ƒç´ ï¼Œé˜²æ­¢è¢«æ‹‰ä¼¸ */
  align-self: flex-start;
  /* å¦‚æœé å·¦ */
  /* align-self: flex-end;    <-- å¦‚æœæ˜¯é å³çš„æ¶ˆæ¯ï¼Œå¯èƒ½éœ€è¦è¿™ä¸ª */

  /* 4. ç¨å¾®å‡å°‘ä¸€ç‚¹å†…è¾¹è·ï¼Œè®©å®ƒçœ‹èµ·æ¥æ›´ç²¾è‡´ */
  padding: 4px 8px;
  /* ä¸Šä¸‹4pxï¼Œå·¦å³8px */
}

#device-skin {
  position: absolute;

  /* 1. æŠŠå®ƒå®šåˆ°å±å¹•çš„æ­£ä¸­å¿ƒ */
  top: 50%;
  left: 50%;

  /* 2. åˆ©ç”¨ä½ç§»ä¿®æ­£ï¼Œè®©ä¸­å¿ƒç‚¹å¯¹é½ */
  transform: translate(-50%, -50%);

  /* 3. å°ºå¯¸æ§åˆ¶ï¼šé»˜è®¤å®½400é«˜720ï¼Œå¯é€šè¿‡JSè°ƒæ•´ */
  width: 400px;
  height: 720px;
  /* é«˜åº¦è‡ªåŠ¨ï¼Œä¿æŒæ¯”ä¾‹ï¼Œé˜²æ­¢å˜å½¢ */

  /* 4. ç¡®ä¿å®ƒåœ¨æœ€ä¸Šé¢ï¼Œä¸”ä¸æŒ¡æ‰‹ */
  z-index: 9999;
  pointer-events: none;

  /* 5. ç¡®ä¿æ˜¾ç¤º */
  display: block;
}

div[id$="-screen"] {
  overflow: hidden;
  /* å†…å®¹æº¢å‡ºè£å‰ª */
  /* ä¿æŒåœ†è§’ */
  /* ç¡®ä¿å®ƒä»¬ä¾ç„¶å æ»¡ 375x700 çš„ç©ºé—´ */
  width: 100%;
  height: 100%;
}

.content-mask {
  /* 1. å æ»¡æ•´ä¸ªæ‰‹æœºæ¡†çš„ç©ºé—´ */
  width: 100%;
  height: 100%;

  /* 2. å…³é”®ï¼šå®ƒæ˜¯æ–°çš„è£å‰ªè€… */

  /* å¿…é¡»å’Œä½ æ‰‹æœºæ¡†çš„åœ†è§’ä¸€è‡´ */
  overflow: hidden;
  border-radius: 40px;
  /* æº¢å‡ºéšè—ï¼Œåˆ‡æ‰ç›´è§’ï¼ */

  /* 3. ä¿æŒå®šä½åŸºå‡†ï¼Œé˜²æ­¢é‡Œé¢çš„ç»å¯¹å®šä½å…ƒç´ ä¹±è·‘ */
  position: relative;

  /* 4. ä¿®å¤ Safari ä¸Šçš„åœ†è§’ bug */
  transform: translateZ(0);
}

/* æ‰€æœ‰ App ç•Œé¢çš„é€šç”¨æ ·å¼ */
.app-screen {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: #f4f4f4;
  /* ä½ çš„ App èƒŒæ™¯é¢œè‰² */
  z-index: 100;

  /* å…³é”® 1ï¼šåˆå§‹çŠ¶æ€å½»åº•éšè— */
  visibility: hidden;
  opacity: 0;
  transform: scale(0.85);

  /* å…³é”® 2ï¼šå®šä¹‰åŠ¨ç”»æ•ˆæœ (0.45ç§’å›å¼¹) */
  transition: transform 0.45s cubic-bezier(0.34, 1.56, 0.64, 1),
    opacity 0.3s ease, visibility 0.3s;

  will-change: transform, opacity;
}

/* å…³é”® 3ï¼šå½“ JS åŠ å…¥ .active ç±»æ—¶è§¦å‘çš„çŠ¶æ€ */
.app-screen.active {
  visibility: visible;
  opacity: 1;
  transform: scale(1);
}

/* --- æ–°å¢æ ·å¼ï¼šåå­—+æ°”æ³¡çš„å‚ç›´å®¹å™¨ --- */
/* ========================================= */
/* 1. åŸºç¡€å¸ƒå±€å®¹å™¨ (Row & Column)            */
/* ========================================= */

/* æ¶ˆæ¯è¡Œï¼šç¡®ä¿å¤´åƒé¡¶å¯¹é½ */
.message-row {
  align-items: flex-start !important;
  margin-bottom: 8px;
  /* æ¶ˆæ¯é—´è· */
}

/* å¤´åƒå®¹å™¨ï¼šåªè´Ÿè´£è£…å›¾ç‰‡ */
.chat-avatar-container {
  display: flex;
  flex-direction: column;
  justify-content: flex-start;
  padding-top: 5px;
  /* å¾®è°ƒï¼šè·Ÿåå­—å¯¹é½ */
  flex-shrink: 0;
  /* é˜²æ­¢å¤´åƒè¢«å‹æ‰ */
}

/* æ¶ˆæ¯åˆ—å®¹å™¨ï¼šåŒ…å«ã€åå­—ã€‘+ã€æ°”æ³¡ã€‘çš„å‚ç›´å®¹å™¨ */
.msg-column {
  display: flex;
  flex-direction: column;
  /* å…³é”®ä¿®å¤ï¼šæ”¶ç¼©åˆ°å†…å®¹å¤§å°ï¼Œè€Œä¸æ˜¯å æ»¡ 85% */
  width: fit-content;
  max-width: 85%;
  min-width: 0;
  flex-shrink: 1;
  justify-content: center;
}

/* ========================================= */
/* 2. æ°”æ³¡ä¸åŒ…è£¹å±‚ (Wrapper & Bubble)        */
/* ========================================= */

/* æ°”æ³¡å¤–å£³ï¼šè‡ªé€‚åº”æ–‡å­—å®½åº¦ */
.group-message-wrapper,
.message-content-wrapper {
  width: fit-content;
  /* å…³é”®ï¼šæ–‡å­—å°‘å°±çª„ï¼Œæ–‡å­—å¤šå°±å®½ */
  max-width: 100%;
  /* ä¸è¶…è¿‡ msg-column çš„é™åˆ¶ */
  box-sizing: border-box;
}

/* ç¾¤èŠæ°”æ³¡æœ¬ä½“è®¾ç½® */
.gp-bubble {
  white-space: pre-wrap;
  /* ä¿ç•™æ¢è¡Œ */
  word-break: break-word;
  /* é•¿å•è¯æ¢è¡Œ */
  min-height: 20px;
  /* æœ€å°é«˜åº¦ */
  /* æ³¨æ„ï¼šmax-width äº¤ç»™çˆ¶çº§ wrapper æ§åˆ¶ï¼Œè¿™é‡Œè®¾ 100% å³å¯ */
  max-width: 85%;
}

/* ========================================= */
/* 3. æ˜µç§°æ ·å¼ (Nickname)                    */
/* ========================================= */
.group-nickname {
  font-size: 11px;
  color: #999;
  margin-bottom: 4px;
  /* åå­—å’Œæ°”æ³¡çš„é—´è· */
  padding: 0 2px;
  /* å·¦å³ç¨å¾®ç•™ç‚¹ç©ºéš™ */
  line-height: 1.2;
}

/* ========================================= */
/* 4. å·¦å³å¯¹é½é€»è¾‘ (Left / Right)            */
/* ========================================= */

/* --- å·¦ä¾§ (AI/ç¾¤å‹) --- */
.message-row .msg-column {
  align-items: flex-start;
  /* é å·¦ */
  margin-left: 6px;
  /* ç¦»å¤´åƒçš„è·ç¦» */
}

.message-row .group-nickname {
  text-align: left;
}

/* --- å³ä¾§ (User/æˆ‘) --- */
.message-row.is-user {
  justify-content: flex-end !important;
  /* æ•´è¡Œé å³ */
}

.message-row.is-user .msg-column {
  align-items: flex-end;
  /* é å³ */
  margin-right: 6px;
  /* ç¦»å¤´åƒçš„è·ç¦» */
  margin-left: 0;
  /* æ¸…é™¤å·¦è¾¹è· */
}

.message-row.is-user .group-nickname {
  text-align: right;
}

/* å¼ºåˆ¶é‡ç½® User æ°”æ³¡çš„è¾¹è·ï¼Œé˜²æ­¢æ ·å¼å¹²æ‰° */
.message-row.is-user .group-message-wrapper {
  margin: 0 !important;
  align-items: flex-end;
  /* æ°”æ³¡é å³ */
}

/* ========================================= */
/* 5. æ ·å¼å‡€åŒ–é˜²ç«å¢™ (Style Purifier)        */
/* æ ¸å¿ƒä½œç”¨ï¼šå»æ‰é»˜è®¤çš„æ°”æ³¡æ ·å¼ï¼Œå…è®¸JSæ³¨å…¥é¢œè‰² */
/* ========================================= */

.group-message-wrapper .chat-bubble,
.group-message-wrapper .gp-bubble {
  /* 1. æ‰’æ‰é»˜è®¤çš„æ¸å˜èƒŒæ™¯å’Œé˜´å½± */
  background-image: none !important;
  background: none !important;
  /* ç¡®ä¿èƒŒæ™¯è‰²é€æ˜ï¼Œç­‰å¾… JS æ³¨å…¥ background-color */
  box-shadow: none !important;
  border: none !important;
  font-size: 14px !important;
}

/* ========================================================== */
/* === 6. æ°”æ³¡å®½åº¦ç»ˆæä¿®å¤ (Fix Width Conflict) === */
/* ========================================================== */

/* 1. å¼ºåˆ¶è§£é™¤æ—§ä»£ç çš„ 60% å°å° */
/* ç°åœ¨çš„å®½åº¦ç”± .msg-column (85%) ç»Ÿä¸€æ§åˆ¶ï¼Œæ°”æ³¡å†…éƒ¨åªè¦å¡«æ»¡å³å¯ */

.group-message-wrapper .chat-bubble,
.group-message-wrapper .gp-bubble {
  max-width: 100% !important;
  /* å…³é”®ï¼å…è®¸æ°”æ³¡å æ»¡ msg-column ç»™çš„ç©ºé—´ */
  min-width: auto !important;
  /* è§£é™¤å¥‡æ€ªçš„æœ€å°å®½åº¦é™åˆ¶ */
  width: fit-content !important;
  /* å…³é”®ï¼è®©æ°”æ³¡æ ¹æ®æ–‡å­—å†…å®¹è‡ªé€‚åº”å®½åº¦ */

  /* ä¿®å¤å¯¹é½é—®é¢˜ */
  text-align: left !important;
  /* ä¸è¦ç”¨ justifyï¼Œä¼šå¯¼è‡´çŸ­å¥å­å­—é—´è·æå…¶éš¾çœ‹ */
  text-justify: auto !important;

  /* ç¡®ä¿æ¢è¡Œé€»è¾‘æ­£ç¡® */
  white-space: pre-wrap !important;
  /* ä¿ç•™æ‰‹åŠ¨æ¢è¡Œ */
  word-break: break-word !important;
  /* è‹±æ–‡å•è¯å¤ªé•¿æ—¶æ‰åˆ‡æ–­ */
  word-wrap: break-word !important;
  /* å…¼å®¹æ—§æµè§ˆå™¨ */
  box-sizing: border-box !important;
}
.gp-bubble,
.chat-bubble {
  min-width: auto !important;
  width: fit-content !important;
  text-align: left !important;
  text-justify: auto !important;
  white-space: pre-wrap !important;
  word-break: break-word !important;
  word-wrap: break-word !important;
}

/* 2. ç¡®ä¿ç¾¤èŠå¤–å£³ä¹Ÿæ˜¯è‡ªé€‚åº”çš„ */
.group-message-wrapper {
  max-width: 100% !important;
  width: fit-content !important;
}

/* 3. ç¡®ä¿åˆ—å®¹å™¨æ‹¥æœ‰æœ€é«˜æ§åˆ¶æƒ */
.msg-column {
  max-width: 60% !important;
  /* è¿™é‡Œæ‰æ˜¯çœŸæ­£çš„å±å¹•å®½åº¦é™åˆ¶ */
}

.message-content-wrapper.user {
  max-width: 80% !important;
}

.message-content-wrapper.ai {
  max-width: 80% !important;
}

/* æ•´ä¸ªå¯¹è¯æ¡†å¤–å£³ */
/* 1. å¯¹è¯æ¡†å¤–å£³ - ä¼˜åŒ–é€šé€åº¦ä¸å†…é™·æ„Ÿ */
.modal-content {
  box-sizing: border-box;
  background: rgba(255, 255, 255, 0.7);
  /* æé«˜ç™½åº¦ï¼Œè§£å†³ç°è’™è’™çš„æ„Ÿè§‰ */
  backdrop-filter: blur(25px) saturate(160%);
  /* å¢åŠ é¥±å’Œåº¦ï¼Œè®©èƒŒæ™¯æ›´æ¸…æ¾ˆ */
  -webkit-backdrop-filter: blur(25px) saturate(160%);

  /* æ ¸å¿ƒè¾¹æ¡†ï¼šçº¯ç™½äº®è¾¹ */
  border: 0.4px solid rgba(255, 255, 255, 0.8);

  /* ç»„åˆé˜´å½±ï¼šå¤–å‘æ•£é˜´å½± + å…³é”®å†…å‡¹é™·é˜´å½± */
  box-shadow: 0px 20px 40px rgba(0, 0, 0, 0.1),
    /* å¤–å±‚ç¯å¢ƒé˜´å½± */ 0px 2px 4px rgba(0, 0, 0, 0.05),
    /* åº•éƒ¨å¾®å°æŠ•å½± */ inset 1px 1px 10px rgba(0, 0, 0, 0.03),
    /* é¡¶éƒ¨å†…å‹ç—•ï¼šäº§ç”Ÿæ·±é‚ƒæ„Ÿ */ inset -1px -1px 5px rgba(255, 255, 255, 0.5);
  /* åº•éƒ¨å†…é«˜å…‰ï¼šäº§ç”Ÿç‰©ç†åšåº¦ */

  border-radius: 18px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* 2. å¤´éƒ¨åŒºåŸŸ */
.modal-header {
  position: relative !important;
  height: 10px;
  background: rgba(255, 255, 255, 0.2);
  border-bottom: 0.4px solid rgba(0, 0, 0, 0.05);
  /* ææ·¡çš„åˆ†å‰²çº¿ */
  display: flex;
  align-items: center;
  justify-content: center;
}

.modal-header h2 {
  color: #1c1c1e;
  font-size: 15px;
  font-weight: 600;
  letter-spacing: -0.2px;
}

/* 3. å…³é—­æŒ‰é’® - ä¿æŒæç®€ç»ç’ƒæ„Ÿ */
.modal-close-button {
  position: absolute !important;
  right: 16px;
  width: 28px;
  height: 28px;
  background: rgba(0, 0, 0, 0.03) !important;
  /* å¾®æš—çš„åœ†åœˆ */
  border: none !important;
  border-radius: 50%;
  color: #8e8e93 !important;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px !important;
  cursor: pointer;
  box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.05);
}

/* 4. è¾“å…¥åŒºåŸŸ - å¢å¼ºâ€œé›•åˆ»â€æ„Ÿ */

.form-input:focus,
.form-textarea:focus {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(0, 122, 255, 0.4);
  box-shadow: inset 1px 1px 3px rgba(0, 0, 0, 0.04),
    0 0 0 3px rgba(0, 122, 255, 0.1);
}

/* 5. åº•éƒ¨ä¸ä¿å­˜æŒ‰é’® - è§£å†³çªå…€æ„Ÿ */
.modal-footer {
  text-align: center;
}

.save-button {
  padding: 10px 32px;
  font-size: 15px;
  font-weight: 600;
  /* æ”¹ä¸ºâ€œé«˜çº§è“ç»ç’ƒâ€ï¼šåŠé€æ˜è“ + å¼ºäº®è¾¹ */
  color: #007aff;
  background: rgba(0, 122, 255, 0.08);
  border: 0.4px solid rgba(0, 122, 255, 0.3);
  border-radius: 18px;
  cursor: pointer;
  transition: all 0.2s ease;
  /* ç§»é™¤é‡é˜´å½±ï¼Œæ”¹ç”¨å‘å…‰æ„Ÿ */
  box-shadow: 0px 4px 12px rgba(0, 122, 255, 0.1);
}

.save-button:hover {
  background: rgba(0, 122, 255, 0.15);
  box-shadow: 0px 6px 16px rgba(0, 122, 255, 0.2);
  transform: translateY(-1px);
}

.save-button:active {
  background: rgba(0, 122, 255, 0.2);
  transform: translateY(0.5px);
  box-shadow: inset 1px 1px 4px rgba(0, 0, 0, 0.1);
}

/* 6. å…¶ä»–ç»†èŠ‚è¾…åŠ©ç±» */
.modal-body {
  padding: 20px 16px;
  background: transparent;
}

.form-group-inline {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
}

.form-group-inline input {
  width: 60px;
  text-align: center;
}

/* 2. ç»Ÿä¸€è¾“å…¥æ¡†å®¹å™¨å¸ƒå±€ */
.form-group {
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  /* æ ¸å¿ƒï¼šç¡®ä¿å­å…ƒç´ ï¼ˆlabelå’Œinputï¼‰åœ¨å®¹å™¨å†…æ°´å¹³å±…ä¸­ */
  gap: 8px;
  margin-bottom: 16px;
}

/* 3. æ ‡ç­¾å¯¹é½ï¼šå®½åº¦ä¸è¾“å…¥æ¡†ä¿æŒä¸€è‡´ */
.form-group label {
  /* width: 90%; */
  /* ä¸ä¸‹æ–¹ input å®½åº¦ä¿æŒä¸€è‡´ */
  text-align: left;
  font-size: 14px;
  color: #333;
}

/* 4. è¾“å…¥æ§ä»¶ï¼šä¿®æ­£æº¢å‡ºä¸å±…ä¸­ */


/* 5. ç‰¹æ®Šå¤„ç†ï¼šå†…è”è¾“å…¥æ¡†ï¼ˆä¾‹å¦‚ä¸Šä¸‹æ–‡è®°å¿†æ•°å­—æ¡†ï¼‰ */
/* ä¸è¦æŠŠå®ƒå’Œä¸Šé¢çš„å¤§è¾“å…¥æ¡†å†™åœ¨ä¸€èµ·ï¼Œå› ä¸ºå®ƒçš„å®½åº¦é€šå¸¸å¾ˆå° */
.form-group-inline {
  width: 90%;
  /* è¿™ä¸€è¡Œæ•´ä½“å  90%ï¼Œç¡®ä¿å·¦å³å¯¹é½çº¿ä¸€è‡´ */
  display: flex;
  justify-content: space-between;
  /* æ–‡æœ¬åœ¨å·¦ï¼Œæ•°å­—æ¡†åœ¨å³ */
  align-items: center;
  margin: 0 auto 16px auto;
  /* è‡ªèº«å±…ä¸­ */
}

.form-group-inline input {
  width: 60px !important;
  /* æ•°å­—æ¡†ä¸éœ€è¦ 80% æˆ– 90% */
  text-align: center;
  /* ç»§æ‰¿ç»ç’ƒè´¨æ„Ÿ */
  background: rgba(255, 255, 255, 0.4);
  border: 0.4px solid rgba(255, 255, 255, 0.6);
  box-shadow: inset 1px 1px 4px rgba(0, 0, 0, 0.06);
  border-radius: 8px;
  padding: 5px;
}

/* --- ç¼–è¾‘æ¨¡å¼ä¸“ç”¨æ ·å¼ --- */

/* 1. çˆ¶å®¹å™¨åœ¨ç¼–è¾‘æ—¶â€œéšèº«â€ï¼Œé˜²æ­¢å‡ºç°åŒé‡æ°”æ³¡èƒŒæ™¯ */
.chat-bubble.editing-mode-active,
.gp-user-bubble.editing-mode-active,
.gp-ai-bubble.editing-mode-active {
  background-color: transparent !important;
  background-image: none !important;
  box-shadow: none !important;
  border: none !important;
  padding: 0 !important;
  /* è®© textarea æ’‘æ»¡ */
  min-height: auto !important;
}

/* 2. ç¼–è¾‘æ¡†çš„åŸºç¡€æ ·å¼ */
textarea.editing-bubble {
  display: block;
  box-sizing: border-box;
  width: 100%;
  resize: none;
  border: none;
  outline: none;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  padding: 10px 14px;
  /* è¿™é‡Œè¦æ¨¡æ‹ŸåŸæ°”æ³¡çš„ padding */
  border-radius: 10px;
  /* æ¨¡æ‹Ÿåœ†è§’ */
  overflow: hidden;
  margin: 0;
}

/* ========================================= */
/* === Group Chat Bubble Styling === */
/* ========================================= */
.gp-ai-bubble,
.gp-user-bubble {
  padding: 8px 12px;
  border-radius: 18px;
  text-align: justify;
  text-justify: inter-ideograph;
  line-height: 1.5;
  word-wrap: break-word;
  font-size: 14px;
  min-width: 20px;
  /* æ€§èƒ½ä¼˜åŒ–ï¼šç§»é™¤æ˜‚è´µçš„ box-shadow */
  /* box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05); */
  position: relative;
  /* æ€§èƒ½ä¼˜åŒ–ï¼šç¼©çŸ­åŠ¨ç”»æ—¶é—´ï¼Œä½¿ç”¨æ›´æ ‡å‡†çš„æ›²çº¿ */
  animation: bubble-scale-in 0.3s cubic-bezier(0.2, 0.8, 0.2, 1) forwards;
  transform-origin: center center;
  /* æ€§èƒ½ä¼˜åŒ–ï¼šå¼ºåˆ¶GPUåŠ é€Ÿ */
  transform: translateZ(0);
  will-change: transform;
  backface-visibility: hidden;
  /* ç§»é™¤ä¸å¿…è¦çš„ transition */
  /* transition: box-shadow 0.3s ease; */
}

.gp-user-bubble {
  background: black;
  color: white;
  align-self: flex-start;
}

.gp-ai-bubble {
  background-color: #ffffff;
  color: #1c1c1e;
  border: 0.5px solid rgba(0, 0, 0, 0.04);
  align-self: flex-start;
}

/* === ç¾¤èŠçº¯è¡¨æƒ…åŒ…æ ·å¼ï¼ˆæ— æ°”æ³¡ï¼‰ === */
.sticker-bubble-plain {
  max-width: 150px;
  max-height: 150px;
  border-radius: 0;
  background: transparent;
  padding: 0;
  border: none;
  box-shadow: none;
  animation: bubble-scale-in 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55)
    forwards;
}

/* ========================================= */
/* === ç¾¤èŠå¸ƒå±€å®Œå…¨éš”ç¦»æ ·å¼ (åªå½±å“ç¾¤èŠï¼) === */
/* ========================================= */

/* ç¾¤èŠæ¶ˆæ¯è¡ŒåŸºç¡€å¸ƒå±€ */
#chat-messages-container[data-context-mode="group"] .message-row {
  display: flex !important;
  flex-direction: row !important;
  align-items: flex-start !important;
  width: 100% !important;
  margin-bottom: 12px !important;
}

/* ç¾¤èŠæ¶ˆæ¯åˆ—å®¹å™¨ - æ”¶ç¼©åˆ°å†…å®¹å¤§å° */
#chat-messages-container[data-context-mode="group"] .msg-column {
  display: flex !important;
  flex-direction: column !important;
  width: fit-content !important;
  max-width: 70% !important;
  flex-shrink: 1 !important;
}

/* ç¾¤èŠç”¨æˆ·æ¶ˆæ¯ - æ•´è¡Œé å³ */
#chat-messages-container[data-context-mode="group"] .message-row.is-user {
  justify-content: flex-end !important;
}

/* ç¾¤èŠç”¨æˆ·æ¶ˆæ¯åˆ— - å†…å®¹é å³å¯¹é½ */
#chat-messages-container[data-context-mode="group"]
  .message-row.is-user
  .msg-column {
  align-items: flex-end !important;
  margin-right: 8px !important;
  margin-left: 0 !important;
}

/* ç¾¤èŠAIæ¶ˆæ¯åˆ— - å†…å®¹é å·¦å¯¹é½ */
#chat-messages-container[data-context-mode="group"]
  .message-row:not(.is-user)
  .msg-column {
  align-items: flex-start !important;
  margin-left: 8px !important;
  margin-right: 0 !important;
}

/* ç¾¤èŠå¤´åƒå®¹å™¨ - å›ºå®šå¤§å°ä¸æ”¶ç¼© */
#chat-messages-container[data-context-mode="group"] .chat-avatar-container {
  flex-shrink: 0 !important;
  width: auto !important;
}

/* ç¾¤èŠç”¨æˆ· wrapper - æ”¶ç¼©åˆ°å†…å®¹å¤§å°ï¼ */
#chat-messages-container[data-context-mode="group"]
  .group-message-wrapper.user {
  width: fit-content !important;
  /* ä¸è¦100%ï¼æ”¶ç¼©åˆ°å†…å®¹å¤§å° */
  max-width: 100% !important;
  margin-left: auto !important;
  /* è‡ªåŠ¨å·¦è¾¹è·è®©å®ƒé å³ */
  margin-right: 0 !important;
}

/* ç¾¤èŠAI wrapper - æ”¶ç¼©åˆ°å†…å®¹å¤§å° */
#chat-messages-container[data-context-mode="group"] .group-message-wrapper.ai {
  width: fit-content !important;
  max-width: 100% !important;
  margin-left: 0 !important;
  margin-right: auto !important;
  /* è‡ªåŠ¨å³è¾¹è·è®©å®ƒé å·¦ */
}

/* =========================================
   å…¨å±æ¨¡å¼æ ·å¼é€‚é… (åŸºäº body.fullscreen-mode)
   ========================================= */

/* 1. å½“ body å¼€å¯å…¨å±æ¨¡å¼æ—¶ -> æ‰‹æœºå¤–æ¡†å˜ç›´è§’ã€é“ºæ»¡ */
body.fullscreen-mode .phone-frame {
  width: 100vw !important;
  /* å¼ºåˆ¶å®½åº¦ 100% è§†å£ */
  height: 100vh !important;
  /* å¼ºåˆ¶é«˜åº¦ 100% è§†å£ */
  border-radius: 0 !important;
  /* æ ¸å¿ƒï¼šå˜ç›´è§’ */
  border: none !important;
  /* å»é™¤è¾¹æ¡† */
  margin: 0 !important;

  /* å¼ºåˆ¶å¤ä½å®šä½ï¼Œé˜²æ­¢å±…ä¸­é€»è¾‘å¹²æ‰° */
  top: 0 !important;
  left: 0 !important;
  transform: none !important;
  box-shadow: none !important;
  /* å»æ‰é˜´å½±ï¼Œçœ‹ç€æ›´åƒåŸç”Ÿå…¨å± */
}

/* 2. å½“ body å¼€å¯å…¨å±æ¨¡å¼æ—¶ -> å†…éƒ¨é®ç½©ä¹Ÿå˜ç›´è§’ */
/* è¿™ä¸€æ­¥å¦‚æœä¸åŠ ï¼Œå››ä¸ªè§’è¿˜æ˜¯ä¼šè¢«é‡Œé¢çš„ mask åˆ‡æˆåœ†çš„ */
body.fullscreen-mode .content-mask {
  border-radius: 0 !important;
}

/* 3. å½“ body å¼€å¯å…¨å±æ¨¡å¼æ—¶ -> éšè—æ‰‹æœºå¤–å£³å›¾ç‰‡ */
/* å¿…é¡»éšè—ï¼Œå¦åˆ™å±å¹•ä¸­é—´ä¼šæ‚¬æµ®ç€ä¸€ä¸ªæ‰‹æœºæ¡†å›¾ç‰‡ */
body.fullscreen-mode #device-skin {
  display: none !important;
}

/* 4. (å¯é€‰) ç¡®ä¿å†…éƒ¨å±å¹•å®¹å™¨ä¹Ÿæ˜¯ç›´è§’ */
body.fullscreen-mode div[id$="-screen"] {
  border-radius: 0 !important;
}

/* ================= è½¬è´¦å¡ç‰‡ (æœˆç™½ä¸é’é»›ç‰ˆ / Moon White & Indigo Grey) ================= */

/* å¡ç‰‡å®¹å™¨ */
.transfer-card {
  width: 230px !important; /* è°ƒæ•´ä¸ºæ–°è§†è§‰å®½åº¦ */
  height: auto !important; /* å†…å®¹è‡ªé€‚åº” */
  background: #ffffff;
  border: 1px solid rgba(69, 73, 77, 0.12); /* --london-border */
  border-radius: 14px !important;
  box-shadow: 0 2px 6px rgba(69, 73, 77, 0.04); /* --london-shadow-soft */
  overflow: hidden;
  display: flex;
  flex-direction: column;
  position: relative;
  cursor: pointer;
  user-select: none;
  transition: all 0.3s ease;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.transfer-card:hover {
  box-shadow: 0 4px 12px rgba(69, 73, 77, 0.08); /* --london-shadow */
  transform: translateY(-1px);
}

/* å¤´éƒ¨åŒºåŸŸ - ç»Ÿä¸€ä¸ºçº¯ç™½èƒŒæ™¯ï¼Œä¸å†éšçŠ¶æ€å˜è‰² */
.transfer-header {
  height: auto;
  min-height: 72px;
  background-color: #ffffff !important;
  display: flex;
  align-items: center;
  padding: 16px;
  gap: 12px;
}

/* çŠ¶æ€é¢œè‰²æ§åˆ¶ - æ”¹ä¸ºä½œç”¨äº Icon Box */
/* å¾…å¤„ç†ï¼šé’é»› (é»˜è®¤) */
.transfer-card.status-pending .transfer-icon-box {
  background-color: #45494d !important; /* --london-accent */
}

/* å·²æ”¶æ¬¾ï¼šå†·è°ƒç»¿/è“ */
.transfer-card.status-accepted .transfer-icon-box {
  background-color: #8fb3c4 !important; /* --london-success */
}

/* å·²é€€å›ï¼šä½é¥±å’Œçº¢ */
.transfer-card.status-refused .transfer-icon-box {
  background-color: #d4a5a5 !important; /* --london-danger */
}

/* å›¾æ ‡å®¹å™¨ (åœ†è§’çŸ©å½¢ï¼Œä¸å†æ˜¯åœ†å½¢) */
.transfer-icon-box {
  width: 42px;
  height: 42px;
  border-radius: 12px;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  transition: background 0.3s;
  margin-right: 0; /* JSæ³¨å…¥æ ·å¼å·²å¤„ç†gap */
}

/* SVG å›¾æ ‡æœ¬ä½“ */
.transfer-icon-svg {
  width: 22px !important;
  height: 22px !important;
  fill: #ffffff;
  display: block;
}

/* ä¿¡æ¯åŒºåŸŸ */
.transfer-info {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  overflow: hidden;
}

.transfer-amount {
  font-size: 17px;
  font-weight: 600;
  color: #45494d; /* --london-text-primary */
  line-height: 1.2;
  margin-bottom: 2px;
}

.transfer-status-text {
  font-size: 13px;
  color: #5f6b73; /* --london-text-secondary */
  font-weight: 400;
  opacity: 1;
}

/* åº•éƒ¨å¤‡æ³¨åŒº */
.transfer-footer {
  height: auto;
  flex: initial;
  padding: 10px 16px;
  background: #f4f7f9; /* --london-card-alt */
  border-top: 1px solid rgba(69, 73, 77, 0.12);
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 11px;
  color: #9fa6ab; /* --london-text-muted */
}

/* é®ç½©å±‚ (æç®€ç™½é£æ ¼) */
.transfer-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(255, 255, 255, 0.96); /* é«˜ä»¥å¤ªå®è‰² */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s;
  z-index: 10;
}

.transfer-card.status-selecting .transfer-overlay {
  opacity: 1;
  pointer-events: auto;
}

/* æŒ‰é’®æ ·å¼ä¼˜åŒ– --london é£æ ¼ */
.transfer-actions {
  display: flex;
  gap: 12px;
  margin-bottom: 20px;
}

.action-btn {
  padding: 8px 18px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 500;
  cursor: pointer;
  margin: 0;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
  color: white;
}

.btn-accept {
  background: #8fb3c4 !important; /* --london-success */
  color: white !important;
}
.btn-refuse {
  background: #d4a5a5 !important; /* --london-danger */
  color: white !important;
}

.overlay-title {
  font-size: 15px;
  font-weight: 600;
  color: #45494d;
  margin-bottom: 16px;
}

.overlay-cancel {
  font-size: 13px;
  color: #5f6b73;
  cursor: pointer;
  padding: 4px 8px;
  opacity: 0.7;
}

/* === èŠå¤©è®¾ç½®ç•Œé¢æ ·å¼ä¼˜åŒ– === */

/* ç»Ÿä¸€æŒ‰é’®æ ·å¼ */
#chat-settings-modal .form-button-secondary {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 8px 12px;
  font-size: 12px;
  font-weight: 500;
  color: #007aff;
  background-color: rgba(0, 122, 255, 0.1);
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s ease;
  min-width: 70px;
  text-align: center;
}

#chat-settings-modal .form-button-secondary:hover {
  background-color: rgba(0, 122, 255, 0.15);
}

#chat-settings-modal .form-button-secondary:active {
  background-color: rgba(0, 122, 255, 0.2);
  transform: scale(0.98);
}

/* ç»Ÿä¸€æ ‡ç­¾æ ·å¼ */
#chat-settings-modal .form-group > label {
  display: block;
  font-size: 13px;
  font-weight: 600;
  color: #333;
  margin-bottom: 8px;
  text-align: left;
}

/* å¼€å…³è¡Œæ ·å¼ç»Ÿä¸€ */
#chat-settings-modal
  .form-group
  label[style*="justify-content: space-between"] {
  font-size: 13px !important;
  font-weight: 500 !important;
}

/* å£çº¸æŒ‰é’®å®¹å™¨ */
#chat-settings-modal .wallpaper-buttons {
  display: flex;
  gap: 8px;
}

#chat-settings-modal .wallpaper-buttons .form-button-secondary {
  flex: 1;
}

/* ç»Ÿä¸€textareaæ ·å¼ */
#chat-settings-modal .form-textarea {
  width: 100%;
  box-sizing: border-box;
  font-size: 12px;
  padding: 10px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  resize: vertical;
  min-height: 60px;
}

/* ç»Ÿä¸€inputæ ·å¼ */
#chat-settings-modal .form-input {
  font-size: 13px;
  padding: 8px 10px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
}

/* åˆ†ç»„é—´è· */
#chat-settings-modal .form-group {
  margin-bottom: 16px;
}

/* åˆ—æ ‡é¢˜ */
#chat-settings-modal .settings-column h4 {
  font-size: 15px;
  font-weight: 600;
  color: #1c1c1e;
  margin-bottom: 16px;
  padding-bottom: 8px;
  border-bottom: 1px solid #eee;
}

/* === å¯æŠ˜å è®¾ç½®åˆ†ç±»æ ·å¼ (ä¿®å¤ç‰ˆï¼šæ›´é€šé€ã€æ— åœ†è§’èƒŒæ™¯ SVG) === */

/* 1. Modal Content: å¢å¼ºé€šé€æ„Ÿ */
#chat-settings-modal .modal-content {
  background: rgba(255, 255, 255, 0.65) !important; /* æ›´é€æ˜ */
  backdrop-filter: blur(40px) saturate(200%); /* åŠ å¼ºæ¨¡ç³Šå’Œé¥±å’Œåº¦ */
  -webkit-backdrop-filter: blur(40px) saturate(200%);
  border-radius: 24px !important;
  border: 1px solid rgba(255, 255, 255, 0.3) !important;
  padding: 0 !important;
  /* overflow: visible !important; å°è¯•è§£å†³é®æŒ¡ï¼Œä½†è¿™ä¼šç ´ååœ†è§’ï¼Œå…ˆä¸åŠ¨ */
}

/* 2. Modal Body: å®Œå…¨é€æ˜ä¸”å…è®¸æ»šåŠ¨ */
#chat-settings-modal .modal-body {
  background-color: transparent !important;
  padding: 20px !important;
  overflow-y: auto !important; /* ç¡®ä¿è‡ªèº«å¯æ»šåŠ¨ */
  max-height: 70vh !important;
  mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 20px,
    black calc(100% - 20px),
    transparent 100%
  ); /* è¾¹ç¼˜æ¸å˜é®ç½©ä¼˜åŒ–æ»šåŠ¨ä½“éªŒ */
  -webkit-mask-image: linear-gradient(
    to bottom,
    transparent 0%,
    black 20px,
    black calc(100% - 20px),
    transparent 100%
  );
}

#chat-settings-modal .settings-accordion {
  display: flex;
  flex-direction: column;
  gap: 12px;
  padding-bottom: 20px; /* åº•éƒ¨ç•™ç™½ */
}

/* 3. è®¾ç½®å¡ç‰‡ï¼šä¿®å¤å±•å¼€é®æŒ¡ï¼Œç§»é™¤ overflow:hidden */
#chat-settings-modal .settings-section {
  border: none;
  border-radius: 16px;
  background: rgba(255, 255, 255, 0.45); /* å¾ˆè–„çš„åŠé€æ˜ */
  /* overflow: hidden;  <-- ç½ªé­ç¥¸é¦–ï¼ç§»é™¤å®ƒï¼Œå…è®¸å†…å®¹æ’‘å¼€ */
  transition: all 0.3s ease;
  /* è§£å†³å±•å¼€æ—¶è¢«æˆªæ–­é—®é¢˜ */
  height: auto !important;
  flex-shrink: 0; /* é˜²æ­¢è¢«å‹ç¼© */
}

#chat-settings-modal .settings-section[open] {
  background: rgba(255, 255, 255, 0.65); /* å±•å¼€æ—¶ç¨å¾®ä¸é€æ˜ä¸€ç‚¹ï¼Œçªå‡ºæ˜¾ç¤º */
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06); /* å±•å¼€æ—¶åŠ é˜´å½± */
  z-index: 10;
}

#chat-settings-modal .settings-section summary {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 16px 18px;
  background: transparent; /* å®Œå…¨é€šè¿‡çˆ¶å…ƒç´ èƒŒæ™¯ */
  cursor: pointer;
  font-size: 16px;
  font-weight: 600;
  color: #1d1d1f;
  user-select: none;
  list-style: none;
  border-radius: 16px; /* é—­åˆæ—¶çš„åœ†è§’ */
}

#chat-settings-modal .settings-section[open] summary {
  border-bottom: 1px solid rgba(0, 0, 0, 0.05);
  border-radius: 16px 16px 0 0; /* å±•å¼€æ—¶åªæœ‰ä¸Šé¢æœ‰åœ†è§’ */
}

#chat-settings-modal .settings-section summary:hover {
  background: rgba(255, 255, 255, 0.2);
}

/* 4. å›¾æ ‡æ ·å¼é‡æ„ï¼šç§»é™¤åœ†è§’èƒŒæ™¯ï¼Œç›´æ¥æ˜¾ç¤ºå½©è‰² SVG */
#chat-settings-modal .settings-section summary .section-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  background-color: transparent !important; /* ç§»é™¤èƒŒæ™¯è‰² */
  box-shadow: none !important; /* ç§»é™¤é˜´å½± */
  margin-right: 12px;
}

#chat-settings-modal .settings-section summary .section-icon svg {
  width: 22px;
  height: 22px;
  stroke-width: 1px; /* çº¿æ¡ç¨ç²—ä¸€ç‚¹ */
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1)); /* ç»™çº¿æ¡åŠ ä¸€ç‚¹æŠ•å½± */
}

/* 5. Chevron ç®­å¤´ */
#chat-settings-modal .settings-section summary .chevron {
  color: rgba(60, 60, 67, 0.4);
  display: flex;
  align-items: center;
}
#chat-settings-modal .settings-section summary .chevron svg {
  width: 18px;
  height: 18px;
  transition: transform 0.3s;
}
#chat-settings-modal .settings-section[open] summary .chevron svg {
  transform: rotate(180deg);
}

/* 6. å†…å®¹åŒºåŸŸ */
#chat-settings-modal .settings-section .section-content {
  padding: 0 18px;
  background: transparent;
}

#chat-settings-modal .settings-section .section-content > div {
  padding: 14px 0;
}

/* ä¿®å¤å†…å®¹è¢«é®æŒ¡é—®é¢˜ï¼šç¡®ä¿å†…å®¹é«˜åº¦è‡ªç„¶æ’‘å¼€ */
#chat-settings-modal .avatar-uploader {
  height: auto !important;
}

#chat-settings-modal .settings-section .section-content > div:last-child {
  border-bottom: none;
}

/* å±é™©åŒºåŸŸ */
#chat-settings-modal .danger-section summary span {
  color: #ff3b30;
}

/* æŒ‰é’®è¡Œ */
#chat-settings-modal .button-row {
  border-bottom: none !important;
  padding-top: 16px !important;
  padding-bottom: 16px !important;
}

/* è¾“å…¥æ¡†ï¼šèå…¥èƒŒæ™¯çš„åŠé€æ˜ç° */
#chat-settings-modal .form-input,
#chat-settings-modal .form-textarea {
  background-color: rgba(118, 118, 128, 0.12) !important;
  border: none;
  border-radius: 10px;
  padding: 10px 12px;
  font-size: 15px;
  color: #1d1d1f;
  transition: all 0.2s;
}
#chat-settings-modal .form-input:focus,
#chat-settings-modal .form-textarea:focus {
  background-color: rgba(118, 118, 128, 0.08) !important;
  box-shadow: 0 0 0 2px rgba(0, 122, 255, 0.3);
}

/* æ¬¡çº§æŒ‰é’®æ ·å¼ä¼˜åŒ– */
#chat-settings-modal .form-button-secondary {
  background-color: rgba(0, 122, 255, 0.1);
  color: #007aff;
  border-radius: 8px;
  font-weight: 500;
  backdrop-filter: blur(5px);
}
#chat-settings-modal .form-button-secondary:hover {
  background-color: rgba(0, 122, 255, 0.15);
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
@media (prefers-color-scheme: dark) {
  #chat-settings-modal .modal-content {
    background: rgba(30, 30, 30, 0.75) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 20px 50px -12px rgba(0, 0, 0, 0.5),
      inset 0 1px 0 rgba(255, 255, 255, 0.1) !important;
    color: #fff;
  }
  #chat-settings-modal .modal-header,
  #chat-settings-modal .modal-footer {
    border-color: rgba(255, 255, 255, 0.12) !important;
  }

  #chat-settings-modal .settings-section {
    background: rgba(255, 255, 255, 0.1);
  }

  #chat-settings-modal .settings-section summary {
    color: #fff;
  }

  #chat-settings-modal .settings-section summary:active {
    background-color: rgba(255, 255, 255, 0.08); /* æ·±è‰²æ¨¡å¼ä¸‹çš„æŒ‰ä¸‹å˜äº® */
  }

  #chat-settings-modal .settings-section[open] summary {
    border-bottom-color: rgba(255, 255, 255, 0.12);
  }

  #chat-settings-modal .settings-section .section-content > div {
    border-bottom-color: rgba(255, 255, 255, 0.12);
  }

  #chat-settings-modal .form-input,
  #chat-settings-modal .form-textarea {
    background-color: rgba(255, 255, 255, 0.1) !important;
    color: #fff;
  }
  #chat-settings-modal .form-input:focus,
  #chat-settings-modal .form-textarea:focus {
    background-color: rgba(255, 255, 255, 0.15) !important;
  }

  #chat-settings-modal .toggle-row span {
    color: #fff;
  }
  #chat-settings-modal .form-group > label {
    color: #ddd;
  }
}

/* === iOS é£æ ¼å¼€å…³ (Switch) - ç»ˆæä¿®å¤ç‰ˆ === */
/* å®¹å™¨ï¼šå¼ºåˆ¶å›ºå®šå®½é«˜ï¼Œç»å¯¹ç¦æ­¢è¢« Flex æ‹‰ä¼¸ */
#chat-settings-modal .switch {
  position: relative !important;
  display: inline-block !important;
  width: 51px !important; /* æ ¸å¿ƒï¼šå›ºå®šå®½åº¦ */
  min-width: 51px !important;
  max-width: 51px !important;
  height: 31px !important;
  margin: 0 !important;
  padding: 0 !important;
  flex: 0 0 51px !important; /* æ ¸å¿ƒï¼šåœ¨ Flex å¸ƒå±€ä¸­ç¦æ­¢ä¼¸ç¼© */
  flex-shrink: 0 !important;
  vertical-align: middle;
}

/* éšè— checkbox */
#chat-settings-modal .switch input {
  opacity: 0;
  width: 0;
  height: 0;
  position: absolute;
  margin: 0;
}

/* æ»‘æ§½ (èƒŒæ™¯é•¿æ¡) */
#chat-settings-modal .slider {
  position: absolute !important;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #e9e9ea !important; /* æœªé€‰ä¸­ç°è‰² */
  transition: 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
  border-radius: 31px !important; /* å½»åº•åœ†è§’èƒ¶å›Š */
  width: 100% !important;
  height: 100% !important;
  border: none !important;
}

/* æ»‘å— (ç™½è‰²åœ†çƒ) */
#chat-settings-modal .slider:before {
  position: absolute !important;
  content: "";
  height: 27px !important;
  width: 27px !important;
  left: 2px !important;
  bottom: 2px !important;
  background-color: white !important;
  transition: 0.3s cubic-bezier(0.25, 0.1, 0.25, 1);
  border-radius: 50% !important;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important;
  transform: translateX(0);
}

/* é€‰ä¸­çŠ¶æ€ï¼šèƒŒæ™¯å˜ç»¿ */
#chat-settings-modal input:checked + .slider {
  background-color: #3a3a3c !important; /* iOS Green */
}

/* é€‰ä¸­çŠ¶æ€ï¼šæ»‘å—å³ç§» */
#chat-settings-modal input:checked + .slider:before {
  transform: translateX(20px) !important;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
@media (prefers-color-scheme: dark) {
  #chat-settings-modal .slider {
    background-color: #39393d !important;
  }
}

/* === ä¿®å¤æŒ‰é’®ç»„é—´è· (ä¿®å¤ç‰ˆ) === */
#chat-settings-modal .button-row {
  display: flex !important; /* å…³é”®ï¼šæ­¤å‰æ¼äº†è¿™ä¸€è¡Œ */
  flex-wrap: nowrap !important;
  border-bottom: none !important;
  padding-top: 16px !important;
  padding-bottom: 16px !important;
  gap: 12px !important;
  justify-content: space-between !important;
}

#chat-settings-modal .form-button-secondary {
  flex: 1 !important; /* å‡åˆ†å®½åº¦ */
  margin: 0 !important;
  min-width: 0; /* é˜²æ­¢æº¢å‡º */
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
}

/* === æ–°å¢ï¼šå¼€å…³è¡Œæ ·å¼ (å…³é”®ä¿®å¤) === */
#chat-settings-modal .toggle-row {
  display: flex !important;
  justify-content: space-between !important; /* ä¸¤ç«¯å¯¹é½ */
  align-items: center !important; /* å‚ç›´å±…ä¸­ */
  width: 100% !important;
  min-height: 44px; /* ä¿è¯æœ€å°ç‚¹å‡»åŒºåŸŸé«˜åº¦ */
}

/* ç¡®ä¿ toggle-row é‡Œçš„æ–‡æœ¬å®¹å™¨ä¸ä¼šæ— é™æ’‘å®½ */
#chat-settings-modal .toggle-row > div:first-child {
  flex: 1;
  padding-right: 12px; /* ç»™å¼€å…³ç•™ç‚¹è·ç¦» */
}

/* === ä¿®å¤è§’è‰²åˆ‡æ¢å™¨ (Role Switcher) === */
#chat-settings-modal .role-switcher {
  display: flex;
  align-items: center;
  justify-content: center; /* ç¡®ä¿å±…ä¸­ */
  gap: 16px; /* é€‚åº¦é—´è· */
  margin-bottom: 20px;
  padding-top: 2px !important;
  padding-bottom: 2px !important;
  position: relative !important; /* ä¿æŒæµå¸ƒå±€ */
  width: 100%;
  margin-left: auto;
  margin-right: auto;
}

/* å¼ºåˆ¶ä¿®å¤è§’è‰²åˆ‡æ¢å™¨ä¸­çš„ switch å˜å½¢é—®é¢˜ */
#chat-settings-modal .role-switcher .switch {
  width: 51px !important;
  height: 31px !important;
  flex: 0 0 51px !important; /* ç¦æ­¢ä¼¸ç¼© */
  min-width: 51px !important;
}

#chat-settings-modal .switch-label {
  font-size: 16px;
  font-weight: 500;
  color: #8e8e93;
  transition: color 0.3s;
  white-space: nowrap; /* é˜²æ­¢æ¢è¡Œ */
  line-height: 31px; /* å¯¹é½å¼€å…³é«˜åº¦ */
}

#chat-settings-modal .switch-label.active {
  color: #1d1d1f;
  font-weight: 600;
  transform: scale(1.05); /* æ¿€æ´»ç¨å¾®æ”¾å¤§ */
}
@media (prefers-color-scheme: dark) {
  #chat-settings-modal .switch-label.active {
    color: #fff;
  }
}

/* === ä¼˜åŒ–å¤´åƒä¸Šä¼ åŒºåŸŸå¸ƒå±€ (æ–°) === */
#chat-settings-modal .compact-avatar-row {
  display: flex;
  align-items: flex-start;
  gap: 16px;
  margin-bottom: 16px;
  padding: 0 8px; /* å¢åŠ å†…è¾¹è·é˜²æ­¢è¾¹ç¼˜è´´åˆ */
}

/* å·¦åˆ—ï¼šå¤´åƒ + æŒ‰é’® */
#chat-settings-modal .avatar-left-col {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  width: 72px; /* ç¨å¾®è°ƒçª„ */
  flex-shrink: 0;
}

#chat-settings-modal .avatar-preview {
  width: 64px; /* ç¨å¾®è°ƒå°ä¸€ç‚¹ */
  height: 64px;
  border-radius: 50%;
  object-fit: cover;
  border: 1px solid rgba(0, 0, 0, 0.1);
  background: #f2f2f7;
}

/* å¾®å‹æ›´æ¢æŒ‰é’® - ä¼˜åŒ– */
#chat-settings-modal .change-avatar-btn-small {
  font-size: 12px;
  padding: 4px 10px;
  background: rgba(0, 122, 255, 0.1); /* æµ…è“èƒŒæ™¯ */
  color: #007aff;
  border: none;
  border-radius: 14px;
  cursor: pointer;
  white-space: nowrap;
  font-weight: 500;
}
#chat-settings-modal .change-avatar-btn-small:hover {
  background: rgba(0, 122, 255, 0.2);
}

/* å³åˆ—ï¼šåå­—è¾“å…¥æ¡† */
#chat-settings-modal .avatar-right-col {
  flex: 1;
  display: flex;
  flex-direction: column;
  justify-content: center;
  padding-top: 4px;
  min-width: 0; /* flex å­å…ƒç´ æº¢å‡ºä¿®å¤ */
}

/* æ ‡ç­¾æ ·å¼å¾®è°ƒ */
#chat-settings-modal label {
  font-size: 12px;

  margin-bottom: 6px;
  display: block;
  font-weight: 500;

  flex: 1;
  overflow-y: auto !important;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
  max-height: calc(100% - 50px);
}

#theme-presets-list,
#bubble-presets-list {
  padding: 10px 0;
}

/* ============================================================ */
/* === äº•å­—æ£‹æ¸¸æˆæ‚¬æµ®çª—æ ·å¼ (Tic-Tac-Toe Floating Window) ===   */
/* ============================================================ */

.game-floating-window {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 320px;
  max-width: 90vw;
  background: linear-gradient(145deg, #fff8f8 0%, #fff0f5 50%, #f8f0ff 100%);
  border-radius: 28px;
  box-shadow: 0 20px 60px rgba(255, 150, 180, 0.25),
    0 8px 25px rgba(200, 150, 255, 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.8);
  border: 2px solid rgba(255, 200, 220, 0.4);
  z-index: 2000;
  overflow: hidden;
  animation: gameWindowPopIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1);
  /* ä¿®å¤å¸ƒå±€ï¼šç¡®ä¿å†…å®¹å‚ç›´æ’åˆ— */
  display: flex;
  flex-direction: column;
}

@keyframes gameWindowPopIn {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.8);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

.game-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 20px;
  background: linear-gradient(
    135deg,
    rgba(255, 182, 193, 0.3) 0%,
    rgba(221, 160, 221, 0.2) 100%
  );
  border-bottom: 1px solid rgba(255, 200, 220, 0.3);
}

.game-title {
  font-size: 18px;
  font-weight: 700;
  color: #e75480;
  letter-spacing: 1px;
}

.game-close-btn {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(255, 100, 130, 0.15);
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #e75480;
}

.game-close-btn:hover {
  background: rgba(255, 100, 130, 0.3);
  transform: rotate(90deg);
}

.game-players {
  display: flex;
  justify-content: space-between;
  padding: 16px 20px;
  gap: 12px;
}

.player {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
}

/* .player.user-player ä¸éœ€è¦ç‰¹æ®Šæ ·å¼ï¼Œä½¿ç”¨é»˜è®¤å³å¯ */

.player-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #fff;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  flex-shrink: 0;
}

.player-bubble {
  background: #fff;
  padding: 8px 12px;
  border-radius: 16px;
  font-size: 12px;
  color: #555;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
  max-width: 100px;
  word-wrap: break-word;
  line-height: 1.4;
  position: relative;
  max-height: 60px;
  overflow-y: auto;
  overflow-x: hidden;
}

.ai-player .player-bubble {
  border-bottom-left-radius: 4px;
}

.user-player .player-bubble {
  border-bottom-right-radius: 4px;
  background: linear-gradient(135deg, #ffe4ec 0%, #ffd4e5 100%);
}

.game-status {
  text-align: center;
  padding: 8px 20px;
  font-size: 13px;
  color: #888;
  font-weight: 500;
}

.game-board {
  display: grid !important;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  padding: 16px 24px;
  margin: 0 auto;
  max-width: 240px;
  min-height: 240px;
  visibility: visible !important;
  opacity: 1 !important;
}

.board-cell {
  aspect-ratio: 1;
  background: #fff !important;
  border-radius: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 1);
  cursor: pointer;
  display: flex !important;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  border: 2px solid rgba(255, 200, 220, 0.3);
  min-width: 60px;
  min-height: 60px;
}

.board-cell:hover:not(.occupied) {
  transform: scale(1.05);
  box-shadow: 0 6px 16px rgba(255, 150, 180, 0.2);
  border-color: rgba(255, 150, 180, 0.5);
}

.board-cell.occupied {
  cursor: default;
}

.board-cell img,
.board-cell .piece-avatar {
  width: 70%;
  height: 70%;
  border-radius: 50%;
  object-fit: cover;
}

.board-cell.winner {
  animation: winPulse 0.6s ease infinite alternate;
  border-color: #ffd700;
  box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
}

@keyframes winPulse {
  0% {
    transform: scale(1);
  }
  100% {
    transform: scale(1.08);
  }
}

.game-controls {
  padding: 16px 20px 20px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
}

.start-panel {
  display: flex;
  gap: 12px;
}

.game-btn {
  padding: 10px 24px;
  border-radius: 20px;
  border: none;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.25s ease;
  background: linear-gradient(135deg, #ffb6c1 0%, #dda0dd 100%);
  color: #fff;
  box-shadow: 0 4px 15px rgba(255, 150, 180, 0.3);
}

.game-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(255, 150, 180, 0.4);
}

.game-btn:active {
  transform: translateY(0);
}

/* äº•å­—æ£‹èŠå¤©è¾“å…¥å®¹å™¨ */
.game-chat-input-container {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
  max-width: 260px;
  padding: 6px;
  border-radius: 20px;
  background: rgba(255, 255, 255, 0.9);
  border: 2px solid rgba(255, 150, 180, 0.3);
  box-shadow: 0 2px 8px rgba(255, 150, 180, 0.15);
  transition: all 0.2s ease;
}

.game-chat-input-container:focus-within {
  border-color: rgba(255, 150, 180, 0.6);
  box-shadow: 0 4px 12px rgba(255, 150, 180, 0.25);
}

.game-chat-input {
  flex: 1;
  border: none;
  outline: none;
  background: transparent;
  padding: 6px 12px;
  font-size: 13px;
  color: #333;
  font-family: inherit;
}

.game-chat-input::placeholder {
  color: #e75480;
  opacity: 0.6;
}

.game-send-btn {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  border: none;
  background: linear-gradient(135deg, #ffb6c1 0%, #dda0dd 100%);
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
  box-shadow: 0 2px 8px rgba(255, 150, 180, 0.3);
}

.game-send-btn:hover {
  transform: scale(1.1);
  box-shadow: 0 4px 12px rgba(255, 150, 180, 0.4);
}

.game-send-btn:active {
  transform: scale(0.95);
}

.game-send-btn svg {
  stroke: #fff;
}

/* æ·±è‰²æ¨¡å¼é€‚é… */
.phone-frame.dark-mode .game-floating-window {
  background: linear-gradient(145deg, #2c1f2d 0%, #1e1e2e 50%, #1a1a2e 100%);
  border-color: rgba(255, 150, 180, 0.2);
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 8px 25px rgba(0, 0, 0, 0.3);
}

.phone-frame.dark-mode .game-header {
  background: linear-gradient(
    135deg,
    rgba(255, 100, 130, 0.15) 0%,
    rgba(180, 100, 200, 0.1) 100%
  );
  border-color: rgba(255, 150, 180, 0.15);
}

.phone-frame.dark-mode .game-title {
  color: #ffb6c1;
}

.phone-frame.dark-mode .game-close-btn {
  background: rgba(255, 100, 130, 0.2);
  color: #ffb6c1;
}

.phone-frame.dark-mode .player-bubble {
  background: #2a2a3a;
  color: #ccc;
}

.phone-frame.dark-mode .user-player .player-bubble {
  background: linear-gradient(135deg, #3a2a3a 0%, #4a2a4a 100%);
}

.phone-frame.dark-mode .game-status {
  color: #888;
}

.phone-frame.dark-mode .board-cell {
  background: #2a2a3a;
  border-color: rgba(255, 150, 180, 0.15);
}

.phone-frame.dark-mode .board-cell:hover:not(.occupied) {
  border-color: rgba(255, 150, 180, 0.4);
}

.phone-frame.dark-mode .game-chat-btn {
  background: rgba(40, 40, 50, 0.8);
  border-color: rgba(255, 150, 180, 0.3);
  color: #ffb6c1;
}

.phone-frame.dark-mode .game-chat-btn svg {
  stroke: #ffb6c1;
}

/* ============================================================ */
/* === è®¢å•åˆ†äº«å¡ç‰‡æ ·å¼ === */
/* ============================================================ */

.order-share-card-wrapper {
  background: transparent;
  padding: 0;
  max-width: 260px;
}

.order-share-card {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
    "Helvetica Neue", sans-serif;
}

.order-card-header {
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(10px);
  padding: 12px 16px;
  display: flex;
  align-items: center;
  gap: 8px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.2);
}

.order-card-header svg {
  flex-shrink: 0;
}

.order-card-header span {
  color: white;
  font-size: 15px;
  font-weight: 600;
  letter-spacing: 0.3px;
}

.order-card-body {
  padding: 14px 16px;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.order-section {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 12px;
}

.order-share-card .order-label {
  color: rgba(255, 255, 255, 0.85);
  font-size: 13px;
  font-weight: 500;
  flex-shrink: 0;
  min-width: 60px;
}

.order-share-card .order-value {
  color: white;
  font-size: 14px;
  font-weight: 600;
  text-align: right;
  flex: 1;
  word-break: break-word;
}

.order-share-card .order-items {
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1;
  text-align: right;
}

.order-share-card .order-item {
  color: white;
  font-size: 13px;
  font-weight: 500;
  line-height: 1.4;
}

.order-share-card .order-date {
  font-size: 12px;
  opacity: 0.95;
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 380px) {
  .order-share-card {
    max-width: 240px;
  }

  .order-card-header span {
    font-size: 14px;
  }

  .order-label,
  .order-value,
  .order-item {
    font-size: 12px;
  }
}

/* ============================================================ */
/* === é£è¡Œæ£‹æ¸¸æˆæ ·å¼ (Ludo Game Styles) ===                    */
/* ============================================================ */

/* CSS å˜é‡å®šä¹‰ - æ”¯æŒå¯¼å‡ºè‡ªå®šä¹‰ */
:root {
  --ludo-primary: #ffd93d; /* é˜³å…‰é»„ */
  --ludo-secondary: #6bcb77; /* è–„è·ç»¿ */
  --ludo-accent: #4d96ff; /* å¤©è“è‰² */
  --ludo-bg-start: #fffbeb; /* èƒŒæ™¯æ¸å˜èµ·å§‹ */
  --ludo-bg-end: #e8f5e9; /* èƒŒæ™¯æ¸å˜ç»“æŸ */
  --ludo-cell-normal: #fff8e7; /* æ™®é€šæ ¼å­ */
  --ludo-cell-bonus: #b4f8c8; /* å‰è¿›æ ¼å­ (ç»¿) */
  --ludo-cell-penalty: #ffadad; /* åé€€/åŸåœ°è¸æ­¥ (çº¢) */
  --ludo-cell-truth: #ffd6e8; /* çœŸå¿ƒè¯æ ¼å­ (ç²‰) */
  --ludo-cell-punishment: #c3b1e1; /* æƒ©ç½šæ ¼å­ (ç´«) */
  --ludo-cell-start: #a0c4ff; /* èµ·ç‚¹ (è“) */
  --ludo-cell-end: #ffe066; /* ç»ˆç‚¹ (é‡‘é»„) */
  --ludo-console-bg: #2d2d2d; /* æ¸¸æˆæœºå¤–å£³ */
  --ludo-console-inner: #1a1a1a; /* æ¸¸æˆæœºå†…éƒ¨ */
  --ludo-plane-ai: #ff6b6b; /* AIé£æœºé¢œè‰² (çº¢) */
  --ludo-plane-user: #4ecdc4; /* ç”¨æˆ·é£æœºé¢œè‰² (é’) */
  --ludo-border-radius: 24px;
}

/* é£è¡Œæ£‹æ‚¬æµ®çª— */
.ludo-floating-window {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 2000;
  animation: ludoWindowPopIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes ludoWindowPopIn {
  0% {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.7) rotate(-5deg);
  }
  100% {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1) rotate(0deg);
  }
}

/* æ¸¸æˆæœºè¾¹æ¡† - å¤å¤ä»»å¤©å ‚é£æ ¼ */
.ludo-console-frame {
  width: 340px;
  max-width: 95vw;
  background: linear-gradient(
    180deg,
    #3d3d3d 0%,
    var(--ludo-console-bg) 10%,
    #252525 100%
  );
  border-radius: var(--ludo-border-radius);
  padding: 12px;
  box-shadow: 0 0 0 3px #1a1a1a, 0 0 0 6px #4a4a4a,
    0 20px 60px rgba(0, 0, 0, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.1);
  position: relative;
}

/* æ¸¸æˆæœºé¡¶éƒ¨LEDè£…é¥° */
.ludo-console-top-decor {
  display: flex;
  justify-content: center;
  gap: 8px;
  padding: 6px 0 10px;
}

.console-led {
  width: 8px;
  height: 8px;
  border-radius: 50%;
  background: #333;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
}

.console-led:nth-child(1) {
  background: var(--ludo-plane-ai);
  box-shadow: 0 0 6px var(--ludo-plane-ai);
}
.console-led:nth-child(2) {
  background: var(--ludo-primary);
  box-shadow: 0 0 6px var(--ludo-primary);
}
.console-led:nth-child(3) {
  background: var(--ludo-secondary);
  box-shadow: 0 0 6px var(--ludo-secondary);
}

/* æ¸¸æˆå†…å±å¹•åŒºåŸŸ */
.ludo-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 14px;
  background: linear-gradient(
    135deg,
    var(--ludo-bg-start) 0%,
    var(--ludo-bg-end) 100%
  );
  border-radius: 16px 16px 0 0;
  border-bottom: 2px solid rgba(0, 0, 0, 0.05);
}

.ludo-title {
  font-size: 17px;
  font-weight: 700;
  color: #333;
  letter-spacing: 1px;
  text-shadow: 0 1px 0 #fff;
}

.ludo-header-actions {
  display: flex;
  gap: 8px;
}

.ludo-action-btn {
  width: 30px;
  height: 30px;
  border-radius: 8px;
  background: rgba(77, 150, 255, 0.15);
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  color: var(--ludo-accent);
}

.ludo-action-btn:hover {
  background: rgba(77, 150, 255, 0.25);
  transform: scale(1.05);
}

/* === Ludo Game Premium UI Facelift === */

.ludo-console-frame {
  width: 320px;
  background: #2b2b30; /* Dark matte plastic */
  border-radius: 24px;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5),
    inset 0 1px 1px rgba(255, 255, 255, 0.1),
    inset 0 -4px 8px rgba(0, 0, 0, 0.3);
  border: 1px solid #1a1a1d;
  position: relative;
  padding: 12px; /* Bezel thickness */
}

/* é¡¶éƒ¨çŠ¶æ€æ  - æ¨¡æ‹Ÿå±å¹•é¡¶éƒ¨ */
.ludo-header {
  background: #1a1a2e;
  padding: 10px 15px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-radius: 12px 12px 0 0;
  box-shadow: inset 0 -1px 0 rgba(255, 255, 255, 0.05);
}

.ludo-title {
  color: #fff;
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 0.5px;
  text-shadow: 0 0 10px rgba(77, 150, 255, 0.6);
}

.ludo-close-btn {
  width: 24px;
  height: 24px;
  border-radius: 50%; /* Circular button */
  background: #ff4757;
  border: 2px solid #ff6b81;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
  transition: all 0.2s ease;
}

.ludo-close-btn svg {
  color: white;
  width: 14px;
  height: 14px;
}

.ludo-close-btn:active {
  transform: scale(0.9);
  box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
}

/* ç©å®¶ä¿¡æ¯æ  - åµŒå…¥å±å¹•å†…éƒ¨ */
.ludo-players {
  display: flex;
  justify-content: space-between;
  padding: 10px 15px;
  background: #16213e; /* Deep screen blue */
  gap: 15px;
  position: relative;
}

.ludo-player {
  display: flex;
  align-items: center;
  gap: 10px;
  flex: 1;
}

.ludo-player.user-player {
  justify-content: flex-end;
}

.ludo-player-avatar {
  width: 40px;
  height: 40px;
  border-radius: 10px; /* Rounded square for digital feel */
  object-fit: cover;
  border: 2px solid rgba(255, 255, 255, 0.2);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
}

.ludo-player.ai-player .ludo-player-avatar {
  border-color: #ff6b6b;
}

.ludo-player.user-player .ludo-player-avatar {
  border-color: #4ecdc4;
}

.ludo-player-bubble {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(5px);
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 11px;
  color: #e0e0e0;
  max-width: 100px;
  border: 1px solid rgba(255, 255, 255, 0.05);
}

/* æ£‹ç›˜ä¸»å±å¹•åŒºåŸŸ */
.ludo-board-container {
  padding: 0 2px;
  background: #16213e;
  display: flex;
  justify-content: center;
  position: relative;
}

/* å±å¹•å…‰æ³½æ•ˆæœ */
.ludo-board-container::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(
    circle at 50% 30%,
    rgba(255, 255, 255, 0.03) 0%,
    transparent 60%
  );
  pointer-events: none;
  z-index: 10;
}

.ludo-board {
  width: 280px;
  height: 280px;
  /* é«˜çº§æ·±è‰²ç½‘æ ¼èƒŒæ™¯ */
  background-color: #0f3460;
  background-image: linear-gradient(
      rgba(255, 255, 255, 0.03) 1px,
      transparent 1px
    ),
    linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
  background-size: 20px 20px;
  border-radius: 12px;
  box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5),
    0 0 10px rgba(77, 150, 255, 0.1);
  position: relative;
  z-index: 1;
}

/* æ£‹ç›˜æ ¼å­æ–°æ ·å¼ */
.ludo-cell {
  fill: rgba(255, 255, 255, 0.08); /* åŠé€æ˜ç»ç’ƒæ„Ÿ */
  stroke: rgba(255, 255, 255, 0.15);
  stroke-width: 1.5;
  transition: all 0.3s ease;
}

.ludo-cell:hover {
  fill: rgba(255, 255, 255, 0.2);
  filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.3));
}

.ludo-cell.cell-start {
  fill: rgba(77, 150, 255, 0.3);
  stroke: #4d96ff;
}

.ludo-cell.cell-end {
  fill: rgba(255, 179, 0, 0.3);
  stroke: #ffb300;
}

.ludo-cell.cell-bonus {
  fill: rgba(46, 204, 113, 0.3); /* Green tint */
  stroke: #2ecc71;
}

.ludo-cell.cell-penalty {
  fill: rgba(231, 76, 60, 0.3); /* Red tint */
  stroke: #e74c3c;
}

.ludo-cell.cell-truth {
  stroke: #ffd6e8;
}

.ludo-cell-number {
  font-size: 9px;
  fill: rgba(255, 255, 255, 0.4);
  font-family: "Courier New", monospace; /* Digital font feel */
  font-weight: 700;
}

/* éª°å­å’Œæ“ä½œåŒº - æ¨¡æ‹Ÿå±å¹•ä¸‹æ–¹æ§ä»¶åŒº */
.ludo-controls {
  padding: 15px;
  background: #1a1a2e;
  border-radius: 0 0 12px 12px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  border-top: 1px solid rgba(255, 255, 255, 0.05);
}

.ludo-dice-area {
  width: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0;
  background: transparent;
}

.ludo-dice {
  width: 56px;
  height: 56px;
  background: #e0e0e0; /* Physical dice look */
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 6px 0 #999, /* 3D depth */ 0 10px 10px rgba(0, 0, 0, 0.3);
  cursor: pointer;
  transition: all 0.1s;
}

.ludo-dice:active {
  transform: translateY(4px);
  box-shadow: 0 2px 0 #999, 0 4px 6px rgba(0, 0, 0, 0.3);
}

.ludo-status {
  color: #4d96ff;
  font-family: "Courier New", monospace;
  font-size: 13px;
  text-shadow: 0 0 5px rgba(77, 150, 255, 0.4);
  margin-top: 8px;
}

/* æŒ‰é’®æ ·å¼ä¼˜åŒ– */
.ludo-btn {
  padding: 8px 20px;
  border-radius: 6px; /* slightly more squared */
  border: none;
  font-size: 12px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 1px;
  box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
  transition: all 0.1s;
}

.ludo-btn:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
}

.ludo-btn.primary {
  background: #ffce00;
  color: #1a1a1d;
  box-shadow: 0 4px 0 #c49f00;
}

.ludo-btn.primary:active {
  box-shadow: 0 2px 0 #c49f00;
}

/* æ¸¸æˆæœºåº•éƒ¨è£…é¥° */
.ludo-console-bottom-decor {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 20px 8px;
}

.console-dpad {
  width: 45px;
  height: 45px;
  position: relative;
}

.console-dpad::before,
.console-dpad::after {
  content: "";
  position: absolute;
  background: #1a1a1a;
  border-radius: 3px;
  box-shadow: 0 1px 1px rgba(255, 255, 255, 0.1);
}

.console-dpad::before {
  width: 15px;
  height: 45px;
  left: 50%;
  transform: translateX(-50%);
}

.console-dpad::after {
  width: 45px;
  height: 15px;
  top: 50%;
  transform: translateY(-50%);
}

.console-buttons {
  display: flex;
  gap: 12px;
  transform: rotate(-15deg);
}

.console-btn-a,
.console-btn-b {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 800;
  color: rgba(255, 255, 255, 0.9);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(0, 0, 0, 0.2);
  cursor: pointer; /* make them feel interactive */
}

.console-btn-a {
  background: radial-gradient(circle at 30% 30%, #ff6b6b, #ee5253);
  box-shadow: 0 4px 0 #b33939, 0 5px 10px rgba(0, 0, 0, 0.4);
}

.console-btn-a:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 #b33939, 0 2px 5px rgba(0, 0, 0, 0.4);
}

.console-btn-b {
  background: radial-gradient(circle at 30% 30%, #feca57, #ff9f43);
  box-shadow: 0 4px 0 #e67e22, 0 5px 10px rgba(0, 0, 0, 0.4);
  color: #fff;
}

.console-btn-b:active {
  transform: translateY(2px);
  box-shadow: 0 2px 0 #e67e22, 0 2px 5px rgba(0, 0, 0, 0.4);
}

/* éª°å­åŒºåŸŸä¿®æ­£ä¸ºä¸å±å¹•èƒŒæ™¯ä¸€è‡´ï¼Œæ¶ˆé™¤å‰²è£‚æ„Ÿ */
.ludo-dice-area {
  background: #16213e; /* match player/board area */
  margin: 0;
  padding: 10px 0;
  width: 100%;
}

/* éª°å­æœ¬èº«çš„å¯¹æ¯”åº¦ä¼˜åŒ– */
.ludo-dice {
  background: #f1f2f6;
  border: 1px solid #dcdde1;
  position: relative;
  /* ç¡®ä¿éª°å­å†…å®¹å¯è§ */
  display: flex;
  justify-content: center;
  align-items: center;
}

/* æ¢å¤è¯¯åˆ çš„éª°å­ç‚¹æ•°ç½‘æ ¼å¸ƒå±€ */
.dice-face {
  width: 100%;
  height: 100%;
  display: grid;
  grid-template-areas:
    "tl tc tr"
    "ml mc mr"
    "bl bc br";
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  padding: 8px;
  box-sizing: border-box;
}

.dot {
  background: #2f3542;
  width: 8px; /* Slightly smaller for better fit */
  height: 8px;
  border-radius: 50%;
  align-self: center;
  justify-self: center;
  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.5);
}

/* Dot positioning */
.dot.tl {
  grid-area: tl;
}
.dot.tc {
  grid-area: tc;
}
.dot.tr {
  grid-area: tr;
}
.dot.ml {
  grid-area: ml;
}
.dot.center {
  grid-area: mc;
}
.dot.mr {
  grid-area: mr;
}
.dot.bl {
  grid-area: bl;
}
.dot.bc {
  grid-area: bc;
}
.dot.br {
  grid-area: br;
}

/* ä¿®å¤æ¬¡çº§æŒ‰é’®æ ·å¼ (TAå…ˆé£) */
.ludo-btn.secondary {
  background: linear-gradient(135deg, #f5f6fa 0%, #dcdde1 100%);
  color: #2f3640;
  box-shadow: 0 4px 0 #bdc3c7;
}

.ludo-btn.secondary:active {
  box-shadow: 0 2px 0 #bdc3c7;
  transform: translateY(2px);
}

/* æ·±è‰²æ¨¡å¼é€‚é…å¾®è°ƒ */
.phone-frame.dark-mode .ludo-console-frame {
  border: 1px solid #333;
}

/* ============================================================ */
/* === è®°å¿†åŠŸèƒ½æ‰‹è´¦æœ¬æ ·å¼ (Memory Notebook Styles) ===         */
/* ============================================================ */

/* è®°å¿†å¼¹çª—å®¹å™¨ */
.memory-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: var(--z-modal);
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.memory-modal[style*="display: flex"],
.memory-modal[style*="display:flex"] {
  opacity: 1;
  pointer-events: auto;
}

/* é®ç½©å±‚ */
.memory-modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.6);
  backdrop-filter: blur(8px);
  z-index: 1;
}

/* å¼¹çª—ä¸»ä½“ - å¤å¤ç±³é»„é£æ ¼ */
.memory-modal-content {
  position: relative;
  width: 75%; /* æ‰‹æœºç«¯é»˜è®¤å æ»¡ */
  max-width: 600px;
  margin: 10px auto; /* ç¡®ä¿æœ‰ä¸Šä¸‹è¾¹è· */
  max-height: 90vh; /* ç¨å¾®å¢åŠ é«˜åº¦åˆ©ç”¨ç‡ */
  background-color: #faf5ee; /* æ‰‹è´¦å†…é¡µè‰² */
  border: 1px solid #d2b48c; /* æµ…æ£•è¾¹æ¡† */
  box-shadow: 2px 2px 5px rgba(139, 90, 43, 0.1); /* è½»å¾®é˜´å½± */
  border-radius: 2px;
  padding: 25px;
  z-index: 2;
  overflow: hidden;
  /* å¤å¤çº¹ç† */
  background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M11 18c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm48 25c3.866 0 7-3.134 7-7s-3.134-7-7-7-7 3.134-7 7 3.134 7 7 7zm-43-7c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm63 31c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM34 90c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zm56-76c1.657 0 3-1.343 3-3s-1.343-3-3-3-3 1.343-3 3 1.343 3 3 3zM12 86c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm28-65c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm23-11c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-6 60c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm29 22c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zM32 63c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm57-13c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-9-21c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM60 91c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM35 41c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2zM12 60c1.105 0 2-.895 2-2s-.895-2-2-2-2 .895-2 2 .895 2 2 2z' fill='%23D2B48C' fill-opacity='0.08' fill-rule='evenodd'/%3E%3C/svg%3E");

  font-family: "Noto Serif SC", "SimSun", serif;
  animation: fadeScaleIn 0.3s ease-out;
}

@keyframes fadeScaleIn {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* ä¹‹å‰å³é¡µçš„å®¹å™¨æ ·å¼é‡ç½®ï¼Œå› ä¸ºç°åœ¨æ˜¯å•é¡µ */
.memory-right-page {
  position: relative;
  width: 100%;
  margin: 0;
  padding: 0;
  background: transparent;
  box-shadow: none;
  overflow: hidden;
  height: 100%;
  display: flex;
  flex-direction: column;
}

/* æ»šåŠ¨åŒºåŸŸ */
.memory-panel {
  overflow-y: auto;
  max-height: calc(85vh - 100px);
  padding-right: 5px;
}

.memory-close-btn {
  position: absolute;
  top: 16px;
  right: 16px;
  width: 28px;
  height: 28px;
  border: 1px solid #c4a77d;
  background: linear-gradient(to bottom, #fff9f0 0%, #f5ebe0 100%);
  border-radius: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  z-index: 15;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12);
}

.memory-close-btn:hover {
  background: linear-gradient(to bottom, #fff5e6 0%, #efe1d2 100%);
  border-color: #8b4513;
  transform: scale(1.08);
}

.memory-close-btn svg {
  color: #8b4513;
  width: 14px;
  height: 14px;
}

/* Tab æ æ ·å¼ */
/* Tab æ æ ·å¼ - å¤å¤ */
.memory-tab-bar {
  display: flex;
  justify-content: center;
  margin-bottom: 20px;
  position: relative;
  background: transparent;
  border-bottom: none;
  padding: 0;
}

.memory-tab {
  padding: 8px 25px;
  margin: 0 10px;
  font-size: 18px;
  color: #8b5a2b;
  cursor: pointer;
  position: relative;
  border: none;
  border-bottom: 2px solid transparent;
  background: transparent;
  font-weight: normal;
  font-family: inherit;
  transition: all 0.2s;
}

.memory-tab:hover {
  color: #800020;
}

.memory-tab.active {
  border-bottom: 2px solid #800020;
  color: #800020;
}

.memory-tab::after {
  content: "";
  position: absolute;
  bottom: -5px;
  right: 0;
  width: 6px;
  height: 6px;
  background-color: #faf5ee;
  border-right: 1px solid #d2b48c;
  border-bottom: 1px solid #d2b48c;
  transform: rotate(45deg);
  display: none;
}

.memory-tab.active::after {
  display: block;
}

.memory-tab-indicator {
  display: none;
}

.memory-panel {
  display: none;
  flex-direction: column;
  gap: 15px;
}

.memory-panel.active {
  display: flex;
}

/* ç»Ÿè®¡å¡ç‰‡ - å¤å¤ä¿¡æ¯å¡ */
.memory-stats-card {
  border: 1px solid #d2b48c;
  padding: 15px;
  margin-bottom: 5px;
  background-color: #f9f2e7;
  border-radius: 0;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.memory-stat-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0;
  border-bottom: none;
}

.memory-stat-label {
  font-size: 16px;
  color: #5a3e2b;
  font-family: inherit;
}

.memory-stat-value {
  font-size: 16px;
  font-weight: bold;
  color: #8b5a2b;
  font-family: inherit;
}

/* ç§»é™¤å›æº¯é¡µé¢ä¸éœ€è¦çš„æ¨ªçº¿ */
#memory-retrospect-panel {
  background-image: none;
  padding-top: 0;
}

/* ç¾ç»Šé¡µé¢ - ç¿»é¡µå®¹å™¨ */
#memory-bonds-panel {
  position: relative;
  overflow: visible;
}

.memory-panel::-webkit-scrollbar {
  width: 5px;
}

.memory-panel::-webkit-scrollbar-track {
  background: rgba(139, 90, 43, 0.05);
  border-radius: 3px;
}

.memory-panel::-webkit-scrollbar-thumb {
  background: rgba(139, 90, 43, 0.15);
  border-radius: 3px;
}

.memory-panel::-webkit-scrollbar-thumb:hover {
  background: rgba(139, 90, 43, 0.25);
}

/* ç»Ÿè®¡å¡ç‰‡ */
.memory-stats-card {
  background: linear-gradient(
    to bottom,
    rgba(255, 248, 235, 0.9) 0%,
    rgba(245, 235, 215, 0.9) 100%
  );
  border-radius: 6px;
  padding: 14px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  border: 1px solid #d4b896;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

.memory-stat-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 3px 0;
  border-bottom: 1px dotted rgba(139, 69, 19, 0.15);
}

.memory-stat-item:last-child {
  border-bottom: none;
}

.memory-stat-label {
  font-size: 12px;
  color: #6b5344;
  font-family: "Noto Serif SC", serif;
}

.memory-stat-value {
  font-size: 16px;
  font-weight: 700;
  color: #8b4513;
  font-family: "Courier New", monospace;
}

/* è¡¨å•æ ·å¼ */
.memory-form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.memory-form-group label {
  font-size: 12px;
  font-weight: 600;
  color: #5b4636;
  font-family: "Noto Serif SC", serif;
}

/* è¡¨å•æ ·å¼ä¼˜åŒ– */
/* è¡¨å•æ ·å¼ - å¤å¤é£æ ¼ */
.memory-input-group {
  display: flex;
  gap: 8px;
  align-items: center;
}

.memory-icon-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 38px;
  height: 38px;
  border: 1px solid #d2b48c;
  background: #faf5ee;
  border-radius: 2px;
  cursor: pointer;
  color: #8b5a2b;
}

.memory-icon-btn:hover {
  background: #f9f2e7;
}

.memory-input,
.memory-select,
.memory-textarea {
  width: 100%;
  padding: 10px;
  border: 1px solid #d2b48c;
  background-color: #faf5ee;
  font-size: 14px;
  color: #5a3e2b;
  border-radius: 2px;
  /* æ‰“å­—æœºè¾“å…¥æ¡†æ•ˆæœ */
  font-family: "Courier New", monospace;
  letter-spacing: 0.5px;
  box-shadow: none;
  box-sizing: border-box; /* ä¿®å¤å³è¾¹æ¡†æ¶ˆå¤±é—®é¢˜ */
}

.memory-input:focus,
.memory-select:focus,
.memory-textarea:focus {
  outline: none;
  border-color: #8b5a2b;
  box-shadow: 0 0 3px rgba(139, 90, 43, 0.2);
}

.memory-textarea {
  resize: vertical;
  min-height: 100px;
  line-height: 1.6;
  background-image: none; /* ç§»é™¤åŸæ¥çš„æ¨ªçº¿ */
}

/* å¤å¤æŒ‰é’® */
.memory-btn-primary {
  width: 100%;
  padding: 12px;
  background: #8b5a2b;
  color: #faf5ee;
  border: none;
  font-size: 16px;
  cursor: pointer;
  border-radius: 2px;
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  font-family: inherit;
  box-shadow: none;
  margin-top: 10px;
}

.memory-btn-primary::after {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.2),
    transparent
  );
  animation: shine 1.5s infinite;
}

@keyframes shine {
  100% {
    left: 100%;
  }
}

.memory-btn-primary:hover {
  background: #724921;
  transform: none;
  box-shadow: none;
}

.memory-btn-primary svg {
  width: 18px;
  height: 18px;
}

/* è¡Œå†…ç¼–è¾‘æ ·å¼ */
.memory-inline-edit-textarea {
  width: 100%;
  min-height: 100px;
  padding: 10px;
  border: 1px solid #c4a77d;
  border-radius: 6px;
  background: #fff;
  font-family: inherit;
  font-size: 13px;
  line-height: 1.6;
  margin-bottom: 8px;
  color: #4a3728;
  resize: vertical;
}

.memory-inline-edit-textarea:focus {
  outline: none;
  border-color: #8b4513;
  box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
}

.memory-inline-edit-actions {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
}

.memory-edit-confirm-btn,
.memory-edit-cancel-btn {
  padding: 6px 16px;
  border-radius: 4px;
  font-size: 12px;
  cursor: pointer;
  border: none;
  transition: all 0.2s;
}

.memory-edit-confirm-btn {
  background: #8b4513;
  color: white;
}

.memory-edit-confirm-btn:hover {
  background: #723a0f;
}

.memory-edit-cancel-btn {
  background: #f0ebe4;
  color: #666;
}

.memory-edit-cancel-btn:hover {
  background: #e6e0d8;
}

/* æ”¯ç¥¨å®¹å™¨ - ç¿»é¡µå¸ƒå±€ */
.memory-cheques-container {
  position: relative;
  min-height: 400px;
}

/* æ”¯ç¥¨é¡µé¢å®¹å™¨ */
.memory-cheques-page {
  display: none;
  flex-direction: column;
  gap: 12px;
}

.memory-cheques-page.active {
  display: flex;
}

/* ç¿»é¡µæŒ‰é’® */
.memory-page-nav {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 16px;
  margin-top: 16px;
  padding-top: 12px;
  border-top: 1px dashed rgba(139, 90, 43, 0.2);
}

.memory-page-btn {
  width: 32px;
  height: 32px;
  border: 1px solid #c4a77d;
  background: linear-gradient(to bottom, #fff9f0 0%, #f5ebe0 100%);
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #8b4513;
}

.memory-page-btn:hover:not(:disabled) {
  background: linear-gradient(to bottom, #fff5e6 0%, #efe1d2 100%);
  border-color: #8b4513;
  transform: scale(1.1);
}

.memory-page-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.memory-page-info {
  font-size: 12px;
  color: #8b4513;
  font-family: "Courier New", monospace;
  min-width: 60px;
  text-align: center;
}

.memory-empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 30px 16px;
  color: #999;
  text-align: center;
}

.memory-empty-state svg {
  margin-bottom: 12px;
  opacity: 0.3;
}

.memory-empty-state p {
  margin: 3px 0;
  font-size: 13px;
}

.memory-empty-hint {
  font-size: 11px !important;
  color: #bbb !important;
}

/* è®°å¿†æ”¯ç¥¨å®¹å™¨ - å•å¡ç‰‡ç¿»é¡µæ¨¡å¼ */
.memory-cheques-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 10px 5px;
  min-height: 280px;
  position: relative;
}

/* ç¿»é¡µæ§ä»¶ */
.memory-cheque-pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 20px;
  padding: 12px 0;
  margin-top: 8px;
}

.memory-cheque-pagination .memory-page-btn {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.8);
  border: 1.5px solid rgba(139, 69, 19, 0.2);
  color: #8b4513;
  font-size: 14px;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.memory-cheque-pagination .memory-page-btn:hover:not(:disabled) {
  background: rgba(139, 69, 19, 0.1);
  border-color: #8b4513;
  transform: scale(1.1);
}

.memory-cheque-pagination .memory-page-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

.memory-cheque-pagination .memory-page-info {
  font-size: 13px;
  color: #8b4513;
  font-family: "Courier New", monospace;
  min-width: 60px;
  text-align: center;
  font-weight: 500;
}

/* è®°å¿†æ”¯ç¥¨å¡ç‰‡ - ç¼©å°ç‰ˆæœ¬ */
.memory-cheque-card {
  font-family: "Noto Serif SC", "Times New Roman", serif;
  /* å•å¡ç‰‡æ¨¡å¼ï¼šå›ºå®šå®½åº¦å±…ä¸­æ˜¾ç¤º */
  /* width: 100%; */
  max-width: 320px;
  display: none; /* é»˜è®¤éšè— */
  flex-shrink: 0;
  /* å¤å¤çº¸å¼ è´¨æ„Ÿ */
  background: linear-gradient(
    135deg,
    rgba(255, 248, 220, 0.95) 0%,
    rgba(253, 245, 230, 0.95) 50%,
    rgba(245, 235, 215, 0.95) 100%
  );
  background-color: #faf4e8;
  border: none;
  border-radius: 0;
  padding: 14px 16px; /* ç¼©å° padding */
  position: relative;
  margin: 6px 3px; /* ç¼©å° margin */
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05), 0 2px 3px rgba(0, 0, 0, 0.07),
    0 3px 6px rgba(0, 0, 0, 0.05), inset 0 0 25px rgba(139, 90, 43, 0.04);
  transition: all 0.3s ease;
  /* å¤å¤çº¸å¼ æ•ˆæœ */
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.04'/%3E%3C/svg%3E"),
    linear-gradient(
      135deg,
      rgba(255, 248, 220, 0.95) 0%,
      rgba(253, 245, 230, 0.95) 50%,
      rgba(245, 235, 215, 0.95) 100%
    );
}

/* é‚®ç¥¨é”¯é½¿è¾¹æ¡† */
.memory-cheque-card::before {
  content: "";
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  background: radial-gradient(
        circle at 7px -2.5px,
        transparent 4px,
        #8b4513 4px,
        #8b4513 5px,
        transparent 5px
      )
      repeat-x top,
    radial-gradient(
        circle at 7px calc(100% + 2.5px),
        transparent 4px,
        #8b4513 4px,
        #8b4513 5px,
        transparent 5px
      )
      repeat-x bottom,
    radial-gradient(
        circle at -2.5px 7px,
        transparent 4px,
        #8b4513 4px,
        #8b4513 5px,
        transparent 5px
      )
      repeat-y left,
    radial-gradient(
        circle at calc(100% + 2.5px) 7px,
        transparent 4px,
        #8b4513 4px,
        #8b4513 5px,
        transparent 5px
      )
      repeat-y right;
  background-size: 14px 5px, 14px 5px, 5px 14px, 5px 14px;
  z-index: -1;
  pointer-events: none;
}

/* å³ä¸Šè§’è£…é¥°å°ç«  - ç¼©å° */
.memory-cheque-card::after {
  content: "è¨˜æ†¶";
  position: absolute;
  top: 8px;
  right: 8px;
  width: 38px; /* ç¼©å° */
  height: 38px;
  border: 2.5px double #c41e3a;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 10px; /* ç¼©å° */
  font-weight: 700;
  color: #c41e3a;
  transform: rotate(-15deg);
  opacity: 0.6;
  font-family: "Noto Serif SC", serif;
  letter-spacing: 1.5px;
}

.memory-cheque-card:hover {
  box-shadow: 0 2px 2px rgba(0, 0, 0, 0.07), 0 3px 6px rgba(0, 0, 0, 0.09),
    0 6px 12px rgba(0, 0, 0, 0.07), inset 0 0 25px rgba(139, 90, 43, 0.06);
  transform: translateY(-2px) rotate(-0.3deg);
}

.memory-cheque-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 10px; /* ç¼©å° */
  padding-bottom: 7px;
  border-bottom: 1.5px solid #d4b896;
  background-image: linear-gradient(
    to right,
    transparent,
    #d4b896 10%,
    #d4b896 90%,
    transparent
  );
  background-size: 100% 1.5px;
  background-position: bottom;
  background-repeat: no-repeat;
}

.memory-cheque-number {
  font-size: 11px; /* ç¼©å° */
  color: #8b4513;
  font-weight: 700;
  font-family: "Courier New", monospace;
  letter-spacing: 0.8px;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
}

.memory-cheque-date {
  font-size: 10px; /* ç¼©å° */
  color: #a67c52;
  font-style: italic;
}

.memory-cheque-content {
  font-size: 12px; /* ç¼©å° */
  line-height: 1.8;
  color: #4a3728;
  margin-bottom: 10px;
  padding: 8px 5px 8px 0; /* å³ä¾§å¢åŠ paddingé˜²æ­¢æ»šåŠ¨æ¡é®æŒ¡æ–‡å­— */
  white-space: pre-wrap;
  word-wrap: break-word;
  text-shadow: 0 0 1px rgba(0, 0, 0, 0.04);
  /* é™åˆ¶é«˜åº¦å¹¶å…è®¸æ»šåŠ¨ï¼Œé˜²æ­¢å†…å®¹è¿‡é•¿æ’‘ç ´å¸ƒå±€ */
  max-height: 150px;
  overflow-y: auto;
  /* å¤å¤ä¿¡çº¸æ¨ªçº¿æ•ˆæœ - è°ƒæ•´é—´è· */
  background-image: repeating-linear-gradient(
    to bottom,
    transparent,
    transparent 22px,
    rgba(139, 90, 43, 0.1) 22px,
    rgba(139, 90, 43, 0.1) 23px
  );
  background-position: 0 12px;
  background-attachment: local; /* ç¡®ä¿èƒŒæ™¯éšæ»šåŠ¨æ¡æ»šåŠ¨ */
}

/* æ”¯ç¥¨å†…å®¹æ»šåŠ¨æ¡æ ·å¼ */
.memory-cheque-content::-webkit-scrollbar {
  width: 4px;
}
.memory-cheque-content::-webkit-scrollbar-thumb {
  background: rgba(139, 90, 43, 0.2);
  border-radius: 2px;
}
.memory-cheque-content::-webkit-scrollbar-thumb:hover {
  background: rgba(139, 90, 43, 0.4);
}

.memory-cheque-footer {
  display: flex;
  align-items: center;
  gap: 6px;
  padding-top: 7px;
  border-top: 1px dashed #c4a77d;
  margin-top: 6px;
}

.memory-cheque-actions {
  display: flex;
  gap: 8px;
  margin-top: 10px;
  padding-top: 6px;
}

.memory-cheque-btn {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 4px;
  padding: 7px 10px; /* ç¼©å° */
  border: 1px solid #c4a77d;
  background: linear-gradient(to bottom, #fff9f0 0%, #f5ebe0 100%);
  border-radius: 3px;
  font-size: 11px; /* ç¼©å° */
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  font-family: "Noto Serif SC", serif;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
}

.memory-cheque-btn:hover {
  background: linear-gradient(to bottom, #fff5e6 0%, #efe1d2 100%);
  border-color: #8b4513;
  box-shadow: 0 2px 3px rgba(139, 90, 43, 0.12);
}

.memory-cheque-btn:active {
  transform: translateY(1px);
  box-shadow: none;
}

.memory-cheque-btn svg {
  width: 12px; /* ç¼©å° */
  height: 12px;
}

.memory-cheque-btn.edit-btn {
  color: #5b4636;
}

.memory-cheque-btn.edit-btn:hover {
  color: #3d2914;
}

.memory-cheque-btn.toggle-btn {
  color: #2e7d32;
}

.memory-cheque-btn.toggle-btn.disabled {
  color: #8b8b8b;
  opacity: 0.7;
}

.memory-cheque-btn.delete-btn {
  color: #a94442;
}

.memory-cheque-btn.delete-btn:hover {
  color: #843534;
  border-color: #a94442;
}

.memory-cheque-status {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 8px; /* ç¼©å° */
  border-radius: 3px;
  font-size: 10px; /* ç¼©å° */
  font-weight: 600;
  font-family: "Courier New", monospace;
  letter-spacing: 0.4px;
}

.memory-cheque-status.enabled {
  background: rgba(46, 125, 50, 0.12);
  color: #2e7d32;
  border: 1px solid rgba(46, 125, 50, 0.3);
}

.memory-cheque-status.disabled {
  background: rgba(139, 90, 43, 0.08);
  color: #8b8b8b;
  border: 1px solid rgba(139, 90, 43, 0.2);
}

.memory-cheque-status-dot {
  width: 5px; /* ç¼©å° */
  height: 5px;
  border-radius: 50%;
  background: currentColor;
}

.memory-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 30px;
  color: #999;
}

.memory-loading::after {
  content: "";
  width: 20px;
  height: 20px;
  border: 2.5px solid #f3f3f3;
  border-top: 2.5px solid #8b4513;
  border-radius: 50%;
  animation: memorySpinner 0.8s linear infinite;
}

@keyframes memorySpinner {
  to {
    transform: rotate(360deg);
  }
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
  .memory-modal-content {
    max-width: 95%;
    flex-direction: column;
  }

  .memory-modal-content::before {
    display: none; /* ç§»åŠ¨ç«¯éšè—å·¦é¡µ */
  }

  .memory-modal-content::after {
    display: none; /* ç§»åŠ¨ç«¯éšè—è£…è®¢çº¿ */
  }

  .memory-right-page {
    width: 100%;
    margin-left: 0;
  }

  .memory-cheque-actions {
    flex-direction: column;
  }

  .memory-cheque-btn {
    width: 100%;
  }
}

/* Peeping Feature Styles (iOS 16 / Game UI) */
.peeping-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100dvh;
  max-height: 100vh;
  z-index: 10000;
  display: flex;
  justify-content: center;
  align-items: center;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.3s ease;
}

.peeping-modal.active {
  opacity: 1;
  pointer-events: auto;
}

.peeping-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.3);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Peeping Modal - Corkboard / Journal Theme */
.peeping-container {
  position: relative;
  width: 90%;
  max-width: 450px;
  height: 80dvh;
  max-height: 700px;
  min-height: 0;
  /* Soft Corkboard Texture */
  background-color: #f7f1e3;
  background-image: radial-gradient(#dccbb5 1px, transparent 1px),
    linear-gradient(to right, rgba(0, 0, 0, 0.02) 1px, transparent 1px);
  background-size: 20px 20px, 100% 100%;

  border-radius: 12px;
  /* Wood Frame Effect */
  border: 8px solid #deb887;
  box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3), inset 0 0 20px rgba(0, 0, 0, 0.1);

  display: flex;
  flex-direction: column;
  overflow: hidden;
  transform: scale(0.95);
  transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.peeping-modal.active .peeping-container {
  transform: scale(1) rotate(-1deg); /* Slight tilt for realism */
}

.peeping-header {
  padding: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-bottom: 2px dashed rgba(0, 0, 0, 0.1);
}

/* Header as Tape Label */
.peeping-title {
  font-size: 20px;
  font-weight: 800;
  color: #444;
  background: rgba(255, 255, 255, 0.9);
  padding: 8px 24px;
  transform: rotate(-2deg);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  border-radius: 2px;
}

.peeping-close-btn {
  background: #ff6b6b;
  width: 32px;
  height: 32px;
  color: white;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  border: 2px solid white;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  cursor: pointer;
  transition: transform 0.2s;
}
.peeping-close-btn:hover {
  transform: scale(1.1) rotate(90deg);
}

.peeping-content-area {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 20px;
  position: relative;
  /* Hide scrollbar but allow scroll */
  scrollbar-width: none;
  min-height: 0; /* å…³é”®ï¼šå¼ºåˆ¶è®© flex å­é¡¹å¯ä»¥ç¼©å°ï¼Œä»è€Œè§¦å‘ overflow */
  -webkit-overflow-scrolling: touch; /* ç¡®ä¿ iOS æ»‘åŠ¨æµç•… */
  will-change: scroll-position;
}
.peeping-content-area::-webkit-scrollbar {
  display: none;
}

/* Intro State */
.peeping-intro {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 30px;
  text-align: center;
}

.peeping-intro-icon {
  font-size: 64px;
  color: #4ecdc4;
  margin-bottom: 20px;
  background: white;
  width: 100px;
  height: 100px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  box-shadow: 0 8px 20px rgba(78, 205, 196, 0.3);
}

.peeping-intro h2 {
  font-size: 24px;
  margin-bottom: 10px;
  color: #333;
  font-weight: 800;
}

.peeping-intro p {
  font-size: 15px;
  line-height: 1.6;
  color: #666;
  margin-bottom: 30px;
  padding: 0 20px;
}

.peeping-action-btn {
  background: #4ecdc4; /* Teal */
  color: white;
  border: 3px solid white;
  padding: 12px 30px;
  border-radius: 12px;
  font-size: 18px;
  font-weight: 800;
  cursor: pointer;
  box-shadow: 0 5px 0 #2a9d8f, 0 8px 10px rgba(0, 0, 0, 0.2);
  transition: transform 0.1s;
  display: flex;
  align-items: center;
  gap: 10px;
  text-shadow: 1px 1px 0 rgba(0, 0, 0, 0.1);
}

.peeping-action-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 7px 0 #2a9d8f, 0 10px 15px rgba(0, 0, 0, 0.2);
}

.peeping-action-btn:active {
  transform: translateY(5px);
  box-shadow: 0 0 0 #2a9d8f, 0 0 0 rgba(0, 0, 0, 0);
}

/* Loader */
.btn-loader {
  width: 18px;
  height: 18px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: white;
  animation: spin 1s linear infinite;
  display: none;
}

.peeping-action-btn.loading .btn-text {
  display: none;
}

.peeping-action-btn.loading .btn-loader {
  display: block;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

/* Timeline Cards */
/* Timeline Cards - Sticky Note Board Style */
.peeping-timeline {
  display: flex;
  flex-direction: column;
  gap: 30px; /* Increased gap for visual breathing connection */
  padding: 20px 10px;
  /* User request: "ä¾¿ç­¾çš„æ„Ÿè§‰" */
  font-family: "Microsoft YaHei", sans-serif;
}

.peeping-card {
  background: #fdf5c9; /* Warm yellow sticky note */
  border-radius: 2px; /* Sharp corners like paper block */
  padding: 15px;
  box-shadow: 2px 4px 8px rgba(0, 0, 0, 0.15); /* Lifted shadow */
  animation: slideUp 0.4s ease forwards;
  transform: translateY(20px);
  border: none;
  width: 65%; /* Narrower cards */
  position: relative;
  color: #333;
  transition: transform 0.2s;
}

.peeping-card:hover {
  transform: scale(1.02) rotate(var(--rot)) !important;
  z-index: 10;
}

/* Tape Effect */
.peeping-card::before {
  content: "";
  position: absolute;
  top: -10px;
  left: 50%;
  transform: translateX(-50%) rotate(-1deg);
  width: 35px;
  height: 12px;
  background: rgba(255, 255, 255, 0.4);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);
  backdrop-filter: blur(1px);
}

/* Staggered Layout logic using Flex alignment */

/* Odd items: Left aligned */
.peeping-card:nth-child(odd) {
  align-self: flex-start;
  margin-left: 10px;
  --rot: -2deg;
  background: #fdf5c9; /* Yellow */
}

/* Even items: Right aligned */
.peeping-card:nth-child(even) {
  align-self: flex-end;
  margin-right: 10px;
  --rot: 2deg;
  background: #e3f2fd; /* Light Blue */
}

.peeping-card:nth-child(3n) {
  background: #fce4ec; /* Light Pink */
}

/* Apply rotation */
.peeping-card {
  transform: translateY(20px) rotate(var(--rot));
}

@keyframes slideUp {
  to {
    opacity: 1;
    transform: translateY(0) rotate(var(--rot));
  }
}

.peeping-card-header {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  align-items: center;
  border-bottom: 1px dashed rgba(0, 0, 0, 0.1);
  padding-bottom: 5px;
}

.peeping-time {
  font-size: 14px;
  font-weight: 700;
  color: #555;
  background: transparent;
  padding: 0;
}

.peeping-location {
  font-size: 14px;
  font-weight: 700;
  color: #333;
  display: flex;
  align-items: center;
  gap: 4px;
}

.peeping-card-body {
  font-size: 15px;
  color: #222;
  line-height: 1.4;
  margin-bottom: 10px;
}

.peeping-spending {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  font-size: 12px;
  color: #d32f2f;
  border: 1px solid #d32f2f;
  padding: 2px 6px;
  border-radius: 4px;
  transform: rotate(-3deg);
  margin-bottom: 8px;
  font-weight: 700;
  background: rgba(255, 255, 255, 0.5);
}

/* Inner Thought: SVG Icon */
.peeping-inner-thought {
  font-size: 13px;
  color: #555;
  background: rgba(0, 0, 0, 0.05);
  padding: 8px;
  border-radius: 4px;
  margin-top: 5px;
  border: none;
  font-style: normal;
  display: flex;
  gap: 8px;
  align-items: flex-start;
}

.peeping-thought-icon {
  flex-shrink: 0;
  color: #888;
  display: flex;
  align-items: center;
}

.peeping-thought-text {
  flex: 1;
  line-height: 1.4;
}

.feature-name {
  font-size: 10px;
  font-weight: 500;
  color: #444;
}

/* --- Meetu Feature CSS --- */

/* Screen Background */
#meetu-screen {
  background-color: #fcfbf7;
  background-image: linear-gradient(
      rgba(255, 255, 255, 0.5) 1px,
      transparent 1px
    ),
    linear-gradient(90deg, rgba(255, 255, 255, 0.5) 1px, transparent 1px);
  background-size: 20px 20px;
  display: flex;
  flex-direction: column;
  height: 100%;
  width: 100%;
  position: fixed; /* Fixed to viewport */
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 99999; /* Very high z-index */
  overflow: hidden;
  font-family: "PingFang SC", "Songti SC", "SimSun", serif;
  color: #2c1e14;
  /* CRITICAL: Block click-through */
  pointer-events: auto;
  touch-action: auto;
}

#meetu-screen::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  background-image: url("data:image/svg+xml,%3Csvg width='200' height='200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.05'/%3E%3C/svg%3E");
  opacity: 0.8;
}

/* Header */
.meetu-header {
  background: transparent !important;
  background: transparent; /* Or semi-transparent */
  /* Enhance visibility against text */
  background: linear-gradient(to bottom, #fcfbf7 80%, rgba(252, 251, 247, 0));
  padding-top: env(safe-area-inset-top); /* Adapt to notch */
  height: auto;
  min-height: 60px;
  z-index: 2002; /* Above content */
  position: relative;
  display: flex;
  align-items: center;
  padding-left: 15px;
  padding-right: 15px;
}

.meetu-header .header-icon-button {
  color: #5d4037;
  background: rgba(255, 255, 255, 0.6);
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
}

/* Content Area - Card Style */
.meetu-content {
  flex: 1;
  overflow-y: auto;
  min-height: 0;
  margin: 90px 16px 10px 16px; /* Top margin increased */
  padding: 24px;
  background: rgba(255, 255, 255, 0.85);
  border-radius: 16px;
  box-shadow: 0 2px 10px rgba(139, 69, 19, 0.05),
    inset 0 0 20px rgba(139, 69, 19, 0.02);

  line-height: 1.8;
  color: #4a3c31;
  font-family: "Songti SC", "SimSun", serif;
  position: relative;
  z-index: 2001;
  -webkit-overflow-scrolling: touch;

  box-sizing: border-box;
  border: 1px solid rgba(139, 69, 19, 0.08);
}

/* Page Style */
.meetu-text-page {
  font-size: 17px;
  text-align: justify;
  white-space: pre-wrap;
  opacity: 1;
  transition: opacity 0.3s ease;
  /* Removed padding-bottom as the container is now a card */
  min-height: 100%; /* Fill card */
}

.meetu-text-page.active {
  opacity: 1;
  pointer-events: auto;
}

/* Page Indicator */
.meetu-page-controls {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px 20px;
  gap: 24px;
  color: #a08b78;
  font-size: 13px;
  font-weight: 500;
  z-index: 2002;
  background: transparent;
}

.page-nav-btn {
  background: rgba(255, 255, 255, 0.6);
  border: 1px solid rgba(139, 69, 19, 0.1);
  border-radius: 50%;
  width: 32px;
  height: 32px;
  font-size: 14px;
  color: #5d4037;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s;
}
.page-nav-btn:hover {
  background: rgba(139, 69, 19, 0.08);
}
.page-nav-btn:disabled {
  opacity: 0.3;
  cursor: not-allowed;
}

/* Action Buttons */
.meetu-actions {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 24px;
  padding: 16px 20px;
  padding-bottom: max(20px, env(safe-area-inset-bottom));
  background: linear-gradient(to top, #fcfbf7 60%, rgba(252, 251, 247, 0));
  z-index: 2003;
}

.meetu-action-btn.icon-btn {
  width: 52px;
  height: 52px;
  border-radius: 50%;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  border: none;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
  background: rgba(255, 255, 255, 0.8);
  box-shadow: 0 2px 8px rgba(139, 69, 19, 0.08);
  color: #5d4037;
}

.meetu-action-btn.icon-btn:hover {
  transform: scale(1.08);
  box-shadow: 0 4px 12px rgba(139, 69, 19, 0.12);
}

.meetu-action-btn.icon-btn:active {
  transform: scale(0.95);
}

.meetu-action-btn.icon-btn.primary {
  background: linear-gradient(135deg, #5d4037, #795548);
  color: #fff;
  box-shadow: 0 4px 12px rgba(93, 64, 55, 0.25);
}

.meetu-action-btn.icon-btn.primary:hover {
  box-shadow: 0 6px 16px rgba(93, 64, 55, 0.35);
}

.meetu-action-btn:active {
  transform: scale(0.95);
}

.meetu-action-btn.secondary {
  background: #efebe9;
  color: #5d4037;
  box-shadow: 0 2px 8px rgba(93, 64, 55, 0.1);
}

.meetu-action-btn.primary {
  background: #5d4037;
  color: #fff; /* text-white */
  box-shadow: 0 4px 12px rgba(93, 64, 55, 0.3);
}

/* --- Book Flip Animation --- */
#meetu-book-animation {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 100;
  perspective: 1500px;
  pointer-events: none;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.1); /* dim background */
}

/* This is a simple animation placeholder. 
   A full 3D book flip requires complex DOM.
   Here we simulate a single page flip revealing the content */

.book-page {
  width: 90%;
  height: 90%;
  background: #fff;
  position: absolute;
  top: 5%;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
  border-radius: 5px 15px 15px 5px;
}

.book-page.left-page {
  left: 5%;
  transform-origin: right center;
  animation: flipOpen 1.2s cubic-bezier(0.645, 0.045, 0.355, 1) forwards;
  background: #fdfbf7;
  z-index: 2;
}

.book-page.right-page {
  right: 5%;
  z-index: 1;
  background: #fcfbf7;
}

@keyframes flipOpen {
  0% {
    transform: rotateY(0deg);
  }
  100% {
    transform: rotateY(-180deg);
    opacity: 0;
  }
}

/* --- Style Modal Styles --- */
/* Reuse existing styles but tweak for Meetu */
#meetu-style-list .playlist-item {
  background: #fff;
  border: 1px solid #efebe9;
  margin-bottom: 10px;
  padding: 15px;
  border-radius: 12px;
}

#meetu-style-list .playlist-item.active {
  border-color: #5d4037;
  background: #efebe9;
}

.style-card-title {
  font-weight: bold;
  color: #3e2723;
  margin-bottom: 4px;
}
.style-card-desc {
  font-size: 12px;
  color: #795548;
  line-height: 1.4;
}
.active-badge {
  position: absolute;
  right: 15px;
  top: 15px;
  font-size: 10px;
  color: #fff;
  background: #5d4037;
  padding: 2px 6px;
  border-radius: 4px;
  display: none;
}
#meetu-style-list .playlist-item.active .active-badge {
  display: block;
}

/* === æ¶ˆæ¯åˆ—è¡¨æ ·å¼ä¿®æ­£ (æ”¯æŒ Action Sheet) === */
.contact-item {
  position: relative;
  padding: 10px 14px !important; /* æ¢å¤ padding */
  border: none;
  display: flex; /* æ¢å¤ flex å¸ƒå±€ */
  align-items: center;
  background-color: #fff;
  transition: background-color 0.2s;
  user-select: none; /* é˜²æ­¢é•¿æŒ‰é€‰ä¸­æ–‡æœ¬ */
  cursor: pointer;
}

/* é•¿æŒ‰æ—¶çš„è§†è§‰åé¦ˆ */
.contact-item.pressing {
  background-color: #e5e5ea;
  transform: scale(0.98);
}
.contact-item.pinned {
  background-color: #f3f3f6; /* ç½®é¡¶èƒŒæ™¯è‰² */
}
.contact-item.pinned.pressing {
  background-color: #e5e5ea; /* é•¿æŒ‰æ—¶ç»Ÿä¸€åé¦ˆ */
}
/* ç½®é¡¶æ ‡è®° (å³ä¸Šè§’å°ä¸‰è§’) */
.contact-item.pinned::after {
  content: "";
  position: absolute;
  top: 0;
  right: 0;
  width: 0;
  height: 0;
  border-style: solid;
  border-width: 0 10px 10px 0;
  border-color: transparent #007aff transparent transparent;
  opacity: 0.6;
}

/* === Action Sheet (iOS é£æ ¼åº•éƒ¨èœå•) === */
.action-sheet-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.4);
  z-index: 9999;
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: center;
  opacity: 0;
  transition: opacity 0.3s ease;
  padding-bottom: env(safe-area-inset-bottom, 20px);
}

.action-sheet-overlay.active {
  opacity: 1;
}

.action-sheet-content {
  width: 95%;
  max-width: 360px;
  margin-bottom: 10px;
  transform: translateY(100%);
  transition: transform 0.3s cubic-bezier(0.32, 0.72, 0, 1);
}

.action-sheet-overlay.active .action-sheet-content {
  transform: translateY(0);
}

.action-sheet-group {
  background-color: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-radius: 14px;
  margin-bottom: 8px;
  overflow: hidden;
}

.action-sheet-btn {
  width: 100%;
  padding: 16px;
  background: transparent;
  border: none;
  border-bottom: 0.5px solid rgba(0, 0, 0, 0.1);
  font-size: 17px;
  color: #007aff;
  cursor: pointer;
  font-weight: 400;
}

.action-sheet-btn:last-child {
  border-bottom: none;
}

.action-sheet-btn:active {
  background-color: rgba(0, 0, 0, 0.1);
}

.action-sheet-btn.danger-text {
  color: #ff3b30;
}

.action-sheet-group.cancel-group {
  margin-bottom: 0;
}
.action-sheet-group.cancel-group .action-sheet-btn {
  font-weight: 600; /* å–æ¶ˆæŒ‰é’®é€šå¸¸åŠ ç²— */
}

/* ==========================================================
   åŒè¯­æŠ˜å æ°”æ³¡æ ·å¼ (Bilingual Collapsible Bubble)
   ç”¨æˆ·å¯åœ¨è‡ªå®šä¹‰æ°”æ³¡CSSä¸­è¦†ç›–è¿™äº›æ ·å¼
   ========================================================== */

/* å¤–å±‚å®¹å™¨ï¼šæ¨ªå‘æ’åˆ—æ°”æ³¡å’ŒæŒ‰é’® */
.bilingual-wrapper {
  display: flex;
  align-items: flex-start;
  gap: 6px;
}

/* åŒè¯­æ°”æ³¡æœ¬ä½“ */
.bilingual-wrapper .bilingual-bubble {
  /* ç»§æ‰¿æ™®é€šæ°”æ³¡æ ·å¼ï¼Œè¦†ç›–éƒ¨åˆ† */
  padding: 0 !important;
  overflow: hidden;
  max-width: none !important;
  min-width: auto !important;
  width: fit-content !important;
  white-space: normal !important;
}

/* åŸæ–‡åŒºåŸŸ */
.bilingual-wrapper .bilingual-original {
  padding: 8px 12px;
}

/* è™šçº¿åˆ†éš”åŒºåŸŸ - é»˜è®¤æ˜¾ç¤º */
.bilingual-wrapper .bilingual-divider {
  display: flex;
  align-items: center;
  padding: 0 10px;
  height: 0px;
  transition: height 0.25s ease, opacity 0.2s ease;
}

/* è™šçº¿ */
.bilingual-wrapper .bilingual-divider-line {
  flex: 1;
  border-top: 1px dashed rgba(0, 0, 0, 0.15);
}

/* ç¿»è¯‘åŒºåŸŸ - é»˜è®¤æ˜¾ç¤º */
.bilingual-wrapper .bilingual-translation {
  padding: 8px 14px 10px;
  color: rgba(69, 90, 100, 0.75);
  font-size: 0.92em;
  line-height: 1.5;
  /* background: rgba(0, 0, 0, 0.02); */
  max-height: 500px;
  overflow: hidden;
  transition: max-height 0.3s ease, padding 0.3s ease, opacity 0.25s ease;
}

/* æŠ˜å æŒ‰é’® - åœ¨æ°”æ³¡å¤–éƒ¨ */
.bilingual-wrapper .bilingual-toggle-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  margin-top: 8px;
  padding: 0;
  border: none;
  border-radius: 50%;
  background: rgba(0, 0, 0, 0.06);
  color: rgba(0, 0, 0, 0.4);
  cursor: pointer;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.bilingual-wrapper .bilingual-toggle-btn:hover {
  background: rgba(0, 0, 0, 0.1);
  color: rgba(0, 0, 0, 0.6);
}

.bilingual-wrapper .bilingual-toggle-btn:active {
  transform: scale(0.9);
}

.bilingual-wrapper .bilingual-toggle-btn svg {
  transition: transform 0.25s ease;
}

/* ===== æŠ˜å çŠ¶æ€ï¼šéšè—ç¿»è¯‘å’Œåˆ†å‰²çº¿ ===== */
.bilingual-wrapper.collapsed .bilingual-divider {
  height: 0;
  opacity: 0;
  padding: 0;
  overflow: hidden;
}

.bilingual-wrapper.collapsed .bilingual-translation {
  max-height: 0;
  padding-top: 0;
  padding-bottom: 0;
  opacity: 0;
}

.bilingual-wrapper.collapsed .bilingual-toggle-btn svg {
  transform: rotate(180deg);
}

/* === Feature: WorldBook Nested Selection Styling (Appended) === */

/* Row container for each book */
.multiselect-item-row {
  border-radius: 12px;
  background-color: rgba(255, 255, 255, 0.5); /* Slight glass background */
  margin-bottom: 6px;
  transition: all 0.2s cubic-bezier(0.25, 0.8, 0.25, 1);
  border: 1px solid transparent; /* Prepare for border transition */
}

/* Hover Effect */
.multiselect-item-row:hover {
  background-color: rgba(255, 255, 255, 0.9);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05); /* Soft shadow */
  transform: translateY(-1px);
}

/* Active/Selected Effect */
.multiselect-item-row:active {
  transform: scale(0.98);
}

/* Custom Checkbox Styling (iOS Style) */
.multiselect-item-row input[type="checkbox"] {
  appearance: none;
  -webkit-appearance: none;
  width: 22px;
  height: 22px;
  border: 1.5px solid #c7c7cc;
  border-radius: 50%; /* Circular for modern feel, or 6px for square */
  margin-right: 12px !important;
  position: relative;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1); /* Spring transition */
  background-color: white;
  flex-shrink: 0;
}

/* Checked State */
.multiselect-item-row input[type="checkbox"]:checked {
  background-color: #3a3a3c;
  border-color: #3a3a3c;
  transform: scale(1.05);
}

/* Checkmark Icon */
.multiselect-item-row input[type="checkbox"]:checked::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 5px;
  height: 9px;
  border: solid white;
  border-width: 0 2px 2px 0;
  transform: translate(-50%, -60%) rotate(45deg);
  opacity: 1;
}

/* Unchecked Hover State */
.multiselect-item-row input[type="checkbox"]:hover {
  border-color: #007aff;
}

/* Text Styling */
.multiselect-item-row span {
  font-size: 15px;
  font-weight: 500;
  color: #333;
  user-select: none;
}


/* ============================================================ */
/* ============================================================ */
/* === ğŸ“± iOS æ ¸å¿ƒæ€§èƒ½æ•‘æ€¥è¡¥ä¸ (Fatal Crash Fix) - å·²æš‚æ—¶ç¦ç”¨ === */
/* ============================================================ */
/* 
body.ios-optimize-mode * { backdrop-filter: none !important; -webkit-backdrop-filter: none !important; }
body.ios-optimize-mode .glass, body.ios-optimize-mode .modal-content, body.ios-optimize-mode .system-loader-card, body.ios-optimize-mode .nav-bar, body.ios-optimize-mode .tab-bar, body.ios-optimize-mode [class*='overlay'], body.ios-optimize-mode [class*='blur'] { background-color: rgba(255, 255, 255, 0.98) !important; box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important; }
@media (prefers-color-scheme: dark) { body.ios-optimize-mode .glass, body.ios-optimize-mode .modal-content, body.ios-optimize-mode .system-loader-card, body.ios-optimize-mode .nav-bar, body.ios-optimize-mode .tab-bar, body.ios-optimize-mode [class*='overlay'], body.ios-optimize-mode [class*='blur'] { background-color: rgba(30, 30, 30, 0.98) !important; box-shadow: 0 4px 12px rgba(0,0,0,0.3) !important; } }
body.ios-optimize-mode img { box-shadow: none !important; filter: none !important; }
body.ios-optimize-mode .scroll-container { -webkit-overflow-scrolling: touch; transform: translateZ(0); }
*/


/* === ğŸš¨ iOS ç»ˆæé˜²å´©è¡¥ä¸ (SAFE GUARD) - å·²æš‚æ—¶ç¦ç”¨ === */
/*
.ios-optimize-mode * { 
    will-change: auto !important; 
    transform: none !important; 
    animation: none !important; 
    transition: none !important;
    background-attachment: scroll !important;
}
.ios-optimize-mode .phone-frame {
    transform: none !important;
    width: 100vw !important;
}
*/


/* ================= BEAUTIFY SCREENS (Ceramic Swiss) ================= */

/* Beautify Header (Sticky/Fixed) */
#beautify-screen .settings-header {
    height: 64px;
    padding: 0 24px;
    display: flex;
    align-items: center;
    position: sticky; 
    top: 0;
    z-index: 50;
    background: #f2f2f6;
  
    flex-shrink: 0; 
}

#beautify-screen .header-icon-button {
    width: 40px; height: 40px;
    border-radius: 14px;
    border: 1px solid rgba(0,0,0,0.03);
    background: rgba(255,255,255,0.8);
    backdrop-filter: blur(10px);
    display: flex; align-items: center; justify-content: center;
    color: var(--text-primary);
    cursor: pointer;
    transition: transform 0.2s;
    outline: none; padding: 0;
    position: absolute; left: 24px;
}
#beautify-screen .header-icon-button:active { transform: scale(0.92); background: #fff; }
#beautify-screen .header-icon-button svg { width: 20px; height: 20px; stroke-width: 2.5px; }

#beautify-screen h1 {
    font-size: 17px; font-weight: 700; color: var(--text-primary);
    margin: 0 auto; letter-spacing: -0.01em;
}

/* Beautify Content (Scrollable) */
#beautify-screen .settings-content {
    flex: 1;
    overflow-y: auto; 
    -webkit-overflow-scrolling: touch; 
    padding: 16px 24px 120px; 
    scrollbar-width: none;
    height: auto; 
}
#beautify-screen .settings-content::-webkit-scrollbar { display: none; }

.beautify-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    padding-bottom: 40px;
}

/* Card System */
.beautify-card {
    background: var(--bg-card);
    border-radius: 24px;
    padding: 20px;
    display: flex; flex-direction: column; 
    align-items: flex-start;
    justify-content: space-between;
    gap: 12px;
    box-shadow: 0 2px 12px rgba(0,0,0,0.02), 0 0 0 1px rgba(0,0,0,0.02);
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.19, 1, 0.22, 1);
    position: relative;
    overflow: hidden;
    min-height: 140px;
}

.beautify-card:active { transform: scale(0.97); }
.beautify-card:hover { 
    box-shadow: 0 8px 24px rgba(0,0,0,0.04), 0 0 0 1px rgba(0,0,0,0.02);
    transform: translateY(-2px); 
}

/* Icon Container */
.beautify-card .card-icon-bg {
    width: 48px; height: 48px;
    border-radius: 16px;
    display: flex; align-items: center; justify-content: center;
    background: #F9F9F9;
    color: var(--text-primary);
    transition: transform 0.3s cubic-bezier(0.19, 1, 0.22, 1);
}
.beautify-card:hover .card-icon-bg { transform: scale(1.05); }
.beautify-card .card-icon-bg svg { width: 24px; height: 24px; stroke-width: 2px; }

/* Text Info */
.beautify-card .card-info { display: flex; flex-direction: column; gap: 2px; }
.beautify-card .card-label { font-size: 15px; font-weight: 600; color: var(--text-primary); letter-spacing: -0.01em; }
.beautify-card .card-sub { font-size: 11px; color: var(--text-secondary); font-weight: 500; }

/* Special Cards */
#global-beautify-btn.beautify-card {
    grid-column: span 2;
    flex-direction: row;
    align-items: center;
    padding: 24px;
    min-height: 100px;
    background: linear-gradient(120deg, #FFFFFF 0%, #F5F7FA 100%);
    box-shadow: 0 8px 32px -8px rgba(0, 122, 255, 0.15), 0 0 0 1px rgba(255,255,255,0.8) inset;
    border: 1px solid rgba(0, 122, 255, 0.05);
}

#global-beautify-btn .card-icon-bg {
    width: 56px; height: 56px;
    background: linear-gradient(135deg, #E0F7FA 0%, #E3F2FD 100%);
    color: #007AFF;
    margin-right: 16px;
}
#global-beautify-btn .card-info { flex: 1; }
#global-beautify-btn .card-label { font-size: 17px; }
#global-beautify-btn .card-sub { font-size: 13px; color: #007AFF; opacity: 0.8; }
#global-beautify-btn::after {
    content: 'â†’'; font-size: 20px; color: #D1D1D6; font-weight: 300; margin-left: 8px;
}

#manage-font-urls-btn .card-icon-bg {
    background: #F2F2F7;
    color: #8A8A8E;
}

/* Colors */
#change-icon-button .card-icon-bg { background: #F0F4F8; color: #546E7A; }
#manage-presets-button .card-icon-bg { background: #F3E5F5; color: #8E24AA; }
#theme-presets-btn .card-icon-bg { background: #E0F2F1; color: #00897B; }
#bubble-presets-btn .card-icon-bg { background: #E8F5E9; color: #43A047; }
#change-clock-button .card-icon-bg { background: #FFF3E0; color: #FB8C00; }
#motto-settings-btn .card-icon-bg { background: #FCE4EC; color: #D81B60; }
#app-name-settings-btn .card-icon-bg { background: #E8EAF6; color: #3949AB; }

/* === Universal Scrolling Container === */
.scrollable-list-container {
    overflow-y: auto;
    -webkit-overflow-scrolling: touch;
    overscroll-behavior-y: auto;
    flex: 1; /* In case it's in a flex container */
    min-height: 0;
}
.chat-messages.bubble-b-mode .message-row.group-start .chat-avatar,
.chat-messages.bubble-b-mode .message-row.group-middle .chat-avatar {
    visibility: hidden; /* Use visibility to keep layout spacing/alignment */
}

/* B Mode: Vertical Spacing (Tighter between grouped messages) */
.chat-messages.bubble-b-mode .message-row.group-middle,
.chat-messages.bubble-b-mode .message-row.group-end {
    margin-top: 1px !important; /* Changed from 2px */
}
.chat-messages.bubble-b-mode .message-row.group-start {
    margin-bottom: 1px !important; /* Changed from 2px */
}

/* B Mode: Border Radius Logic (AI - Left Side) */
/* Top: Big Top, Small Bottom-Left */
.chat-messages.bubble-b-mode .message-row.ai.group-start .chat-bubble {
    border-bottom-left-radius: 4px !important;
}
/* Middle: Small Left */
.chat-messages.bubble-b-mode .message-row.ai.group-middle .chat-bubble {
    border-top-left-radius: 4px !important;
    border-bottom-left-radius: 4px !important;
     max-width: 85%;
}
/* Bottom: Small Top-Left, Big Bottom */
.chat-messages.bubble-b-mode .message-row.ai.group-end .chat-bubble {
    border-top-left-radius: 4px !important;
}

/* B Mode: Border Radius Logic (User - Right Side) */
/* Top: Big Top, Small Bottom-Right */
.chat-messages.bubble-b-mode .message-row.user.group-start .chat-bubble {
    border-bottom-right-radius: 4px !important;
}
/* Middle: Small Right */
.chat-messages.bubble-b-mode .message-row.user.group-middle .chat-bubble {
    border-top-right-radius: 4px !important;
    border-bottom-right-radius: 4px !important;
}
/* Bottom: Small Top-Right, Big Bottom */
.chat-messages.bubble-b-mode .message-row.user.group-end .chat-bubble {
    border-top-right-radius: 4px !important;
}

/* ============================================================ */
/* === ANTI-GRAVITY FINAL FIXES (V5): The Wrapper Killer ===     */
/* ============================================================ */

/* æ ¸å¿ƒç­–ç•¥ï¼š
   1. IDé€‰æ‹©å™¨ #chat-messages-container æå‡æƒé‡ã€‚
   2. è¦†ç›– .message-row çš„é—´è·ã€‚
   3. ã€å…³é”®æ–°å¢ã€‘è¦†ç›– .message-content-wrapper çš„ margin-bottom: 10px !important */

/* 1. å½»åº•é‡Šæ”¾æ°”æ³¡å®½åº¦é™åˆ¶ */
#chat-messages-container.hide-avatars .msg-column,
#chat-messages-container.hide-user-avatar .message-row.user .msg-column,
#chat-messages-container.hide-char-avatar .message-row.ai .msg-column {
    max-width: 90% !important; 
    width: fit-content !important;
}

/* 2. å½»åº•éšè—å¤´åƒå®¹å™¨åŠæŒ‚ä»¶ */
#chat-messages-container.hide-avatars .avatar-anchor,
#chat-messages-container.hide-user-avatar .message-row.user .avatar-anchor,
#chat-messages-container.hide-char-avatar .message-row.ai .avatar-anchor {
    display: none !important;
}

/* 3. è¡¥åˆ€ï¼šå¼ºåˆ¶éšè—æŒ‚ä»¶ */
#chat-messages-container.hide-avatars .avatar-pendant,
#chat-messages-container.hide-user-avatar .message-row.user .avatar-pendant,
#chat-messages-container.hide-char-avatar .message-row.ai .avatar-pendant,
#chat-messages-container.hide-avatars .message-row .avatar-pendant {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    width: 0 !important;
    height: 0 !important;
}

/* 4. æ”¾å®½æ°”æ³¡å¤–å£³å®½åº¦ */
#chat-messages-container.hide-avatars .message-content-wrapper,
#chat-messages-container.hide-user-avatar .message-row.user .message-content-wrapper,
#chat-messages-container.hide-char-avatar .message-row.ai .message-content-wrapper {
    max-width: 100% !important; 
}

/* 5. .message-row é—´è·ä¿®å¤ */
#chat-messages-container.bubble-b-mode .message-row {
    margin-top: 0 !important;
    margin-bottom: 4px !important; /* è¡Œå¤–éƒ¨é—´è·ï¼š2px */
    padding-top: 0 !important;
    padding-bottom: 0 !important;
}

#chat-messages-container.bubble-b-mode .message-row.group-end {
    margin-bottom: 12px !important; 
}

#chat-messages-container.bubble-b-mode .message-row.group-middle,
#chat-messages-container.bubble-b-mode .message-row.group-start {
    margin-top: 0 !important;
    margin-bottom: 4px !important;
}

/* 6. ã€ç»ˆæä¿®å¤ã€‘æ¶ˆç­ .message-content-wrapper çš„å†…éƒ¨é—´è· */
/* é’ˆå¯¹ç”¨æˆ·æŒ‡å‡ºçš„ L12497 å¤„çš„ margin-bottom: 10px !important */
#chat-messages-container.bubble-b-mode .message-content-wrapper,
#chat-messages-container.bubble-b-mode .message-row .message-content-wrapper {
    margin-bottom: 0 !important; /* å¼ºåˆ¶å½’é›¶ï¼Œé˜²æ­¢æ’‘å¤§çˆ¶å®¹å™¨ */
    gap: 0 !important; /* æ¶ˆé™¤å†…éƒ¨å…ƒç´ é—´è·å¹²æ‰° */
}

/* ============================================================ */
/* === Chat Time Separator (Capsule Style) === */
/* ============================================================ */
.chat-time-separator {
    text-align: center;
    font-size: 11px;
    color: rgba(255, 255, 255, 0.9); /* æ˜äº®çš„æ–‡å­— */
    margin: 16px auto; /* ä¸Šä¸‹16pxï¼Œå·¦å³è‡ªåŠ¨å±…ä¸­ */
    width: fit-content; /* å®½åº¦é€‚åº”å†…å®¹ */
    max-width: 80%;
    clear: both;
    font-weight: 500;
    
    /* åœ†è§’çŸ©å½¢èƒŒæ™¯ + é«˜æ–¯æ¨¡ç³Š + é˜´å½± */
    background-color: rgba(0, 0, 0, 0.2); 
    padding: 2px 8px; /* ç¨å¾®ç´§å‡‘ä¸€ç‚¹çš„å†…è¾¹è· */
    border-radius: 10px; /* èƒ¶å›Šåœ†è§’ */
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    box-shadow: 0 1px 2px rgba(0,0,0,0.1); /* è½»å¾®é˜´å½±æå‡å±‚æ¬¡æ„Ÿ */
    
    /* ç¡®ä¿ä¸è¢«é€‰ä¸­ */
    /* ç¡®ä¿ä¸è¢«é€‰ä¸­ */
    user-select: none;
    -webkit-user-select: none;
}
